if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.5",skin:null,skinDetect:function(c){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(c+"_skin_detect")]||null},readFromCss:function(m,l){var n=document.createElement("DIV");n.className=m;if(document.body.firstChild!=null){document.body.insertBefore(n,document.body.firstChild)}else{document.body.appendChild(n)}var h=n[l||"offsetWidth"];n.parentNode.removeChild(n);n=null;return h},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var a=this.first();for(var g in this.data){a=Math.max(a,this.data[g])}return a},reserve:function(c){this.data[c]=this.last()+this.step;return this.data[c]},clear:function(c){if(this.data[c]!=null){this.data[c]=null;delete this.data[c]}}},s2b:function(c){if(typeof(c)=="string"){c=c.toLowerCase()}return(c==true||c==1||c=="true"||c=="1"||c=="yes"||c=="y"||c=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(c){if(typeof(c)=="string"){c=document.getElementById(c)}return this.getOffset(c).left},absTop:function(c){if(typeof(c)=="string"){c=document.getElementById(c)}return this.getOffset(c).header},_aOfs:function(g){var h=0,l=0;while(g){h=h+parseInt(g.offsetTop);l=l+parseInt(g.offsetLeft);g=g.offsetParent}return{top:h,left:l}},_aOfsRect:function(A){var w=A.getBoundingClientRect();var v=document.body;var D=document.documentElement;var E=window.pageYOffset||D.scrollTop||v.scrollTop;var y=window.pageXOffset||D.scrollLeft||v.scrollLeft;var x=D.clientTop||v.clientTop||0;var u=D.clientLeft||v.clientLeft||0;var s=w.top+E-x;var C=w.left+y-u;return{top:Math.round(s),left:Math.round(C)}},getOffset:function(c){if(c.getBoundingClientRect){return this._aOfsRect(c)}else{return this._aOfs(c)}},_isObj:function(c){return(c!=null&&typeof(c)=="object"&&typeof(c.length)=="undefined")},_copyObj:function(a){if(this._isObj(a)){var h={};for(var l in a){if(typeof(a[l])=="object"&&a[l]!=null){h[l]=this._copyObj(a[l])}else{h[l]=a[l]}}}else{var h=[];for(var l=0; l<a.length; l++){if(typeof(a[l])=="object"&&a[l]!=null){h[l]=this._copyObj(a[l])}else{h[l]=a[l]}}}return h},screenDim:function(){var e=(navigator.userAgent.indexOf("MSIE")>=0);var g={};g.left=document.body.scrollLeft;g.right=g.left+(window.innerWidth||document.body.clientWidth);g.top=Math.max((e?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);g.bottom=g.header+(e?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return g},selectTextRange:function(r, e, u){r=(typeof(r)=="string"?document.getElementById(r):r);var o=r.value.length;e=Math.max(Math.min(e,o),0);u=Math.min(u,o);if(r.setSelectionRange){try{r.setSelectionRange(e,u)}catch(n){}}else{if(r.createTextRange){var s=r.createTextRange();s.moveStart("character",e);s.moveEnd("character",u-o);try{s.select()}catch(n){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var a={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var g in a){if(this.transData.transProp==false&&document.documentElement.style[g]!=null){this.transData.transProp=g;this.transData.transEv=a[g]}}a=null}return this.transData},_xmlNodeValue:function(g){var h="";for(var l=0;l<g.childNodes.length;l++){h+=(g.childNodes[l].nodeValue!=null?g.childNodes[l].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return h}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(c){return(window.dhx4.isIE10&&c.pointerType==c.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&c.pointerType=="mouse"||window.dhx4.isEdge&&c.pointerType=="mouse")},_touchOn:function(c){if(c==null){c=document.body}c.style.touchAction=c.style.msTouchAction="";c=null},_touchOff:function(c){if(c==null){c=document.body}c.style.touchAction=c.style.msTouchAction="none";c=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(c){return String(c).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(l,h,g){return l.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var a=arguments[1];var c=window.dhx4.trim(arguments[3]);var u=null;var e=[h[a]];if(c.length>0){c=c.split(":");var r=[];for(var s=0;s<c.length;s++){if(s>0&&r[r.length-1].match(/\\$/)!=null){r[r.length-1]=r[r.length-1].replace(/\\$/,"")+":"+c[s]}else{r.push(c[s])}}u=r[0];for(var s=1;s<r.length;s++){e.push(r[s])}}if(typeof(u)=="string"&&typeof(window.dhx4.template[u])=="function"){return window.dhx4.template[u].apply(window.dhx4.template,e)}if(a.length>0&&typeof(h[a])!="undefined"){if(g==true){return window.dhx4.trim(h[a])}return String(h[a])}return""})};window.dhx4.template.date=function(e,g){if(e!=null){if(e instanceof Date){return window.dhx4.date2str(e,g)}else{e=e.toString();if(e.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(e)),g)}return e}}return""};window.dhx4.template.maxlength=function(g,e){return String(g).substr(0,e)};window.dhx4.template.number_format=function(n,m,o,l){var r=window.dhx4.template._parseFmt(m,o,l);if(r==false){return n}return window.dhx4.template._getFmtValue(n,r)};window.dhx4.template.lowercase=function(c){if(typeof(c)=="undefined"||c==null){c=""}return String(c).toLowerCase()};window.dhx4.template.uppercase=function(c){if(typeof(c)=="undefined"||c==null){c=""}return String(c).toUpperCase()};window.dhx4.template._parseFmt=function(n,v,r){var u=n.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(u==null||u.length!=4){return false}var w={i_len:false,i_sep:(typeof(v)=="string"?v:","),d_len:false,d_sep:(typeof(r)=="string"?r:"."),s_bef:(typeof(u[1])=="string"?u[1]:""),s_aft:(typeof(u[3])=="string"?u[3]:"")};var o=u[2].split(".");if(o[1]!=null){w.d_len=o[1].length}var s=o[0].split(",");if(s.length>1){w.i_len=s[s.length-1].length}return w};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(n,r,m){if(r==null||typeof(r)=="undefnied"){r=window.dhx4.dateFormat[window.dhx4.dateLang]}if(m==null||typeof(m)=="undefnied"){m=window.dhx4.dateStrings[window.dhx4.dateLang]}if(n instanceof Date){var o=function(a){return(String(a).length==1?"0"+String(a):a)};var u=function(e){switch(e){case"%d":return o(n.getDate());case"%j":return n.getDate();case"%D":return m.dayShortName[n.getDay()];case"%l":return m.dayFullName[n.getDay()];case"%m":return o(n.getMonth()+1);case"%n":return n.getMonth()+1;case"%M":return m.monthShortName[n.getMonth()];case"%F":return m.monthFullName[n.getMonth()];case"%y":return o(n.getYear()%100);case"%Y":return n.getFullYear();case"%g":return(n.getHours()+11)%12+1;case"%h":return o((n.getHours()+11)%12+1);case"%G":return n.getHours();case"%H":return o(n.getHours());case"%i":return o(n.getMinutes());case"%s":return o(n.getSeconds());case"%a":return(n.getHours()>11?"pm":"am");case"%A":return(n.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return n.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var a=n.getTimezoneOffset();var c=Math.abs(Math.floor(a/60));var g=Math.abs(a)-c*60;return(a>0?"-":"+")+o(c)+":"+o(g);default:return e}};var s=String(r||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,u)}return(s||String(n))};window.dhx4.str2date=function(J,w,T){if(w==null||typeof(w)=="undefnied"){w=window.dhx4.dateFormat[window.dhx4.dateLang]}if(T==null||typeof(T)=="undefnied"){T=window.dhx4.dateStrings[window.dhx4.dateLang]}w=w.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var e=[];var v=[];w=w.replace(/%[a-z]/gi,function(a){switch(a){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":v.push(a);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":v.push(a);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":v.push(a);return"(\\d{1,2})";case"%Y":v.push(a);return"(\\d{4})";case"%a":v.push(a);return"([a|p]m)";case"%A":v.push(a);return"([A|P]M)";case"%u":v.push(a);return"(\\d{1,6})";case"%P":v.push(a);return"([+-]\\d{1,2}:\\d{1,2})"}return a});var S=new RegExp(w,"i");var U=J.match(S);if(U==null||U.length-1!=v.length){return"Invalid Date"}for(var M=1;M<U.length;M++){e.push(U[M])}var L={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var Q={};var H={};for(var M=0;M<v.length;M++){if(typeof(L[v[M]])!="undefined"){var K=L[v[M]];if(!Q[K]){Q[K]=[];H[K]=[]}Q[K].push(e[M]);H[K].push(v[M])}}e=[];v=[];for(var M=1;M<=7;M++){if(Q[M]!=null){for(var N=0;N<Q[M].length;N++){e.push(Q[M][N]);v.push(H[M][N])}}}var P=new Date();P.setDate(1);P.setHours(0);P.setMinutes(0);P.setSeconds(0);P.setMilliseconds(0);var O=function(a,g){for(var c=0;c<g.length;c++){if(g[c].toLowerCase()==a){return c}}return -1};for(var M=0;M<e.length;M++){switch(v[M]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(e[M])){P[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[v[M]]](Number(e[M])+(v[M]=="%m"||v[M]=="%n"?-1:0))}break;case"%M":case"%F":var I=O(e[M].toLowerCase(),T[{"%M":"monthShortName","%F":"monthFullName"}[v[M]]]);if(I>=0){P.setMonth(I)}break;case"%y":if(!isNaN(e[M])){var r=Number(e[M]);P.setFullYear(r+(r>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(e[M])){var r=Number(e[M]);if(r<=12&&r>=0){P.setHours(r+(O("pm",e)>=0?(r==12?0:12):(r==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=e[M]}break}}return P}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(e){if(typeof e!=="string"){return e}e=e.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var g=(new window.DOMParser()).parseFromString(e,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var g=new window.ActiveXObject("Microsoft.XMLDOM");g.async="false";g.loadXML(e)}}return g},xmltop:function(e,l,m){if(typeof l.status=="undefined"||l.status<400){xml=(!l.responseXML)?dhx4.ajax.parse(l.responseText||l):(l.responseXML||l);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(e)[0]}}catch(n){}}}if(m!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],m])}return document.createElement("DIV")},xpath:function(s,o){if(!o.nodeName){o=o.responseXML||o}if(dhx4.isIE){try{return o.selectNodes(s)||[]}catch(n){return[]}}else{var r=[];var e;var u=(o.ownerDocument||o).evaluate(s,o,null,XPathResult.ANY_TYPE,null);while(e=u.iterateNext()){r.push(e)}return r}},query:function(c){dhx4.ajax._call((c.method||"GET"),c.url,c.data||"",(c.async||true),c.callback,null,c.headers)},get:function(e,g){return this._call("GET",e,null,true,g)},getSync:function(c){return this._call("GET",c,null,false)},put:function(l,g,h){return this._call("PUT",l,g,true,h)},del:function(l,g,h){return this._call("DELETE",l,g,true,h)},post:function(l,g,h){if(arguments.length==1){g=""}else{if(arguments.length==2&&(typeof(g)=="function"||typeof(window[g])=="function")){h=g;g=""}else{g=String(g)}}return this._call("POST",l,g,true,h)},postSync:function(g,e){e=(e==null?"":String(e));return this._call("POST",g,e,false)},getLong:function(e,g){this._call("GET",e,null,true,g,{url:e})},postLong:function(l,g,h){if(arguments.length==2&&(typeof(g)=="function"||typeof(window[g]))){h=g;g=""}this._call("POST",l,g,true,h,{url:l,postData:g})},_call:function(E,D,C,y,w,s,A){var u=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var x=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(y==true){u.onreadystatechange=function(){if((u.readyState==4)||(x==true&&u.readyState==3)){if(u.status!=200||u.responseText==""){if(!dhx4.callEvent("onAjaxError",[{xmlDoc:u,filePath:D,async:y}])){return}}window.setTimeout(function(){if(typeof(w)=="function"){w.apply(window,[{xmlDoc:u,filePath:D,async:y}])}if(s!=null){if(typeof(s.postData)!="undefined"){dhx4.ajax.postLong(s.url,s.postData,w)}else{dhx4.ajax.getLong(s.url,w)}}w=null;u=null},1)}}}if(E=="GET"&&this.cache!=true){D+=(D.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"}u.open(E,D,y);if(A!=null){for(var v in A){u.setRequestHeader(v,A[v])}}else{if(E=="POST"||E=="PUT"||E=="DELETE"){u.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(E=="GET"){C=null}}}u.setRequestHeader("X-Requested-With","XMLHttpRequest");u.send(C);return{xmlDoc:u,filePath:D,async:y}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(a,u,o,r,w){if(w=="clear"){for(var v in a._dhxdataload){a._dhxdataload[v]=null;delete a._dhxdataload[v]}a._loadData=null;a._dhxdataload=null;a.load=null;a.loadStruct=null;a=null;return}a._dhxdataload={initObj:u,xmlToJson:o,xmlRootTag:r,onBeforeXLS:null};a._loadData=function(D,n,m){if(arguments.length==2){m=n;n=null}var E=null;if(arguments.length==3){m=arguments[2]}if(typeof(D)=="string"){var F=D.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var e=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(e.test(F.replace(/^<\?xml[^\?]*\?>\s*/,""))){E=dhx4.ajax.parse(D);if(E!=null){E=this[this._dhxdataload.xmlToJson].apply(this,[E])}}if(E==null&&(F.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||F.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){E=dhx4.s2j(F)}if(E==null){this.callEvent("onXLS",[]);var c=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var F=this._dhxdataload.onBeforeXLS.apply(this,[D]);if(F!=null&&typeof(F)=="object"){if(F.url!=null){D=F.url}if(F.params!=null){for(var l in F.params){c.push(l+"="+encodeURIComponent(F.params[l]))}}}}var h=this;var g=function(x){var y=null;if((x.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(x.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){y=h[h._dhxdataload.xmlToJson].apply(h,[x.xmlDoc.responseXML])}else{y=dhx4.s2j(x.xmlDoc.responseText)}if(y!=null){h[h._dhxdataload.initObj].apply(h,[y,D])}h.callEvent("onXLE",[]);if(m!=null){if(typeof(m)=="function"){m.apply(h,[])}else{if(typeof(window[m])=="function"){window[m].apply(h,[])}}}g=m=null;y=x=h=null};c=c.join("&")+(typeof(n)=="string"?"&"+n:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(D,c,g)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(D+(c.length>0?(D.indexOf("?")>0?"&":"?")+c:""),g)}}return}}else{if(typeof(D.documentElement)=="object"||(typeof(D.tagName)!="undefined"&&typeof(D.getElementsByTagName)!="undefined"&&D.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){E=this[this._dhxdataload.xmlToJson].apply(this,[D])}else{E=window.dhx4._copyObj(D)}}if(E!=null){this[this._dhxdataload.initObj].apply(this,[E])}if(m!=null){if(typeof(m)=="function"){m.apply(this,[])}else{if(typeof(window[m])=="function"){window[m].apply(this,[])}}m=null}};if(w!=null){var s={struct:"loadStruct",data:"load"};for(var v in w){if(w[v]==true){a[s[v]]=function(){return this._loadData.apply(this,arguments)}}}}a=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(e,g){if(g=="clear"){e.detachAllEvents();e.dhxevs=null;e.attachEvent=null;e.detachEvent=null;e.checkEvent=null;e.callEvent=null;e.detachAllEvents=null;e=null;return}e.dhxevs={data:{}};e.attachEvent=function(l,a){l=String(l).toLowerCase();if(!this.dhxevs.data[l]){this.dhxevs.data[l]={}}var c=window.dhx4.newId();this.dhxevs.data[l][c]=a;return c};e.detachEvent=function(a){for(var m in this.dhxevs.data){var c=0;for(var n in this.dhxevs.data[m]){if(n==a){this.dhxevs.data[m][n]=null;delete this.dhxevs.data[m][n]}else{c++}}if(c==0){this.dhxevs.data[m]=null;delete this.dhxevs.data[m]}}};e.checkEvent=function(a){a=String(a).toLowerCase();return(this.dhxevs.data[a]!=null)};e.callEvent=function(m,a){m=String(m).toLowerCase();if(this.dhxevs.data[m]==null){return true}var c=true;for(var n in this.dhxevs.data[m]){c=this.dhxevs.data[m][n].apply(this,a)&&c}return c};e.detachAllEvents=function(){for(var a in this.dhxevs.data){for(var c in this.dhxevs.data[a]){this.dhxevs.data[a][c]=null;delete this.dhxevs.data[a][c]}this.dhxevs.data[a]=null;delete this.dhxevs.data[a]}};e=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(c){return c==""},isNotEmpty:function(c){return(c instanceof Array?c.length>0:!c=="")},isValidBoolean:function(c){return !!c.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(c){return !!c.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(c){return !!c.toString().match(/(^-?\d+$)/)},isValidNumeric:function(c){return !!c.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(c){return !!c.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(g){var e=g.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||false},isValidDate:function(e){var g=e.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return g&&!!(g[1]<=9999&&g[2]<=12&&g[3]<=31)||false},isValidTime:function(g){var e=g.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||false},isValidIPv4:function(e){var g=e.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return g&&!!(g[1]<=255&&g[2]<=255&&g[3]<=255&&g[4]<=255)||false},isValidCurrency:function(c){return c.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(c){return c.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(c){return c.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(h,l){for(var a in l){if(!h[a]){h[a]=l[a]}}return h},extend_api:function(h,l,m){var n=window[h];if(!n){return}window[h]=function(a){if(a&&typeof a=="object"&&!a.tagName){var c=n.apply(this,(l._init?l._init(a):arguments));for(var e in dhtmlx){if(l[e]){this[l[e]](dhtmlx[e])}}for(var e in a){if(l[e]){this[l[e]](a[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,a[e])}}}}else{var c=n.apply(this,arguments)}if(l._patch){l._patch(this)}return c||this};window[h].prototype=n.prototype;if(m){dhtmlx.extend(window[h].prototype,m)}},url:function(c){if(c.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(c){c.onmousedown=null;c.dragStarter=null;c.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(e,g){e.onmousedown=this.preCreateDragCopy;e.dragStarter=g;this.addDragLanding(e,g)};dhtmlDragAndDropObject.prototype.addDragLanding=function(e,g){e.dragLanding=g};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(c){if((c||window.event)&&(c||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(c)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((c)&&(c.preventDefault)){c.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(o){if(!o){o=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,o);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(o,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var m=dragger.gldragNode;if(dragger.gldragNode.old){m=dragger.gldragNode.old}m.parentNode.removeChild(m);var r=dragger.dragNode.pWindow;if(m.pWindow&&m.pWindow.dhtmlDragAndDrop.lastLanding){m.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(m.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var e=document.createElement("Div");e.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=e.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);r.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=o.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=o.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!o.srcElement){var n=o.target}else{n=o.srcElement}dragger.checkLanding(n,o)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(m){if(window.name){var o=parent.frames[window.name].frameElement.offsetParent;var n=0;var r=0;while(o){n+=o.offsetLeft;r+=o.offsetTop;o=o.offsetParent}if((parent.dhtmlDragAndDrop)){var l=parent.dhtmlDragAndDrop.calculateFramePosition(1);n+=l.split("_")[0]*1;r+=l.split("_")[1]*1}if(m){return n+"_"+r}else{this.fx=n}this.fy=r}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(g,e){if((g)&&(g.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=g;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e);this.lastLanding_scr=(_isIE?e.srcElement:e.target)}else{if((g)&&(g.tagName!="BODY")){this.checkLanding(g.parentNode,e)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(l,h){dragger=window.dhtmlDragAndDrop;if(!h){dragger.stopFrameRoute();var e=dragger.lastLanding;dragger.lastLanding=null;if(e){e.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,e,(_isIE?event.srcElement:l.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(h){if(h){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var e=0;e<window.frames.length;e++){try{if((window.frames[e]!=h)&&(window.frames[e].dhtmlDragAndDrop)){window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(l){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=h)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(l){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(m,l){if(m){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=m.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=m.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=m.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=m.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(l))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=m)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(n){}for(var e=0;e<window.frames.length;e++){try{if((window.frames[e]!=m)&&(window.frames[e].dhtmlDragAndDrop)){window.frames[e].dhtmlDragAndDrop.initFrameRoute(window,((!m||l)?1:0))}}catch(n){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(l,h,g){if(l.addEventListener){l.addEventListener(h,g,false)}else{if(l.attachEvent){l.attachEvent("on"+h,g)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var n;var m;var r,l;dhtmlxEvent(document.body,"touchstart",function(a){m=a.touches[0].target;r=a.touches[0].clientX;l=a.touches[0].clientY;n=window.setTimeout(o,dhtmlxEvent.touchDelay)});function o(){if(m){var a=document.createEvent("HTMLEvents");a.initEvent("dblclick",true,true);m.dispatchEvent(a);n=m=null}}dhtmlxEvent(document.body,"touchmove",function(a){if(n){if(Math.abs(a.touches[0].clientX-r)>50||Math.abs(a.touches[0].clientY-l)>50){window.clearTimeout(n);n=m=false}}});dhtmlxEvent(document.body,"touchend",function(a){if(n){window.clearTimeout(n);n=m=false}});dhtmlxEvent.initTouch=function(){}}}if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(g,e){if(!g){dhtmlx.error(e)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(a,o){if(!a._event_check){a._event_check={};a._event_check_size={}}for(var r in o){a._event_check[r.toLowerCase()]=o[r];var m=-1;for(var n in o[r]){m++}a._event_check_size[r.toLowerCase()]=m}};dhtmlx.assert_method_info=function(o,u,r,n){var m=[];for(var s=0;s<n.length;s++){m.push(n[s][0]+" : "+n[s][1]+"\n   "+n[s][2].describe()+(n[s][3]?"; optional":""))}return o.name+"."+u+"\n"+r+"\n Arguments:\n - "+m.join("\n - ")};dhtmlx.assert_method=function(h,g){for(var l in g){dhtmlx.assert_method_process(h,l,g[l].descr,g[l].args,(g[l].min||99),g[l].skip)}};dhtmlx.assert_method_process=function(r,w,s,n,v,u){var o=r[w];if(!u){r[w]=function(){if(arguments.length!=n.length&&arguments.length<v){dhtmlx.log("warn","Incorrect count of parameters\n"+r[w].describe()+"\n\nExpecting "+n.length+" but have only "+arguments.length)}else{for(var a=0;a<n.length;a++){if(!n[a][3]&&!n[a][2](arguments[a])){dhtmlx.log("warn","Incorrect method call\n"+r[w].describe()+"\n\nActual value of "+(a+1)+" parameter: {"+(typeof arguments[a])+"} "+arguments[a])}}}return o.apply(this,arguments)}}r[w].describe=function(){return dhtmlx.assert_method_info(r,w,s,n)}};dhtmlx.assert_event_call=function(h,l,g){if(h._event_check){if(!h._event_check[l]){dhtmlx.log("warn","Not expected event call :"+l)}else{if(dhtmlx.isNotDefined(g)){dhtmlx.log("warn","Event without parameters :"+l)}else{if(h._event_check_size[l]!=g.length){dhtmlx.log("warn","Incorrect event call, expected "+h._event_check_size[l]+" parameter(s), but have "+g.length+" parameter(s), for "+l+" event")}}}}};dhtmlx.assert_event_attach=function(g,e){if(g._event_check&&!g._event_check[e]){dhtmlx.log("warn","Unknown event name: "+e)}};dhtmlx.assert_property=function(g,e){if(!g._settings_check){g._settings_check={}}dhtmlx.extend(g._settings_check,e)};dhtmlx.assert_check=function(h,l){if(typeof h=="object"){for(var g in h){dhtmlx.assert_settings(g,h[g],l)}}};dhtmlx.assert_settings=function(y,u,v){v=v||this._settings_check;if(v){if(!v[y]){return dhtmlx.log("warn","Unknown propery: "+y)}var o="";var x="";var s=false;for(var w=0;w<v[y].length;w++){var r=v[y][w];if(typeof r=="string"){continue}if(typeof r=="function"){s=s||r(u)}else{if(typeof r=="object"&&typeof r[1]=="function"){s=s||r[1](u);if(s&&r[2]){dhtmlx.assert_check(u,r[2])}}}if(s){break}}if(!s){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(y,v)+"\nActual value: {"+(typeof u)+"} "+u)}}};dhtmlx.assert_info=function(u,n){var m=n[u];var o="";var r=[];for(var s=0;s<m.length;s++){if(typeof rule=="string"){o=m[s]}else{if(m[s].describe){r.push(m[s].describe())}else{if(m[s][1]&&m[s][1].describe){r.push(m[s][1].describe())}}}}return"Property: "+u+", "+o+" \nExpected value: \n - "+r.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(c){if(typeof c!="string"){return false}if(c.indexOf("#")!==0){return false}if(c.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(c){if(typeof c=="function"){return true}if(typeof c=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(c){if(typeof c=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(e,g){if(typeof e=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(c){if(typeof c=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(c){return !!dhtmlx.toNode(c)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(c){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(g){var e=function(a){return g[a]};e.describe=function(){var a=[];for(var c in g){a.push(c)}return"{String} can take one of next values: "+a.join(", ")};return e};dhtmlx.assert_rule_dimension=function(c){if(c*1==c&&!isNaN(c)&&c>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(c){if(typeof c=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(c){if(typeof c=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(c){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(h,l){var a=function(c){if(h(c)||l(c)){return true}return false};a.describe=function(){return h.describe()};return a}}dhtmlx.codebase="./";dhtmlx.copy=function(g){var e=dhtmlx.copy._function;e.prototype=g;return new e()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(l,g){for(var h in g){l[h]=g[h]}if(dhtmlx.assert_enabled()&&g._assert){l._assert();l._assert=null}dhtmlx.assert(l,"Invalid nesting target");dhtmlx.assert(g,"Invalid nesting source");if(g._init){l._init()}return l};dhtmlx.proto_extend=function(){var n=arguments;var s=n[0];var u=[];for(var o=n.length-1;o>0;o--){if(typeof n[o]=="function"){n[o]=n[o].prototype}for(var r in n[o]){if(r=="_init"){u.push(n[o][r])}else{if(!s[r]){s[r]=n[o][r]}}}}if(n[0]._init){u.push(n[0]._init)}s._init=function(){for(var a=0;a<u.length;a++){u[a].apply(this,arguments)}};s.base=n[1];var m=function(a){this._init(a);if(this._parseSettings){this._parseSettings(a,this.defaults)}};m.prototype=s;s=n=null;return m};dhtmlx.bind=function(g,e){return function(){return g.apply(e,arguments)}};dhtmlx.require=function(c){if(!dhtmlx._modules[c]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+c).responseText);dhtmlx._modules[c]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(g,h,l){return function(){var a=false;a=g[h].apply(g,arguments);return a}};dhtmlx.isNotDefined=function(a){return typeof a=="undefined"};dhtmlx.delay=function(l,n,m,h){setTimeout(function(){var a=l.apply(n,m);l=n=m=null;return a},h||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(c){if(typeof c=="string"){return document.getElementById(c)}return c};dhtmlx.toArray=function(c){return dhtmlx.extend((c||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(n,o,l,r){n=dhtmlx.toNode(n);var m=dhtmlx.uid();dhtmlx._events[m]=[n,o,l];if(r){l=dhtmlx.bind(l,r)}if(n.addEventListener){n.addEventListener(o,l,false)}else{if(n.attachEvent){n.attachEvent("on"+o,l)}}return m};dhtmlx.eventRemove=function(g){if(!g){return}dhtmlx.assert(this._events[g],"Removing non-existing event");var e=dhtmlx._events[g];if(e[0].removeEventListener){e[0].removeEventListener(e[1],e[2],false)}else{if(e[0].detachEvent){e[0].detachEvent("on"+e[1],e[2])}}delete this._events[g]};dhtmlx.log=function(l,h,g){if(window.console&&console.log){l=l.toLowerCase();if(window.console[l]){window.console[l](h||"unknown error")}else{window.console.log(l+": "+h)}if(g){window.console.log(g)}}};dhtmlx.log_full_time=function(c){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+c+"]");window.setTimeout(function(){var a=new Date();dhtmlx.log("Info","Timing end ["+c+"]:"+(a.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(g){var h="_start_time_log"+g;if(!dhtmlx[h]){dhtmlx[h]=new Date();dhtmlx.log("Info","Timing start ["+g+"]")}else{var l=new Date();dhtmlx.log("Info","Timing end ["+g+"]:"+(l.valueOf()-dhtmlx[h].valueOf())/1000+"s");dhtmlx[h]=null}};dhtmlx.error=function(g,e){dhtmlx.log("error",g,e)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(c){dhtmlx.extend(this._map,c)},callEvent:function(o,m){if(this._events._block){return true}o=o.toLowerCase();dhtmlx.assert_event_call(this,o,m);var n=this._events[o.toLowerCase()];var l=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+o,m)}if(n){for(var r=0;r<n.length;r++){if(n[r].apply(this,(m||[]))===false){l=false}}}if(this._map[o]&&!this._map[o].callEvent(o,m)){l=false}return l},attachEvent:function(n,h,l){n=n.toLowerCase();dhtmlx.assert_event_attach(this,n);l=l||dhtmlx.uid();h=dhtmlx.toFunctor(h);var m=this._events[n]||dhtmlx.toArray();m.push(h);this._events[n]=m;this._handlers[l]={f:h,t:n};return l},detachEvent:function(l){if(this._handlers[l]){var n=this._handlers[l].t;var h=this._handlers[l].f;var m=this._events[n];m.remove(h);delete this._handlers[l]}}};dhtmlx.PowerArray={removeAt:function(g,e){if(g>=0){this.splice(g,(e||1))}},remove:function(c){this.removeAt(this.find(c))},insertAt:function(l,h){if(!h&&h!==0){this.push(l)}else{var g=this.splice(h,(this.length-h));this[h]=l;this.push.apply(this,g)}},find:function(c){for(i=0;i<this.length;i++){if(c==this[i]){return i}}return -1},each:function(g,h){for(var l=0;l<this.length;l++){g.call((h||this),this[l])}},map:function(g,h){for(var l=0;l<this.length;l++){this[l]=g.call((h||this),this[l])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var h={};h.names=["transform","transition"];h.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];h.transition=["transition","WebkitTransition","MozTransition","oTransition"];var l=document.createElement("DIV");var m;for(var n=0;n<h.names.length;n++){while(p=h[h.names[n]].pop()){if(typeof l.style[p]!="undefined"){dhtmlx.env[h.names[n]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var c;if(dhtmlx._isOpera){c="-o-"}else{c="";if(dhtmlx._isFF){c="-moz-"}if(dhtmlx._isWebKit){c="-webkit-"}}return c})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(r,l,o){l=l||{};var n=document.createElement(r);for(var m in l){n.setAttribute(m,l[m])}if(l.style){n.style.cssText=l.style}if(l["class"]){n.className=l["class"]}if(o){n.innerHTML=o}return n},getValue:function(c){c=dhtmlx.toNode(c);if(!c){return""}return dhtmlx.isNotDefined(c.value)?c.innerHTML:c.value},remove:function(g){if(g instanceof Array){for(var e=0;e<g.length;e++){this.remove(g[e])}}else{if(g&&g.parentNode){g.parentNode.removeChild(g)}}},insertBefore:function(l,h,g){if(!l){return}if(h){h.parentNode.insertBefore(l,h)}else{g.appendChild(l)}},locate:function(n,l){n=n||event;var e=n.target||n.srcElement;while(e){if(e.getAttribute){var m=e.getAttribute(l);if(m){return m}}e=e.parentNode}return null},offset:function(A){if(A.getBoundingClientRect){var w=A.getBoundingClientRect();var v=document.body;var D=document.documentElement;var E=window.pageYOffset||D.scrollTop||v.scrollTop;var y=window.pageXOffset||D.scrollLeft||v.scrollLeft;var x=D.clientTop||v.clientTop||0;var u=D.clientLeft||v.clientLeft||0;var s=w.top+E-x;var C=w.left+y-u;return{y:Math.round(s),x:Math.round(C)}}else{var s=0,C=0;while(A){s=s+parseInt(A.offsetTop,10);C=C+parseInt(A.offsetLeft,10);A=A.offsetParent}return{y:s,x:C}}},pos:function(e){e=e||event;if(e.pageX||e.pageY){return{x:e.pageX,y:e.pageY}}var g=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:e.clientX+g.scrollLeft-g.clientLeft,y:e.clientY+g.scrollTop-g.clientTop}},preventEvent:function(c){if(c&&c.preventDefault){c.preventDefault()}dhtmlx.html.stopEvent(c)},stopEvent:function(c){(c||event).cancelBubble=true;return false},addCss:function(g,e){g.className+=" "+e},removeCss:function(g,e){g.className=g.className.replace(RegExp(e,"g"),"")}};(function(){var c=document.getElementsByTagName("SCRIPT");dhtmlx.assert(c.length,"Can't locate codebase");if(c.length){c=(c[c.length-1].getAttribute("src")||"").split("/");c.splice(c.length-1,1);dhtmlx.codebase=c.slice(0,c.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var h=0;h<dhtmlx.destructors.length;h++){dhtmlx.destructors[h].destructor()}dhtmlx.destructors=[]}for(var l in dhtmlx._events){var a=dhtmlx._events[l];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete dhtmlx._events[l]}});dhtmlx.ajax=function(h,n,m){if(arguments.length!==0){var l=new dhtmlx.ajax();if(m){l.master=m}l.get(h,null,n)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(s,w,a){var y=this.getXHR();if(typeof a=="function"){a=[a]}if(typeof w=="object"){var r=[];for(var v in w){var x=w[v];if(x===null||x===dhtmlx.undefined){x=""}r.push(v+"="+encodeURIComponent(x))}w=r.join("&")}if(w&&!this.post){s=s+(s.indexOf("?")!=-1?"&":"?")+w;w=null}y.open(this.post?"POST":"GET",s,!this._sync);if(this.post){y.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var u=this;y.onreadystatechange=function(){if(!y.readyState||y.readyState==4){if(a&&u){for(var c=0;c<a.length;c++){if(a[c]){a[c].call((u.master||u),y.responseText,y.responseXML,y)}}}u.master=null;a=u=null}};y.send(w||null);return y},get:function(g,h,l){this.post=false;return this.send(g,h,l)},post:function(g,h,l){this.post=true;return this.send(g,h,l)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(c){this.data={};if(c){this._settings.datatype=c.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(c){if(!this._ready_for_data){return c}this.load(c,this._settings.datatype);return c},data_setter:function(c){if(!this._ready_for_data){return c}this.parse(c,this._settings.datatype);return true},load:function(e,g){this.callEvent("onXLS",[]);if(typeof g=="string"){this.data.driver=dhtmlx.DataDriver[g];g=arguments[2]}else{this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"]}dhtmlx.ajax(e,[this._onLoad,g],this)},parse:function(g,e){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[e||"xml"];this._onLoad(g,null)},_onLoad:function(m,r,l){var o=this.data.driver;var n=o.getRecords(o.toObject(m,r))[0];this.data=(o?o.getDetails(n):m);this.callEvent("onXLE",[])},_check_data_feed:function(g){if(!this._settings.dataFeed||this._ignore_feed||!g){return true}var e=this._settings.dataFeed;if(typeof e=="function"){return e.call(this,(g.id||g),g)}e=e+(e.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(g.id||g);this.callEvent("onXLS",[]);dhtmlx.ajax(e,function(a,c){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(a)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(c){if(c&&c.data){c=c.data}if(c&&!(c instanceof Array)){return[c]}return c},getDetails:function(c){return c},getInfo:function(c){return{_size:(c.total_count||0),_from:(c.pos||0),_key:(c.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(c){if(c&&!(c instanceof Array)){return[c]}return c},getDetails:function(c){return c},getInfo:function(c){return{_size:(c.total_count||0),_from:(c.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(g){if(typeof g=="string"){var e=null;if(g.indexOf("<")==-1){e=dhtmlx.toNode(g)}if(!e){e=document.createElement("DIV");e.innerHTML=g}return e.getElementsByTagName(this.tag)}return g},getRecords:function(c){if(c.tagName){return c.childNodes}return c},getDetails:function(c){return dhtmlx.DataDriver.xml.tagToObject(c)},getInfo:function(c){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(c){return c},getDetails:function(h){var g={};for(var l=0;l<h.length;l++){g["data"+l]=h[l]}return g},getInfo:function(c){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(c){return c},getRecords:function(c){return c.split(this.row)},getDetails:function(h){h=this.stringToArray(h);var g={};for(var l=0;l<h.length;l++){g["data"+l]=h[l]}return g},getInfo:function(c){return{_size:0,_from:0}},stringToArray:function(g){g=g.split(this.cell);for(var e=0;e<g.length;e++){g[e]=g[e].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return g},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(g,e){if(e&&(e=this.checkResponse(g,e))){return e}if(typeof g=="string"){return this.fromString(g)}return g},getRecords:function(c){return this.xpath(c,this.records)},records:"/*/item",getDetails:function(c){return this.tagToObject(c,{})},getInfo:function(c){return{_size:(c.documentElement.getAttribute("total_count")||0),_from:(c.documentElement.getAttribute("pos")||0),_key:(c.documentElement.getAttribute("dhx_security"))}},xpath:function(x,e){if(window.XPathResult){var y=x;if(x.nodeName.indexOf("document")==-1){x=x.ownerDocument}var u=[];var A=x.evaluate(e,y,null,XPathResult.ANY_TYPE,null);var s=A.iterateNext();while(s){u.push(s);s=A.iterateNext()}return u}else{var v=true;try{if(typeof(x.selectNodes)=="undefined"){v=false}}catch(w){}if(v){return x.selectNodes(e)}else{var C=e.split("/").pop();return x.getElementsByTagName(C)}}},tagToObject:function(v,w){w=w||{};var s=false;var u=v.attributes;if(u&&u.length){for(var a=0;a<u.length;a++){w[u[a].name]=u[a].value}s=true}var y=v.childNodes;var x={};for(var a=0;a<y.length;a++){if(y[a].nodeType==1){var r=y[a].tagName;if(typeof w[r]!="undefined"){if(!(w[r] instanceof Array)){w[r]=[w[r]]}w[r].push(this.tagToObject(y[a],{}))}else{w[y[a].tagName]=this.tagToObject(y[a],{})}s=true}}if(!s){return this.nodeValue(v)}w.value=this.nodeValue(v);return w},nodeValue:function(c){if(c.firstChild){return c.firstChild.wholeText||c.firstChild.data}return""},fromString:function(g){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(g,"text/xml")}if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");e.loadXML(g);return e}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(a,h){if(h&&(h.firstChild&&h.firstChild.tagName!="parsererror")){return h}var l=this.fromString(a.replace(/^[\s]+/,""));if(l){return l}dhtmlx.error("xml can't be parsed",a)}};dhtmlx.DataLoader={_init:function(c){c=c||"";this.name="DataStore";this.data=(c.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(e,g){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(a,c){if(this._load_count){return this._load_count=[a,c]}else{this._load_count=true}this.load(e+((e.indexOf("?")==-1)?"?":"&")+"posStart="+a+"&count="+c,function(){var l=this._load_count;this._load_count=false;if(typeof l=="object"){this.data.feed.apply(this,l)}})}}},_onLoad:function(h,l,g){this.data._parse(this.data.driver.toObject(h,l));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(c){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(a,n){if(this._settings.dataFeed){var o={};if(!a&&!o){return}if(typeof a=="function"){if(!n){return}a(n,o)}else{o={text:n}}this.clearAll();var u=this._settings.dataFeed;if(typeof u=="function"){return u.call(this,n,o)}var r=[];for(var s in o){r.push("dhx_filter["+s+"]="+encodeURIComponent(o[s]))}this.load(u+(u.indexOf("?")<0?"?":"&")+r.join("&"),this._settings.datatype);return false}},this));return c},_call_onready:function(){if(this._settings.ready){var c=dhtmlx.toFunctor(this._settings.ready);if(c&&c.call){c.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(c){dhtmlx.assert(dhtmlx.DataDriver[c],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[c]},_parse:function(u){this.callEvent("onParse",[this.driver,u]);if(this._filter_order){this.filter()}var s=this.driver.getInfo(u);if(s._key){dhtmlx.security_key=s._key}var v=this.driver.getRecords(u);var y=(s._from||0)*1;if(y===0&&this.order[0]){y=this.order.length}var x=0;for(var w=0;w<v.length;w++){var r=this.driver.getDetails(v[w]);var o=this.id(r);if(!this.pull[o]){this.order[x+y]=o;x++}this.pull[o]=r;if(this.extraParser){this.extraParser(r)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(r)}else{if(this._scheme.$update){this._scheme.$update(r)}}}}for(var w=0;w<s._size;w++){if(!this.order[w]){var o=dhtmlx.uid();var r={id:o,$template:"loading"};this.pull[o]=r;this.order[w]=o}}this.callEvent("onStoreLoad",[this.driver,u]);this.refresh()},id:function(c){return c.id||(c.id=dhtmlx.uid())},changeId:function(g,e){dhtmlx.assert(this.pull[g],"Can't change id, for non existing item: "+g);this.pull[e]=this.pull[g];this.pull[e].id=e;this.order[this.order.find(g)]=e;if(this._filter_order){this._filter_order[this._filter_order.find(g)]=e}this.callEvent("onIdChange",[g,e]);if(this._render_change_id){this._render_change_id(g,e)}},get:function(c){return this.item(c)},set:function(g,e){return this.update(g,e)},item:function(c){return this.pull[c]},update:function(g,e){if(this._scheme&&this._scheme.$update){this._scheme.$update(e)}if(this.callEvent("onBeforeUpdate",[g,e])===false){return false}this.pull[g]=e;this.refresh(g)},refresh:function(c){if(this._skip_refresh){return}if(c){this.callEvent("onStoreUpdated",[c,this.pull[c],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(c){this._skip_refresh=true;c.call(this);this._skip_refresh=false},getRange:function(a,h){if(a){a=this.indexById(a)}else{a=this.startOffset||0}if(h){h=this.indexById(h)}else{h=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(h<0){h=0}}if(a>h){var l=h;h=a;a=l}return this.getIndexRange(a,h)},getIndexRange:function(l,m){m=Math.min((m||Infinity),this.dataCount()-1);var h=dhtmlx.toArray();for(var n=(l||0);n<=m;n++){h.push(this.item(this.order[n]))}return h},dataCount:function(){return this.order.length},exists:function(c){return !!(this.pull[c])},move:function(h,l){if(h<0||l<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var m=this.idByIndex(h);var n=this.item(m);this.order.removeAt(h);this.order.insertAt(m,Math.min(this.order.length,l));this.callEvent("onStoreUpdated",[m,n,"move"])},scheme:function(c){this._scheme=c},sync:function(m,n,l){if(typeof n!="function"){l=n;n=null}if(dhtmlx.debug_bind){this.debug_sync_master=m;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var o=m;if(m.name!="DataStore"){m=m.data}var r=dhtmlx.bind(function(e,c,a){if(a!="update"||n){e=null}if(!e){this.order=dhtmlx.toArray([].concat(m.order));this._filter_order=null;this.pull=m.pull;if(n){this.silent(n)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!l){this.refresh(e)}else{l=false}},this);m.attachEvent("onStoreUpdated",r);this.feed=function(a,c){o.loadNext(c,a)};r()},add:function(o,n){if(this._scheme){o=o||{};for(var u in this._scheme){o[u]=o[u]||this._scheme[u]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(o)}else{if(this._scheme.$update){this._scheme.$update(o)}}}}var m=this.id(o);var r=this.dataCount();if(dhtmlx.isNotDefined(n)||n<0){n=r}if(n>r){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");n=Math.min(this.order.length,n)}if(this.callEvent("onBeforeAdd",[m,o,n])===false){return false}if(this.exists(m)){return dhtmlx.error("Not unique ID")}this.pull[m]=o;this.order.insertAt(m,n);if(this._filter_order){var s=this._filter_order.length;if(!n&&this.order.length){s=0}this._filter_order.insertAt(m,s)}this.callEvent("onafterAdd",[m,n]);this.callEvent("onStoreUpdated",[m,o,"add"]);return m},remove:function(h){if(h instanceof Array){for(var g=0;g<h.length;g++){this.remove(h[g])}return}if(this.callEvent("onBeforeDelete",[h])===false){return false}if(!this.exists(h)){return dhtmlx.error("Not existing ID",h)}var l=this.item(h);this.order.remove(h);if(this._filter_order){this._filter_order.remove(h)}delete this.pull[h];this.callEvent("onafterdelete",[h]);this.callEvent("onStoreUpdated",[h,l,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(c){if(c>=this.order.length||c<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect welcome")}return this.order[c]},indexById:function(g){var e=this.order.find(g);return e},next:function(g,e){return this.order[this.indexById(g)+(e||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(g,e){return this.order[this.indexById(g)-(e||1)]},sort:function(r,w,o){var v=r;if(typeof r=="function"){v={as:r,dir:w}}else{if(typeof r=="string"){v={by:r,dir:w,as:o}}}var s=[v.by,v.dir,v.as];if(!this.callEvent("onbeforesort",s)){return}if(this.order.length){var n=dhtmlx.sort.create(v);var u=this.getRange(this.first(),this.last());u.sort(n);this.order=u.map(function(a){return this.id(a)},this)}this.refresh();this.callEvent("onaftersort",s)},filter:function(o,r){if(!this.callEvent("onBeforeFilter",[o,r])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(o){var u=o;r=r||"";if(typeof o=="string"){o=dhtmlx.Template.fromHTML(o);r=r.toString().toLowerCase();u=function(c,a){return o(c).toLowerCase().indexOf(a)!=-1}}var s=dhtmlx.toArray();for(var n=0;n<this.order.length;n++){var m=this.order[n];if(u(this.item(m),r)){s.push(m)}}this._filter_order=this.order;this.order=s}this.refresh();this.callEvent("onAfterFilter",[])},each:function(h,l){for(var g=0;g<this.order.length;g++){h.call((l||this),this.item(this.order[g]))}},provideApi:function(l,n){this.debug_bind_master=l;if(n){this.mapEvent({onbeforesort:l,onaftersort:l,onbeforeadd:l,onafteradd:l,onbeforedelete:l,onafterdelete:l,onbeforeupdate:l})}var m=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var h=0;h<m.length;h++){l[m[h]]=dhtmlx.methodPush(this,m[h])}if(dhtmlx.assert_enabled()){this.assert_event(l)}},serialize:function(){var h=this.order;var g=[];for(var l=0;l<h.length;l++){g.push(this.pull[h[l]])}return g}};dhtmlx.sort={create:function(c){return dhtmlx.sort.dir(c.dir,dhtmlx.sort.by(c.by,c.as))},as:{"int":function(a,g){a=a*1;g=g*1;return a>g?1:(a<g?-1:0)},string_strict:function(a,g){a=a.toString();g=g.toString();return a>g?1:(a<g?-1:0)},string:function(a,g){a=a.toString().toLowerCase();g=g.toString().toLowerCase();return a>g?1:(a<g?-1:0)}},by:function(g,e){if(!g){return e}if(typeof e!="function"){e=dhtmlx.sort.as[e||"string"]}g=dhtmlx.Template.fromHTML(g);return function(a,c){return e(g(a),g(c))}},dir:function(g,e){if(g=="asc"){return e}return function(a,c){return e(a,c)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(g){g=g||event;var e=g.which||g.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[e,g.ctrlKey,g.shiftKey,g])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(c){return this._mouseEvent(c,this.on_click,"ItemClick")},_onDblClick:function(c){return this._mouseEvent(c,this.on_dblclick,"ItemDblClick")},_onContext:function(e){var g=dhtmlx.html.locate(e,this._id);if(g&&!this.callEvent("onBeforeContextMenu",[g,e])){return dhtmlx.html.preventEvent(e)}},_onMouse:function(c){if(dhtmlx._isIE){c=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[c]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(c.type=="mousemove"){this._onMouseMove(c)}else{this._onMouseOut(c)}},this),500)},_onMouseMove:function(c){if(!this._mouseEvent(c,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[c||event])}},_onMouseOut:function(c){this.callEvent("onMouseOut",[c||event])},_mouseEvent:function(e,r,w){e=e||event;var o=e.target||e.srcElement;var u="";var v=null;var s=false;while(o&&o.parentNode){if(!s&&o.getAttribute){v=o.getAttribute(this._id);if(v){if(o.getAttribute("userdata")){this.callEvent("onLocateData",[v,o,e])}if(!this.callEvent("on"+w,[v,e,o])){return}s=true}}u=o.className;if(u){u=u.split(" ");u=u[0]||u[1];if(r[u]){return r[u].call(this,e,v||dhtmlx.html.locate(e,this._id),o)}}o=o.parentNode}return s}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(g,e){if(typeof g=="object"){return this._parseSeetingColl(g)}return this._define(g,e)},_define:function(l,g){dhtmlx.assert_settings.call(this,l,g);var h=this[l+"_setter"];return this._settings[l]=h?h.call(this,g):g},_parseSeetingColl:function(a){if(a){for(var g in a){this._define(g,a[g])}}},_parseSettings:function(h,g){var l=dhtmlx.extend({},g);if(typeof h=="object"&&!h.tagName){dhtmlx.extend(l,h)}this._parseSeetingColl(l)},_mergeSettings:function(g,h){for(var l in h){switch(typeof g[l]){case"object":g[l]=this._mergeSettings((g[l]||{}),h[l]);break;case"undefined":g[l]=h[l];break;default:break}}return g},_parseContainer:function(l,g,h){if(typeof l=="object"&&!l.tagName){l=l.container}this._obj=this.$view=dhtmlx.toNode(l);if(!this._obj&&h){this._obj=h(l)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+g;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(c){if(typeof c=="object"){return this.type_setter(c)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[c],"RenderStack :: Inccorect type name",c);this.type=dhtmlx.extend({},this.types[c]);this.customize()},customize:function(c){if(c){dhtmlx.extend(this.type,c)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(c){this._set_type(typeof c=="object"?dhtmlx.Type.add(this,c):c);return c},template_setter:function(c){return this.type_setter({template:c})},css_setter:function(c){this._obj.className+=" "+c;return c}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(c){return dhtmlx.Template.fromHTML(c)},obj_setter:function(l){var g=dhtmlx.Template.setter(l);var h=this;return function(){return g.apply(h,arguments)}},fromHTML:function(c){if(typeof c=="function"){return c}if(this._cache[c]){return this._cache[c]}c=(c||"").toString();c=c.replace(/[\r\n]+/g,"\\n");c=c.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');c=c.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');c=c.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');c=c.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');c=c.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');c=c.replace(/\{obj\}/g,'"+obj+"');c=c.replace(/\{-obj/g,"{obj");c=c.replace(/\{-common/g,"{common");c='return "'+c+'";';return this._cache[c]=Function("obj","common",c)}};dhtmlx.Type={add:function(h,l){if(!h.types&&h.prototype.types){h=h.prototype}if(dhtmlx.assert_enabled()){this.assert_event(l)}var g=l.name||"default";this._template(l);this._template(l,"edit");this._template(l,"loading");h.types[g]=dhtmlx.extend(dhtmlx.extend({},(h.types[g]||this._default)),l);return g},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(h,g){g="template"+(g?("_"+g):"");var l=h[g];if(l&&(typeof l=="string")){if(l.indexOf("->")!=-1){l=l.split("->");switch(l[0]){case"html":l=dhtmlx.html.getValue(l[1]).replace(/\"/g,'\\"');break;case"http":l=new dhtmlx.ajax().sync().get(l[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}h[g]=dhtmlx.Template.fromHTML(l)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(c){return this.type._item_start(c,this.type)+this.type.template(c,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(c){this.name="Tooltip";if(dhtmlx.assert_enabled()){this._assert()}if(typeof c=="string"){c={template:c}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(c,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(e,g){if(this._disabled){return}if(this.data!=e){this.data=e;this.render(e)}this._obj.style.top=g.y+this._settings.dy+"px";this._obj.style.left=g.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(g){var e=new dhtmlx.ui.Tooltip(g);this.attachEvent("onMouseMove",function(a,c){e.show(this.get(a),dhtmlx.html.pos(c))});this.attachEvent("onMouseOut",function(a,c){e.hide()});this.attachEvent("onMouseMoving",function(a,c){e.hide()});return e}};dhtmlx.compat=function(e,g){if(dhtmlx.compat[e]){dhtmlx.compat[e](g)}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(r,l){var m=document.createElement("DIV");m.id="CustomObject_"+dhtmlx.uid();m.style.width="100%";m.style.height="100%";m.cmp="grid";document.body.appendChild(m);this.attachObject(m.id);l.container=m.id;var n=this.vs[this.av];n.grid=new window[r](l);n.gridId=m.id;n.gridObj=m;n.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var o="_viewRestore";return this.vs[this[o]()].grid};dhtmlx.attaches.attachDataView=function(c){return this.attachAbstract("dhtmlXDataView",c)};dhtmlx.attaches.attachChart=function(c){return this.attachAbstract("dhtmlXChart",c)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(h,g){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(g||"");this._idd=h;this._isCell=true;this.conf={borders:true,idx:{},css:g||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var l=document.createElement("DIV");l.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(l);l=null;this._updateIdx=function(){for(var n in this.conf.idx){this.conf.idx[n]=null;delete this.conf.idx[n]}for(var a=0;a<this.cell.childNodes.length;a++){var e=this.cell.childNodes[a].className;for(var n in this.conf.idx_data){var c=new RegExp(this.conf.idx_data[n]);if(e.match(c)!=null){this.conf.idx[n]=a}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var a in this.dataNodes){if(this.dataNodes[a]!=null&&typeof(this.dataNodes[a].setSizes)=="function"){this.dataNodes[a].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(F,I,w,x,e,a,D,y){if(this.conf.size==null){this.conf.size={}}if(y==null){y={}}var c={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=F;this.conf.size.y=I;this.conf.size.w=Math.max(w,0);this.conf.size.h=Math.max(x,0);for(var H in c){var E=(y[H]||H);this.cell.style[E]=this.conf.size[c[H]]+"px"}this.callEvent("_onSetSize",[]);if(a!==true){this._adjustCont(e,D)}else{this._adjustAttached(e)}this._adjustProgress()};this._adjustCont=function(v,a){var w=this.cell.childNodes[this.conf.idx.cont];var c=0;for(var u in this.conf.ofs_nodes.t){var e=this.conf.ofs_nodes.t[u];c+=(e=="func"?this[u]():(e==true?this.cell.childNodes[this.conf.idx[u]].offsetHeight:0))}var s=0;for(var u in this.conf.ofs_nodes.b){var e=this.conf.ofs_nodes.b[u];s+=(e=="func"?this[u]():(e==true?this.cell.childNodes[this.conf.idx[u]].offsetHeight:0))}w.style.left="0px";w.style.top=c+"px";if(!this.conf.cells_cont){this.conf.cells_cont={};w.style.width=this.cell.offsetWidth+"px";w.style.height=Math.max(this.cell.offsetHeight-c-s,0)+"px";this.conf.cells_cont.w=parseInt(w.style.width)-w.offsetWidth;this.conf.cells_cont.h=parseInt(w.style.height)-w.offsetHeight}w.style.left="0px";w.style.top=c+"px";w.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";w.style.height=Math.max(this.conf.size.h-c-s+this.conf.cells_cont.h,0)+"px";w=null;this._adjustAttached(v);if(a=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var e=["menu","toolbar","ribbon"];for(var a=0;a<e.length;a++){if(this.conf.idx[e[a]]!=null){var r=this.cell.childNodes[this.conf.idx[e[a]]];var c="dhx_cell_"+e[a]+"_no_borders";var o="dhx_cell_"+e[a]+"_def";r.className=r.className.replace(new RegExp(this.conf.borders?c:o),this.conf.borders?o:c);r=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(c){this.views[c]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var a=this.cell.childNodes[this.conf.idx.cont];while(a.childNodes.length>0){this.views[c].cellCont.push(a.firstChild);a.removeChild(a.firstChild)}a=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var e in this.dataNodes){for(var n in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[n][e])!="undefined"){this.views[c].ofs_nodes[n][e]=this.conf.ofs_nodes[n][e];this.conf.ofs_nodes[n][e]=null;delete this.conf.ofs_nodes[n][e]}}this.views[c].dataNodesCont[e]=this.cell.childNodes[this.conf.idx[e]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[e]]);this.views[c].dataNodes[e]=this.dataNodes[e];this.dataNodes[e]=null;delete this.dataNodes[e];this._updateIdx()}this.callEvent("_onViewSave",[c])};this._viewRestore=function(c){if(this.views[c]==null){return}this.dataObj=this.views[c].dataObj;this.dataType=this.views[c].dataType;this.conf.url_data=this.views[c].url_data;for(var a=0;a<this.views[c].cellCont.length;a++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[c].cellCont[a])}for(var e in this.views[c].dataNodes){this.dataNodes[e]=this.views[c].dataNodes[e];if(e=="menu"){this.cell.insertBefore(this.views[c].dataNodesCont[e],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(e=="toolbar"){this.cell.insertBefore(this.views[c].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="ribbon"){this.cell.insertBefore(this.views[c].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="sb"){this.cell.appendChild(this.views[c].dataNodesCont[e])}this._updateIdx()}for(var e in this.views[c].ofs_nodes){for(var n in this.views[c].ofs_nodes[e]){this.conf.ofs_nodes[e][n]=this.views[c].ofs_nodes[e][n]}}if(this.conf.borders!=this.views[c].borders){this[this.views[c].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[c]);this._viewDelete(c)};this._viewDelete=function(c){if(this.views[c]==null){return}this.views[c].borders=null;for(var e in this.views[c].ofs_nodes){for(var n in this.views[c].ofs_nodes[e]){this.views[c].ofs_nodes[e][n]=null}this.views[c].ofs_nodes[e]=null}this.views[c].dataType=null;this.views[c].dataObj=null;this.views[c].url_data=null;for(var a=0;a<this.views[c].cellCont.length;a++){this.views[c].cellCont[a]=null}this.views[c].cellCont=null;for(var e in this.views[c].dataNodes){this.views[c].dataNodes[e]=null;this.views[c].dataNodesCont[e]=null}this.views[c].dataNodes=this.views[c].dataNodesCont=null;this.views[c]=null;delete this.views[c]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(e){if(this.conf.view==e){return false}this._viewSave(this.conf.view);this._viewRestore(e);this._updateIdx();this._adjustCont();this.conf.view=e;var g=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return g};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(l){if(l==this.conf.view){var a=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=a;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[l]==null){return}var m=this.views[l];for(var n in m.dataNodes){if(typeof(m.dataNodes[n].unload)=="function"){m.dataNodes[n].unload()}m.dataNodes[n]=null;m.dataNodesCont[n]=null}if(m.dataType=="url"){if(m.cellCont!=null&&m.cellCont[0]!="null"){this._detachURLEvents(m.cellCont[0])}}else{if(m.dataObj!=null){if(typeof(m.dataObj.unload)=="function"){m.dataObj.unload()}else{if(typeof(m.dataObj.destructor)=="function"){m.dataObj.destructor()}}m.dataObj=null}}m=null;this._viewDelete(l);if(typeof(this.conf.views_loaded[l])!="undefined"){delete this.conf.views_loaded[l]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var g=document.createElement("DIV");g.className=this.conf.idx_data.pr1;var e=document.createElement("DIV");e.className=this.conf.idx_data.pr2;if(this.conf.idx.cover!=null){this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(e)}this.cell.insertBefore(g,e);g=e=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]);this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]);this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var g=this.cell.childNodes[this.conf.idx.pr1];var e=this.cell.childNodes[this.conf.idx.pr2];if(!this.conf.pr.ofs){e.style.width=g.offsetWidth+"px";e.style.height=g.offsetHeight+"px";this.conf.pr.ofs={w:e.offsetWidth-e.clientWidth,h:e.offsetHeight-e.clientHeight}}e.style.width=g.offsetWidth-this.conf.pr.ofs.w+"px";e.style.height=g.offsetHeight-this.conf.pr.ofs.h+"px";g=e=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var c=document.createElement("DIV");c.className=this.conf.idx_data.cover;this.cell.appendChild(c);c=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(c){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(c!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(c){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(c!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var a in this.views){this.unloadView(a)}this.conf=null;for(var a in this){this[a]=null}};dhtmlXCellObject.prototype.attachObject=function(l,m){if(window.dhx4.s2b(m)&&!(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell))){m=false}if(typeof(l)=="string"){l=document.getElementById(l)}if(l.parentNode==this.cell.childNodes[this.conf.idx.cont]){l=null;return}if(m){l.style.display="";var h=l.offsetWidth;var n=l.offsetHeight}this._attachObject(l);this.dataType="obj";l.style.display="";l=null;if(m){this._adjustByCont(h,n)}};dhtmlXCellObject.prototype.appendObject=function(c){if(typeof(c)=="string"){c=document.getElementById(c)}if(c.parentNode==this.cell.childNodes[this.conf.idx.cont]){c=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(c,null,null,true);this.dataType="obj";c.style.display="";c=null};dhtmlXCellObject.prototype.detachObject=function(g,e){this._detachObject(null,g,e)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(C,a,A){if(A==true){A={}}var y=(typeof(A)!="undefined"&&A!=false&&A!=null);if(!this.conf.url_data){this.conf.url_data={}}this.conf.url_data.url=C;this.conf.url_data.ajax=(a==true);this.conf.url_data.post_data=(A==true?{}:(A||null));if(a==true){var s=this;if(y){var x="";for(var u in A){x+="&"+encodeURIComponent(u)+"="+encodeURIComponent(A[u])}dhx4.ajax.post(C,x,function(c){s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+c.xmlDoc.responseText+"</div>");if(typeof(s._doOnFrameContentLoaded)=="function"){s._doOnFrameContentLoaded()}s.dataType="url-ajax";s=c=null})}else{dhx4.ajax.get(C,function(c){s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+c.xmlDoc.responseText+"</div>");if(typeof(s._doOnFrameContentLoaded)=="function"){s._doOnFrameContentLoaded()}s.dataType="url-ajax";s=c=null})}}else{if(this.dataType=="url"){var w=this.getFrame()}else{var w=document.createElement("IFRAME");w.frameBorder=0;w.border=0;w.style.width="100%";w.style.height="100%";w.style.position="relative";this._attachObject(w);this.dataType="url";this._attachURLEvents()}if(y){var v=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(v){this._attachURLEvents()}w.src="about:blank"}else{w.src=C+(window.dhx4.ajax.cache!=true?(C.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime():"")}w=null}w=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(r,n,w,u){u=u||window.scheduler;var s=false;if(w){var o=document.getElementById(w);if(o){s=true}}if(!s){var v=w||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var o=document.createElement("DIV");o.id="dhxSchedObj_"+new Date().getTime();o.style.width="100%";o.style.height="100%";o.style.position="relative";o.style.overflow="hidden";o.className="dhx_cal_container";o.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+v+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(o);this.dataType="scheduler";this.dataObj=u;this.dataObj.setSizes=function(){this.update_view()};u.init(o.id,r,n);o=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(e){var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";this._attachObject(g);if(!e){e={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(g,e);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};g=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(y,u,h,s,r){if(typeof(r)!="undefined"){y=r}else{var x=u||{};var w=(typeof(x.text)=="string"&&x.text.length>0?x.text:"&nbsp;");var v=(typeof(x.height)=="number"?x.height:false);var y=document.createElement("DIV");y.className="dhx_cell_statusbar_def";y.innerHTML="<div class='"+(x.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+w+"</div>";if(v!=false){y.firstChild.style.height=y.firstChild.style.lineHeight=v+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(y,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(y)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return y};dhtmlXCellObject.prototype.attachStatusBar=function(c){if(this.dataNodes.sb){return}if(c!=null&&window.dhx4.s2b(c.paging)==true){c.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",c);this.dataNodes.sb.setText=function(a){this.childNodes[0].innerHTML=a};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(a){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(g,e){if(!this.dataNodes[g]){return}this.cell.childNodes[this.conf.idx[g]].style.display=e;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var h=this;var l=this._idd;var g=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(a){h.callEvent("_onContentMouseDown",[l,a||event])}}if(typeof(window.addEventListener)=="function"){g.onload=function(){try{if(typeof(h._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",h._doOnFrameMouseDown,false)}}catch(a){}try{if(typeof(h._doOnFrameContentLoaded)=="function"){h._doOnFrameContentLoaded()}}catch(a){}}}else{g.onreadystatechange=function(c){if(this.readyState=="complete"){try{if(typeof(h._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",h._doOnFrameMouseDown)}}catch(a){}try{if(typeof(h._doOnFrameContentLoaded)=="function"){h._doOnFrameContentLoaded()}}catch(a){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var a=this.getFrame().contentWindow.document;var m=a.createElement("FORM");m.method="POST";m.action=this.conf.url_data.url;a.body.appendChild(m);var o={};if(window.dhx4.ajax.cache!=true){o["dhxr"+new Date().getTime()]="1"}for(var r in this.conf.url_data.post_data){o[r]=this.conf.url_data.post_data[r]}for(var r in o){var n=a.createElement("INPUT");n.type="hidden";n.name=r;n.value=o[r];m.appendChild(n);n=null}this.conf.url_data.post_ifr=false;m.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(e){if(e==null){if(this.dataType!="url"){return}e=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){e.onload=null;try{e.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(g){}}else{e.onreadystatechange=null;try{e.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(g){}}e=null};dhtmlXCellObject.prototype._attachObject=function(m,r,n,l,o){if(typeof(m)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[m]==1){return this["_createNode_"+m].apply(this,arguments)}if(l!=true){this._detachObject(null,true,null)}if(typeof(n)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=n}else{this.cell.childNodes[this.conf.idx.cont].appendChild(m)}m=null};dhtmlXCellObject.prototype._detachObject=function(m,r,l){this.callEvent("_onBeforeContentDetach",[]);if(m=="menu"||m=="toolbar"||m=="ribbon"||m=="sb"){var n=this.cell.childNodes[this.conf.idx[m]];n.parentNode.removeChild(n);n=null;this.conf.ofs_nodes[m=="sb"?"b":"t"][m]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(r==true){l=false}else{if(typeof(l)=="undefined"){l=document.body}else{if(typeof(l)=="string"){l=document.getElementById(l)}}}if(l===false){if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var n=this.cell.childNodes[this.conf.idx.cont];while(n.childNodes.length>0){if(l===false){n.removeChild(n.lastChild)}else{n.firstChild.style.display="none";l.appendChild(n.firstChild)}}if(this.conf.append_mode){n.style.overflow="";this.conf.append_mode=false}var o=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;l=n=null;if(this.conf.unloading!=true&&o){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(l){this.detachObject(true);var a="layout";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){a="window"}if(typeof(window.dhtmlXWindowsCell)!="undefined"&&l instanceof window.dhtmlXWindowsCell&&l.wins.w[l._idd].conf.parked){l.wins._winCellSetOpacity(l._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&l instanceof window.dhtmlXAccordionCell&&l.conf.opened==false){l._cellSetOpacity("open",false)}for(var h in l.dataNodes){this._attachObject(h,null,null,null,l.cell.childNodes[l.conf.idx[h]]);this.dataNodes[h]=l.dataNodes[h];l.dataNodes[h]=null;l.conf.ofs_nodes[h=="sb"?"b":"t"][h]=false;l._updateIdx()}this._mtbUpdBorder();if(l.dataType!=null&&l.dataObj!=null){this.dataType=l.dataType;this.dataObj=l.dataObj;while(l.cell.childNodes[l.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(l.cell.childNodes[l.conf.idx.cont].firstChild)}l.dataType=null;l.dataObj=null;if(this.dataType=="grid"){if(a=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(l.cell.childNodes[l.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(l.cell.childNodes[l.conf.idx.cont].firstChild)}}this.conf.view=l.conf.view;l.conf.view="def";for(var h in l.views){this.views[h]=l.views[h];l.views[h]=null;delete l.views[h]}l._updateIdx();l._adjustCont();this._updateIdx();this._adjustCont();if(l.conf.progress==true){l.progressOff();this.progressOn()}else{this.progressOff()}if(a=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(n,r){if(arguments.length==0||typeof(n)=="undefined"){return}var m=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(n==document.body){this.conf.fs_mode=true;this.base=n;if(this.base==document.body){var o={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=(o[this.conf.skin]!=null?o[this.conf.skin]:o.dhx_skyblue)}}else{this.base=(typeof(n)=="string"?document.getElementById(n):n)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(r!=null){this.setOffsets(r,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(e){}}}this._adjustCont=function(){var g=this.conf.ofs.t;for(var a in this.conf.ofs_nodes.t){g+=(this.conf.ofs_nodes.t[a]==true?this.dataNodes[a].offsetHeight:0)}var c=this.conf.ofs.b;for(var a in this.conf.ofs_nodes.b){c+=(this.conf.ofs_nodes.b[a]==true?this.dataNodes[a].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=g+"px";this.cont.style.height=this.base.clientHeight-g-c+"px"};this._setBaseSkin=function(a){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+a)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(m.conf.fs_tm);m.conf.fs_tm=window.setTimeout(m._doOnResizeEnd,200)};this._doOnResizeEnd=function(){m.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var a=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(a,"");this.cont=this.base=null;m=null};n=null}dhtmlXCellTop.prototype.setOffsets=function(a,m){var n=false;for(var r in a){var o=r.charAt(0);if(typeof(this.conf.ofs[o])!="undefined"&&!isNaN(a[r])){this.conf.ofs[o]=parseInt(a[r]);n=true}}if(m!==false&&typeof(this.setSizes)=="function"&&n==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(c){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(c)!="object"||c==null){c={}}c.skin=this.conf.skin;c.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(c);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();c.parnt=null;c=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(c){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(c)!="object"||c==null){c={}}c.skin=this.conf.skin;c.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(c);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();c.parnt=null;c=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(e){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(e)!="object"||e==null){e={}}e.skin=this.conf.skin;e.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(e);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var g=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){g.setSizes()});this.setSizes();e.parnt=null;e=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(c){if(this.dataNodes.sbObj){return}if(typeof(c)=="undefined"){c={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(c.text)=="string"&&c.text.length>0?c.text:"&nbsp;")+"</div>";if(typeof(c.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=c.height+"px"}this.dataNodes.sbObj.setText=function(a){this.childNodes[0].innerHTML=a};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(a){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(g,e){if(this.dataNodes[g]==null){return}this.dataNodes[g].style.display=e;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(g,e){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var g=document.createElement("DIV");g.className="dhxcelltop_progress";this.base.appendChild(g);var e=document.createElement("DIV");e.className="dhxcelltop_progress_img";this.base.appendChild(e);g=e=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var a={dhxcelltop_progress:true,dhxcelltop_progress_img:true};for(var h=0;h<this.base.childNodes.length;h++){if(typeof(this.base.childNodes[h].className)!="undefined"&&a[this.base.childNodes[h].className]==true){a[this.base.childNodes[h].className]=this.base.childNodes[h]}}for(var l in a){if(a[l]!=true){this.base.removeChild(a[l])}a[l]=null}this.conf.progress=false;a=null};dhtmlXCellTop.prototype.attachHeader=function(g,e){if(this.dataNodes.haObj!=null){return}if(typeof(g)!="object"){g=document.getElementById(g)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(e||g.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(g);g.style.visibility="visible";g=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(h,g){if(this.dataNodes.faObj!=null){return}if(typeof(h)!="object"){h=document.getElementById(h)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(g||h.offsetHeight)+"px";var l=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==l){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,l.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(h);h.style.visibility="visible";l=h=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXCalendarObject(x,E){this.i={};var C=null;if(typeof(x)=="string"){var A=document.getElementById(x)}else{var A=x}if(A&&typeof(A)=="object"&&A.tagName&&String(A.tagName).toLowerCase()!="input"){C=A}A=null;if(typeof(x)!="object"||!x.length){x=[x]}for(var D=0;D<x.length;D++){if(typeof(x[D])=="string"){x[D]=(document.getElementById(x[D])||null)}if(x[D]!=null&&x[D].tagName&&String(x[D].tagName).toLowerCase()=="input"){this.i[window.dhx4.newId()]={input:x[D]}}else{if(!(x[D] instanceof Array)&&x[D] instanceof Object&&(x[D].input!=null||x[D].button!=null)){if(x[D].input!=null&&typeof(x[D].input)=="string"){x[D].input=document.getElementById(x[D].input)}if(x[D].button!=null&&typeof(x[D].button)=="string"){x[D].button=document.getElementById(x[D].button)}this.i[window.dhx4.newId()]=x[D]}}x[D]=null}this.conf={skin:(E||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue"),zi:window.dhx4.newId(),touch:!window.dhx4.isIE,ws_first:true};this.setSkin=function(e,c){if(this.conf.skin==e&&!c){return}this.conf.skin=e;this.base.className="dhtmlxcalendar_"+this.conf.skin;this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));if(C!=null){this._hasParent=true;C.appendChild(this.base);C=null}else{document.body.appendChild(this.base)}this.setParent=function(c){if(this._hasParent){if(typeof(c)=="object"){c.appendChild(this.base)}else{if(typeof(c)=="string"){document.getElementById(c).appendChild(this.base)}}}};this.setSkin(this.conf.skin,true);this.base.onclick=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}c.cancelBubble=true};this.base.onmousedown=function(){return false};if(this.conf.touch){this.base.ontouchstart=this.base.onclick}this.loadUserLanguage=function(c){if(!this.langData[c]){return}this.lang=c;this.setWeekStartDay(this.langData[this.lang].weekstart);this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");if(this.msCont){var g=0;for(var h=0;h<this.msCont.childNodes.length;h++){for(var e=0;e<this.msCont.childNodes[h].childNodes.length;e++){this.msCont.childNodes[h].childNodes[e].innerHTML=this.langData[this.lang].monthesSNames[g++]}}}};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(c){c=c||event;c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this.base.firstChild.appendChild(this.contMonth);var w=document.createElement("UL");w.className="dhtmlxcalendar_line";this.contMonth.appendChild(w);var a=document.createElement("LI");a.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";a.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";w.appendChild(a);var y=this;a.onclick=function(e){e=e||event;if(e.type=="touchstart"&&e.preventDefault!=null){e.preventDefault()}var h=(e.target||e.srcElement);if(h.className&&h.className.indexOf("dhtmlxcalendar_month_arrow")===0){y._hideSelector();var g=(h.parentNode.firstChild==h?-1:1);var c=new Date(y._activeMonth);y._drawMonth(new Date(y._activeMonth.getFullYear(),y._activeMonth.getMonth()+g,1,0,0,0,0));y._evOnArrowClick([c,new Date(y._activeMonth)]);return}if(h.className&&h.className=="dhtmlxcalendar_month_label_month"){e.cancelBubble=true;y._showSelector("month",Math.round(h.offsetLeft+h.offsetWidth/2),h.offsetTop+h.offsetHeight+2,"selector_month",true);return}if(h.className&&h.className=="dhtmlxcalendar_month_label_year"){e.cancelBubble=true;y._showSelector("year",Math.round(h.offsetLeft+h.offsetWidth/2),h.offsetTop+h.offsetHeight+2,"selector_year",true);return}y._hideSelector()};if(this.conf.touch==true){a.ontouchstart=a.onclick}this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(c){if(c==0){c=7}this._wStart=Math.min(Math.max((isNaN(c)?1:c),1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var c=document.createElement("UL");c.className="dhtmlxcalendar_line";this.contDays.appendChild(c)}else{var c=this.contDays.firstChild}var h=this._wStart;var g=this.langData[this.lang].daysSNames;g.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var l=0;l<8;l++){if(c.childNodes[l]==null){var e=document.createElement("LI");c.appendChild(e)}else{var e=c.childNodes[l]}if(l==0){e.className="dhtmlxcalendar_cell_wn";e.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"}else{e.className="dhtmlxcalendar_cell"+(h>=6?" dhtmlxcalendar_day_weekday_cell":"")+(l==1?"_first":"");e.innerHTML=g[h];if(++h>7){h=1}}}if(this._activeMonth!=null){this._drawMonth(this._activeMonth)}};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(m){m=m||event;if(m.type=="touchstart"&&m.preventDefault!=null){m.preventDefault()}var l=(m.target||m.srcElement);if(l.parentNode!=null&&l.parentNode._date!=null){l=l.parentNode}if(l._date!=null&&!l._css_dis){var g=y._activeDate.getHours();var h=y._activeDate.getMinutes();var c=l._date;if(y.checkEvent("onBeforeChange")){if(!y.callEvent("onBeforeChange",[new Date(l._date.getFullYear(),l._date.getMonth(),l._date.getDate(),g,h)])){return}}if(y._activeDateCell!=null){y._activeDateCell._css_date=false;y._updateCellStyle(y._activeDateCell._q,y._activeDateCell._w)}var e=(y._activeDate.getFullYear()+"_"+y._activeDate.getMonth()!=c.getFullYear()+"_"+c.getMonth());y._nullDate=false;y._activeDate=new Date(c.getFullYear(),c.getMonth(),c.getDate(),g,h);y._activeDateCell=l;y._activeDateCell._css_date=true;y._activeDateCell._css_hover=false;y._updateCellStyle(y._activeDateCell._q,y._activeDateCell._w);if(e){y._drawMonth(y._activeDate)}if(y._activeInp&&y.i[y._activeInp]&&y.i[y._activeInp].input!=null){y.i[y._activeInp].input.value=y._dateToStr(new Date(y._activeDate.getTime()))}if(!y._hasParent){if(m.type=="touchstart"){window.setTimeout(function(){y._hide()},400)}else{y._hide()}}y._evOnClick([new Date(y._activeDate.getTime())])}};if(this.conf.touch==true){this.contDates.ontouchstart=this.contDates.onclick}this.contDates.onmouseover=function(e){e=e||event;var c=(e.target||e.srcElement);if(c.parentNode!=null&&c.parentNode._date!=null){c=c.parentNode}if(c._date!=null){if(y._lastHover==c||c._css_hover){return}c._css_hover=true;y._updateCellStyle(c._q,c._w);y._lastHover=c;y._evOnMouseOver([new Date(c._date.getFullYear(),c._date.getMonth(),c._date.getDate(),0,0,0,0),e]);c=null}};this.contDates.onmouseout=function(c){y._clearDayHover(c||event)};this._lastHover=null;this._clearDayHover=function(c){if(!this._lastHover){return}this._lastHover._css_hover=false;this._updateCellStyle(this._lastHover._q,this._lastHover._w);if(c!=null){y._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),c])}this._lastHover=null};for(var D=0;D<6;D++){var w=document.createElement("UL");w.className="dhtmlxcalendar_line";this.contDates.appendChild(w);for(var u=0;u<=7;u++){var a=document.createElement("LI");if(u==0){a.className="dhtmlxcalendar_cell_wn"}else{a.className="dhtmlxcalendar_cell"}w.appendChild(a)}}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){this.contTime.style.display="";this._ifrSize()};this.hideTime=function(){this.contTime.style.display="none";this._ifrSize()};var w=document.createElement("UL");w.className="dhtmlxcalendar_line";this.contTime.appendChild(w);var a=document.createElement("LI");a.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";a.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span>";w.appendChild(a);a.onclick=function(g){g=g||event;if(g.type=="touchstart"&&g.preventDefault!=null){g.preventDefault()}var e=(g.target||g.srcElement);if(e.tagName!=null&&e.tagName.toLowerCase()=="span"&&e._par==true&&e.parentNode!=null){e=e.parentNode}if(e.className&&e.className=="dhtmlxcalendar_label_hours"){g.cancelBubble=true;var h=y.contMonth.offsetHeight+y.contDays.offsetHeight+y.contDates.offsetHeight+e.offsetTop;y._showSelector("hours",Math.round(e.offsetLeft+e.offsetWidth/2),h-2,"selector_hours",true);return}if(e.className&&e.className=="dhtmlxcalendar_label_minutes"){g.cancelBubble=true;if(y._minutesInterval==1){var c=y.getFormatedDate("%i");e.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+c.charAt(0)+"</span>"+c.charAt(1);e.firstChild._par=true;y._selectorMode=1}var h=y.contMonth.offsetHeight+y.contDays.offsetHeight+y.contDates.offsetHeight+e.offsetTop;y._showSelector("minutes",Math.round(e.offsetLeft+e.offsetWidth/2),h-2,"selector_minutes",true);return}y._hideSelector()};if(this.conf.touch==true){a.ontouchstart=a.onclick}this._activeMonth=null;this._activeDate=new Date();this._activeDateCell=null;this.setDate=function(e){window.dhx4.temp_calendar={tz:null};this._nullDate=(typeof(e)=="undefined"||e===""||!e);if(!(e instanceof Date)){e=this._strToDate(String(e||""));if(e=="Invalid Date"){e=new Date()}else{this.conf.tz=window.dhx4.temp_calendar.tz}window.dhx4.temp_calendar=null}if(this.conf.tz==null){this.conf.tz=window.dhx4.date2str(e,"%P")}var c=e.getTime();if(this._isOutOfRange(c)){return}this._activeDate=new Date(c);this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleHours();this._updateVisibleMinutes()};this.getDate=function(e){if(this._nullDate){return null}var c=new Date(this._activeDate.getTime());if(e){window.dhx4.temp_calendar={tz:this.conf.tz};var g=this._dateToStr(c);window.dhx4.temp_calendar=null;return g}return c};this._drawMonth=function(U){if(!(U instanceof Date)){return}if(isNaN(U.getFullYear())){U=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)}this._activeMonth=new Date(U.getFullYear(),U.getMonth(),1,0,0,0,0);this._activeDateCell=null;var c=new Date(this._activeMonth.getTime());var S=c.getDay();var O=S-this._wStart;if(O<0){O=O+7}c.setDate(c.getDate()-O);var l=U.getMonth();var h=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime();var g=0;for(var T=0;T<6;T++){var V=this._wStart;for(var m=0;m<=7;m++){if(m==0){var o=this.getWeekNumber(new Date(c.getFullYear(),c.getMonth(),c.getDate()+g,0,0,0,0));if(o>=52&&this.conf.ws_first==true&&this._activeMonth.getMonth()==0){var n=this.getWeekNumber(new Date(c.getFullYear(),c.getMonth(),c.getDate()+g+7,0,0,0,0));if(n<o&&n>1){o=1}}this.contDates.childNodes[T].childNodes[m].innerHTML="<div class='dhtmlxcalendar_label'>"+o+"</div>"}else{var s=new Date(c.getFullYear(),c.getMonth(),c.getDate()+g,0,0,0,0);if(s.getHours()!=0){var e=(s.getHours()>12?24-s.getHours():s.getHours());s.setTime(s.getTime()+60*60*1000*e)}var P=s.getDay();var r=s.getTime();var Q="dhtmlxcalendar_label";if(this._tipData[r]!=null){if(this._tipData[r].usePopup&&typeof(window.dhtmlXPopup)=="function"){this.contDates.childNodes[T].childNodes[m].removeAttribute("title");this._initTooltipPopup()}else{this.contDates.childNodes[T].childNodes[m].setAttribute("title",this._tipData[r].text)}if(this._tipData[r].showIcon){Q+=" dhtmlxcalendar_label_title"}}else{this.contDates.childNodes[T].childNodes[m].removeAttribute("title")}this.contDates.childNodes[T].childNodes[m].innerHTML="<div class='"+Q+"'>"+s.getDate()+"</div>";this.contDates.childNodes[T].childNodes[m]._date=new Date(r);this.contDates.childNodes[T].childNodes[m]._q=T;this.contDates.childNodes[T].childNodes[m]._w=m;this.contDates.childNodes[T].childNodes[m]._css_month=(s.getMonth()==l);this.contDates.childNodes[T].childNodes[m]._css_date=(!this._nullDate&&r==h);this.contDates.childNodes[T].childNodes[m]._css_weekend=(V>=6);this.contDates.childNodes[T].childNodes[m]._css_dis=this._isOutOfRange(r);this.contDates.childNodes[T].childNodes[m]._css_holiday=(this._holidays[r]==true);this._updateCellStyle(T,m);if(r==h){this._activeDateCell=this.contDates.childNodes[T].childNodes[m]}if(++V>7){V=1}g++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(U)};this._updateCellStyle=function(c,e){var g=this.contDates.childNodes[c].childNodes[e];var h="dhtmlxcalendar_cell dhtmlxcalendar_cell";h+=(g._css_month?"_month":"");h+=(g._css_date?"_date":"");h+=(g._css_weekend?"_weekend":"");h+=(g._css_holiday?"_holiday":"");h+=(g._css_dis?"_dis":"");h+=(g._css_hover&&!g._css_dis?"_hover":"");g.className=h;g=null};this._minutesInterval=5;this._initSelector=function(c,m){if(!this._selCover){this._selCover=document.createElement("DIV");this._selCover.className="dhtmlxcalendar_selector_cover";this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement("DIV");this._sel.className="dhtmlxcalendar_selector_obj";this.base.firstChild.appendChild(this._sel);this._sel.appendChild(document.createElement("TABLE"));this._sel.firstChild.className="dhtmlxcalendar_selector_table";this._sel.firstChild.cellSpacing=0;this._sel.firstChild.cellPadding=0;this._sel.firstChild.border=0;this._sel.firstChild.appendChild(document.createElement("TBODY"));this._sel.firstChild.firstChild.appendChild(document.createElement("TR"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left";this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle";this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right";this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"};this._sel.onmouseover=function(I){I=I||event;var F=(I.target||I.srcElement);if(F._cell===true){if(y._selHover!=F){y._clearSelHover()}if(String(F.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null){F.className+=" dhtmlxcalendar_selector_cell_hover";y._selHover=F}}};this._sel.onmouseout=function(){y._clearSelHover()};this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(F){F=F||event;if(F.type=="touchstart"&&F.preventDefault!=null){F.preventDefault()}F.cancelBubble=true;y._scrollYears(-1)};this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(F){F=F||event;if(F.type=="touchstart"&&F.preventDefault!=null){F.preventDefault()}F.cancelBubble=true;y._scrollYears(1)};if(this.conf.touch==true){this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick;this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick}this._sel._ta={};this._selHover=null;this._sel.appendChild(document.createElement("DIV"));this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"}if(this._sel._ta[c]==true){return}if(c=="month"){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+m;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var o=0;for(var l=0;l<4;l++){var e=document.createElement("UL");e.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(e);for(var s=0;s<3;s++){var r=document.createElement("LI");r.innerHTML=this.langData[this.lang].monthesSNames[o];r.className="dhtmlxcalendar_selector_cell";e.appendChild(r);r._month=o;r._cell=true;this._msCells[o++]=r}}this.msCont.onclick=function(I){I=I||event;if(I.type=="touchstart"&&I.preventDefault!=null){I.preventDefault()}I.cancelBubble=true;var F=(I.target||I.srcElement);if(F._month!=null){y._hideSelector();y._updateActiveMonth();y._drawMonth(new Date(y._activeMonth.getFullYear(),F._month,1,0,0,0,0));y._doOnSelectorChange()}};if(this.conf.touch==true){this.msCont.ontouchstart=this.msCont.onclick}}if(c=="year"){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+m;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var l=0;l<4;l++){var e=document.createElement("UL");e.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(e);for(var s=0;s<3;s++){var r=document.createElement("LI");r.className="dhtmlxcalendar_selector_cell";r._cell=true;e.appendChild(r)}}this.ysCont.onclick=function(I){I=I||event;if(I.type=="touchstart"&&I.preventDefault!=null){I.preventDefault()}I.cancelBubble=true;var F=(I.target||I.srcElement);if(F._year!=null){y._hideSelector();y._drawMonth(new Date(F._year,y._activeMonth.getMonth(),1,0,0,0,0));y._doOnSelectorChange()}};if(this.conf.touch==true){this.ysCont.ontouchstart=this.ysCont.onclick}}if(c=="hours"){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+m;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);var o=0;for(var l=0;l<4;l++){var e=document.createElement("UL");e.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(e);for(var s=0;s<6;s++){var r=document.createElement("LI");r.innerHTML=this._fixLength(o,2);r.className="dhtmlxcalendar_selector_cell";e.appendChild(r);r._hours=o;r._cell=true;this._hsCells[o++]=r}}this.hsCont.onclick=function(I){I=I||event;if(I.type=="touchstart"&&I.preventDefault!=null){I.preventDefault()}I.cancelBubble=true;var F=(I.target||I.srcElement);if(F._hours!=null){y._hideSelector();y._activeDate.setHours(F._hours);y._updateActiveHours();y._updateVisibleHours();y._doOnSelectorChange();y.callEvent("onTimeChange",[new Date(y._activeDate.getTime())])}};if(this.conf.touch==true){this.hsCont.ontouchstart=this.hsCont.onclick}}if(c=="minutes"){var g=4;var n=3;var h=2;if(this._minutesInterval==1){if(this._selectorMode==1){g=2;n=3;h=1}else{g=2;n=5;h=1;m+="5"}}if(this._minutesInterval==10){g=2}if(this._minutesInterval==15){g=1;n=4;m+="4"}this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+m;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);var o=0;for(var l=0;l<g;l++){var e=document.createElement("UL");e.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(e);for(var s=0;s<n;s++){var r=document.createElement("LI");r.innerHTML=(h>1?this._fixLength(o,h):o);r.className="dhtmlxcalendar_selector_cell";e.appendChild(r);r._minutes=o;r._cell=true;this._rsCells[o]=r;o+=this._minutesInterval}}this.rsCont.onclick=function(J){J=J||event;if(J.type=="touchstart"&&J.preventDefault!=null){J.preventDefault()}J.cancelBubble=true;var K=(J.target||J.srcElement);if(K._minutes!=null){if(y._minutesInterval==1){var F=y.getFormatedDate("%i");if(y._selectorMode==1){F=K._minutes.toString()+F.charAt(1)}else{F=F.charAt(0)+K._minutes.toString()}y._activeDate.setMinutes(Number(F));y.callEvent("onTimeChange",[new Date(y._activeDate.getTime())]);y._hideSelector();if(y._selectorMode==1){y._updateVisibleMinutes(true);y._selectorMode=2;y._showSelector("minutes",y._sel._x,y._sel._y,"selector_minutes",true);y._updateActiveMinutes();return}else{y._selectorMode=1}}else{y._hideSelector();y._activeDate.setMinutes(K._minutes);y._updateActiveMinutes();y.callEvent("onTimeChange",[new Date(y._activeDate.getTime())])}y._updateVisibleMinutes();y._doOnSelectorChange()}};if(this.conf.touch==true){this.rsCont.ontouchstart=this.rsCont.onclick}}this._sel._ta[c]=true};this._showSelector=function(c,l,m,g,e){if(e===true&&this._sel!=null&&this._isSelectorVisible()&&c==this._sel._t){this._hideSelector();return}if(this.conf.skin=="dhx_terrace"){l+=12}if(!this._sel||!this._sel._ta[c]){this._initSelector(c,g)}if(c!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")}this._sel._x=l;this._sel._y=m;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=c;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+g;this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=(c=="year"?"":"none");var h=Math.max(0,l-Math.round(this._sel.offsetWidth/2));if(h+this._sel.offsetWidth>this._sel.parentNode.offsetWidth){h=this._sel.parentNode.offsetWidth-this._sel.offsetWidth}this._sel.style.left=h+"px";if(c=="hours"||c=="minutes"){this._sel.style.top=m-this._sel.offsetHeight+"px"}else{this._sel.style.top=m+"px"}this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(c)};this._doOnSelectorShow=function(c){if(c=="month"){this._updateActiveMonth()}if(c=="year"){this._updateYearsList(this._activeMonth)}if(c=="hours"){this._updateActiveHours()}if(c=="minutes"){this._updateActiveMinutes()}};this._hideSelector=function(c){if(!this._sel){return}this._sel.style.display="none";this._sel.style.visible="hidden";this._selCover.style.display="none";if(this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i");this._unloadSelector("minutes")}};this._isSelectorVisible=function(){if(!this._sel){return false}return(this._sel.style.display!="none")};this._doOnSelectorChange=function(c){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),c===true])};this._clearSelHover=function(){if(!this._selHover){return}this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,""));this._selHover=null};this._unloadSelector=function(c){if(!this._sel){return}if(!this._sel._ta[c]){return}if(c=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(var e in this._msCells){this._msCells[e]._cell=null;this._msCells[e]._month=null;this._msCells[e].parentNode.removeChild(this._msCells[e]);this._msCells[e]=null}this._msCells=null;while(this.msCont.childNodes.length>0){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(c=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var e in this._ysCells){this._ysCells[e]._cell=null;this._ysCells[e]._year=null;this._ysCells[e].parentNode.removeChild(this._ysCells[e]);this._ysCells[e]=null}this._ysCells=null;while(this.ysCont.childNodes.length>0){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(c=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(var e in this._hsCells){this._hsCells[e]._cell=null;this._hsCells[e]._hours=null;this._hsCells[e].parentNode.removeChild(this._hsCells[e]);this._hsCells[e]=null}this._hsCells=null;while(this.hsCont.childNodes.length>0){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(c=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(var e in this._rsCells){this._rsCells[e]._cell=null;this._rsCells[e]._minutes=null;this._rsCells[e].parentNode.removeChild(this._rsCells[e]);this._rsCells[e]=null}this._rsCells=null;while(this.rsCont.childNodes.length>0){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[c]=null};this.setMinutesInterval=function(c){if(!(c==1||c==5||c==10||c==15)){return}this._minutesInterval=c;this._unloadSelector("minutes")};this._updateActiveMonth=function(){if(typeof(this._msActive)!="undefined"&&typeof(this._msCells[this._msActive])!="undefined"){this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var c=this._activeMonth.getFullYear();if(this._ysCells[c]){this._ysCells[c].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateYearsList=function(e){for(var g in this._ysCells){this._ysCells[g]=null;delete this._ysCells[g]}var c=12*Math.floor(e.getFullYear()/12);for(var l=0;l<4;l++){for(var h=0;h<3;h++){this.ysCont.childNodes[l].childNodes[h].innerHTML=c;this.ysCont.childNodes[l].childNodes[h]._year=c;this.ysCont.childNodes[l].childNodes[h].className="dhtmlxcalendar_selector_cell";this._ysCells[c++]=this.ysCont.childNodes[l].childNodes[h]}}this._updateActiveYear()};this._scrollYears=function(c){var e=(c<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+c;var g=new Date(e,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(g)};this._updateActiveHours=function(){if(typeof(this._hsActive)!="undefined"&&typeof(this._hsCells[this._hsActive])!="undefined"){this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&&typeof(this._rsActive)!="undefined"&&typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"}if(this._minutesInterval==1){this._rsActive=(this.getFormatedDate("%i").toString()).charAt(this._selectorMode==1?0:1)}else{this._rsActive=this._activeDate.getMinutes()}if(typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateVisibleMinutes=function(e){var c=this._fixLength(this._activeDate.getMinutes(),2).toString();if(e==true){c=c.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+c.charAt(1)+"</span>"}this.contTime.firstChild.firstChild.childNodes[3].innerHTML=c;if(e==true){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=true}};this._fixLength=function(c,e){while(String(c).length<e){c="0"+String(c)}return c};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(c){var e={};if(this._strToDate!=null){for(var h in this.i){if(this.i[h].input!=null&&this.i[h].input.value.length>0){var l=this._strToDate(this.i[h].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");if(l instanceof Date){e[h]=l}}}}this._dateFormat=c;var g=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(n){var m=n.replace(/%/,"");switch(m){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+y.langData[y.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+y.langData[y.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return n});this._dateFormatRE=new RegExp(g,"i");for(var h in e){this.i[h].input.value=this._dateToStr(e[h])}e=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(e){if(!this._dateFormatRE||!e.match(this._dateFormatRE)){return}if(e==this.getFormatedDate()){return}var c=this._strToDate(e);if(!(c instanceof Date)){return}if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())])){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}return}}this._nullDate=false;this._activeDate=c;this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();if(this._sel&&this._isSelectorVisible()){this._doOnSelectorShow(this._sel._t)}this._doOnSelectorChange(true)};this.showMonth=function(c){if(typeof(c)=="string"){c=this._strToDate(c)}if(!(c instanceof Date)){return}this._drawMonth(c)};this.setFormatedDate=function(c,l,h,e){var g=this._strToDate(l,c);if(e){return g}this.setDate(g)};this.getFormatedDate=function(e,c){if(!(c&&c instanceof Date)){if(this._nullDate){return""}c=new Date(this._activeDate)}return this._dateToStr(c,e)};this.getWeekNumber=function(h){if(typeof(h)=="string"){h=this._strToDate(h)}if(!(h instanceof Date)){return"Invalid Date"}if(typeof(this._ftDay)=="undefined"){this._ftDay=4}var s=this._wStart;var n=s+7;var M=4;var K=new Date(h.getFullYear(),0,1,0,0,0,0);var r=K.getDay();if(r==0){r=7}if(M<s){M+=7;r+=7}var c=0;if(r>=s&&r<=M){}else{c=1}var e=r-s;var N=new Date(h.getFullYear(),0,1-e+c*7,0,0,0,0);var m=604800000;var L=new Date(h.getFullYear(),h.getMonth(),h.getDate()+1,0,0,0,0);var o=Math.ceil((L.getTime()-N.getTime())/m);if(o==0){var g=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0);var l=g.getDay()-this._wStart;if(l<0){l=l+7}g.setDate(g.getDate()-l);o=this.getWeekNumber(g)}return o};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(c){if(!c&&this._hasParent){this._show();return}if(typeof(c)=="object"&&typeof(c._dhtmlxcalendar_uid)!="undefined"&&this.i[c._dhtmlxcalendar_uid]==c){this._show(c._dhtmlxcalendar_uid);return}if(typeof(c)=="undefined"){for(var e in this.i){if(!c){c=e}}}if(!c){return}this._show(c)};this.hide=function(){if(this._isVisible()){this._hide()}};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(c,e){this._px=null;this._py=null;if(c=="right"||c=="bottom"){this.pos=c}else{this.pos="int";if(typeof(c)!="undefined"&&!isNaN(c)){this.base.style.left=c+"px";this._px=c}if(typeof(e)!="undefined"&&!isNaN(e)){this.base.style.top=e+"px";this._py=e}this._ifrSize()}};this._show=function(n,l){if(l===true&&this._activeInp==n&&this._isVisible()){this._hide();return}this.base.style.visibility="hidden";this.base.style.display="";if(!n){if(this._px&&this._py){this.base.style.left=this._px+"px";this.base.style.top=this._py+"px"}else{this.base.style.left="0px";this.base.style.top="0px"}}else{if(this.base.className.indexOf("dhtmlxcalendar_in_input")==-1){this.base.className+=" dhtmlxcalendar_in_input"}var h=(this.i[n].input||this.i[n].button);var m=window.dhx4.screenDim();var c={top:window.dhx4.absTop(h),left:window.dhx4.absLeft(h)};if(this.pos=="right"){this.base.style.left=c.left+h.offsetWidth+"px";this.base.style.top=Math.min(c.top,m.bottom-this.base.offsetHeight)+"px"}else{if(this.pos=="bottom"){var o=c.top+h.offsetHeight+1;if(o+this.base.offsetHeight>m.bottom){var g=c.top-this.base.offsetHeight;if(g>=-20){o=g}}var e=c.left;if(e+this.base.offsetWidth>m.right){e=Math.max(0,c.left+h.offsetWidth-this.base.offsetWidth)}this.base.style.left=e+"px";this.base.style.top=o+"px"}else{this.base.style.left=(this._px||0)+"px";this.base.style.top=(this._py||0)+"px"}}this._activeInp=n;h=null}this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();if(this._ifr){this._ifr.style.display=""}this.callEvent("onShow",[])};this._hide=function(){if(this._lastHover!=null){this._clearDayHover()}this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);if(this.base.className.indexOf("dhtmlxcalendar_in_input")>=0){this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")}this._activeInp=null;if(this._ifr){this._ifr.style.display="none"}this.callEvent("onHide",[])};this._isVisible=function(){return(this.base.style.display!="none")};this._rangeActive=false;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(e){var c=this._extractDates(e);for(var g=0;g<c.length;g++){this._rangeSet[new Date(c[g].getFullYear(),c[g].getMonth(),c[g].getDate(),0,0,0,0).getTime()]=true}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(g){if(g==null){this._clearHolidays()}else{if(g!=null){var c=this._extractDates(g);for(var e=0;e<c.length;e++){this._holidays[new Date(c[e].getFullYear(),c[e].getMonth(),c[e].getDate(),0,0,0,0).getTime()]=true}}}this._drawMonth(this._activeMonth)};this._extractDates=function(g){if(typeof(g)=="string"||g instanceof Date){g=[g]}var h=[];for(var c=0;c<g.length;c++){if(typeof(g[c])=="string"){var l=g[c].split(",");for(var e=0;e<l.length;e++){h.push(this._strToDate(l[e]))}}else{if(g[c] instanceof Date){h.push(g[c])}}}return h};this._clearRange=function(){this._rangeActive=false;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var c in this._rangeSet){this._rangeSet[c]=null;delete this._rangeSet[c]}};this._clearHolidays=function(){for(var c in this._holidays){this._holidays[c]=null;delete this._holidays[c]}};this._isOutOfRange=function(e){if(this._rangeSet[e]==true){return true}if(this._rangeActive){if(this._rangeType=="in"&&(e<this._rangeFrom||e>this._rangeTo)){return true}if(this._rangeType=="out"&&(e>=this._rangeFrom&&e<=this._rangeTo)){return true}if(this._rangeType=="from"&&e<this._rangeFrom){return true}if(this._rangeType=="to"&&e>this._rangeTo){return true}}var c=new Date(e);if(this._rangeWeek){if(this._rangeWeekData[c.getDay()]===true){return true}}if(this._rangeMonth){if(this._rangeMonthData[c.getDate()]===true){return true}}if(this._rangeYear){if(this._rangeYearData[c.getMonth()+"_"+c.getDate()]===true){return true}}return false};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(e,g,c){var h=false;if(e!=null&&g!=null){if(!(e instanceof Date)){e=this._strToDate(e)}if(!(g instanceof Date)){g=this._strToDate(g)}if(e.getTime()>g.getTime()){return}this._rangeFrom=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="in";h=true}if(!h&&e!=null&&g==null){if(!(e instanceof Date)){e=this._strToDate(e)}this._rangeFrom=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime();this._rangeTo=null;if(c===true){this._rangeFrom++}this._rangeActive=true;this._rangeType="from";h=true}if(!h&&e==null&&g!=null){if(!(g instanceof Date)){g=this._strToDate(g)}this._rangeFrom=null;this._rangeTo=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0).getTime();if(c===true){this._rangeTo--}this._rangeActive=true;this._rangeType="to";h=true}if(h){this._drawMonth(this._activeMonth)}};this.setInsensitiveRange=function(e,c){if(e!=null&&c!=null){if(!(e instanceof Date)){e=this._strToDate(e)}if(!(c instanceof Date)){c=this._strToDate(c)}if(e.getTime()>c.getTime()){return}this._rangeFrom=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(e!=null&&c==null){this.setSensitiveRange(null,e,true);return}if(e==null&&c!=null){this.setSensitiveRange(c,null,true);return}};this.disableDays=function(l,c){if(l=="week"){if(typeof(c)!="object"&&typeof(c.length)=="undefined"){c=[c]}if(!this._rangeWeekData){this._rangeWeekData={}}for(var h in this._rangeWeekData){this._rangeWeekData[h]=false;delete this._rangeWeekData[h]}for(var e=0;e<c.length;e++){this._rangeWeekData[c[e]]=true;if(c[e]==7){this._rangeWeekData[0]=true}}this._rangeWeek=true}if(l=="month"){if(typeof(c)!="object"&&typeof(c.length)=="undefined"){c=[c]}if(!this._rangeMonthData){this._rangeMonthData={}}for(var h in this._rangeMonthData){this._rangeMonthData[h]=false;delete this._rangeMonthData[h]}for(var e=0;e<c.length;e++){this._rangeMonthData[c[e]]=true}this._rangeMonth=true}if(l=="year"){var g=this._extractDates(c);if(!this._rangeYearData){this._rangeYearData={}}for(var h in this._rangeYearData){this._rangeYearData[h]=false;delete this._rangeYearData[h]}for(var e=0;e<g.length;e++){this._rangeYearData[g[e].getMonth()+"_"+g[e].getDate()]=true}this._rangeYear=true}this._drawMonth(this._activeMonth)};this.enableDays=function(c){if(c=="week"){this._rangeWeek=false}if(c=="month"){this._rangeMonth=false}if(c=="year"){this._rangeYear=false}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=false;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(l,n,e,h){var g=this._extractDates(l);for(var c=0;c<g.length;c++){var m=new Date(g[c].getFullYear(),g[c].getMonth(),g[c].getDate(),0,0,0,0).getTime();this._tipData[m]={text:n,showIcon:e,usePopup:h}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(h){var g=this._extractDates(h);for(var e=0;e<g.length;e++){var c=new Date(g[e].getFullYear(),g[e].getMonth(),g[e].getDate(),0,0,0,0).getTime();this._tipData[c]=null;delete this._tipData[c]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(this._tipEvs){return}this.attachEvent("onMouseOver",function(e){var c=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime();if(this._tipData[c]!=null){if(this._tipTM){window.clearTimeout(this._tipTM)}this._tipCellDate=e;this._tipCellDim=this.getCellDimension(e);this._tipText=this._tipData[c].text;this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}});this.attachEvent("onMouseOut",this._hideTooltipPopup);this._tipEvs=true};this._showTooltipPopup=function(c, e, l, h, g){if(!y._tipPopup){y._tipPopup=new dhtmlXPopup({mode:"header.html"})}y._tipPopup.attachHTML(y._tipText);y._tipPopup.show(y._tipCellDim.x,y._tipCellDim.y,y._tipCellDim.w,y._tipCellDim.h);y.callEvent("onPopupShow",[y._tipCellDate])};this._hideTooltipPopup=function(){if(this._tipTM){window.clearTimeout(this._tipTM)}if(this._tipPopup!=null&&this._tipPopup.isVisible()){this._tipPopup.hide();this.callEvent("onPopupHide",[this._tipCellDate])}};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(h){if(typeof(h)=="string"){h=this._strToDate(h)}if(!(h instanceof Date)){return null}var e=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0).getTime();var l=null;for(var m=0;m<this.contDates.childNodes.length;m++){for(var g=0;g<this.contDates.childNodes[m].childNodes.length;g++){var c=this.contDates.childNodes[m].childNodes[g];if(c._date!=null&&c._date.getTime()==e){l={x:window.dhx4.absLeft(c),y:window.dhx4.absTop(c),w:c.offsetWidth,h:c.offsetHeight}}c=null}}return l};this._updateFromInput=function(c){if(this._nullInInput&&((c.value).replace(/\s/g,"")).length==0){if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[null])){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}return}}this.setDate(null)}else{this._updateDateStr(c.value)}c=null};this._doOnClick=function(e){e=e||event;var c=(e.target||e.srcElement);if(c._dhtmlxcalendar_uid&&c._dhtmlxcalendar_uid!=y._activeInp&&y._isVisible()&&y._activeInp){y._hide();return}if(!c._dhtmlxcalendar_uid||!y.i[c._dhtmlxcalendar_uid]){if(y._isSelectorVisible()){y._hideSelector()}else{if(!y._hasParent&&y._isVisible()){y._hide()}}}};this._doOnKeyDown=function(c){c=c||event;if(c.keyCode==27||c.keyCode==13){if(y._isSelectorVisible()){y._hideSelector()}else{if(y._isVisible()&&!y._hasParent){y._hide()}}}};this._doOnInpClick=function(e){e=e||event;if(e.type=="touchstart"&&e.preventDefault!=null){e.preventDefault()}var c=(e.target||e.srcElement);if(!c._dhtmlxcalendar_uid){return}if(!y._listenerEnabled){y._updateFromInput(c)}y._show(c._dhtmlxcalendar_uid,true)};this._doOnInpKeyUp=function(e){e=e||event;var c=(e.target||e.srcElement);if(e.keyCode==13||!c._dhtmlxcalendar_uid){return}if(!y._listenerEnabled){y._updateFromInput(c)}};this._doOnBtnClick=function(e){e=e||event;if(e.type=="touchstart"&&e.preventDefault!=null){e.preventDefault()}var c=(e.target||e.srcElement);if(!c._dhtmlxcalendar_uid){return}if(y.i[c._dhtmlxcalendar_uid].input!=null){y._updateFromInput(y.i[c._dhtmlxcalendar_uid].input)}y._show(c._dhtmlxcalendar_uid,true)};this._doOnUnload=function(){if(y&&y.unload){y.unload()}};if(typeof(window.addEventListener)=="function"){document.body.addEventListener("click",y._doOnClick,false);window.addEventListener("keydown",y._doOnKeyDown,false);window.addEventListener("unload",y._doOnUnload,false);if(this.conf.touch==true){document.body.addEventListener("touchstart",y._doOnClick,false)}}else{document.body.attachEvent("onclick",y._doOnClick);document.body.attachEvent("onkeydown",y._doOnKeyDown);window.attachEvent("onunload",y._doOnUnload)}this.attachObj=function(c){var e=window.dhx4.newId();if(typeof(c)=="string"){this.i[e]={input:document.getElementById(c)}}else{if(typeof(c.tagName)!="undefined"){this.i[e]={input:c}}else{if(typeof(c)=="object"&&(c.input!=null||c.button!=null)){this.i[e]={};if(c.input!=null){this.i[e].input=(typeof(c.input)=="string"?document.getElementById(c.input):c.input)}if(c.button!=null){this.i[e].button=(typeof(c.button)=="string"?document.getElementById(c.button):c.button)}}}}this._attachEventsToObject(e);return e};this.detachObj=function(c){var e=null;if(this.i[c]!=null){e=c}else{if(typeof(c)=="string"){c=document.getElementById(c);e=c._dhtmlxcalendar_uid}else{if(typeof(c.tagName)!="undefined"){e=c._dhtmlxcalendar_uid}else{if(typeof(c)=="object"&&(c.input!=null||c.button!=null)){if(e==null&&c.input!=null){e=(typeof(c.input)=="string"?document.getElementById(c.input):c.input)._dhtmlxcalendar_uid}if(e==null&&c.button!=null){e=(typeof(c.button)=="string"?document.getElementById(c.button):c.button)._dhtmlxcalendar_uid}}}}}if(e!=null&&this.i[e]!=null){this._detachEventsFromObject(e);for(var g in this.i[g]){this.i[e][g]._dhtmlxcalendar_uid=null;this.i[e][g]=null;delete this.i[e][g]}this.i[e]=null;delete this.i[e];return true}return false};this._attachEventsToObject=function(c){if(this.i[c].button!=null){this.i[c].button._dhtmlxcalendar_uid=c;if(typeof(window.addEventListener)=="function"){this.i[c].button.addEventListener("click",y._doOnBtnClick,false);if(this.conf.touch==true){this.i[c].button.addEventListener("touchstart",y._doOnBtnClick,false)}}else{this.i[c].button.attachEvent("onclick",y._doOnBtnClick)}}else{if(this.i[c].input!=null){this.i[c].input._dhtmlxcalendar_uid=c;if(typeof(window.addEventListener)=="function"){this.i[c].input.addEventListener("click",y._doOnInpClick,false);this.i[c].input.addEventListener("keyup",y._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[c].input.addEventListener("touchstart",y._doOnInpClick,false)}}else{this.i[c].input.attachEvent("onclick",y._doOnInpClick);this.i[c].input.attachEvent("onkeyup",y._doOnInpKeyUp)}}}};this._detachEventsFromObject=function(c){if(this.i[c].button!=null){if(typeof(window.addEventListener)=="function"){this.i[c].button.removeEventListener("click",y._doOnBtnClick,false);if(this.conf.touch==true){this.i[c].button.removeEventListener("touchstart",y._doOnBtnClick,false)}}else{this.i[c].button.detachEvent("onclick",y._doOnBtnClick)}}else{if(this.i[c].input!=null){if(typeof(window.addEventListener)=="function"){this.i[c].input.removeEventListener("click",y._doOnInpClick,false);this.i[c].input.removeEventListener("keyup",y._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[c].input.removeEventListener("touchstart",y._doOnInpClick,false)}}else{this.i[c].input.detachEvent("onclick",y._doOnInpClick);this.i[c].input.detachEvent("onkeyup",y._doOnInpKeyUp)}}}};this.enableListener=function(c){if(!c){return}if(typeof(window.addEventListener)=="function"){c.addEventListener("focus",y._listenerEvFocus,false);c.addEventListener("blur",y._listenerEvBlur,false)}else{c.attachEvent("onfocus",y._listenerEvFocus);c.attachEvent("onblur",y._listenerEvBlur)}c=null};this.disableListener=function(c){if(!c){return}c._f0=false;if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(window.addEventListener)=="function"){c.removeEventListener("focus",y._listenerEvFocus,false);c.removeEventListener("blur",y._listenerEvBlur,false)}else{c.detachEvent("onfocus",y._listenerEvFocus);c.detachEvent("onblur",y._listenerEvBlur)}c=null};this._startListener=function(c){if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(c._v1)=="undefined"){c._v1=c.value}if(c._v1!=c.value){this._updateFromInput(c);c._v1=c.value}if(c._f0){this._tmListener=window.setTimeout(function(){y._startListener(c)},100)}};this._listenerEvFocus=function(e){e=e||event;var c=e.target||e.srcElement;c._f0=true;y._startListener(c);c=null};this._listenerEvBlur=function(e){e=e||event;var c=e.target||e.srcElement;c._f0=false;c=null};for(var v in this.i){this._attachEventsToObject(v)}window.dhx4._eventable(this);this._evOnArrowClick=function(c){return this.callEvent("onArrowClick",c)};this._evOnClick=function(c){return this.callEvent("onClick",c)};this._evOnMouseOut=function(c){return this.callEvent("onMouseOut",c)};this._evOnMouseOver=function(c){return this.callEvent("onMouseOver",c)};this.unload=function(){this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;if(this._tmListener){window.clearTimeout(this._tmListener)}this._tmListener=null;if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("click",y._doOnClick,false);window.removeEventListener("keydown",y._doOnKeyDown,false);window.removeEventListener("unload",y._doOnUnload,false);if(this.conf.touch==true){document.body.removeEventListener("touchstart",y._doOnClick,false)}}else{document.body.detachEvent("onclick",y._doOnClick);document.body.detachEvent("onkeydown",y._doOnKeyDown);window.detachEvent("onunload",y._doOnKeyDown)}this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(var c in this.i){this.i[c]._dhtmlxcalendar_uid=null;this._detachEventsFromObject(c);this.disableListener(this.i[c].input);this.i[c]=null;delete this.i[c]}this.i=null;this._doOnInpClick=null;this._doOnInpKeyUp=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;while(this.contMonth.firstChild.firstChild.childNodes.length>0){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);this.contMonth=null;while(this.contDays.firstChild.childNodes.length>0){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;this.contDates.onmouseout=null;while(this.contDates.childNodes.length>0){while(this.contDates.lastChild.childNodes.length>0){this.contDates.lastChild.lastChild._css_date=null;this.contDates.lastChild.lastChild._css_month=null;this.contDates.lastChild.lastChild._css_weekend=null;this.contDates.lastChild.lastChild._css_hover=null;this.contDates.lastChild.lastChild._date=null;this.contDates.lastChild.lastChild._q=null;this.contDates.lastChild.lastChild._w=null;this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.ontouchstart=null;while(this.contTime.firstChild.firstChild.childNodes.length>0){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this.contTime=null;this._lastHover=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");if(this._selCover){this._selCover.parentNode.removeChild(this._selCover);this._selCover=null}if(this._sel){for(var c in this._sel._ta){this._sel._ta[c]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;this._sel.onmouseout=null;while(this._sel.firstChild.firstChild.firstChild.childNodes.length>0){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null;this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);while(this._sel.childNodes.length>0){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;if(this._tipPopup!=null){this._tipPopup.unload();this._tipPopup=null}for(var c in this){delete this[c]}c=y=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(m){var r=this;var n=function(a){return(String(a).length==1?"0"+String(a):a)};var l=function(c,a){return"<span class='dhtmlxcalendar_month_label_"+c+"'>"+a+"</span>"};var o=String(this.langData[this.lang].hdrformat||("%F %Y")).replace(/%[a-z]/gi,function(a){switch(a){case"%m":return l("month",n(m.getMonth()+1));case"%n":return l("month",m.getMonth()+1);case"%M":return l("month",r.langData[r.lang].monthesSNames[m.getMonth()]);case"%F":return l("month",r.langData[r.lang].monthesFNames[m.getMonth()]);case"%y":return l("year",n(m.getYear()%100));case"%Y":return l("year",m.getFullYear());case"%%":return"%";default:return a}});r=n=l=null;return o};dhtmlXCalendarObject.prototype.enableIframe=function(c){if(c==true){if(!this._ifr){this._ifr=document.createElement("IFRAME");this._ifr.frameBorder=0;this._ifr.border=0;this._ifr.setAttribute("src","javascript:false;");this._ifr.className="dhtmlxcalendar_ifr";this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")};this.base.parentNode.insertBefore(this._ifr,this.base);this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr);this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left;this._ifr.style.top=this.base.style.top;this._ifr.style.width=this.base.offsetWidth+"px";this._ifr.style.height=this.base.offsetHeight+"px"}};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var c=this.langData[this.lang];return{monthFullName:c.monthesFNames,monthShortName:c.monthesSNames,dayFullName:c.daysFNames,dayShortName:c.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(g,e){return window.dhx4.str2date(g,e||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(g,e){return window.dhx4.date2str(g,e||this._dateFormat,this._dateStrings())};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(g){var e=this;this.leftCalendar=new dhtmlXCalendarObject(g);this.leftCalendar.hideTime();this.rightCalendar=new dhtmlXCalendarObject(g);this.rightCalendar.hideTime();this.leftCalendar.attachEvent("onClick",function(a){e._updateRange("rightCalendar",a,null);e._evOnClick(["left",a])});this.rightCalendar.attachEvent("onClick",function(a){e._updateRange("leftCalendar",null,a);e._evOnClick(["right",a])});this.leftCalendar.attachEvent("onBeforeChange",function(a){return e._evOnBeforeChange(["left",a])});this.rightCalendar.attachEvent("onBeforeChange",function(a){return e._evOnBeforeChange(["right",a])});this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()};this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()};this.setDateFormat=function(a){this.leftCalendar.setDateFormat(a);this.rightCalendar.setDateFormat(a)};this.setDates=function(a,c){if(a!=null){this.leftCalendar.setDate(a)}if(c!=null){this.rightCalendar.setDate(c)}this._updateRange()};this._updateRange=function(l,a,c){if(arguments.length==3){(l=="leftCalendar"?this.leftCalendar:this.rightCalendar).setSensitiveRange(a,c)}else{this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate());this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null)}};this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)};this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();this.leftCalendar=this.rightCalendar=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.getFormatedDate=null;this.unload=null;e=null};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnBeforeChange=function(a){return this.callEvent("onBeforeChange",a)};window.dhx4._eventable(this);return this};function dhtmlXCombo(x,a,C,v,y){var w=this;var A=null;var E=null;if(typeof(x)=="object"&&!x.tagName){A=x;x=A.parent;C=A.width;a=A.name;v=A.mode;E=A.skin}this.cont=(typeof(x)=="string"?document.getElementById(x):x);this.conf={skin:null,form_name:a||"dhxcombo",combo_width:(parseInt(C)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:false,combo_focus:false,opts_type:(typeof(v)=="string"&&typeof(this.modes[v])!="undefined"?v:"option"),opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:true,allow_empty_value:true,enabled:true,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0),ro_mode:false,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:true,template:{input:"#text#",option:"#text#"},f_func:null,f_mode:false,f_url:false,f_cache:false,f_cache_data:{},f_dyn:false,f_dyn_end:false,f_mask:"",f_ac:true,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:false,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:false,clear_blur:false,clear_bsp:false,clear_key:false,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=(this.modes[this.conf.opts_type].image==true);this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list._listId=window.dhx4.newId();this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=function(){if(w.conf.s_tm!=null){window.clearTimeout(w.conf.s_tm)}w.conf.s_tm=window.setTimeout(w._doOnListScrollAction,w.conf.s_time)};this._doOnListScrollAction=function(){w.conf.s_tm=null;if(w.conf.s_mode=="scroll"&&w.list.scrollHeight-w.list.scrollTop-10<w.list.clientHeight){w._subloadRequest()}};if(typeof(window.addEventListener)=="function"){this.list.addEventListener("scroll",this._doOnListScroll,false)}else{this.list.attachEvent("onscroll",this._doOnListScroll)}this.setSkin(E||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue");this._updateTopImage=function(c){if(!this.conf.combo_image){return}if(c!=null){this.base.lastChild.innerHTML=this.t[c].obj.getTopImage(this.t[c].item,this.conf.enabled)}else{this.base.lastChild.innerHTML=this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)}};this._filterOpts=function(g){if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}var m=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last==m.toLowerCase()){this._checkForMatch();return}if(this.conf.f_url!=null&&this.checkEvent("onDynXLS")){this.conf.f_server_last=m.toLowerCase();this.callEvent("onDynXLS",[m]);return}if(this.conf.f_url!=null){if(m.length==0){this.conf.f_server_last=m.toLowerCase();this.clearAll();return}if(this.conf.f_cache==true&&this.conf.f_cache_data[m]!=null){this.clearAll();this.conf.f_server_last=m.toLowerCase();for(var n=0;n<this.conf.f_cache_data[m].data.length;n++){this.load(this.conf.f_cache_data[m].data[n])}if(this.conf.f_dyn){this.conf.f_dyn_end=this.conf.f_cache_data[m].dyn_end;this.conf.f_mask=this.conf.f_cache_data[m].mask}if(g!==true){this._showList(true);this._checkForMatch()}}else{this.conf.f_server_tm=window.setTimeout(function(){w.conf.f_server_last=m.toLowerCase();w.conf.f_mask=m;var H="mask="+encodeURIComponent(m);if(w.conf.f_dyn){H+="&pos=0";w.conf.f_dyn_end=false}var s=function(L){if(w.conf.f_cache){if(!w.conf.f_cache_data[m]){w.conf.f_cache_data[m]={data:[],dyn_end:false,mask:m}}w.conf.f_cache_data[m].data.push(L.xmlDoc.responseXML)}w.clearAll();w.load(L.xmlDoc.responseXML);var M=(w.base.offsetWidth>0&&w.base.offsetHeight>0);if(M==true&&w.conf.enabled==true&&w.conf.combo_focus==true&&g!==true){if(w.conf.f_ac&&w.conf.f_mode=="start"&&w.conf.clear_bsp==false&&w.list.firstChild!=null){var N=w.list.firstChild._optId;var F=String(w.t[N].obj.getText(w.list.firstChild,true));if(m==w.base.firstChild.value&&String(F).toLowerCase().indexOf(String(m).toLowerCase())===0){w.base.firstChild.value=F;w.conf.f_ac_text=F.substr(m.length);w._selectRange(m.length,F.length)}}w._showList(true);w._checkForMatch()}s=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(w.conf.f_url,H,s)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(w.conf.f_url+(String(w.conf.f_url).indexOf("?")>=0?"&":"?")+H,s)}}},200)}}else{this.conf.f_server_last=m.toLowerCase();var o=(m.length==0?true:new RegExp((this.conf.f_mode=="start"?"^":"")+String(m).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&"),"i"));var l=null;for(var e in this.t){var r=false;if(o!==true){if(this.conf.f_func!=null){var h=this._getOption(this.t[e].item._optId,n);r=(this.conf.f_func.apply(window,[m,h])==true)}else{var c=this.t[e].obj.getText(this.t[e].item,true);r=(o.test(c)==true)}}if(o===true||r==true){this.t[e].item.style.display="";if(l==null&&m.length>0){l=String(this.t[e].obj.getText(this.t[e].item,true))}}else{this.t[e].item.style.display="none"}}if(this.conf.f_ac&&this.conf.f_mode=="start"&&this.conf.clear_bsp==false&&l!=null){this.conf.f_ac_text=l.replace(new RegExp("^"+m,"i"),"");this.base.firstChild.value=l;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}if(this.conf.f_mode=="between"&&this.conf.clear_bsp==true){this._checkForMatch(true)}if(g!==true){this._showList(true);this._checkForMatch()}}};this._searchRO=function(h){if(this.conf.ro_tm){window.clearTimeout(this.conf.ro_tm)}this.conf.ro_text+=h;this._showList();for(var g=0;g<this.list.childNodes.length;g++){var e=this.list.childNodes[g]._optId;var c=String(this.t[e].obj.getText(this.list.childNodes[g],true)).toLowerCase();if(c.indexOf(this.conf.ro_text)===0){this._setSelected(e,true,true);this._confirmSelect("script",false);break}}this.conf.ro_tm=window.setTimeout(function(){w.conf.ro_text=""},this.conf.ro_tm_time)};this._initObj=function(c){if(typeof(c.template)!="undefined"){this.setTemplate(c.template)}if(c.add!=true&&this.conf.f_loading!=true){this.clearAll(false)}this.addOption(c.options)};this._xmlToObj=function(c,s,S){var X={add:false,options:[]};var n=(s==true?c:c.getElementsByTagName("complete"));if(n.length>0){if(window.dhx4.s2b(n[0].getAttribute("add"))==true){X.add=true}var r=n[0].childNodes;for(var U=0;U<r.length;U++){if(typeof(r[U].tagName)!="undefined"){if(String(r[U].tagName).toLowerCase()=="template"){var e={};for(var Y=0;Y<r[U].childNodes.length;Y++){var Q=r[U].childNodes[Y];if(Q.tagName!=null){var m=Q.tagName;if(typeof(this.conf.template[m])!="undefined"){e[m]=window.dhx4._xmlNodeValue(Q)}if(m=="columns"){for(var h=0;h<Q.childNodes.length;h++){var o=Q.childNodes[h];if(o.tagName!=null&&o.tagName=="column"){var V={};for(var g in {width:1,css:1,header:1,option:1}){if(o.getAttribute(g)!=null){V[g]=o.getAttribute(g)}}for(var g in {header:1,option:1}){var l=o.getElementsByTagName(g);if(l[0]!=null&&l[0].firstChild!=null){V[g]=window.dhx4._xmlNodeValue(l[0])}}if(e.columns==null){e.columns=[]}e.columns.push(V)}o=null}}}Q=null}this.setTemplate(e)}if(String(r[U].tagName).toLowerCase()=="option"){var W=false;if(s==true){W=(X.options.length==S)}else{W=window.dhx4.s2b(r[U].getAttribute("selected"))}var T={value:r[U].getAttribute("value"),text:window.dhx4._xmlNodeValue(r[U]),selected:W,checked:window.dhx4.s2b(r[U].getAttribute("checked"))};for(var g in {img:1,img_dis:1,img_src:1,img_src_dis:1,css:1}){if(r[U].getAttribute(g)!=null){T[g]=r[U].getAttribute(g)}}for(var Y=0;Y<r[U].childNodes.length;Y++){if(r[U].childNodes[Y].tagName!=null&&String(r[U].childNodes[Y].tagName).toLowerCase()=="text"){T.text={};var Q=r[U].childNodes[Y];for(var h=0;h<Q.childNodes.length;h++){if(Q.childNodes[h].tagName!=null){T.text[Q.childNodes[h].tagName]=window.dhx4._xmlNodeValue(Q.childNodes[h])}}}}X.options.push(T)}}}n=r=null}return X};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:true});window.dhx4._eventable(this);this._getNearItem=function(e,g){var c=null;while(e!=null){e=e[g<0?"previousSibling":"nextSibling"];if(c==null&&e!=null&&e.style.display==""&&e._optId!=null){c=e;e=null}}return c};this.setName(this.conf.form_name);this._doOnListMouseMove=function(e){e=e||event;var c=e.target||e.srcElement;while(c!=null&&c!=this){if(typeof(c._optId)!="undefined"){if(w.conf.tm_hover){window.clearTimeout(w.conf.tm_hover)}w._setSelected(c._optId)}c=c.parentNode}c=null};this._doOnListMouseDown=function(c){c=c||event;c.cancelBubble=true;w.conf.clear_click=true;window.setTimeout(function(){w.base.firstChild.focus()},1)};this._doOnListMouseUp=function(e){e=e||event;if(e.button!=w.conf.btn_left){return}var c=e.target||e.srcElement;while(c!=null&&c!=this){if(typeof(c._optId)!="undefined"){var g=true;if(typeof(w.t[c._optId].obj.optionClick)=="function"&&w.t[c._optId].obj.optionClick(c,e,w)!==true){g=false}if(g){w._setSelected(c._optId,null,true);w._confirmSelect("click")}}c=c.parentNode}c=null};this._doOnListMouseOut=function(c){if(w.conf.tm_hover){window.clearTimeout(w.conf.tm_hover)}w.conf.tm_hover=window.setTimeout(function(){var e=w.conf.last_match||w.conf.last_selected;if(w.conf.last_match==null&&w.t[e]!=null){if(w.base.firstChild.value!=w.t[e].obj.getText(w.t[e].item,true)){e=null}}w._setSelected(e,null,true)},1)};this._doOnBaseMouseDown=function(c){if(!w.conf.enabled){return}w.conf.clear_click=true;c=c||event;if(c.button!=w.conf.btn_left){return}var l=c.target||c.srcElement;if(l!=this.firstChild){window.setTimeout(function(){w.base.firstChild.focus()},1);var g=l;while(g!=this&&g!=null){if(g==this.lastChild){if(typeof(w.modes[w.conf.opts_type].topImageClick)=="function"){var h=(w.conf.last_hover||w.conf.last_selected);var e=(h!=null?w.t[h].item:null);if(w.modes[w.conf.opts_type].topImageClick(e,w)!==true){h=e=null;return}}g=null}else{g=g.parentNode}}}if(w._isListVisible()){w._hideList()}else{if(l!=this.firstChild){w.conf.clear_blur=true}w._showList();w._setSelected(w.conf.last_selected,true,true)}l=null};this._doOnBodyMouseDown=function(){if(w.conf.clear_click){w.conf.clear_click=false;return}w._confirmSelect("blur")};this._doOnInputFocus=function(){w.conf.clear_blur=false;if(w.conf.tm_confirm_blur){window.clearTimeout(w.conf.tm_confirm_blur)}if(w.conf.combo_focus==false){w.conf.combo_focus=true;w.callEvent("onFocus",[])}};this._doOnInputBlur=function(){if(w.conf.clear_blur==true){w.conf.clear_blur=false;return}if(w.conf.tm_confirm_blur){window.clearTimeout(w.conf.tm_confirm_blur)}w.conf.tm_confirm_blur=window.setTimeout(function(){if(w.conf.clear_click==false){w._confirmSelect("blur");w.conf.combo_focus=false;w.callEvent("onBlur",[])}},20)};this._doOnInputKeyUp=function(c){c=c||event;if(w.conf.f_mode!=false){w.conf.clear_bsp=(c.keyCode==8||c.keyCode==46);w._filterOpts();return}else{w._checkForMatch()}};this._doOnInputKeyDown=function(c){c=c||event;if((c.keyCode==38||c.keyCode==40)&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}c.cancelBubble=true;w._keyOnUpDown(c.keyCode==38?-1:1)}if(c.keyCode==113){if(!w._isListVisible()){w._showList();if(w.base.firstChild.value==w.conf.last_text){w._setSelected(w.conf.last_selected,true,true);w.base.firstChild.value=w.conf.last_text;w.conf.f_server_last=w.base.firstChild.value.toLowerCase()}else{w.conf.f_server_last=w.base.firstChild.value.toLowerCase();if(w.conf.f_mode==false){w._checkForMatch()}}}else{}}if(c.keyCode==27){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}c.cancelBubble=true;w._cancelSelect()}if(c.keyCode==13){if(c.preventDefault){c.preventDefault()}w._confirmSelect("kbd")}if(w.conf.ro_mode==true&&((c.keyCode>=48&&c.keyCode<=57)||(c.keyCode>=65&&c.keyCode<=90))){w._searchRO(String.fromCharCode(c.keyCode).toLowerCase());c.cancelBubble=true}w.conf.clear_key=true;w.callEvent("onKeyPressed",[c.keyCode||c.charCode])};this._doOnInputKeyPress=function(c){if(w.conf.clear_key){w.conf.clear_key=false;return}c=c||event;w.callEvent("onKeyPressed",[c.keyCode||c.charCode])};this._keyOnUpDown=function(c){var g=null;if(this.conf.last_hover){g=this.t[this.conf.last_hover].item}else{if(this.conf.last_selected){g=this.t[this.conf.last_selected].item}}if(!g&&this._getListVisibleCount()==0){return}if(g!=null&&g.style.display!=""){g=null}this._showList();if(g!=null){if(this.t[g._optId].obj.isSelected(g)){g=this._getNearItem(g,c)}}else{g=this.list.firstChild;if(g.style.display!=""){g=this._getNearItem(g,1)}}if(g==null){return}this._setSelected(g._optId,true,true);if(this.conf.f_mode==false){this.base.firstChild.value=this.t[g._optId].obj.getText(g,true)}else{var e=String(this.t[g._optId].obj.getText(g,true));if(this.conf.f_mode=="start"&&this.conf.f_ac==true){if(e.toLowerCase().indexOf(this.conf.f_server_last)===0){this.conf.f_ac_text=e.substring(this.conf.f_server_last.length,e.length);this.base.firstChild.value=e;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}else{this.base.firstChild.value=e;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this._selectRange(0,this.base.firstChild.value.length)}}else{this.base.firstChild.value=e;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}}g=null};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var D=0;D<this.conf.evs_nodes.length;D++){for(var u in this.conf.evs_nodes[D].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[D].node.addEventListener(u,this[this.conf.evs_nodes[D].evs[u]],false)}else{this.conf.evs_nodes[D].node.attachEvent("on"+u,this[this.conf.evs_nodes[D].evs[u]])}}}this.unload=function(){this.clearAll();this.t=null;for(var c=0;c<this.conf.evs_nodes.length;c++){for(var e in this.conf.evs_nodes[c].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[c].node.removeEventListener(e,this[this.conf.evs_nodes[c].evs[e]],false)}else{this.conf.evs_nodes[c].node.detachEvent("on"+e,this[this.conf.evs_nodes[c].evs[e]])}this.conf.evs_nodes[c].evs[e]=null;delete this.conf.evs_nodes[c].evs[e]}this.conf.evs_nodes[c].node=null;this.conf.evs_nodes[c].evs=null;delete this.conf.evs_nodes[c].node;delete this.conf.evs_nodes[c].evs;this.conf.evs_nodes[c]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var e in this.conf){this.conf[e]=null;delete this.conf[e]}this.conf=null;if(typeof(window.addEventListener)=="function"){this.list.removeEventListener("scroll",this._doOnListScroll,false)}else{this.list.detachEvent("onscroll",this._doOnListScroll)}this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.cont=null;this.modes=null;for(var e in this){if(typeof(this[e])=="function"){this[e]=null}}w=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=x;x=null;if(A!=null){if(A.filter!=null){if(typeof(A.filter)=="string"){this.enableFilteringMode(true,A.filter,window.dhx4.s2b(A.filter_cache),window.dhx4.s2b(A.filter_sub_load))}else{this.enableFilteringMode(true)}}if(A.image_path!=null){this.setImagePath(A.image_path)}if(A.default_image!=null||A.default_image_dis!=null){this.setDefaultImage(A.default_image,A.default_image_dis)}if(A.items||A.options){this.addOption(A.items||A.options)}if(A.xml||A.json){this.load(A.xml||A.json)}if(typeof(A.readonly)!="undefined"){this.readonly(A.readonly)}A=null}return this}function dhtmlXComboFromSelect(C){if(typeof(C)=="string"){C=document.getElementById(C)}var D=C.offsetWidth;var s=C.getAttribute("name")||null;var A=document.createElement("SPAN");C.parentNode.insertBefore(A,C);var x=C.getAttribute("mode")||C.getAttribute("opt_type")||"option";var y=new dhtmlXCombo(A,s,D,x);A=null;var v=C.getAttribute("imagePath");if(v){y.setImagePath(v)}var u=C.getAttribute("defaultImage");var w=C.getAttribute("defaultImageDis");if(window.dhx4.s2b(w)==true){w=true}if(u!=null||w!=null){y.setDefaultImage(u,w)}var E=y._xmlToObj([C],true,C.selectedIndex);if(E.options.length>0){y.addOption(E.options)}E=null;C.parentNode.removeChild(C);C=null;return y}dhtmlXCombo.prototype.setName=function(c){this.conf.form_name=c;this.base.childNodes[1].name=c;this.base.childNodes[2].name=c.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(c){if(window.dhx4.s2b(c)){this.base.firstChild.setAttribute("readOnly","true");this.conf.ro_mode=true}else{this.base.firstChild.removeAttribute("readOnly");this.conf.ro_mode=false}};dhtmlXCombo.prototype.setPlaceholder=function(c){if(typeof(c)=="undefined"||c==null){c=""}this.base.firstChild.setAttribute("placeholder",String(c))};dhtmlXCombo.prototype.setTemplate=function(a){for(var g in a){if(typeof(this.conf.template[g])!="undefined"){this.conf.template[g]=String(a[g])}}if(a.columns!=null){this._mcMakeTemplate(a.columns)}else{this._mcDetachHeader()}for(var g in this.t){this.t[g].obj.setText(this.t[g].item,this.t[g].item._conf.text)}this._confirmSelect()};dhtmlXCombo.prototype.setSkin=function(c){if(c==this.conf.skin){return}this.conf.skin=c;this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled");this.list.className="dhxcombolist_"+this.conf.skin+(this.hdr!=null?" dhxcombolist_multicolumn":"");if(this.hdr!=null){this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"}};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(e){for(var g=0;g<this.list.childNodes.length;g++){e.apply(window,[this._getOption(this.list.childNodes[g]._optId,g)])}};dhtmlXCombo.prototype.setFocus=function(){if(this.conf.enabled){this.base.firstChild.focus()}};dhtmlXCombo.prototype.setFontSize=function(e,g){if(e!=null){this.base.firstChild.style.fontSize=e}if(g!=null){this.list.style.fontSize=g}};dhtmlXCombo.prototype.getOption=function(m){var a=null;var o=null;for(var n=0;n<this.list.childNodes.length;n++){if(a==null){var r=this.list.childNodes[n]._optId;if(this.t[r].obj.getValue(this.t[r].item)==m){a=r;o=n}}}return(a==null?null:this._getOption(a,o))};dhtmlXCombo.prototype.getOptionByIndex=function(c){if(c<0){return null}if(this.list.childNodes[c]==null){return null}return this._getOption(this.list.childNodes[c]._optId,c)};dhtmlXCombo.prototype.getOptionByLabel=function(m){var a=null;var o=null;for(var n=0;n<this.list.childNodes.length;n++){if(a==null){var r=this.list.childNodes[n]._optId;if(this.t[r].obj.getText(this.t[r].item,true)==m){a=r;o=n}}}return(a==null?null:this._getOption(a,o))};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"static.systemStatic.js.welcome-bak.html.css.welcome-bak.html.css",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(g){var e=this.getOption(g);return(e!=null?e.welcome:-1)};dhtmlXCombo.prototype.setComboText=function(c){if(this.conf.allow_free_text!=true){return}this.unSelectOption();this.conf.last_text=this.base.firstChild.value=c;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()};dhtmlXCombo.prototype.setComboValue=function(g){var e=this.getOption(g);if(e!=null){this.selectOption(e.welcome)}else{this.conf.last_value=g;this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="true"}};dhtmlXCombo.prototype.selectOption=function(n, m, h){if(n<0||n>=this.list.childNodes.length){return}var l=this.list.childNodes[n]._optId;this._setSelected(l,this._isListVisible(),true);this._confirmSelect("script")};dhtmlXCombo.prototype.unSelectOption=function(){if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null}this.base.firstChild.value="";if(this.conf.f_mode!=false){this._filterOpts(true)}this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(c){c=(typeof(c)=="undefined"?true:window.dhx4.s2b(c));if(this.conf.enabled==c){return}this.conf.enabled=c;if(c){this.base.className="dhxcombo_"+this.conf.skin;this.base.firstChild.removeAttribute("disabled")}else{this._hideList();this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled";this.base.firstChild.setAttribute("disabled","true")}this._updateTopImage(this.conf.last_selected)};dhtmlXCombo.prototype.disable=function(c){c=(typeof(c)=="undefined"?true:window.dhx4.s2b(c));this.enable(!c)};dhtmlXCombo.prototype.isEnabled=function(){return(this.conf.enabled==true)};dhtmlXCombo.prototype.show=function(c){if(typeof(c)=="undefined"){c=true}else{c=window.dhx4.s2b(c)}this.base.style.display=(c==true?"":"none")};dhtmlXCombo.prototype.hide=function(c){if(typeof(c)=="undefined"){c=true}this.show(!c)};dhtmlXCombo.prototype.isVisible=function(){return(this.base.style.display=="")};dhtmlXCombo.prototype.setFilterHandler=function(c){if(typeof(c)=="function"){this.conf.f_func=c;this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{if(typeof(c)=="string"&&typeof(window[c])=="function"){this.conf.f_func=window[c];this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{this.conf.f_func=null}}};dhtmlXCombo.prototype.enableFilteringMode=function(l,n,h,m){if(l==true||l=="between"){this.conf.f_mode=(l==true?"start":"between");if(n!=null){this.conf.f_url=n;this.conf.f_cache=window.dhx4.s2b(h);this.conf.f_dyn=window.dhx4.s2b(m)}else{this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}}else{this.conf.f_mode=false;this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}};dhtmlXCombo.prototype.filter=function(m,h){for(var l=0;l<this.list.childNodes.length;l++){var n=m.apply(window,[this._getOption(this.list.childNodes[l]._optId,l)]);this.list.childNodes[l].style.display=(n===true?"":"none")}if(typeof(h)=="undefined"||h==true){this._showList(true)}};dhtmlXCombo.prototype.sort=function(m){var h=[];for(var n=0;n<this.list.childNodes.length;n++){var l=this.list.childNodes[n]._optId;h.push([l,this._getOption(l,n)])}if(m=="asc"||m=="desc"){k=true;h.sort(function(c,e){c=c[1].text_option.toLowerCase();e=e[1].text_option.toLowerCase();var a=(m=="asc"?1:-1);return(c>e?a:-1*a)})}else{if(typeof(m)=="function"||typeof(window[m])=="function"){if(typeof(window[m])=="function"){m=window[m]}h.sort(function(a,c){return m.apply(window,[a[1],c[1]])})}}while(this.list.childNodes.length>0){this.list.removeChild(this.list.lastChild)}for(var n=0;n<h.length;n++){this.list.appendChild(this.t[h[n][0]].item)}};dhtmlXCombo.prototype.enableAutocomplete=function(c){if(typeof(c)=="undefined"){c=true}else{c=window.dhx4.s2b(c)}this.conf.f_ac=c};dhtmlXCombo.prototype.disableAutocomplete=function(c){if(typeof(c)=="undefined"){c=true}else{c=window.dhx4.s2b(c)}this.enableAutocomplete(!c)};dhtmlXCombo.prototype.allowFreeText=function(c){this.conf.allow_free_text=(typeof(c)=="undefined"?true:window.dhx4.s2b(c))};dhtmlXCombo.prototype._checkForMatch=function(n){var l=window.dhx4.trim(this.base.firstChild.value).toLowerCase();var m=null;var r=this.list.firstChild;while(r!=null){if(r.style.display==""&&r._optId!=null){var o=window.dhx4.trim(this.t[r._optId].obj.getText(r,true)).toLowerCase();if(l==o){m=r._optId;r=null}}if(r!=null){r=r.nextSibling}}if(this.conf.last_match==null){if(m!=null){this._setSelected(m,true,true);this.conf.last_match=m}else{if(this.conf.f_mode!="between"||n==true){this._setSelected(null,true,true);this.conf.last_match=null}}}else{if(m!=null){if(m!=this.conf.last_match){this._setSelected(m,true,true);this.conf.last_match=m}}else{this._setSelected(null,true,true);this.conf.last_match=null}}};dhtmlXCombo.prototype._selectRange=function(g,e){if(this.conf.combo_focus==true){window.dhx4.selectTextRange(this.base.firstChild,g,e)}};dhtmlXCombo.prototype.openSelect=function(){if(!this._isListVisible()){this._showList()}};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(e){if(this._getListVisibleCount()==0){if(e&&this._isListVisible()){this._hideList()}return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id);if(this.hdr!=null){this.hdr.style.zIndex=Number(this.list.style.zIndex)+1}this.list.style.visibility="hidden";this.list.style.display="";if(this.hdr!=null){this.hdr.style.visibility=this.list.style.visibility;this.hdr.style.display=this.list.style.display}var g=(this.hdr!=null?this.hdr.offsetHeight:0);this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px";this.list.style.top=window.dhx4.absTop(this.base)+g+this.base.offsetHeight-1+"px";this.list.style.left=window.dhx4.absLeft(this.base)+"px";if(this.hdr!=null){this.hdr.style.width=this.list.style.width;this.hdr.style.left=this.list.style.left;this.hdr.style.top=parseInt(this.list.style.top)-g+"px"}this._checkListHeight();this.list.style.visibility="visible";if(this.hdr!=null){this.hdr.style.visibility="visible"}this.callEvent("onOpen",[])};dhtmlXCombo.prototype._hideList=function(){if(!this._isListVisible()){return}window.dhx4.zim.clear(this.conf.list_zi_id);this.list.style.display="none";if(this.hdr!=null){this.hdr.style.display="none"}this.conf.clear_click=false;this.callEvent("onClose",[])};dhtmlXCombo.prototype._isListVisible=function(){return(this.list.style.display=="")};dhtmlXCombo.prototype._getListVisibleCount=function(){var e=0;for(var g=0;g<this.list.childNodes.length;g++){e+=(this.list.childNodes[g].style.display==""?1:0)}return e};dhtmlXCombo.prototype._checkListHeight=function(){if(!this._isListVisible()){return}if(this.conf.item_h==null){var h=this.list.firstChild;while(h!=null){if(h.style.display==""){this.conf.item_h=h.offsetHeight+(this.hdr!=null?-1:0);h=null}else{h=h.nextSibling}}h=null}var H=window.dhx4.screenDim();var x=window.dhx4.absTop(this.base);var D=this.base.offsetHeight;var E=(this.hdr!=null?this.hdr.offsetHeight:0);var C=Math.max(0,Math.floor((x+E-H.top)/this.conf.item_h));var s=Math.max(0,Math.floor((H.bottom-(x+D+E))/this.conf.item_h));var F=this._getListVisibleCount();if(s<Math.min(this.conf.opts_count_min,F)&&C>s){s=null}var w=Math.min((s==null?C:s),this.conf.opts_count,F);var A=(w<F?(w*this.conf.item_h)+"px":"");var y=this.conf.sp[this.conf.skin][this.hdr!=null?"hdr_ofs":"list_ofs"];this.list.style.height=A;this.list.style.top=(s==null?x-this.list.offsetHeight+y:x+D+E-y)+"px";if(this.hdr!=null){this.hdr.style.top=(s==null?x-E-this.list.offsetHeight+y:x+D-y)+"px"}};dhtmlXCombo.prototype._scrollToItem=function(m){var n=this.t[m].item.offsetTop;var o=n+this.t[m].item.offsetHeight;var r=this.list.scrollTop;var l=r+this.list.clientHeight;if(n<r){this.list.scrollTop=n+(this.hdr!=null?1:0)}else{if(o>l){this.list.scrollTop=o-this.list.clientHeight+(this.hdr!=null?-this.conf.sp[this.conf.skin].scr_ofs:0)}}};dhtmlXCombo.prototype._setSelected=function(h,l,g){if(g){this._updateTopImage(h)}if(h!=null&&this.conf.last_hover==h){if(l){this._scrollToItem(h)}return}if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null;if(h==null){this.callEvent("onSelectionChange",[])}}if(h!=null){this.t[h].obj.setSelected(this.t[h].item,true);this.conf.last_hover=h;this.callEvent("onSelectionChange",[]);if(this.conf.s_mode=="select"&&this.t[h].item==this.t[h].item.parentNode.lastChild){this._subloadRequest()}if(l){this._scrollToItem(h)}}};dhtmlXCombo.prototype._subloadRequest=function(){if(this.conf.f_url!=null&&this.conf.f_dyn==true&&this.conf.f_dyn_end==false){var h="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length;var g=this;var l=function(a){if(g.conf.f_cache){g.conf.f_cache_data[g.conf.f_mask].data.push(a.xmlDoc.responseXML)}var c=g.list.childNodes.length;g.conf.f_loading=true;g.load(a.xmlDoc.responseXML);g.conf.f_loading=false;if(c==g.list.childNodes.length){g.conf.f_dyn_end=true;if(g.conf.f_cache){g.conf.f_cache_data[g.conf.f_mask].dyn_end=true}}l=g=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(this.conf.f_url,h,l)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+h,l)}}}};dhtmlXCombo.prototype.addOption=function(s,o,y,r,v){var w=null;if(!(s instanceof Array)){var x=this._renderOption({value:s,text:o,css:y,img:r});if(w==null&&window.dhx4.s2b(v)==true){w=x}}else{for(var u=0;u<s.length;u++){if(typeof(s[u])=="undefined"){continue}if(s[u] instanceof Array){x=this._renderOption({value:s[u][0],text:s[u][1],css:s[u][2],img:s[u][3]});if(w==null&&window.dhx4.s2b(s[u][4])==true){w=x}}else{var x=this._renderOption(s[u]);if(w==null&&window.dhx4.s2b(s[u].selected)==true){w=x}}}}if(w!=null){this._setSelected(w,this._isListVisible(),true);this._confirmSelect("onInit")}};dhtmlXCombo.prototype.updateOption=function(l,o,r,n){var m=this._getOptionId(l);if(m==null){return}this.t[m].obj.update(this.t[m].item,{value:o,text:r,css:n});if(this.conf.last_selected==m){this.conf.last_text=this.base.firstChild.value=this.t[m].obj.getText(this.t[m].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}};dhtmlXCombo.prototype.deleteOption=function(a){for(var l in this.t){var h=this.t[l].obj.getValue(this.t[l].item);if(h==a){this._removeOption(l)}}if(this._isListVisible()){this._showList(true)}};dhtmlXCombo.prototype.clearAll=function(g){g=(typeof(g)=="undefined"?true:window.dhx4.s2b(g));for(var a in this.t){this._removeOption(a)}if(this.conf.tm_hover){window.clearTimeout(this.conf.tm_hover)}this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;if(g==true){this._hideList()}};dhtmlXCombo.prototype._renderOption=function(n){var m=window.dhx4.newId();var o=document.createElement("DIV");o._optId=m;o._tpl=this.conf.template;if(typeof(n.img)=="undefined"&&typeof(n.img_src)!="undefined"){n.img=n.img_src;delete n.img_src}if(typeof(n.img_dis)=="undefined"&&typeof(n.img_src_dis)!="undefined"){n.img_dis=n.img_src_dis;delete n.img_src_dis}n.img_path=this.conf.img_path;n.img_def=this.conf.img_def;n.img_def_dis=this.conf.img_def_dis;this.list.appendChild(o);var r=(this._isListVisible()&&window.dhx4.isFF==true);if(r==true){var l=this.list.scrollTop;this.list.scrollTop-=1}if(this.hdr!=null){n.multicol=true}this.t[o._optId]={obj:this.modes[this.conf.opts_type].render(o,n),item:o,conf:{type:this.conf.opts_type}};o=null;if(r==true){this.list.scrollTop+=1}return m};dhtmlXCombo.prototype._removeOption=function(c){this.t[c].obj.destruct(this.t[c].item);this.t[c].obj=null;this.t[c].item.parentNode.removeChild(this.t[c].item);this.t[c].item=null;this.t[c].conf=null;this.t[c]=null;delete this.t[c];if(this.conf.last_hover==c){this.conf.last_hover=null}if(this.conf.last_selected==c){this.conf.last_selected=null;this._confirmSelect("onDelete")}};dhtmlXCombo.prototype._confirmSelect=function(h,g){var l=false;if(typeof(g)=="undefined"){g=true}if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}if(this.conf.last_hover!=null){l=l||(this.conf.last_value!=this._getOptionValue(this.conf.last_hover));this.conf.last_match=this.conf.last_selected=this.conf.last_hover;this.conf.last_value=this._getOptionValue(this.conf.last_selected);this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="false"}else{if(this.conf.allow_free_text||(this.base.firstChild.value==""&&this.conf.allow_empty_value)){l=l||(this.conf.last_text!=this.base.firstChild.value);this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.conf.last_text=this.base.firstChild.value;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_text;this.base.childNodes[2].value="true"}else{this._cancelSelect();this._updateTopImage(this.conf.last_selected);return}}if(this.conf.f_ac&&this.conf.f_mode=="start"){this.conf.f_ac_text="";if(h!="blur"){this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)}}if(g){this._hideList()}if(l==true&&h!="onInit"&&h!="onDelete"){this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])}};dhtmlXCombo.prototype._cancelSelect=function(){this._hideList();this.base.firstChild.value=this.conf.last_text;if(this.conf.f_mode!=false){this._filterOpts(true)}};dhtmlXCombo.prototype._getOption=function(a,r){if(!this.t[a]){return null}if(typeof(r)=="undefined"){r=-1}if(r<0){for(var n=0;n<this.list.childNodes.length;n++){if(r<0&&this.list.childNodes[n]._optId==a){r=n}}}var o={value:this.t[a].obj.getValue(this.t[a].item),text:this.t[a].obj.getText(this.t[a].item),text_input:this.t[a].obj.getText(this.t[a].item,true),text_option:this.t[a].obj.getText(this.t[a].item,null,true),css:this.t[a].obj.getCss(this.t[a].item),selected:(a==this.conf.last_selected),index:r};if(typeof(this.t[a].obj.getExtraData)=="function"){var s=this.t[a].obj.getExtraData(this.t[a].item);for(var u in s){if(typeof(o[u])=="undefined"){o[u]=s[u]}}}return o};dhtmlXCombo.prototype._getOptionProp=function(l,m,n){if(l!=null){var h=this._getOption(l);if(h!=null){return h[m]}}return n};dhtmlXCombo.prototype._getOptionId=function(n){var l=null;for(var h=0;h<this.list.childNodes.length;h++){if(l==null){var m=this.list.childNodes[h]._optId;if(n==this.t[m].obj.getValue(this.t[m].item)){l=m}}}return l};dhtmlXCombo.prototype._getOptionValue=function(c){return this._getOptionProp(c,"value",null)};dhtmlXCombo.prototype.setSize=function(c){this.conf.combo_width=parseInt(c)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase()};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,(this.conf.combo_width-24-(this.conf.combo_image?23:0)))+"px";this.base.firstChild.style.marginLeft=(this.conf.combo_image?"23px":"0px")};dhtmlXCombo.prototype.setOptionWidth=function(c){this.conf.opts_width=(parseInt(c)||null)};dhtmlXCombo.prototype.setOptionIndex=function(m, h){if(isNaN(h)||h<0){return}var l=this.getOption(m);if(l==null){return}if(h==l.welcome){return}var n=this.list.childNodes[l.welcome];n.parentNode.removeChild(n);if(this.list.childNodes[h]!=null){this.list.insertBefore(n,this.list.childNodes[h])}else{this.list.appendChild(n)}n=null};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(w){var s="";var u="";this.conf.col_w=0;for(var h=0; h<w.length; h++){var r=Number(parseInt(w[h].width)||50);var v=(w[h].css||"");var y=(h==0&&window.dhx4.isIE6==true?"_first":"");u+="<div class='dhxcombo_cell"+y+" "+v+"' style='width:"+r+"px;'><div class='dhxcombo_cell_text'>"+(w[h].option||"&nbsp;")+"</div></div>";s+="<div class='dhxcombo_hdrcell"+y+" "+v+"' style='width:"+r+"px;'><div class='dhxcombo_hdrcell_text'>"+(w[h].header||"&nbsp;")+"</div></div>";this.conf.col_w+=r+1}var r=500;var x=document.createElement("DIV");x.style.position="absolute";x.style.top="10px";x.style.left=-r*2+"px";x.style.width=r+"px";x.style.height="50px";x.style.overflowY="scroll";x.innerHTML="<div>&nbsp;</div>";document.body.appendChild(x);this.conf.col_w+=r-x.firstChild.offsetWidth+10;x.parentNode.removeChild(x);x=null;this.conf.template.option=u;this._mcAttachHeader(s);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(c){if(this.hdr==null){this.hdr=document.createElement("DIV");this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr";this.hdr.style.display="none";this.list.parentNode.insertBefore(this.hdr,this.list);if(typeof(window.addEventListener)=="function"){this.hdr.addEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.attachEvent("onmousedown",this._doOnListMouseDown)}if(this.conf.opts_type=="checkbox"&&this.conf.combo_image==true){this.conf.combo_image=false;if(this.base.lastChild.className.match(/dhxcombo_top_image/)!=null){this.base.removeChild(this.base.lastChild)}this._adjustBase()}}this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+c+"</div>"};dhtmlXCombo.prototype._mcDetachHeader=function(){if(this.hdr!=null){if(typeof(window.addEventListener)=="function"){this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.detachEvent("onmousedown",this._doOnListMouseDown)}this.hdr.parentNode.removeChild(this.hdr);this.hdr=null}this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(r,n,s,v){var o=(r>=0&&r<this.list.childNodes.length?this.list.childNodes[r]._optId:null);if(o==null){return null}if(typeof(this.t[o].obj[n])!="function"){return null}var u=[this.t[o].item];for(var w=2;w<arguments.length;w++){u.push(arguments[w])}return this.t[o].obj[n].apply(this.t[o].obj,u)};function dhtmlXComboExtend(a,h){for(var l in dhtmlXCombo.prototype.modes[h]){if(typeof(dhtmlXCombo.prototype.modes[a][l])=="undefined"){dhtmlXCombo.prototype.modes[a][l]=dhtmlXCombo.prototype.modes[h][l]}}}dhtmlXCombo.prototype.modes.option={image:false,html:false,option_css:"dhxcombo_option_text",render:function(e,g){e._conf={value:g.value,css:""};e.className="dhxcombo_option";e.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>";if(g.css!=null){e.lastChild.style.cssText=g.css;e._conf.css=g.css}this.setText(e,g.text);return this},destruct:function(c){c._conf=null},update:function(e,g){e._conf.value=g.value;e._conf.css=g.css;e.lastChild.style.cssText=g.css;this.setText(e,g.text)},setText:function(l,h){l._conf.text=h;var g=(typeof(h)=="object"?window.dhx4.template(l._tpl.option,this.replaceHtml(l._conf.text),true):window.dhx4.trim(this.replaceHtml(l._conf.text)||""));l.lastChild.innerHTML=(g.length==0?"&nbsp;":g)},getText:function(h,g,l){if(window.dhx4.s2b(g)&&typeof(h._conf.text)=="object"){return window.dhx4.template(h._tpl.input,h._conf.text,true)}if(window.dhx4.s2b(l)&&typeof(h._conf.text)=="object"){return window.dhx4.template(h._tpl.option,h._conf.text,true)}return h._conf.text},getValue:function(c){return c._conf.value},getCss:function(c){return c._conf.css},setSelected:function(e,g){e.className="dhxcombo_option"+(g?" dhxcombo_option_selected":"")},isSelected:function(c){return String(c.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(c){return{type:"option"}},replaceHtml:function(a){if(this.html==true){return a}if(typeof(a)=="object"){var h={};for(var l in a){h[l]=this.replaceHtml(a[l])}}else{var h=a.replace(/[\<\>\&\s]/g,function(c){switch(c){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return c})}return h}};dhtmlXCombo.prototype.modes.checkbox={image:true,html:true,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(e,g){if(this.image_css_regexp==null){this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))}e._conf={value:g.value,css:"",checked:window.dhx4.s2b(g.checked)};e.className="dhxcombo_option";if(g.multicol==true){g.text.checkbox="<div class='"+String(this.image_css).replace("#state#",(e._conf.checked?"1":"0"))+"'></div>&nbsp;";e.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"}else{e.innerHTML="<div class='"+String(this.image_css).replace("#state#",(e._conf.checked?"1":"0"))+"'></div><div class='"+this.option_css+"'>&nbsp;</div>"}if(g.css!=null){e.lastChild.style.cssText+=g.css;e._conf.css=g.css}this.setText(e,g.text);return this},setChecked:function(l,h){l._conf.checked=window.dhx4.s2b(h);var g=String(this.image_css).replace("#state#",(l._conf.checked?"1":"0"));this._changeChbxCss(l.childNodes,g)},_changeChbxCss:function(g,l){for(var h=0;h<g.length;h++){if(g[h].tagName!=null&&g[h].className!=null&&g[h].className.match(this.image_css_regexp)!=null){g[h].className=l}else{if(g[h].childNodes.length>0){this._changeChbxCss(g[h].childNodes,l)}}}},isChecked:function(c){return(c._conf.checked==true)},getExtraData:function(c){return{type:"checkbox",checked:c._conf.checked}},optionClick:function(o,r,n){var s=true;var u=(r.target||r.srcElement);while(s==true&&u!=null&&u!=o&&u.className!=null){if(u.className.match(this.image_css_regexp)!=null){var m=[o._conf.value,!o._conf.checked];if(n.callEvent("onBeforeCheck",m)===true){this.setChecked(o,!this.isChecked(o));n.callEvent("onCheck",m)}s=false;m=null}else{u=u.parentNode}}u=n=o=null;return s},getTopImage:function(g,e){return""},topImageClick:function(e,g){return true}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(e,g){this.doWithItem(e,"setChecked",g)};dhtmlXCombo.prototype.getChecked=function(g){var l=[];for(var h=0;h<this.list.childNodes.length;h++){if(this.isChecked(h)){l.push(this._getOptionProp(this.list.childNodes[h]._optId,"value",""))}}return l};dhtmlXCombo.prototype.isChecked=function(c){return this.doWithItem(c,"isChecked")};dhtmlXCombo.prototype.modes.image={image:true,html:true,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(e,g){e._conf={value:g.value,css:""};e.className="dhxcombo_option";e.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";if(g.css!=null){e.lastChild.style.cssText+=g.css;e._conf.css=g.css}this.setText(e,g.text);this.setImage(e,g.img,g.img_dis,g.img_path,g.img_def,g.img_def_dis);return this},update:function(e,g){e._conf.value=g.value;e._conf.css=g.css;e.lastChild.style.cssText=g.css;this.setText(e,g.text);this.setImage(e,g.img,g.img_dis,g.img_path,g.img_def,g.img_def_dis)},setImage:function(s,n,o,m,r,u){if(n!=null&&n.length>0){n=m+n}else{if(r!=null&&r.length>0){n=m+r}else{n=null}}if(o!=null&&o.length>0){o=m+o}else{if(u!=null&&u.length>0){o=m+u}else{if(u==true){o=n}else{o=null}}}s._conf.img=n;s._conf.img_dis=o;s.firstChild.style.backgroundImage=(n!=null?"url("+n+")":"none")},getExtraData:function(c){return{type:"image"}},getTopImage:function(a,h){var l=(h?"img":"img_dis");if(a!=null&&a._conf[l]!=null){return"<div class='"+this.image_css+"' style='background-image:url("+a._conf[l]+");'></div>"}return""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(e,g){if(e!=null){this.conf.img_def=e}if(g!=null){this.conf.img_def_dis=g}};dhtmlXCombo.prototype.setImagePath=function(c){this.conf.img_path=c};function dhtmlXColorPicker(w){if(!(this instanceof dhtmlXColorPicker)){return new dhtmlXColorPicker(w)}dhx4._eventable(this);var r=this,s=undefined,l=null,u,o,v;this._nodes=[];this.activeNode=null;this._inputListenerId=null;this.base=null;this._globalNode=null;this.memory=null;this.skin=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:false,selectedColor:null,hide:false,hideOnSelect:false,lang:"en",closeable:true};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(a){a=a||event;if(typeof(window.addEventListener)=="function"){r._controllerNodes.colorArea.addEventListener("mousemove",r._setMoveSelection,false);document.body.addEventListener("mouseup",r._cleanMoveSelection,false)}else{r._controllerNodes.colorArea.attachEvent("onmousemove",r._setMoveSelection);document.body.attachEvent("onmouseup",r._cleanMoveSelection)}r._setMoveSelection(a,r._controllerNodes.colorArea);return false};this._cleanMoveSelection=function(){if(typeof(window.removeEventListener)=="function"){r._controllerNodes.colorArea.removeEventListener("mousemove",r._setMoveSelection,false);document.body.removeEventListener("mouseup",r._cleanMoveSelection,false)}else{r._controllerNodes.colorArea.detachEvent("onmousemove",r._setMoveSelection);document.body.detachEvent("onmouseup",r._cleanMoveSelection)}return false};this._setMoveSelection=function(a){a=a||event;var c=r._getOffsetPosition(a,r._controllerNodes.colorArea);if(r._controllerNodes.fr_cover){setTimeout(function(){r._setColorAreaXY(c.x,c.y);r._setColorByXYC()},0)}else{r._setColorAreaXY(c.x,c.y);r._setColorByXYC()}return false};this._initMoveContrast=function(a){a=a||event;if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousemove",r._setMoveContrast,false);document.body.addEventListener("mouseup",r._cleanMoveContrast,false)}else{document.body.attachEvent("onmousemove",r._setMoveContrast);document.body.attachEvent("onmouseup",r._cleanMoveContrast)}r._setMoveContrast(a,r._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){if(typeof(window.removeEventListener)=="function"){document.body.removeEventListener("mousemove",r._setMoveContrast,false);document.body.removeEventListener("mouseup",r._cleanMoveContrast,false)}else{document.body.detachEvent("onmousemove",r._setMoveContrast);document.body.detachEvent("onmouseup",r._cleanMoveContrast)}};this._setMoveContrast=function(a){a=a||event;var c=r._getOffsetPosition(a,r._controllerNodes.contrastArea);r._setContrastY(c.y);r._setColorByXYC(true)};this._doOnSelectColor=function(){var a=r.colorAIP.rgb2hex({r:r.value.red,g:r.value.green,b:r.value.blue});if(r.activeNode!=null){if(r.activeNode.valueCont){r.activeNode.valueCont.value=a}if(r.activeNode.valueColor){r.activeNode.valueColor.style.backgroundColor=a}}if(r.base._dhx_remove||r.conf.hideOnSelect){r.hide()}r.callEvent("onSelect",[a,((r.activeNode)?r.activeNode.node:null)])};this._doOnCancel=function(){if(r.callEvent("onCancel",[((r.activeNode)?r.activeNode.node:null)])==true&&r.conf.closeable==true){r.hide()}};this._doOnFocusByInput=function(){var c=(this!=window)?this:event.srcElement;var a=(r.activeNode&&r.activeNode.valueCont&&r.activeNode.valueCont==c)?r.activeNode:r._getNodeByValueCont(c);r.activeNode=a;if(a&&a==r.activeNode){r._initListenerInput()}};this._doOnBlurByInput=function(){var c=(this!=window)?this:event.srcElement;var a=(r.activeNode&&r.activeNode.valueCont&&r.activeNode.valueCont==c)?r.activeNode:r._getNodeByValueCont(c);if(a&&a==r.activeNode){r._removeListenerInput()}};this._doOnClickByNode=function(c){c=c||event;var a=(this!=window)?this:event.srcElement;r.activeNode=(r.activeNode.node!=a)?r._getNodeByElement(a):r.activeNode;if(!r.isVisible()){r.show()}};this.saveColor=function(){r.memory.setValue(r.value)};this._onSelectMemoryEl=function(c){var a;r._refreshCoordinatesByHSL(c.value.hue,c.value.sat,c.value.lum);for(a in c.value){r.value[a]=c.value[a]}r._refreshContrast();r._refreshInputValues();r._refreshColorValue()};this._doOnClickByBody=function(c){c=c||event;var a=true,e=c.target||c.srcElement;if(r._isBaseNode(e)){a=false}if(a&&r.activeNode&&(r.activeNode.node==e||r.activeNode.valueCont==e)){a=false}if(a){r.hide()}};this._doOnChangeHSL=function(){var e=parseInt(r._controllerNodes.hue.value),g=parseInt(r._controllerNodes.sat.value),a=parseInt(r._controllerNodes.lum.value),c;if(isNaN(e)||e>359||e<0){r._controllerNodes.hue.value=r.value.hue}else{r.value.hue=e}if(isNaN(g)||g>100||g<0){r._controllerNodes.sat.value=r.value.sat}else{r.value.sat=g}if(isNaN(a)||a>100||a<0){r._controllerNodes.lum.value=r.value.lum}else{r.value.lum=a}c=r.colorAIP.hsl2rgb(r.value.hue,r.value.sat/100,r.value.lum/100);r.value.red=Math.round(255*c.r);r.value.green=Math.round(255*c.g);r.value.blue=Math.round(255*c.b);r._refreshCoordinatesByHSL(r.value.hue,r.value.sat,r.value.lum);r._refreshContrast();r._refreshInputValues();r._refreshColorValue()};this._doOnChangeRGB=function(){var c=parseInt(r._controllerNodes.red.value),e=parseInt(r._controllerNodes.green.value),a=parseInt(r._controllerNodes.blue.value),g;if(isNaN(c)||c>255||c<0){r._controllerNodes.red.value=r.value.red}else{r.value.red=c}if(isNaN(e)||e>255||e<0){r._controllerNodes.green.value=r.value.green}else{r.value.green=e}if(isNaN(a)||a>255||a<0){r._controllerNodes.blue.value=r.value.blue}else{r.value.blue=a}g=r.colorAIP.rgb2hsl(r.value.red/255,r.value.green/255,r.value.blue/255);r.value.hue=Math.round(g.h);r.value.sat=Math.round(g.s*100);r.value.lum=Math.round(g.l*100);r._refreshCoordinatesByHSL(r.value.hue,r.value.sat,r.value.lum);r._refreshContrast();r._refreshInputValues();r._refreshColorValue()};this._doOnChangeHSV=function(){r._controllerNodes.hsv.value=r.setColor(r._controllerNodes.hsv.value)};this._checkType=function(c){var a;if(c instanceof Array){a=r._checkType(c[0]);switch(a){case"string":return"array_string";break;case"input":case"textarea":return"array_input";break;case"object":return"array_object";break;default:return undefined}}else{if(c==undefined){return null}else{if(typeof(c)=="string"){return"string"}else{if(c.tagName&&c.tagName.toLowerCase()=="input"){return"input"}else{if(c.tagName&&c.tagName.toLowerCase()=="textarea"){return"textarea"}else{if(c.tagName){return"container"}else{if(typeof(c)=="object"){return"object"}else{return undefined}}}}}}}};this._initByObject=function(a){if(a.parent&&a.parent.tagName){r.base=a.parent}else{if(typeof(a.parent)=="string"){r.base=document.getElementById(a.parent)}else{r.base=document.createElement("div");r.base._dhx_remove=true}}if(a.color){r.conf.selectedColor=a.color}if(typeof(a.closeable)!="undefined"){this.conf.closeable=dhx4.s2b(a.closeable)}if(a.custom_colors){this._tempInitCC=function(){var e,g;this.initMemoryColors();this.conf.customColors=true;if(a.custom_colors instanceof Array){g=a.custom_colors.length;for(e=0;e<g;e++){this.setCustomColors(a.custom_colors[e])}}if(this.base.parentNode){this.showMemory()}delete this._tempInitCC}}if(a.hide){r.conf.hide=true}if(a.input){r._addNode(a.input,a.target_color,a.target_value)}var c=a.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"dhx_skyblue";r.setSkin(c);if(a.colors){r.initMemoryColors();r.conf.customColors=true}if(a.link){r._addNode(a.link)}};this.unload=function(){var a,e,c;if(this.isVisible()){this.hide()}this.destructMemory();e=this._nodes.length;for(a=0;a<e;a++){this._detachEventsFromNode(this._nodes[a]);for(c in this._nodes[a]){this._nodes[a][c]=null}delete this._nodes[a]}this._nodes=null;if(!this.base._dhx_remove){this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"")}else{delete this.base._dhx_remove}if(typeof(window.addEventListener)=="function"){this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,false);this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,false);this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,false);this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,false);this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,false);this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection);this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor);this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast);this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor);this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel);this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)}if(this._controllerNodes.fr_cover){if(this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}delete this._controllerNodes.fr_cover}dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(c in this){this[c]=null}r=null,l=null,v=null};s=this._checkType(w);switch(s){case"object":r._initByObject(w);break;case"input":case"textarea":r._initByObject({});this._addNode(w);break;case"string":l=document.getElementById(w);return new dhtmlXColorPicker(l);break;case"container":r._initByObject({parent:w});break;case null:r._initByObject({});break;case"array_string":case"array_input":r._initByObject({});o=w.length;for(u=0;u<o;u++){this._addNode(w[u])}break;case"array_object":r._initByObject({});o=w.length;for(u=0;u<o;u++){v=this._addNode(w[u].input,w[u].target_color,w[u].target_value).conf;v.customColors=(w[u].custom_colors!=undefined)?dhx4.s2b(w[u].custom_colors):v.customColors;v.selectedColor=(w[u].color!=undefined)?w[u].color:v.selectedColor}break}this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>";"</div>";this._globalNode=this.base.firstChild;this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};if(typeof(this._tempInitCC)=="function"){this._tempInitCC()}if(typeof(window.addEventListener)=="function"){this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,false);this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,false);this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,false);this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,false);this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,false);this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection);this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor);this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast);this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor);this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel);this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)}this.setColor(this.conf.selectedColor||"#ffffff");if(this._nodes.length){for(var u=0;u<this._nodes.length;u++){this._attachEventsToNode(this._nodes[u])}}if(this.conf.hide){this.hide()}if(typeof(this._cpInitFRM)=="function"){this._cpInitFRM()}}dhtmlXColorPicker.prototype.linkTo=function(n,m,l){if(arguments.length==1){m=l=n}var h;n=n||null;l=l||null;if(typeof(m)=="string"){m=document.getElementById(m)}h=this._addNode(m,n,l);if(h){this._attachEventsToNode(h)}return h};dhtmlXColorPicker.prototype._isBaseNode=function(c){if(c==this.base){return true}if(c.parentElement==document.body){return false}else{if(!c.parentElement){return false}else{return this._isBaseNode(c.parentElement)}}};dhtmlXColorPicker.prototype._hasInput=function(m){var n,h,l=false;h=this._nodes.length;for(n=0;n<h;n++){if(this._nodes[n].valueCont==m){l=true;break}}return l};dhtmlXColorPicker.prototype._findNodesByArray=function(m){var o,l,r,n=[];l=m.length;for(o=0;o<l;o++){if(typeof(m[o])=="string"){r=document.getElementById(m[o])}else{r=m[o]}if(r){this._addNode(r)}}};dhtmlXColorPicker.prototype._addNode=function(s,n,r){var w,u,v,o;if(typeof(s)=="string"){w=document.getElementById(s)}else{w=s}if(typeof(n)=="string"){n=document.getElementById(n)}if(typeof(r)=="string"){r=document.getElementById(r)}if(!w){return null}if(dhx4.s2b(w.getAttribute("colorbox"))){u=document.createElement("div");u.style.width=w.offsetWidth+"px";u.style.height=w.offsetHeight+"px";w.style.width=w.offsetWidth-(w.offsetHeight+8)+"px";w.parentNode.insertBefore(u,w);u.style.position="relative";v=document.createElement("div");u.appendChild(w);u.appendChild(v);v.className="dhxcp_colorBox";w.className+=" dhxcp_colorInput";v.style.width=v.style.height=w.offsetHeight+"px"}o={node:w,valueColor:(n!=undefined)?n:v||w,valueCont:(r!=undefined)?r:w,conf:{customColors:(w.getAttribute("customcolors")!=null)?dhx4.s2b(w.getAttribute("customcolors")):null,selectedColor:w.getAttribute("selectedcolor")}};this._nodes.push(o);if(!this.activeNode){this.activeNode=o}return o};dhtmlXColorPicker.prototype.getNode=function(h){var g=null,l=null;if(typeof(h)=="string"){g=document.getElementById(h)}else{g=h}if(g.tagName!=undefined){l=this._getNodeByElement(g)}return l};dhtmlXColorPicker.prototype._getNodeByElement=function(m){var l=null,n,h;h=this._nodes.length;for(n=0;n<h;n++){if(this._nodes[n].node==m){l=this._nodes[n]}}return l};dhtmlXColorPicker.prototype._getNodeByValueCont=function(m){var l=null,n,h;h=this._nodes.length;for(n=0;n<h;n++){if(this._nodes[n].valueCont&&this._nodes[n].valueCont==m){l=this._nodes[n]}}return l};dhtmlXColorPicker.prototype.initMemoryColors=function(){var g=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>";this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(a){var c=g.colorAIP.rgb2hex({r:a.red,g:a.green,b:a.blue});g.callEvent("onSaveColor",[c])};var e=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;if(typeof(window.addEventListener)=="function"){e.addEventListener("click",this.saveColor,false)}else{e.attachEvent("onclick",this.saveColor)}};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(u,h,s){var l,o,r;l=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*u/359)+this.configColorArea.minX;o=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-s)/100)+this.configColorArea.minY;r=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-h)/100)+this.configColorArea.minY;this._setColorAreaXY(l,o);this._setContrastY(r)};dhtmlXColorPicker.prototype._parseColor=function(h){if(h instanceof Array){var l={r:parseInt(h[0]),g:parseInt(h[1]),b:parseInt(h[2])}}else{if(typeof(h)=="string"){h=h.replace(/\s/g,"");if(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(h)){var g=h.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);var l={r:parseInt(g[1]),g:parseInt(g[2]),b:parseInt(g[3])}}else{var l=this.colorAIP.hex2rgb(h)}}}return l};dhtmlXColorPicker.prototype.setColor=function(n){var u=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});var s=this._parseColor(n);var o=(s instanceof Object);o=o&&(0<=s.r&&s.r<=255);o=o&&(0<=s.g&&s.g<=255);o=o&&(0<=s.b&&s.b<=255);if(!o){return u}var r=this.colorAIP.rgb2hex({r:s.r,g:s.g,b:s.b});if(r==u){return u}this.value.red=s.r;this.value.green=s.g;this.value.blue=s.b;var m=this.colorAIP.rgb2hsl(s.r/255,s.g/255,s.b/255);this.value.hue=Math.round(m.h);this.value.sat=Math.round(m.s*100);this.value.lum=Math.round(m.l*100);this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum);this._refreshContrast();this._refreshInputValues();this._refreshColorValue();return r};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(c){if(typeof(window.addEventListener)=="function"){c.node.addEventListener("click",this._doOnClickByNode,false)}else{c.node.attachEvent("onclick",this._doOnClickByNode)}if(c.valueCont&&c.valueCont.tagName.toLowerCase()=="input"){if(typeof(window.addEventListener)=="function"){c.valueCont.addEventListener("focus",this._doOnFocusByInput,false);c.valueCont.addEventListener("blur",this._doOnBlurByInput,false)}else{c.valueCont.attachEvent("onfocus",this._doOnFocusByInput);c.valueCont.attachEvent("onblur",this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype._detachEventsFromNode=function(c){if(typeof(window.addEventListener)=="function"){c.node.removeEventListener("click",this._doOnClickByNode,false)}else{c.node.detachEvent("onclick",this._doOnClickByNode)}if(c.valueCont&&c.valueCont.tagName.toLowerCase()=="input"){if(typeof(window.addEventListener)=="function"){c.valueCont.removeEventListener("focus",this._doOnFocusByInput,false);c.valueCont.removeEventListener("blur",this._doOnBlurByInput,false)}else{c.valueCont.detachEvent("onfocus",this._doOnFocusByInput);c.valueCont.detachEvent("onblur",this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype.show=function(g){var e=false;if(g!=undefined){this.activeNode=this.getNode(g)||this.activeNode}if(this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value){this.setColor(this.activeNode.valueCont.value)}if(this.activeNode){e=(this.activeNode.conf.customColors!=null?this.activeNode.conf.customColors:this.conf.customColors);this.setColor(this.activeNode.conf.selectedColor)}else{e=this.conf.customColors}if(e){this.showMemory()}else{this.hideMemory()}if(this.base._dhx_remove){this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id);this.base.style.visibility="hidden";if(document.body.firstChild){document.body.insertBefore(this.base,document.body.firstChild)}else{document.body.appendChild(this.base)}this._refreshPosition();this.base.style.visibility="visible";if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousedown",this._doOnClickByBody,false)}else{document.body.attachEvent("onmousedown",this._doOnClickByBody)}}else{this.base.appendChild(this._globalNode)}if(this._controllerNodes.fr_cover){this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode)}this.callEvent("onShow",[((this.activeNode)?this.activeNode.node:null)])};dhtmlXColorPicker.prototype.setPosition=function(r,m){var n=null;var l=parseInt(r);var o=parseInt(m);if(isNaN(l)){n=({right:"right",bottom:"bottom"}[r.toLowerCase()]?r:null)}if(this.base._dhx_remove){if(n==null){}else{this.conf.position=n;this._refreshPosition(n)}}else{if(isNaN(l)||isNaN(o)){}else{this._globalNode.style.left=l+"px";this._globalNode.style.top=o+"px";if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}}}};dhtmlXColorPicker.prototype._initListenerInput=function(){var c=this;this._inputListenerId=this._inputListenerId||setInterval(function(){c._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){if(this._inputListenerId){clearInterval(this._inputListenerId);this._inputListenerId=null}};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var g=this.activeNode.valueCont.value,e=this.getSelectedColor()[0];if(this._inputListenerId){if(/^#[\da-f]{6}$/i.test(g)&&g!=e){this.setColor(g);this.callEvent("onSelect",[g,this.activeNode.node])}}};dhtmlXColorPicker.prototype._refreshPosition=function(y){if(this.activeNode==null){return}var x=dhx4.absTop(this.activeNode.node);var s=dhx4.absLeft(this.activeNode.node);var v=dhx4.screenDim();var w=this._globalNode.offsetWidth;var u=this._globalNode.offsetHeight;var o=0;y=y||this.conf.position;switch(y){case"bottom":var o=x+this.activeNode.node.offsetHeight+this.conf.indent;var r=s;if(r+w>v.left+v.right){r=s+this.activeNode.node.offsetWidth-w}if(r<v.left){r=s}if(o+u>v.top+v.bottom){o=x-u-this.conf.indent}if(o-v.top<0){o=v.top+this.conf.indent}this._globalNode.style.top=o+"px";this._globalNode.style.left=r+"px";break;default:var r=s+this.activeNode.node.offsetWidth+this.conf.indent;o=x;if(y=="right"){if(r+w>v.left+v.right){r=s-w-this.conf.indent}if(r<v.left){r=s+this.activeNode.node.offsetWidth+this.conf.indent}}if(v.bottom-(o+u)<=0){o=x+this.activeNode.node.offsetHeight-u}if(o-v.top<0){o=v.top+this.conf.indent}this._globalNode.style.left=r+"px";this._globalNode.style.top=o+"px"}if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}};dhtmlXColorPicker.prototype.isVisible=function(){var c=false;if(this.base._dhx_remove){c=this.base.parentNode==document.body}else{c=this._globalNode.parentNode==this.base}return c};dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove){if(this.base.parentNode){this.base.parentNode.removeChild(this.base);dhx4.zim.clear(this.conf.cp_id);if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("mousedown",this._doOnClickByBody,false)}else{document.body.detachEvent("onmousedown",this._doOnClickByBody)}}}else{if(this.isVisible()==false){return}this.base.removeChild(this._globalNode)}if(this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}if(this.callEvent!=undefined){this.callEvent("onHide",[((this.activeNode)?this.activeNode.node:null)])}};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}};dhtmlXColorPicker.prototype.loadUserLanguage=function(c){if(typeof(this._mergeLangModules)=="function"){this._mergeLangModules()}this.conf.lang=c;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var e,g=this.i18n[this.conf.lang];for(e in g){if(this._labelNodes[e]){this._labelNodes[e].innerHTML=g[e]}}};dhtmlXColorPicker.prototype._setColorAreaXY=function(g,h){var l=this.configColorArea;g=parseInt(g);if(l.minX>g){this.conf.x=l.minX}else{if(g>l.maxX){this.conf.x=l.maxX}else{if(!isNaN(g)){this.conf.x=g}}}h=parseInt(h);if(l.minY>h){this.conf.y=l.minY}else{if(h>l.maxY){this.conf.y=l.maxY}else{if(!isNaN(h)){this.conf.y=h}}}this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(g){g=g||false;this.value.hue=Math.round((359*(this.conf.x-this.configColorArea.minX))/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-(100*(this.conf.y-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-(100*(this.conf.c-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));var e=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*e.r);this.value.green=Math.round(255*e.g);this.value.blue=Math.round(255*e.b);if(!g){this._refreshContrast()}this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(g){var e=this.configColorArea;g=parseInt(g);if(!isNaN(g)){this.conf.c=Math.min(Math.max(e.minY,g),e.maxY)}this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var c=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=c;this.callEvent("onChange",[c])};dhtmlXColorPicker.prototype._refreshContrast=function(){var u=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100);var s=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100);var v=this._checkIeVersion();if(v&&v<=9){var n=this._controllerNodes.contrastArea.firstChild;if(n==this._controllerNodes.contrast_line){n=document.createElement("div");n.className+="dhxcp_ie_gradient";this._controllerNodes.contrastArea.appendChild(n);this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)}var w=this.colorAIP.rgb2hex({r:Math.round(255*u.r),g:Math.round(255*u.g),b:Math.round(255*u.b)});var r=this.colorAIP.rgb2hex({r:Math.round(255*s.r),g:Math.round(255*s.g),b:Math.round(255*s.b)});n.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+r+"', endColorstr='"+w+"', GradientType=0)"}else{u=[Math.round(255*u.r),Math.round(255*u.g),Math.round(255*u.b)];s=[Math.round(255*s.r),Math.round(255*s.g),Math.round(255*s.b)];var o="linear-gradient(rgb("+s.join(",")+"), rgb("+u.join(",")+"))";if(window.dhx4.isKHTML==true&&navigator.userAgent.match(/Windows/gi)!=null){o="-webkit-"+o}this._controllerNodes.contrastArea.style.backgroundImage=o}};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};dhtmlXColorPicker.prototype._getOffsetPosition=function(l,e){var n={x:NaN,y:NaN},m=l.target||l.srcElement;if(m==e){n.x=(l.offsetX!=undefined)?l.offsetX:l.layerX;n.y=(l.offsetY!=undefined)?l.offsetY:l.layerY}else{if(m==this._controllerNodes.v_line){n.y=(l.offsetY!=undefined)?l.offsetY:l.layerY}else{n.x=(l.offsetX!=undefined)?l.offsetX:l.layerX}}return n};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(g){var e=g.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(e!=null){return{r:parseInt("0x"+e[2]),g:parseInt("0x"+e[3]),b:parseInt("0x"+e[4])}}else{return null}},rgb2hex:function(l){var m=parseInt(l.r),n=parseInt(l.g),g=parseInt(l.b);m=m||0,n=n||0,g=g||0;return"#"+((m)?((m<16)?"0"+m.toString(16):m.toString(16)):"00")+((n)?((n<16)?"0"+n.toString(16):n.toString(16)):"00")+((g)?((g<16)?"0"+g.toString(16):g.toString(16)):"00")},rgb2hsl:function(w,y,v){var g,s,x;var r=Math.max(w,y,v),u=Math.min(w,y,v);x=0.5*(r+u);if(r==u){g=0}else{if(r==w){g=60*(y-v)/(r-u);if(y<v){g+=360}}else{if(r==y){g=60*(v-w)/(r-u)+120}else{g=60*(w-y)/(r-u)+240}}}if(x==0||r==u){s=0}else{if(x<=0.5){s=0.5*(r-u)/x}else{s=0.5*(r-u)/(1-x)}}return{h:g,s:s,l:x}},hsl2rgb:function(r,y,u){var w,v,s;var A=[],C=[];if(u<=0.5){w=u*(1+y)}else{w=u+y-(u*y)}v=2*u-w;s=r/360;A.push(s+1/3);A.push(s);A.push(s-1/3);for(var x=0;x<3;x++){if(A[x]<0){A[x]+=1}else{if(A[x]>1){A[x]-=1}}if(A[x]<1/6){C.push(v+(w-v)*6*A[x])}else{if(A[x]<0.5){C.push(w)}else{if(A[x]<2/3){C.push(v+(w-v)*(2/3-A[x])*6)}else{C.push(v)}}}}return{r:C[0],g:C[1],b:C[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var e;var g=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);e=(g&&g[2])?parseInt(g[2]):null;return e};dhtmlXColorPicker.prototype.setCustomColors=function(){if(this.memory==null){this.initMemoryColors();this.conf.customColors=true}var r,s,l,u,o,n;s=arguments.length;for(r=0;r<s;r++){if(arguments[r] instanceof Array){l=this._rgb2value(arguments[r][0],arguments[r][1],arguments[r][2]);this.memory.setValue(l,null,false);continue}else{if(typeof(arguments[r])=="string"){u=arguments[r].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);if(u instanceof Array){l=this._rgb2value(u[1],u[2],u[3]);this.memory.setValue(l,null,false);continue}u=arguments[r].match(/(#[\da-f]{6})/ig);if(u instanceof Array){n=u.length;for(o=0;o<n;o++){l=this._hex2value(u[o]);this.memory.setValue(l,null,false)}}}}}};dhtmlXColorPicker.prototype.getCustomColors=function(){var l=[];if(this.memory!=null&&this.conf.customColors==true){for(var h=0;h<this.memory.controllers.length;h++){var g=this.memory.controllers[h].value;l.push(this.colorAIP.rgb2hex({r:g.red,g:g.green,b:g.blue}))}}return l};dhtmlXColorPicker.prototype._rgb2value=function(l,m,g){var n=this.colorAIP.rgb2hsl(l/255,m/255,g/255);return{red:l,green:m,blue:g,hue:Math.round(n.h),sat:Math.round(n.s*100),lum:Math.round(n.l*100)}};dhtmlXColorPicker.prototype._hex2value=function(h){var l,g;l=this.colorAIP.hex2rgb(h);g=this.colorAIP.rgb2hsl(l.r/255,l.g/255,l.b/255);return{red:l.r,green:l.g,blue:l.b,hue:Math.round(g.h),sat:Math.round(g.s*100),lum:Math.round(g.l*100)}};dhtmlXColorPicker.prototype.showMemory=function(){if(this.memory==null){this.initMemoryColors()}if(!this._globalNode.className.match(/dhxcp_add_memory/)){this._globalNode.className+=" dhxcp_add_memory"}this.conf.customColors=true};dhtmlXColorPicker.prototype.hideMemory=function(){if(this.memory!=null){this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")}this.conf.customColors=false};dhtmlXColorPicker.prototype.setSkin=function(m){m=m.toLowerCase();var o,r=-1,l,n="dhtmlxcp";o=this.base.className.match(/\S\w+/ig);if(o instanceof Array){for(l in this._skinCollection){if(r==-1){r=this._indexOf(o,n+"_"+l)}else{break}}r=(r==-1)?o.length:r}else{o=[];r=0}o[r]=n+"_"+m;this.base.className=o.join(" ");this.skin=m};dhtmlXColorPicker.prototype.hideOnSelect=function(c){c=dhx4.s2b(c);this.conf.hideOnSelect=c};dhtmlXColorPicker.prototype._indexOf=function(l,n){var o,r,m=-1;r=l.length;for(o=r;o>=0;o--){if(l[o]==n){m=o;break}}return m};dhtmlXColorPicker.prototype.destructMemory=function(){if(this.memory==null){return}this.hideMemory();var c=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;if(typeof(window.addEventListener)=="function"){c.removeEventListener("click",this.saveColor,false)}else{c.detachEvent("onclick",this.saveColor)}this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null};dhtmlXColorPicker.prototype.Memory=function(m){var n=this,h=null,l={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var a=(this!=window)?this:event.srcElement;var c=c||a.dhxpc_memory;if(h!=null){n.unSelect()}h=c;c.domElement.className+=" dhxcp_memory_el_select";if(typeof(n.onSelect)=="function"){n.onSelect(c)}};this.onSelect=null;this.onSave=null;this._createMemoryController=function(c){var a={domElement:c,value:dhx4._copyObj(l)};c.dhxpc_memory=a;if(typeof(window.addEventListener)=="function"){c.addEventListener("click",n.select,false)}else{c.attachEvent("onclick",n.select)}return a};this._findMemoryControllers=function(e){var s=e.getElementsByTagName("a"),a,c,g=[];c=s.length;for(a=0;a<c;a++){g.push(this._createMemoryController(s[a]))}return g};this.controllers=this._findMemoryControllers(m);this.unSelect=function(){if(h){h.domElement.className=h.domElement.className.replace(/\s.*$/i,"")}h=null};this.setActiveNext=function(){var a=null,c;if(h==null){h=this.controllers[0]}else{a=this.getIndex(h);c=this.controllers.length;this.unSelect();h=(a+1<c)?this.controllers[a+1]:this.controllers[0]}h.domElement.className+=" dhxcp_memory_el_next";return h};this.setValue=function(c,e,a){h=e||h;if(h==null){h=this.controllers[0]}h.value.red=c.red;h.value.blue=c.blue;h.value.green=c.green;h.value.hue=c.hue;h.value.sat=c.sat;h.value.lum=c.lum;h.domElement.style.backgroundColor="rgb("+[c.red,c.green,c.blue].join(", ")+")";this.setActiveNext();if((a!=false)&&(typeof(this.onSave)=="function")){this.onSave(c)}};this.clean=function(){var c=this.controllers.length,e;for(var a=0;a<c;a++){e=this.controllers[a];e.value=dhx4._copyObj(l);e.domElement.style.backgroundColor="rgb("+[l.red,l.green,l.blue].join(", ")+")"}this.unSelect();h=this.controllers[0]};this.getIndex=function(g){var a,c,e=-1;c=this.controllers.length;for(a=0;a<c;a++){if(this.controllers[a]==g){e=a;break}}return e};this.remove=function(){var a,c;c=this.controllers.length;for(a=0;a<c;a++){if(typeof(window.addEventListener)=="function"){this.controllers[a].domElement.removeEventListener("click",this.select,false)}else{this.controllers[a].domElement.detachEvent("onclick",this.select)}delete this.controllers[a].domElement.dhxpc_memory}delete this.onSelect;delete this.controllers;delete this.onSave}};if(window.dhx4.isIE6){dhtmlXColorPicker.prototype._cpInitFRM=function(){var c;if(!this._controllerNodes.fr_cover){c=document.createElement("IFRAME");c.className="dhxcp_frm";c.border=0;c.frameBorder=0;this._controllerNodes.fr_cover=c}if(!this.base._dhx_remove){this.base.insertBefore(c,this._globalNode)}}}function dhtmlXSlider(l){var g=this;this.conf={size:null,skin:null,vertical:false,min:0,max:99,value:0,step:1,decimals:0,margin:2,border:1,inverse:false,disabled:false,tooltip:false,visible:true,linkTo:null,range:false,bg:null,bg_mode:"left"};this._attachedNode={};this._movingInitialValues=null;this.base=null;if(arguments.length>1){return new dhtmlXSlider(this._renderArgumets(arguments))}else{if(typeof(l)=="string"||(typeof(l)=="object"&&l.tagName)){return new dhtmlXSlider({parent:l})}}if(typeof(l.parent)=="string"){this.base=document.getElementById(l.parent)}else{this.base=l.parent}this._mergeConfig(this._readAttFormNode(this.base));this._mergeConfig(l);if(this.conf.bg==null){this.conf.bg=(this.conf.range==true)}if(this.conf.range==true){if(!(this.conf.value instanceof Array)){this.conf.value=[this.conf.value]}if(this.conf.value.length<2){this.conf.value.push(this.conf.value[0])}if(!(this.conf.linkTo instanceof Array)){this.conf.linkTo=[this.conf.linkTo]}}this._detectDecimals();if(this.conf.size==null||typeof(this.conf.size)=="undefined"){if(this.conf.vertical){this.conf.size=this.base.offsetHeight}else{this.conf.size=this.base.offsetWidth}}var h=this.conf.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"dhx_skyblue";this.setSkin(h);this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'>"+(this.conf.bg==true?"<div class='dhxsl_track_bg'></div>":"")+"</div><div class='dhxsl_runner'></div>"+(this.conf.range==true?"<div class='dhxsl_runner'></div>":"")+"</div>";this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1],runner2:this.base.firstChild.childNodes[2]};this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(a){a=a||event;if(typeof(a.preventDefault)=="function"){a.preventDefault()}else{a.returnValue=false}return false};this._r_actv=null;if(this.conf.range==true){this.conf.value=this._normalizeRange(this.conf.value,this.conf.min,this.conf.max)}else{this.conf.value=this._normalize(this.conf.value,this.conf.min,this.conf.max)}this._setOrient(this.conf.vertical);this.setSize(this.conf.size);this._initMover=function(a,e){if(g.conf.disabled){return}a=a||event;if(typeof(a.preventDefault)=="function"){a.preventDefault()}if(e!=null){g._r_actv=g._nodes[e==0?"runner":"runner2"]}else{g._r_actv=a.target||a.srcElement;if(g._r_actv.className.indexOf("dhxsl_runner")==-1){g._r_actv=g._nodes.runner}}g._r_actv.className="dhxsl_runner dhxsl_runner_actv";var c=(a.type=="mousedown"?"client":"page")+(g.conf.vertical?"Y":"X");g._movingInitialValues={};if(g.conf.range==true){g._movingInitialValues.index=(g._r_actv==g._nodes.runner?0:1);g._movingInitialValues.value=g.conf.value[g._movingInitialValues.index]}else{g._movingInitialValues.value=g.conf.value}g._movingInitialValues.coord=(typeof(a[c])!="undefined"&&a[c]!=0?a[c]:(a.touches!=null&&a.touches[0]!=null?a.touches[0][c]||0:0));if(g.conf.disabled==false){if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",g._move,false);window.addEventListener("mouseup",g._cleanMove,false);window.addEventListener("touchmove",g._move,false);window.addEventListener("touchend",g._cleanMove,false)}else{document.body.attachEvent("onmousemove",g._move);document.body.attachEvent("onmouseup",g._cleanMove)}}g.callEvent("onMouseDown",[g._r_actv==g._nodes.runner?0:1]);return false};this._move=function(u){if(g.conf.disabled){return}u=u||event;if(typeof(u.preventDefault)=="function"){u.preventDefault()}var w=(u.type=="mousemove"?"client":"page")+(g.conf.vertical?"Y":"X");var v=(g.conf.vertical)?g._r_actv.offsetHeight:g._r_actv.offsetWidth;var c=g.conf.max-g.conf.min;var e=(typeof(u[w])!="undefined"&&u[w]!=0?u[w]:(u.touches!=null&&u.touches[0]!=null?u.touches[0][w]||0:0));var a=g._movingInitialValues.value+(e-g._movingInitialValues.coord)*c/(g.conf.size-v)*(g.conf.inverse?-1:1);if(g.conf.range==true){var s=[g.conf.value[0],g.conf.value[1]];if(g._movingInitialValues.index==0){s[0]=Math.min(s[1],a)}else{if(g._movingInitialValues.index==1){s[1]=Math.max(s[0],a)}}g.setValue(s,true)}else{g.setValue(a,true)}};this._cleanMove=function(a){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",g._move,false);window.removeEventListener("mouseup",g._cleanMove,false);window.removeEventListener("touchmove",g._move,false);window.removeEventListener("touchend",g._cleanMove,false)}else{document.body.detachEvent("onmousemove",g._move);document.body.detachEvent("onmouseup",g._cleanMove)}g._movingInitialValues=null;g._r_actv.className=g._r_actv.className.replace(/\s{0,}dhxsl_runner_actv/gi,"");g.callEvent("onSlideEnd",[g.conf.value]);g.callEvent("onMouseUp",[g._r_actv==g._nodes.runner?0:1]);g._r_actv=null};this._doOnSetValue=function(u){if(g.conf.disabled){return}if(g._movingInitialValues!=null){return false}u=u||event;if(typeof(u.preventDefault)=="function"){u.preventDefault()}var w=0;var a=u.target||u.srcElement;if(a.className.match(/dhxsl_track_bg/)!=null){w=parseInt(a.style[g.conf.vertical?"top":"left"])}var x=(g.conf.vertical?(u.offsetY||u.layerY):(u.offsetX||u.layerX))+w;var y=(g.conf.vertical?g._nodes.runner.offsetHeight:g._nodes.runner.offsetWidth)+w;var v=g.conf.max-g.conf.min;var e=null;var c=null;if(g.conf.inverse==true){c=g.conf.max-(x*v/(g.conf.size))}else{c=(x*v/(g.conf.size)+g.conf.min)}if(g.conf.range==true){e=(Math.abs(g.conf.value[0]-c)<=Math.abs(g.conf.value[1]-c)?0:1);c=[e==0?c:g.conf.value[0],e==1?c:g.conf.value[1]]}g.conf.init_index=e;g.setValue(c,true);g.conf.init_index=null;if(g._movingInitialValues==null){g._initMover(u,e)}return false};this._doOnChangeInput=function(a){a=a||event;var c=a.target||a.srcElement;g.setValue(c.value)};this._doOnKeyDown=function(a){a=a||event;var c=a.target||a.srcElement;if(a.keyCode==13){g.setValue(c.value)}};this._attachEvents(this._nodes);this.unload=function(){dhx4._eventable(this,"clear");this._detachNode();this._detachEvents(this._nodes);this.base.removeChild(this._nodes.cont);this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null;delete this._nodes.cont;delete this._nodes.track;delete this._nodes.max;delete this._nodes.min;delete this._nodes.runner;if(this._nodes.runner2){delete this._nodes.runner2}if(/\s?dhtmlxslider_\S*/.test(this.base.className)){this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,"")}for(var a in this){this[a]=null}g=null};dhx4._eventable(this);if(this.conf.disabled){this.disable()}if(this.conf.tooltip){this.enableTooltip()}if(!this.conf.visible){this.hide()}if(this.conf.linkTo){this.linkTo(this.conf.linkTo)}return this}dhtmlXSlider.prototype._setOrient=function(c){c=c||false;if(/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)){this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,"")}if(/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)){this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,"")}if(c){this._nodes.cont.className+=" dhxsl_cont_vr"}else{this._nodes.cont.className+=" dhxsl_cont_hr"}};dhtmlXSlider.prototype._attachEvents=function(c){if(typeof(window.addEventListener)=="function"){c.runner.addEventListener("mousedown",this._initMover,false);c.runner.addEventListener("touchstart",this._initMover,false);c.cont.addEventListener("mousedown",this._doOnSetValue,false);c.cont.addEventListener("touchstart",this._doOnSetValue,false);if(c.runner2){c.runner2.addEventListener("mousedown",this._initMover,false);c.runner2.addEventListener("touchstart",this._initMover,false)}}else{c.runner.attachEvent("onmousedown",this._initMover);c.cont.attachEvent("onmousedown",this._doOnSetValue);if(c.runner2){c.runner2.attachEvent("onmousedown",this._initMover)}}};dhtmlXSlider.prototype._detachEvents=function(c){if(typeof(window.addEventListener)=="function"){c.runner.removeEventListener("mousedown",this._initMover,false);c.runner.removeEventListener("touchstart",this._initMover,false);c.cont.removeEventListener("mousedown",this._doOnSetValue,false);c.cont.removeEventListener("touchstart",this._doOnSetValue,false);if(c.runner2){c.runner2.removeEventListener("mousedown",this._initMover,false);c.runner2.removeEventListener("touchstart",this._initMover,false)}}else{c.runner.detachEvent("onmousedown",this._initMover);c.cont.detachEvent("onmousedown",this._doOnSetValue);if(c.runner2){c.runner2.detachEvent("onmousedown",this._initMover)}}};dhtmlXSlider.prototype._mergeConfig=function(g){for(var e in g){switch(e.toLowerCase()){case"min":case"max":case"size":case"step":case"value":case"inverse":this.conf[e]=g[e];break;case"tooltip":case"visible":case"vertical":case"disabled":case"range":case"bg":this.conf[e]=dhx4.s2b(g[e]);break;case"bg_mode":this.conf[e]=({left:"left",right:"right"}[g[e]])||"left";break;case"parent":continue;break;default:this.conf[e]=g[e]}}};dhtmlXSlider.prototype._readAttFormNode=function(r){var l=r.attributes,n=l.length,s,o={},u;for(s=0;s<n;s++){u=l[s];switch(u.name.toLowerCase()){case"size":case"min":case"max":case"value":case"step":o[u.name]=Number(u.value);break;case"skin":o[u.name]=u.value;break;case"vertical":case"disabled":case"visible":case"range":case"bg":o[u.name]=dhx4.s2b(u.value);break;case"linkto":o[u.name]=u.value;break;case"tooltip":o[u.name]=dhx4.s2b(u.value);break;case"bg_mode":o[u.name]=({left:"left",right:"right"}[u.value])||"left";break}}return o};dhtmlXSlider.prototype._renderArgumets=function(h){var l={},m,n;n=h.length;for(m=0; m<n; m++){switch(m){case 0:l.parent=h[m];break;case 1:l.size=h[m];break;case 2:l.skin=h[m];break;case 3:l.vertical=h[m];break;case 4:l.min=h[m];break;case 5:l.max=h[m];break;case 6:l.value=h[m];break;case 7:l.step=h[m];break}}return l};dhtmlXSlider.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true};dhtmlXSlider.prototype._indexOf=function(l, n){var o,r,m=-1;r=l.length;for(o=r; o>=0; o--){if(l[o]==n){m=o;break}}return m};dhtmlXSlider.prototype._refreshRunner=function(o){var r=(this.conf.vertical==true?{x:"header.html",y:"left",ofs_w:"offsetHeight",ofs_h:"offsetWidth"}:{x:"left",y:"header.html",ofs_w:"offsetWidth",ofs_h:"offsetHeight"});var n=this._nodes.cont[r.ofs_w]-this._nodes.runner[r.ofs_w];var s=this._nodes.runner;var u=this._nodes.runner2;if(o==null||o==0){var m=this._getCoord(n,(this.conf.value instanceof Array?this.conf.value[0]:this.conf.value));s.style[r.x]=m+this.conf.border+"px";s.style[r.y]=Math.round((this._nodes.cont[r.ofs_h]-s[r.ofs_h])/2)+"px"}if(this.conf.range==true&&(o==null||o==1)){var m=this._getCoord(n,this.conf.value[1]);u.style[r.x]=m+this.conf.border+"px";u.style[r.y]=Math.round((this._nodes.cont[r.ofs_h]-s[r.ofs_h])/2)+"px"}if(this.conf.range==true){if(s.style[r.x]==u.style[r.x]&&this.conf.value[1]==this.conf.max){if(s.style.zIndex!=2){s.style.zIndex=2}}else{if(s.style.zIndex==2){s.style.zIndex=1}}}s=u=null;this._refreshBG()};dhtmlXSlider.prototype._setValueByCoord=function(n){var l=dhx4.absLeft(this._nodes.cont),m=dhx4.absTop(this._nodes.cont),o,r;if(this.conf.vertical){r=(n.y-m-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight)}else{r=(n.x-l-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth)}o=(this.conf.max-this.conf.min)*r+this.conf.min;this.setValue(o,true)};dhtmlXSlider.prototype._getCoord=function(h,l){var m=(this.conf.inverse?this._inverseValue(l):l);var n=(m-this.conf.min)/(this.conf.max-this.conf.min);return Math.round(h*n)};dhtmlXSlider.prototype._normalize=function(l,m,h){l=Number(l);l=Math.round(l/this.conf.step)*this.conf.step;var n=Math.pow(10,this.conf.decimals);l=Math.round(l*n)/n;l=Math.max(m,Math.min(h,l));return l};dhtmlXSlider.prototype._normalizeRange=function(h, l, g){if(h[1]<h[0]){h[1]=h[0]}h[0]=this._normalize(h[0],l,Math.min(g,h[1]));h[1]=this._normalize(h[1],Math.max(l,h[0]),g);return h};dhtmlXSlider.prototype._refreshBG=function(){if(this.conf.bg!=true){return}var n=this._nodes.track.firstChild;var o=this._nodes.runner;var l=o.nextSibling;var r=(this.conf.vertical==true?{x:"header.html",w:"height",ofs:"offsetHeight"}:{x:"left",w:"width",ofs:"offsetWidth"});if(this.conf.range==true){n.style[r.x]=Math.floor(parseInt(o.style[r.x])+o[r.ofs]/2)+"px";n.style[r.w]=Math.max(Math.floor(parseInt(l.style[r.x])+l[r.ofs]/2)-parseInt(n.style[r.x]),0)+"px"}else{var m=(this.conf.inverse==true?{left:"right",right:"left"}[this.conf.bg_mode]:this.conf.bg_mode);n.style[r.x]=(m=="left"?"0":Math.floor(parseInt(o.style[r.x])+o[r.ofs]/2))+"px";n.style[r.w]=(m=="left"?Math.floor(parseInt(o.style[r.x])+o[r.ofs]/2):this._nodes.track[r.ofs]-parseInt(n.style[r.x]))+"px"}n=o=l=null};dhtmlXSlider.prototype._attachNode=function(h,g){this._detachNode(g);var l=h.tagName.toLowerCase();if(!l){return}this._attachedNode["node_"+g]=h;switch(l){case"input":case"select":if(typeof(window.addEventListener)=="function"){h.addEventListener("change",this._doOnChangeInput,false);h.addEventListener("keydown",this._doOnKeyDown,false)}else{h.attachEvent("onchange",this._doOnChangeInput);h.attachEvent("onkeydown",this._doOnKeyDown)}this._attachedNode.setValue=function(a,n,c){var e=(a instanceof Array?a[c||0]:a);this["node_"+(c||0)].value=dhtmlXSlider.prototype._atatchedNodeFixDec(e,n)};break;default:this._attachedNode.setValue=function(a,n,c){var e=(a instanceof Array?a[c||0]:a);this["node_"+(c||0)].innerHTML=dhtmlXSlider.prototype._atatchedNodeFixDec(e,n)}}this._attachedNode.setValue(this.conf.value,this.conf.decimals,g)};dhtmlXSlider.prototype._detachNode=function(g){var h=this._attachedNode["node_"+g];if(!h){return}var l=h.tagName;switch(l){case"input":case"select":if(typeof(window.addEventListener)=="function"){h.removeEventListener("change",this._doOnChangeInput,false);h.removeEventListener("keydown",this._doOnChangeInput,false)}else{h.detachEvent("change",this._doOnChangeInput);h.detachEvent("keydown",this._doOnChangeInput)}break}delete this._attachedNode["node_"+g];delete this._attachedNode.setValue;h=null};dhtmlXSlider.prototype._atatchedNodeFixDec=function(l,h){l=String(l);if(h>0){var n=l.match(/\.\d{1,}$/);if(n!=null){h=Math.max(h-n[0].length+1)}l+=(l.indexOf(".")<0?".":"");for(var m=0;m<h;m++){l+="0"}}return l};dhtmlXSlider.prototype._detectDecimals=function(){var c=this.conf.step.toString().match(/\.(\d*)$/);this.conf.decimals=(c!=null?c[1].length:0)};dhtmlXSlider.prototype.setSize=function(c){if(!isNaN(c)){if(this.conf.vertical){if(this._nodes.cont.style.width){delete this._nodes.cont.style.width}this._nodes.cont.style.height=c-this.conf.margin+"px"}else{if(this._nodes.cont.style.height){delete this._nodes.cont.style.height}this._nodes.cont.style.width=c-this.conf.margin+"px"}this._refreshRunner()}};dhtmlXSlider.prototype.setSkin=function(m){m=m.toLowerCase();var o,r=-1,l,n="dhtmlxslider";o=this.base.className.match(/\S\w+/ig);if(o instanceof Array){for(l in this._skinCollection){if(r==-1){r=this._indexOf(o,n+"_"+l)}else{break}}r=(r==-1)?o.length:r}else{o=[];r=0}o[r]=n+"_"+m;this.base.className=o.join(" ");this.conf.skin=m;if(this._nodes){this._refreshRunner()}};dhtmlXSlider.prototype.setValue=function(n,m){m=m||false;var r=null;var o=false;if(this.conf.range==true){if(this._r_actv!=null){r=(this._r_actv==this._nodes.runner?0:1)}n=this._normalizeRange(n,this.conf.min,this.conf.max);o=(this.conf.value[0]!=n[0]||this.conf.value[1]!=n[1])}else{n=this._normalize(n,this.conf.min,this.conf.max);o=(this.conf.value!=n)}if(o=true){this.conf.value=n;this._refreshRunner(r);this._refreshTooltip();if(m){var l=[n,this];if(this.conf.range==true){if(this._r_actv!=null){l.push(this._r_actv==this._nodes.runner?0:1)}else{if(this.conf.init_index!=null){l.push(this.conf.init_index.valueOf())}}}this.callEvent("onChange",l)}}if(typeof(this._attachedNode.setValue)=="function"){if(r==null){r=this.conf.init_index}this._attachedNode.setValue(this.conf.value,this.conf.decimals,r)}};dhtmlXSlider.prototype.getValue=function(){if(this.conf.range==true){return[this.conf.value[0].valueOf(),this.conf.value[1].valueOf()]}else{return this.conf.value.valueOf()}};dhtmlXSlider.prototype._inverseValue=function(c){return this.conf.max+this.conf.min-c};dhtmlXSlider.prototype.disable=function(a){a=(a==false)?false:true;var l=null;if(a){for(var n in this._nodes){if(n=="cont"){continue}var m=(n=="runner2"?"runner":n);if(this._nodes[n]!=null){l=new RegExp("\\s?dhxsl_"+m+"_dis","i");if(!l.test(this._nodes[n].className)){this._nodes[n].className+=" dhxsl_"+m+"_dis"}}}this.conf.disabled=true}else{this.enable()}};dhtmlXSlider.prototype.enable=function(){var a;for(var l in this._nodes){if(l=="cont"){continue}var h=(l=="runner2"?"runner":l);if(this._nodes[l]!=null){a=new RegExp("\\s?dhxsl_"+h+"_dis","i");if(a.test(this._nodes[l].className)){this._nodes[l].className=this._nodes[l].className.replace(a,"")}}}this.conf.disabled=false};dhtmlXSlider.prototype.isEnabled=function(){return !this.conf.disabled};dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title");this.conf.tooltip=false};dhtmlXSlider.prototype.enableTooltip=function(c){if(typeof(c)=="undefined"){c=true}else{c=dhx4.s2b(c)}if(c){this.conf.tooltip=true;this._refreshTooltip()}else{this.disableTooltip()}};dhtmlXSlider.prototype.setMax=function(c){if(!isNaN(c)&&this.conf.min<c){this.conf.max=c;this.setValue(this.conf.value)}};dhtmlXSlider.prototype.getMax=function(){return this.conf.max};dhtmlXSlider.prototype.setMin=function(c){if(!isNaN(c)&&this.conf.max>c){this.conf.min=c;this.setValue(this.conf.value)}};dhtmlXSlider.prototype.getMin=function(){return this.conf.min};dhtmlXSlider.prototype.setStep=function(e){var g=this.conf.max-this.conf.min;if(!isNaN(e)&&e<g){this.conf.step=e;this._detectDecimals();this.setValue(this.conf.value)}};dhtmlXSlider.prototype.getStep=function(){return this.conf.step};dhtmlXSlider.prototype.show=function(){if(/\s?dhxsl_hidden/i.test(this._nodes.cont.className)){this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,"")}this.conf.visible=true};dhtmlXSlider.prototype.hide=function(){if(!/\s?dhxsl_hidden/i.test(this._nodes.cont.className)){this._nodes.cont.className+=" dhxsl_hidden"}this.conf.visible=false};dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible};dhtmlXSlider.prototype.linkTo=function(e){if(!(e instanceof Array)){e=[e]}for(var g=0;g<e.length&&g<2;g++){if(e[g]!=null){if(typeof(e[g])=="string"){e[g]=document.getElementById(e[g])}this._attachNode(e[g],g)}}};dhtmlXSlider.prototype._refreshTooltip=function(){if(this.conf.tooltip==true){if(this.conf.value instanceof Array){this._nodes.cont.title=this.conf.value.join(", ")}else{this._nodes.cont.title=this.conf.value}}};dhtmlXSlider.prototype.getRunnerIndex=function(){if(this._r_actv==null){return -1}return(this._r_actv==this._nodes.runner?0:1)};function dhtmlXPopup(h){var a=this;this.conf=h||{};h=null;this.mode=(this.conf.mode||"bottom");this.conf.zi=window.dhx4.newId();this.conf.context=(this.conf.context==null?true:window.dhx4.s2b(this.conf.context));this.conf.IE6_display_fix=(this.conf.IE6_display_fix==null?false:window.dhx4.s2b(this.conf.IE6_display_fix));this.conf.last_p_click=this.conf.last_body_click=null;this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.p.oncontextmenu=function(c){if(a.conf.context==false){c=c||event;c.returnValue=false;return false}};this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}};this.p.ontouchstart=this.p.onclick=function(g){g=g||event;var n=(a.conf.last_p_click!=null&&a.conf.last_p_click!=g.type);a.conf.last_p_click=g.type;if(n==true){return}a._clearClick=true;if(a._nodeObj!=null){a.callEvent("onContentClick",[]);return true}var e=(g.target||g.srcElement);var c=null;while(e!=a.p&&e!=null){if(typeof(e._idd)!="undefined"&&!e._isSeparator){c=e._idd;e=null}else{e=e.parentNode}}e=null;if(c!=null){a.callEvent("onClick",[c]);if(a!=null&&a.isVisible!=null&&a.isVisible()&&a.callEvent("onBeforeHide",["select",g,c])===true){g.cancelBubble=true;a.hide()}}};this.separator="DHXSEP_"+window.dhx4.newId();this.tpl=[];this._setTemplate=function(c){this.tpl=c.split(",")};this.show=function(e){var c=null;if(arguments.length==1){if(!e){e=this.conf.id[0]}else{if(!this._idExists(e)){return}}if(this.conf.toolbar){c=this.conf.toolbar._getItemDim(e)}if(this.conf.ribbon){c=this.conf.ribbon._getItemDim(e)}if(this.conf.form){c=this.conf.form._getItemDim(e)}}else{if(arguments.length==4){this._clearClick=true;c={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]};e=null}}if(!c){return}this.p.style.visibility="hidden";this.p.style.display="";this._setPos(c);this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this.p.style.visibility="visible";this._lastId=e;this.callEvent("onShow",[e])};this._setPos=function(X, ak){var ai=X.left;var ac=X.header;var af=X.width;var U=X.height;this._posData={left:ai,top:ac,width:af,height:U};var x=window.dhx4.screenDim();var Z=ak||this.mode;if(typeof(ak)=="undefined"){ak=false}var g={top:(ac-this.p.offsetHeight)-x.top,bottom:x.bottom-(ac+U+this.p.offsetHeight),left:ai-this.p.offsetWidth-x.left,right:x.right-(ai+af+this.p.offsetWidth)};if(!ak&&g[Z]<0){var W=this._getAvailPos(Z,g);if(W!==false){this._setPos(X,W);return}}if(Z=="header.html"||Z=="bottom"){var ad=this.skinParams[this.conf.skin].t2;var ah=this.skinParams[this.conf.skin].t3;var ae=Math.round(this.p.offsetWidth/2);var an=Math.round(this.p.lastChild.offsetWidth/2);if(ai<x.left){var y=Math.min(ai+af,x.left);af=ai+af-y;ai=y}if(ai+af>x.right){af=x.right-ai}var aa=Math.round(ai+af/2);var al=aa-ae;var V=aa-ad-an;var ag=aa+an+ad-this.p.offsetWidth;if(al<x.left-ah){al=Math.min(x.left-ah,V)}else{if(al+this.p.offsetWidth>x.right+ah){al=Math.max(ag,x.right+ah-this.p.offsetWidth)}}this.p.style.left=al+"px";this.p.style.top=(Z=="header.html"?ac-this.p.offsetHeight:ac+U)+"px";aa=aa-al-an;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+Z;this.p.lastChild.style.top=(Z=="header.html"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=aa+"px"}if(Z=="left"||Z=="right"){var ad=this.skinParams[this.conf.skin].t0;var ah=this.skinParams[this.conf.skin].t1;var aj=Math.round(this.p.offsetHeight/2);var c=Math.round(this.p.lastChild.offsetHeight/2);if(ac<x.top){var am=Math.min(ac+U,x.top);U=ac+U-am;ac=am}if(ac+U>x.bottom){U=x.bottom-ac}var aa=Math.round(ac+U/2);var Y=aa-aj;var e=aa-ad-c;var w=aa+c+ad-this.p.offsetHeight;if(Y<x.top-ah){Y=Math.min(x.top-ah,e)}else{if(Y+this.p.offsetHeight>x.bottom+ah){Y=Math.max(w,x.bottom+ah-this.p.offsetHeight)}}this.p.style.left=(Z=="left"?ai-this.p.offsetWidth:ai+af)+"px";this.p.style.top=Y+"px";aa=aa-Y-c;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+Z;this.p.lastChild.style.left=(Z=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=aa+"px"}if(this._IEDisp&&this._nodeId!=null){var ab=document.getElementById(this._nodeId);if(this.conf.IE6_display_fix==true){ab.style.visibility="hidden"}window.setTimeout(function(){ab.style.visibility="visible";ab=null},1)}};this._getAvailPos=function(s, u){var e={top:["bottom","right","left"],bottom:["header.html","right","left"],left:["right","bottom","header.html"],right:["left","bottom","header.html"]};var c=null;for(var v=0; v<e[s].length; v++){if(c==null&&u[e[s][v]]>0){c=e[s][v]}}if(c==null){c="bottom";for(var g in u){if(u[g]>u[c]){c=g}}}if(c==s){return false}return c};this._repaint=function(){if(this.isVisible()){this._setPos(this._posData)}};this.clear=function(){if(this._nodeObj){if(window.dhx4.isIE&&typeof(window.dhtmlXLayoutObject)!="undefined"&&this._nodeObj instanceof dhtmlXLayoutObject){this.p.onmousedown=null}if(this._nodeObj.unload){this._nodeObj.unload()}else{if(this._nodeObj.destruct){this._nodeObj.destruct()}}this._nodeObj=this._nodeId=null;if(this._nodeObjEv!=null){for(var e=0;e<this._nodeObjEv.length;e++){this.detachEvent(this._nodeObjEv[e])}this._nodeObjEv=null}}if(this._IEHoverInited){this._IEHoverClear()}var c=this.p.firstChild.firstChild.firstChild;while(c.childNodes.length>0){c.removeChild(c.lastChild)}c=null;this.itemData={}};this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var c=this._lastId;this._lastId=null;this.callEvent("onHide",[c]);this.conf.last_p_click=this.conf.last_body_click=null}};this.isVisible=function(){return(this.p.style.display=="")};this.itemData={};this.getItemData=function(c){if(!c){return this.itemData}if(this.itemData[c]){return this.itemData[c]}return{}};this.setSkin=function(c){this.conf.skin=c;this.p.className="dhx_popup_"+this.conf.skin;if(this._nodeObj!=null&&typeof(this._nodeObj.setSkin)=="function"){this._nodeObj.setSkin(this.conf.skin)}this._repaint()};this.attachList=function(g,w){this._setTemplate(g);this.clear();var c=this.p.firstChild.firstChild.firstChild;for(var x=0;x<w.length;x++){var y=document.createElement("TR");if(w[x]!=this.separator){if(typeof(w[x].id)=="undefined"||w[x].id==null){y._idd=window.dhx4.newId();while(this.itemData[y._idd]!=null){y._idd=window.dhx4.newId()}}else{y._idd=w[x].id}this.itemData[y._idd]=w[x]}c.appendChild(y);if(w[x]==this.separator){y.className="dhx_popup_sep";y._isSeparator=true;var r=document.createElement("TD");r.className="dhx_popup_sep";r.colSpan=this.tpl.length;r.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";y.appendChild(r);r=null}else{for(var e=0;e<this.tpl.length;e++){var v="dhx_popup_td";if(this._IEFirstLast&&(this.tpl.length==1||e==0||e==this.tpl.length-1)){if(this.tpl.length==1){v+=" dhx_popup_td_single"}else{v+=(e==0?" dhx_popup_td_first":" dhx_popup_td_last")}}var r=document.createElement("TD");r.className=v;r.innerHTML=w[x][this.tpl[e]]||"&nbsp;";y.appendChild(r);r=null}if(this._IEHover){y._IEHover=true;if(!this._IEHoverInited){this._IEHoverInit()}}}y=null}c=null;this._repaint()};this._attachNode=function(c,g){this.clear();this._nodeId="dhxpopup_node_"+window.dhx4.newId();var e=this.p.firstChild.firstChild.firstChild;var o=document.createElement("TR");o.className="dhxnode";e.appendChild(o);var r=document.createElement("TD");r.className="dhx_popup_td";r.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";if(g.width){r.firstChild.style.width=g.width+"px"}if(g.height){r.firstChild.style.height=g.height+"px"}o.appendChild(r);r=o=e=null;if(typeof(this["_attach_init_"+c])=="function"){this["_attach_init_"+c](g);this._enableIEVFix()}this._repaint();return this._nodeObj};this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("touchstart",this._doOnClick,false);window.removeEventListener("click",this._doOnClick,false);window.removeEventListener("keyup",this._doOnKeyUp,false);window.removeEventListener("unload",this._doOnUnload,false)}else{document.body.detachEvent("onclick",this._doOnClick,false);document.body.detachEvent("onkeyup",this._doOnKeyUp,false);document.body.detachEvent("onunload",this._doOnUnload,false)}window.dhx4.detachEvent(this.conf.ev_grid_click);this.clear();if(this.conf.toolbarEvent!=null&&this.conf.toolbar!=null){if(this.conf.toolbar.detachEvent!=null){this.conf.toolbar.detachEvent(this.conf.toolbarEvent)}else{this.conf.toolbar._getItemDim=null}}if(this.conf.ribbonEvent!=null&&this.conf.ribbon!=null){if(this.conf.ribbon.detachEvent!=null){this.conf.ribbon.detachEvent(this.conf.ribbonEvent)}else{this.conf.ribbon._getItemDim=null}}if(this.conf.slider!=null){for(var c=0;c<this.conf.slider_events.length;c++){this.conf.slider.detachEvent(this.conf.slider_events[c])}this.conf.slider_events=null;this._sliderShow=this._sliderHide=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null;this.p.parentNode.removeChild(this.p);this.p=null;for(var e in this.conf){this.conf[e]=null}for(var e in this){this[e]=null}a=null};window.dhx4._eventable(this);this._doOnClick=function(C){C=C||event;var x=(a.conf.last_body_click!=null&&a.conf.last_body_click!=C.type);a.conf.last_body_click=C.type;if(x==true){return}if(a._clearClick==true){a._clearClick=false;return}if(a.conf.form!=null){var r;var A=(C.target||C.srcElement);if((A.tagName||"").toLowerCase()=="option"){A=A.parentNode}if(A.className!=null&&A.className.search("dhxform")>=0){if(A.parentNode!=null&&A.parentNode.parentNode!=null&&A.parentNode.parentNode._idd!=null){r=A.parentNode.parentNode._idd;if(A.parentNode.parentNode._type=="ra"){r=[A.parentNode.parentNode._group,A.parentNode.parentNode._value]}}}else{var e=true;var c=false;while(e&&!c){var g=(A.className||"").toLowerCase();if(g.length>0){c=(g=="dhxform_btn"||g.search(/dhxeditor_inside/gi)>=0||g=="dhxcombo_input"||g.search(/dhxcombolist/gi)>=0)}A=A.parentNode;e=(A!=null)}if(c){return}}A=null;if(r!=null&&a._idExists(r)){return}}if(typeof(window.dhtmlXForm)!="undefined"&&a._nodeObj instanceof window.dhtmlXForm){var y={};var g=0;var w=a._nodeObj;w.forEachItem(function(m){if(w.getItemType(m)=="combo"){y[w.getCombo(m).list._listId]=true;g++}});w=null;if(g>0){var A=(C.target||C.srcElement);var e=true;var c=false;while(e==true&&c!=true){var g=(A.className||"").toLowerCase();if(g.length>0&&g.search(/^dhxcombolist/gi)>=0&&A._listId!=null&&y[A._listId]==true){c=true;A=null}else{A=A.parentNode;e=(A!=null)}}if(c==true){return}}}if(a.isVisible()&&a.callEvent("onBeforeHide",["click",C])===true){a.hide()}};this._doOnKeyUp=function(c){c=c||event;if(c.keyCode==27){if(a.isVisible()&&a.callEvent("onBeforeHide",["esc",c])===true){a.hide()}}};this._doOnUnload=function(){a.unload()};if(typeof(window.addEventListener)=="function"){window.addEventListener("touchstart",this._doOnClick,false);window.addEventListener("click",this._doOnClick,false);window.addEventListener("keyup",this._doOnKeyUp,false);window.addEventListener("unload",this._doOnUnload,false)}else{document.body.attachEvent("onclick",this._doOnClick,false);document.body.attachEvent("onkeyup",this._doOnKeyUp,false);document.body.attachEvent("onunload",this._doOnUnload,false)}this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(e,c){if(a._nodeObj!=null&&a._nodeObj==c){return}a._clearClick=false;a._doOnClick(e)});this._idExists=function(e){var c=false;for(var g=0;g<this.conf.id.length;g++){if(this.conf.id[g] instanceof Array){c=c||(this.conf.id[g][0]==e[0]&&this.conf.id[g][1]==e[1])}else{c=c||this.conf.id[g]==e}}return c};this._IEDisp=(window.dhx4.isIE6||document.compatMode!="CSS1Compat");this._IEHover=(window.dhx4.isIE6==true);if(this._IEHover){this._IEHoverInit=function(){this.p.onmouseover=function(){var c=event.srcElement;while(c!=this&&c._IEHover!=true){c=c.parentNode}if(c._IEHover){if(a._IEHoverTM){window.clearTimeout(a._IEHoverTM)}if(a._lastIEHover==c){return}a._IEHoverRender(c);c=null}};this.p.onmouseout=function(){if(a._IEHoverTM){window.clearTimeout(a._IEHoverTM)}a._IEHoverTM=window.setTimeout(function(){a._IEHoverRender(null)},1)};this._IEHoverRender=function(c){if(this._lastIEHover!=null){if(this._lastIEHover.className.search(/tr_hover/gi)>=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,"");this._lastIEHover=null}}if(c!=null&&c.className.search(/tr_hover/gi)<0){c.className+=" tr_hover";a._lastIEHover=c}};this._IEHoverInited=true};this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=false}}this._IEFirstLast=(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8);this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var e=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"});var c=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(e,c)}};if(typeof(window.dhtmlXToolbarObject)!="undefined"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.toolbar.conf.skin;this._doOnToolbarClick=function(e){for(var c=0;c<a.conf.id.length;c++){if(e==a.conf.id[c]){if(e!=a._lastId){a.show(e);a._clearClick=true}}}};if(typeof(dhtmlXToolbarObject.prototype._getItemDim)=="undefined"){dhtmlXToolbarObject.prototype._getItemDim=function(e){var c=this.objPull[this.idPrefix+e];var g={left:window.dhx4.absLeft(c.obj),top:window.dhx4.absTop(c.obj),width:c.obj.offsetWidth+(c.arw?c.arw.offsetWidth:0),height:c.obj.offsetHeight};c=null;return g}}this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)}if(typeof(window.dhtmlXRibbon)!="undefined"&&this.conf.ribbon!=null&&this.conf.ribbon instanceof window.dhtmlXRibbon&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.ribbon.conf.skin;this._doOnRibbonClick=function(e){for(var c=0;c<a.conf.id.length;c++){if(e==a.conf.id[c]){if(e!=a._lastId){a.show(e);a._clearClick=true}}}};if(typeof(dhtmlXRibbon.prototype._getItemDim)=="undefined"){dhtmlXRibbon.prototype._getItemDim=function(e){var c=this._items[e].base;var g={left:window.dhx4.absLeft(c),top:window.dhx4.absTop(c),width:c.offsetWidth,height:c.offsetHeight};c=null;return g}}this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)}if(typeof(window.dhtmlXForm)!="undefined"&&this.conf.form!=null&&this.conf.form instanceof window.dhtmlXForm&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}if(!this.conf.mode){this.mode="right"}this.skinParent=this.conf.form.skin;if(typeof(dhtmlXForm.prototype._getItemDim)=="undefined"){dhtmlXForm.prototype._getItemDim=function(c,e){return this.doWithItem(c,"_getDim")};for(var l in {input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1}){if(dhtmlXForm.prototype.items[l]!=null){dhtmlXForm.prototype.items[l]._getDim=function(g){var e=g;if({ta:true,pw:true,se:true,calendar:true,colorpicker:1,editor:true}[g._type]){e=g.childNodes[g._ll?1:0].childNodes[0]}if({ch:true,ra:true,btn2state:true}[g._type]){e=g.childNodes[g._ll?1:0].childNodes[1]}if({bt:true}[g._type]){e=g.firstChild}if({combo:true}[g._type]){e=g._combo.DOMParent.firstChild}var c={left:window.dhx4.absLeft(e),top:window.dhx4.absTop(e),width:e.offsetWidth,height:e.offsetHeight};e=null;return c}}}}}if(typeof(window.dhtmlXSlider)!="undefined"&&this.conf.slider!=null&&this.conf.slider instanceof window.dhtmlXSlider){if(!this.conf.mode){this.mode="header.html"}this.conf.slider_tm=null;this._sliderShow=function(){if(a.conf.slider_tm){window.clearTimeout(a.conf.slider_tm)}var c=a.conf.slider._r_actv;if(c!=null){var e={left:window.dhx4.absLeft(c),top:window.dhx4.absTop(c),width:c.offsetWidth,height:c.offsetHeight};a.show(e.left,e.top,e.width,e.height);c=null}};this._sliderHide=function(){a.conf.slider_tm=window.setTimeout(function(){a.hide()},200)};this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]}this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue");return this}dhtmlXPopup.prototype.attachObject=function(c){return this._attachNode("object",{obj:c})};dhtmlXPopup.prototype._attach_init_object=function(c){this._nodeObj=(typeof(c.obj)=="string"?document.getElementById(c.obj):c.obj);c.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(c){return this._attachNode("html",{html:c})};dhtmlXPopup.prototype._attach_init_html=function(c){document.getElementById(this._nodeId).innerHTML=c.html;this._nodeObj={text:c.html}};dhtmlXPopup.prototype.attachForm=function(g,e){return this._attachNode("form",{struct:g,width:e})};dhtmlXPopup.prototype._attach_init_form=function(g){var e=this;this._nodeObj=new dhtmlXForm(this._nodeId,g.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){e._clearClick=true});if(this.conf.editorEv!=null&&this.checkEvent(this.conf.editorEv)==false){this.conf.editorEv=null}if(dhtmlXForm.prototype.items.editor!=null&&this.conf.editorEv==null){this.conf.editorEv=this.attachEvent("onShow",function(){var c=dhtmlXForm.prototype.items.editor.editor;for(var n in c){var a=c[n].base;var m=false;while(a!=null){if(a==this.p){m=true;a=null}else{a=a.parentNode}}a=null;if(m==true){c[n].cell.conf.cells_cont=null;c[n].setSizes()}}c=null;this.detachEvent(this.conf.editorEv);this.conf.editorEv=null});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(this.conf.editorEv)}};dhtmlXPopup.prototype.attachCalendar=function(c){return this._attachNode("calendar",c||{})};dhtmlXPopup.prototype._attach_init_calendar=function(c){if(c["double"]==true){this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId);this._nodeObj.leftCalendar.setSkin(this.conf.skin);this._nodeObj.rightCalendar.setSkin(this.conf.skin)}else{this._nodeObj=new dhtmlXCalendarObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)}this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(g,e){return this._attachNode("grid",{width:g||400,height:e||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(h,l,g){return this._attachNode("tree",{width:h||400,height:l||200,rootId:g||0})};dhtmlXPopup.prototype._attach_init_tree=function(c){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",(c.rootId))};dhtmlXPopup.prototype.attachLayout=function(l,g,h){return this._attachNode("layout",{width:l||400,height:g||200,pattern:h||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(c){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,c.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(h,g,l){return this._attachNode("accordion",{width:h||400,height:g||200,conf:l||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(c){c.conf.parent=this._nodeId;c.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(c.conf)};dhtmlXPopup.prototype.attachTabbar=function(h,g,l){if(typeof(l)=="string"){l={mode:l}}else{if(typeof(l)!="object"||l==null){l={}}}return this._attachNode("tabbar",{width:h||400,height:g||200,conf:l})};dhtmlXPopup.prototype._attach_init_tabbar=function(c){c.conf.parent=this._nodeId;c.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(c.conf)};dhtmlXPopup.prototype.attachSidebar=function(h,g,l){if(l==null){l={}}return this._attachNode("sidebar",{width:h||400,height:g||200,conf:l})};dhtmlXPopup.prototype._attach_init_sidebar=function(c){c.conf.parent=this._nodeId;c.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXSideBar(c.conf)};dhtmlXPopup.prototype.attachEditor=function(h,g,l){return this._attachNode("editor",{width:h||400,height:g||200,conf:l||{}})};dhtmlXPopup.prototype._attach_init_editor=function(g){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;g.conf.parent=this._nodeId;if(g.conf.skin==null){g.conf.skin=this.conf.skin}this._nodeObj=new dhtmlXEditor(g.conf);var e=this.attachEvent("onShow",function(){if(this._nodeObj instanceof window.dhtmlXEditor){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(e)};dhtmlXPopup.prototype.attachColorPicker=function(c){if(typeof(c)!="object"||c==null){c={}}return this._attachNode("colorpicker",{conf:c})};dhtmlXPopup.prototype._attach_init_colorpicker=function(c){c.conf.skin=this.conf.skin;c.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(c.conf)};dhtmlXPopup.prototype.attachCarousel=function(h,g,l){if(l==null){l={}}return this._attachNode("carousel",{width:h||400,height:g||300,conf:l})};dhtmlXPopup.prototype._attach_init_carousel=function(c){c.conf.parent=this._nodeId;c.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXCarousel(c.conf)};function dhtmlXMenuObject(m,a){var n=this;this.conf={skin:(a||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue"),mode:"web",align:"left",is_touched:false,selected:-1,last_click:-1,fixed_pos:false,rtl:false,icons_path:"",arrow_ff_fix:(navigator.userAgent.indexOf("MSIE")>=0&&document.compatMode=="BackCompat"),live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:true,top_tmtime:200,v_enabled:false,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:false,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24},tm_sec:400,tm_handler:null,dload:false,dload_url:"",dload_icon:false,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:false,ctx_zoneid:false,ctx_autoshow:true,ctx_autohide:true,ctx_hideall:true,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]};if(typeof(m)=="object"&&m!=null&&typeof(m.tagName)=="undefined"){if(m.icons_path!=null||m.icon_path!=null){this.conf.icons_path=(m.icons_path||m.icon_path)}if(m.skin!=null){this.conf.skin=m.skin}if(m.visible_area){this.conf.v_enabled=true;this.conf.v={x1:m.visible_area.x1,x2:m.visible_area.x2,y1:m.visible_area.y1,y2:m.visible_area.y2}}for(var o in {json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1}){if(m[o]!=null){this.conf.autoload[o]=m[o]}}m=m.parent}if(m==null){this.base=document.body}else{var r=(typeof(m)=="string"?document.getElementById(m):m);if(r!=null){this.base=r;if(!this.base.id){this.base.id="menuBaseId_"+new Date().getTime()}this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left";this.base._autoSkinUpdate=true;if(this.base.oncontextmenu){this.base._oldContextMenuHandler=this.base.oncontextmenu}this.conf.ctx_baseid=this.base.id;this.base.onselectstart=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this.base.oncontextmenu=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false}}else{this.base=document.body}}this.idPrefix="";this.topId="dhxWebMenuTopId";this.idPull={};this.itemPull={};this.userData={};this.radio={};this.setSkin=function(g){var e=this.conf.skin;this.conf.skin=g;switch(this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2;this.conf.tl_rmarg=1;this.conf.tl_ofsleft=1;break;case"dhx_terrace":this.conf.tl_botmarg=0;this.conf.tl_rmarg=0;this.conf.tl_ofsleft=0;break}if(this.base._autoSkinUpdate){this.base.className=this.base.className.replace("dhtmlxMenu_"+e+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle"}for(var c in this.idPull){this.idPull[c].className=String(this.idPull[c].className).replace(e,this.conf.skin)}};this.setSkin(this.conf.skin);this._addSubItemToSelected=function(h,c){var e=true;for(var g=0;g<this.conf.selected_sub.length;g++){if((this.conf.selected_sub[g][0]==h)&&(this.conf.selected_sub[g][1]==c)){e=false}}if(e==true){this.conf.selected_sub.push(new Array(h,c))}return e};this._removeSubItemFromSelected=function(g,h){var c=new Array();var l=false;for(var e=0;e<this.conf.selected_sub.length;e++){if((this.conf.selected_sub[e][0]==g)&&(this.conf.selected_sub[e][1]==h)){l=true}else{c[c.length]=this.conf.selected_sub[e]}}if(l==true){this.conf.selected_sub=c}return l};this._getSubItemToDeselectByPolygon=function(g){var c=new Array();for(var e=0;e<this.conf.selected_sub.length;e++){if(this.conf.selected_sub[e][1]==g){c[c.length]=this.conf.selected_sub[e][0];c=c.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[e][0]));var h=true;for(var l=0;l<this.conf.opened_poly.length;l++){if(this.conf.opened_poly[l]==this.conf.selected_sub[e][0]){h=false}}if(h==true){this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[e][0]}this.conf.selected_sub[e][0]=-1;this.conf.selected_sub[e][1]=-1}}return c};this._hidePolygon=function(c){if(this.idPull["polygon_"+c]!=null){if(this.idPull["polygon_"+c]._zId!=null){window.dhx4.zim.clear(this.idPull["polygon_"+c]._zId)}if(typeof(this._menuEffect)!="undefined"&&this._menuEffect!==false){this._hidePolygonEffect("polygon_"+c)}else{if(this.idPull["polygon_"+c].style.display=="none"){return}this.idPull["polygon_"+c].style.display="none";if(this.idPull["arrowup_"+c]!=null){this.idPull["arrowup_"+c].style.display="none"}if(this.idPull["arrowdown_"+c]!=null){this.idPull["arrowdown_"+c].style.display="none"}this._updateItemComplexState(c,true,false);if(window.dhx4.isIE6&&this.idPull["polygon_"+c+"_ie6cover"]!=null){this.idPull["polygon_"+c+"_ie6cover"].style.display="none"}}c=String(c).replace(this.idPrefix,"");if(c==this.topId){c=null}this.callEvent("onHide",[c]);if(c!=null&&this.conf.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+c].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+c,true)}}};this._showPolygon=function(y,ac){var g=this._countVisiblePolygonItems(y);if(g==0){return}var x="polygon_"+y;if((this.idPull[x]!=null)&&(this.idPull[y]!=null)){if(this.conf.top_mode&&this.conf.mode=="web"&&!this.conf.context){if(!this.idPull[y]._mouseOver&&ac==this.conf.dir_toplv){return}}if(!this.conf.fixed_pos){this._autoDetectVisibleArea()}var w=0;var h=0;var c=null;var V=null;if(this.idPull[x]._zId==null){this.idPull[x]._zId=window.dhx4.newId()}this.idPull[x]._zInd=window.dhx4.zim.reserve(this.idPull[x]._zId);this.idPull[x].style.visibility="hidden";this.idPull[x].style.left="0px";this.idPull[x].style.top="0px";this.idPull[x].style.display="";this.idPull[x].style.zIndex=this.idPull[x]._zInd;if(this.conf.auto_overflow){if(this.idPull[x].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1){var X=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-this.conf.of_ah[this.conf.skin]*2)/this.conf.of_ih[this.conf.skin]),1);this.conf.overflow_limit=X}else{this.conf.overflow_limit=0;if(this.idPull["arrowup_"+y]!=null){this._removeUpArrow(String(y).replace(this.idPrefix,""))}if(this.idPull["arrowdown_"+y]!=null){this._removeDownArrow(String(y).replace(this.idPrefix,""))}}}if(this.conf.overflow_limit>0&&this.conf.overflow_limit<g){if(this.idPull["arrowup_"+y]==null){this._addUpArrow(String(y).replace(this.idPrefix,""))}if(this.idPull["arrowdown_"+y]==null){this._addDownArrow(String(y).replace(this.idPrefix,""))}c=this.idPull["arrowup_"+y];c.style.display="none";V=this.idPull["arrowdown_"+y];V.style.display="none"}if(this.conf.overflow_limit>0&&this.conf.overflow_limit<g){this.idPull[x].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px";c.style.width=V.style.width=this.idPull[x].childNodes[1].style.width=this.idPull[x].childNodes[1].childNodes[0].offsetWidth+"px";this.idPull[x].childNodes[1].scrollTop=0;c.style.display="";w=c.offsetHeight;V.style.display="";h=V.offsetHeight}else{this.idPull[x].childNodes[1].style.height="";this.idPull[x].childNodes[1].style.width=""}if(this.itemPull[y]!=null){var aa="polygon_"+this.itemPull[y]["parent"]}else{if(this.conf.context){var aa=this.idPull[this.idPrefix+this.topId]}}var ae=(this.idPull[y].tagName!=null?window.dhx4.absLeft(this.idPull[y]):this.idPull[y][0]);var e=(this.idPull[y].tagName!=null?window.dhx4.absTop(this.idPull[y]):this.idPull[y][1]);var ad=(this.idPull[y].tagName!=null?this.idPull[y].offsetWidth:0);var ab=(this.idPull[y].tagName!=null?this.idPull[y].offsetHeight:0);var S=0;var U=0;var Z=this.idPull[x].offsetWidth;var l=this.idPull[x].offsetHeight;if(ac=="bottom"){if(this.conf.rtl){S=ae+(ad!=null?ad:0)-Z}else{if(this.conf.align=="right"){S=ae+ad-Z}else{S=ae-1+(ac==this.conf.dir_toplv?this.conf.tl_rmarg:0)}}U=e-1+ab+this.conf.tl_botmarg}if(ac=="right"){S=ae+ad-1;U=e+2}if(ac=="left"){S=ae-this.idPull[x].offsetWidth+2;U=e+2}if(ac=="header.html"){S=ae-1;U=e-l+2}if(this.conf.fixed_pos){var Q=65536;var T=65536}else{var Q=(this.conf.v.x2!=null?this.conf.v.x2:0);var T=(this.conf.v.y2!=null?this.conf.v.y2:0);if(Q==0){if(window.innerWidth){Q=window.innerWidth;T=window.innerHeight}else{Q=document.body.offsetWidth;T=document.body.scrollHeight}}}if(S+Z>Q&&!this.conf.rtl){S=ae-Z+2}if(S<this.conf.v.x1&&this.conf.rtl){S=ae+ad-2}if(S<0){S=0}if(U+l>T&&this.conf.v.y2!=null){U=Math.max(e+ab-l+2,(this.conf.v_enabled?this.conf.v.y1+2:2));if(this.conf.context&&this.idPrefix+this.topId==y&&V!=null){U=U-2}if(this.itemPull[y]!=null&&!this.conf.context){if(this.itemPull[y]["parent"]==this.idPrefix+this.topId){U=U-this.base.offsetHeight}}}this.idPull[x].style.left=S+"px";this.idPull[x].style.top=U+"px";if(typeof(this._menuEffect)!="undefined"&&this._menuEffect!==false){this._showPolygonEffect(x)}else{this.idPull[x].style.visibility="";if(this.conf.overflow_limit>0&&this.conf.overflow_limit<g){this.idPull[x].childNodes[1].scrollTop=0;this._checkArrowsState(y)}if(window.dhx4.isIE6){var W=x+"_ie6cover";if(this.idPull[W]==null){var Y=document.createElement("IFRAME");Y.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin;Y.frameBorder=0;Y.setAttribute("src","javascript:false;");document.body.insertBefore(Y,document.body.firstChild);this.idPull[W]=Y}this.idPull[W].style.left=S+"px";this.idPull[W].style.top=U+"px";this.idPull[W].style.width=this.idPull[x].offsetWidth+"px";this.idPull[W].style.height=this.idPull[x].offsetHeight+"px";this.idPull[W].style.zIndex=this.idPull[x].style.zIndex-1;this.idPull[W].style.display=""}}y=String(y).replace(this.idPrefix,"");if(y==this.topId){y=null}this.callEvent("onShow",[y]);if(y!=null&&this.conf.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+y].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+y,false)}}};this._redistribSubLevelSelection=function(g,h){while(this.conf.opened_poly.length>0){this.conf.opened_poly.pop()}var e=this._getSubItemToDeselectByPolygon(h);this._removeSubItemFromSelected(-1,-1);for(var c=0;c<e.length;c++){if((this.idPull[e[c]]!=null)&&(e[c]!=g)){if(this.itemPull[e[c]]["state"]=="enabled"){this.idPull[e[c]].className="sub_item"}}}for(var c=0;c<this.conf.opened_poly.length;c++){if(this.conf.opened_poly[c]!=h){this._hidePolygon(this.conf.opened_poly[c])}}if(this.itemPull[g]["state"]=="enabled"){this.idPull[g].className="sub_item_selected";if(this.itemPull[g]["complex"]&&this.conf.dload&&(this.itemPull[g]["loaded"]=="no")){if(this.conf.dload_icon==true){this._updateLoaderIcon(g,true)}this.itemPull[g].loaded="get";var l=g.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var v={params:{}};v.params[this.conf.dload_pid]=l;for(var w in this.conf.dload_params){v.params[w]=this.conf.dload_params[w]}return v};this.loadStruct(this.conf.dload_url)}if(this.itemPull[g]["complex"]||(this.conf.dload&&(this.itemPull[g]["loaded"]=="yes"))){if((this.itemPull[g]["complex"])&&(this.idPull["polygon_"+g]!=null)){this._updateItemComplexState(g,true,true);this._showPolygon(g,this.conf.dir_sublv)}}this._addSubItemToSelected(g,h);this.conf.selected=g}};this._doOnClick=function(g,l,c){this.conf.last_click=g;if(this.itemPull[this.idPrefix+g]["href_link"]!=null&&this.itemPull[this.idPrefix+g].state=="enabled"){var D=document.createElement("FORM");var A=String(this.itemPull[this.idPrefix+g]["href_link"]).split("?");D.action=A[0];if(A[1]!=null){var e=String(A[1]).split("&");for(var h=0;h<e.length;h++){var y=String(e[h]).split("=");var C=document.createElement("INPUT");C.type="hidden";C.name=(y[0]||"");C.value=(y[1]||"");D.appendChild(C)}}if(this.itemPull[this.idPrefix+g]["href_target"]!=null){D.target=this.itemPull[this.idPrefix+g]["href_target"]}D.style.display="none";document.body.appendChild(D);D.submit();if(D!=null){document.body.removeChild(D);D=null}return}if(l.charAt(0)=="c"){return}if(l.charAt(1)=="d"){return}if(l.charAt(2)=="s"){return}if(this.checkEvent("onClick")){this.callEvent("onClick",[g,this.conf.ctx_zoneid,c])}else{if((l.charAt(1)=="d")||(this.conf.mode=="win"&&l.charAt(2)=="t")){return}}if(this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide){this._hideContextMenu()}else{if(this._clearAndHide){this._clearAndHide()}}};this._doOnTouchMenu=function(c){if(this.conf.is_touched==false){this.conf.is_touched=true;if(this.checkEvent("onTouch")){this.callEvent("onTouch",[c])}}};this._searchMenuNode=function(h,e){var c=new Array();for(var g=0;g<e.length;g++){if(typeof(e[g])=="object"){if(e[g].length==5){if(typeof(e[g][0])!="object"){if((e[g][0].replace(this.idPrefix,"")==h)&&(g==0)){c=e}}}var l=this._searchMenuNode(h,e[g]);if(l.length>0){c=l}}}return c};this._getMenuNodes=function(c){var g=new Array;for(var e in this.itemPull){if(this.itemPull[e]["parent"]==c){g[g.length]=e}}return g};this._genStr=function(e){var c="dhxId_";var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<e;h++){c+=g.charAt(Math.round(Math.random()*(g.length-1)))}return c};this.getItemType=function(c){c=this.idPrefix+c;if(this.itemPull[c]==null){return null}return this.itemPull[c]["type"]};this.forEachItem=function(e){for(var c in this.itemPull){e(String(c).replace(this.idPrefix,""))}};this._clearAndHide=function(){n.conf.selected=-1;n.conf.last_click=-1;while(n.conf.opened_poly.length>0){n.conf.opened_poly.pop()}for(var e=0;e<n.conf.selected_sub.length;e++){var c=n.conf.selected_sub[e][0];if(n.idPull[c]!=null){if(n.itemPull[c]["state"]=="enabled"){if(n.idPull[c].className=="sub_item_selected"){n.idPull[c].className="sub_item"}if(n.idPull[c].className=="dhtmlxMenu_"+n.conf.skin+"_TopLevel_Item_Selected"){if(n.itemPull[c]["cssNormal"]!=null){n.idPull[c].className=n.itemPull[c]["cssNormal"]}else{n.idPull[c].className="dhtmlxMenu_"+n.conf.skin+"_TopLevel_Item_Normal"}}}}n._hidePolygon(c)}n.conf.is_touched=false;if(n.conf.context&&n.conf.ctx_hideall){n._hidePolygon(n.idPrefix+n.topId)}};this._showSubLevelItem=function(c,e){if(document.getElementById("arrow_"+this.idPrefix+c)!=null){document.getElementById("arrow_"+this.idPrefix+c).style.display=(e?"none":"")}if(document.getElementById("image_"+this.idPrefix+c)!=null){document.getElementById("image_"+this.idPrefix+c).style.display=(e?"none":"")}if(document.getElementById(this.idPrefix+c)!=null){document.getElementById(this.idPrefix+c).style.display=(e?"":"none")}};this._hideSubLevelItem=function(c){this._showSubLevelItem(c,true)};this.idPrefix=this._genStr(12)+"_";this._bodyClick=function(c){c=c||event;if(c.button==2||(window.dhx4.isOpera&&c.ctrlKey==true)){return}if(n.conf.context){if(n.conf.ctx_autohide&&(!window.dhx4.isOpera||(n._isContextMenuVisible()&&window.dhx4.isOpera))){n._hideContextMenu()}}else{if(n._clearAndHide){n._clearAndHide()}}};this._bodyContext=function(h){h=h||event;var c=String((h.srcElement||h.target).className);if(c.search("dhtmlxMenu")!=-1&&c.search("SubLevelArea")!=-1){return}var e=true;var g=h.target||h.srcElement;while(g!=null){if(g.id!=null){if(n.isContextZone(g.id)){e=false}}if(g==document.body){e=false}g=g.parentNode}if(e){n.hideContextMenu()}};if(typeof(window.addEventListener)!="undefined"){window.addEventListener("click",this._bodyClick,false);window.addEventListener("contextmenu",this._bodyContext,false)}else{document.body.attachEvent("onclick",this._bodyClick);document.body.attachEvent("oncontextmenu",this._bodyContext)}this.unload=function(){window.dhx4._eventable(this,"clear");dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(e){}this.conf.live_id=null;if(typeof(window.addEventListener)=="function"){window.removeEventListener("click",this._bodyClick,false);window.removeEventListener("contextmenu",this._bodyContext,false)}else{document.body.detachEvent("onclick",this._bodyClick);document.body.detachEvent("oncontextmenu",this._bodyContext)}this._bodyClick=null;this._bodyContext=null;this.removeItem(this.idPrefix+this.topId,true);this.itemPull=null;this.idPull=null;if(this.conf.context){for(var c in this.conf.ctx_zones){this.removeContextZone(c)}}if(this.cont!=null){this.cont.className="";this.cont.parentNode.removeChild(this.cont);this.cont=null}if(this.base!=null){if(!this.conf.context){this.base.className=""}if(!this.conf.context){this.base.oncontextmenu=(this.base._oldContextMenuHandler||null)}this.base.onselectstart=null;this.base=null}for(var c in this){this[c]=null}n=null};dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this;window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:true});window.dhx4._eventable(this);if(window.dhx4.s2b(this.conf.autoload.context)==true){this.renderAsContextMenu()}if(this.conf.autoload.dynamic!=null){this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon))}else{if(this.conf.autoload.items!=null){this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload)}else{if(this.conf.autoload.json!=null){this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload)}else{if(this.conf.autoload.xml!=null){this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload)}}}}for(var o in {onclick:1,oncheckboxclick:1,onradioclick:1}){if(this.conf.autoload[o]!=null){if(typeof(this.conf.autoload[o])=="function"){this.attachEvent(o,this.conf.autoload[o])}else{if(typeof(window[this.conf.autoload[o]])=="function"){this.attachEvent(o,window[this.conf.autoload[o]])}}}}if(this.conf.autoload.top_text!=null){this.setTopText(this.conf.autoload.top_text)}if(this.conf.autoload.align!=null){this.setAlign(this.conf.autoload.align)}if(this.conf.autoload.open_mode!=null){this.setOpenMode(this.conf.autoload.open_mode)}if(this.conf.autoload.overflow!=null){this.setOverflowHeight(this.conf.autoload.overflow)}for(var o in this.conf.autoload){this.conf.autoload[o]=null;delete this.conf.autoload[o]}this.conf.autoload=null;return this}dhtmlXMenuObject.prototype._init=function(){if(this._isInited==true){return}if(this.conf.dload){this._dhxdataload.onBeforeXLS=function(){var a={params:{}};for(var g in this.conf.dload_params){a.params[g]=this.conf.dload_params[g]}return a};this.loadStruct(this.conf.dload_url)}else{this._initTopLevelMenu();this._isInited=true}};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(a){var n=0;for(var r in this.itemPull){var o=this.itemPull[r]["parent"];var m=this.itemPull[r]["type"];if(this.idPull[r]!=null){if(o==a&&(m=="item"||m=="radio"||m=="checkbox")&&this.idPull[r].style.display!="none"){n++}}}return n};dhtmlXMenuObject.prototype._redefineComplexState=function(g){if(this.idPrefix+this.topId==g){return}if((this.idPull["polygon_"+g]!=null)&&(this.idPull[g]!=null)){var e=this._countVisiblePolygonItems(g);if((e>0)&&(!this.itemPull[g]["complex"])){this._updateItemComplexState(g,true,false)}if((e==0)&&(this.itemPull[g]["complex"])){this._updateItemComplexState(g,false,false)}}};dhtmlXMenuObject.prototype._updateItemComplexState=function(m,o,n){if((!this.conf.context)&&(this._getItemLevelType(m.replace(this.idPrefix,""))=="TopLevel")){this.itemPull[m]["complex"]=o;return}if((this.idPull[m]==null)||(this.itemPull[m]==null)){return}this.itemPull[m]["complex"]=o;if(m==this.idPrefix+this.topId){return}var l=null;var r=this.idPull[m].childNodes[this.conf.rtl?0:2];if(r.childNodes[0]){if(String(r.childNodes[0].className).search("complex_arrow")===0){l=r.childNodes[0]}}if(this.itemPull[m]["complex"]){if(l==null){l=document.createElement("DIV");l.className="complex_arrow";l.id="arrow_"+m;while(r.childNodes.length>0){r.removeChild(r.childNodes[0])}r.appendChild(l)}if(this.conf.dload&&(this.itemPull[m].loaded=="get")&&this.conf.dload_icon){if(l.className!="complex_arrow_loading"){l.className="complex_arrow_loading"}}else{l.className="complex_arrow"}return}if((!this.itemPull[m]["complex"])&&(l!=null)){r.removeChild(l);if(this.itemPull[m]["hotkey_backup"]!=null&&this.setHotKey){this.setHotKey(m.replace(this.idPrefix,""),this.itemPull[m]["hotkey_backup"])}}};dhtmlXMenuObject.prototype._getItemLevelType=function(c){return(this.itemPull[this.idPrefix+c]["parent"]==this.idPrefix+this.topId?"TopLevel":"SubLevelArea")};dhtmlXMenuObject.prototype.setIconsPath=function(c){this.conf.icons_path=c};dhtmlXMenuObject.prototype._updateItemImage=function(A,y){A=this.idPrefix+A;var u=this.itemPull[A]["type"];if(u=="checkbox"||u=="radio"){return}var x=(this.itemPull[A]["parent"]==this.idPrefix+this.topId&&!this.conf.context);var w=null;if(x){for(var D=0;D<this.idPull[A].childNodes.length;D++){try{if(this.idPull[A].childNodes[D].className=="dhtmlxMenu_TopLevel_Item_Icon"){w=this.idPull[A].childNodes[D]}}catch(v){}}}else{try{var w=this.idPull[A].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(v){}if(!(w!=null&&typeof(w.className)!="undefined"&&w.className=="sub_icon")){w=null}}var E=this.itemPull[A][(this.itemPull[A]["state"]=="enabled"?"imgen":"imgdis")];if(E.length>0){if(w!=null){w.src=this.conf.icons_path+E}else{if(x){var w=document.createElement("IMG");w.className="dhtmlxMenu_TopLevel_Item_Icon";w.src=this.conf.icons_path+E;w.border="0";w.id="image_"+A;if(!this.conf.rtl&&this.idPull[A].childNodes.length>0){this.idPull[A].insertBefore(w,this.idPull[A].childNodes[0])}else{this.idPull[A].appendChild(w)}}else{var w=document.createElement("IMG");w.className="sub_icon";w.src=this.conf.icons_path+E;w.border="0";w.id="image_"+A;var e=this.idPull[A].childNodes[this.conf.rtl?2:0];while(e.childNodes.length>0){e.removeChild(e.childNodes[0])}e.appendChild(w)}}}else{if(w!=null){var C=w.parentNode;C.removeChild(w);C.innerHTML="&nbsp;";C=w=null}}};dhtmlXMenuObject.prototype._getAllParents=function(a){var o=new Array();for(var r in this.itemPull){if(this.itemPull[r]["parent"]==a){o[o.length]=this.itemPull[r]["id"];if(this.itemPull[r]["complex"]){var n=this._getAllParents(this.itemPull[r]["id"]);for(var m=0;m<n.length;m++){o[o.length]=n[m]}}}}return o};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(this.conf.v_enabled){return}var c=window.dhx4.screenDim();this.conf.v.x1=c.left;this.conf.v.x2=c.right;this.conf.v.y1=c.top;this.conf.v.y2=c.bottom};dhtmlXMenuObject.prototype.getItemPosition=function(m){m=this.idPrefix+m;var n=-1;if(this.itemPull[m]==null){return n}var l=this.itemPull[m]["parent"];var o=(this.idPull["polygon_"+l]!=null?this.idPull["polygon_"+l].tbd:this.cont);for(var r=0;r<o.childNodes.length;r++){if(o.childNodes[r]==this.idPull["separator_"+m]||o.childNodes[r]==this.idPull[m]){n=r}}return n};dhtmlXMenuObject.prototype.setItemPosition=function(n,r){n=this.idPrefix+n;if(this.idPull[n]==null){return}var w=(this.itemPull[n]["parent"]==this.idPrefix+this.topId);var o=this.idPull[n];var u=this.getItemPosition(n.replace(this.idPrefix,""));var v=this.itemPull[n]["parent"];var s=(this.idPull["polygon_"+v]!=null?this.idPull["polygon_"+v].tbd:this.cont);s.removeChild(s.childNodes[u]);if(r<0){r=0}if(w&&r<1){r=1}if(r<s.childNodes.length){s.insertBefore(o,s.childNodes[r])}else{s.appendChild(o)}};dhtmlXMenuObject.prototype.getParentId=function(c){c=this.idPrefix+c;if(this.itemPull[c]==null){return null}return((this.itemPull[c]["parent"]!=null?this.itemPull[c]["parent"]:this.topId).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,true);this._isInited=false;this.idPrefix=this._genStr(12)+"_";this.itemPull={}};if(typeof(dhtmlXMenuObject.prototype.liveInst)=="undefined"){dhtmlXMenuObject.prototype.liveInst={}}dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(l,n){var h=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var m=0;m<h.length;m++){if(h[m]!=l){this._hidePolygon(h[m])}if((this.idPull[h[m]]!=null)&&(h[m]!=l)){this.idPull[h[m]].className=this.idPull[h[m]].className.replace(/Selected/g,"Normal")}}if(this.itemPull[this.idPrefix+l]["state"]=="enabled"){this.idPull[this.idPrefix+l].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected";this._addSubItemToSelected(this.idPrefix+l,"parent");this.conf.selected=(this.conf.mode=="win"?(this.conf.selected!=-1?l:this.conf.selected):l);if((this.itemPull[this.idPrefix+l]["complex"])&&(this.conf.selected!=-1)){this._showPolygon(this.idPrefix+l,this.conf.dir_toplv)}}};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.conf.dir_toplv="bottom";this.conf.dir_sublv=(this.conf.rtl?"left":"right");if(this.conf.context){this.idPull[this.idPrefix+this.topId]=new Array(0,0);this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId)}else{var e=this._getMenuNodes(this.idPrefix+this.topId);for(var g=0;g<e.length;g++){if(this.itemPull[e[g]]["type"]=="item"){this._renderToplevelItem(e[g],null)}if(this.itemPull[e[g]]["type"]=="separator"){this._renderSeparator(e[g],null)}}}};dhtmlXMenuObject.prototype._renderToplevelItem=function(w,o){var r=this;var m=document.createElement("DIV");m.id=w;if(this.itemPull[w]["state"]=="enabled"&&this.itemPull[w]["cssNormal"]!=null){m.className=this.itemPull[w]["cssNormal"]}else{m.className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+(this.itemPull[w]["state"]=="enabled"?"Normal":"Disabled")}if(this.itemPull[w]["title"]!=""){var s=document.createElement("DIV");s.className="top_level_text";s.innerHTML=this.itemPull[w]["title"];m.appendChild(s)}if(this.itemPull[w]["tip"].length>0){m.title=this.itemPull[w]["tip"]}if((this.itemPull[w]["imgen"]!="")||(this.itemPull[w]["imgdis"]!="")){var u=this.itemPull[w][(this.itemPull[w]["state"]=="enabled")?"imgen":"imgdis"];if(u){var v=document.createElement("IMG");v.border="0";v.id="image_"+w;v.src=this.conf.icons_path+u;v.className="dhtmlxMenu_TopLevel_Item_Icon";if(m.childNodes.length>0&&!this.conf.rtl){m.insertBefore(v,m.childNodes[0])}else{m.appendChild(v)}}}m.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};m.oncontextmenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};if(!this.cont){this.cont=document.createElement("DIV");this.cont.dir="ltr";this.cont.className=(this.conf.align=="right"?"align_right":"align_left");this.base.appendChild(this.cont)}if(o!=null){o++;if(o<0){o=0}if(o>this.cont.childNodes.length-1){o=null}}if(o!=null){this.cont.insertBefore(m,this.cont.childNodes[o])}else{this.cont.appendChild(m)}this.idPull[m.id]=m;if(this.itemPull[w]["complex"]&&(!this.conf.dload)){this._addSubMenuPolygon(this.itemPull[w]["id"],this.itemPull[w]["id"])}m.onmouseover=function(){if(r.conf.mode=="web"){window.clearTimeout(r.conf.tm_handler)}var a=r._getSubItemToDeselectByPolygon("parent");r._removeSubItemFromSelected(-1,-1);for(var e=0;e<a.length;e++){if(a[e]!=this.id){r._hidePolygon(a[e])}if((r.idPull[a[e]]!=null)&&(a[e]!=this.id)){if(r.itemPull[a[e]]["cssNormal"]!=null){r.idPull[a[e]].className=r.itemPull[a[e]]["cssNormal"]}else{if(r.idPull[a[e]].className=="sub_item_selected"){r.idPull[a[e]].className="sub_item"}r.idPull[a[e]].className=r.idPull[a[e]].className.replace(/Selected/g,"Normal")}}}if(r.itemPull[this.id]["state"]=="enabled"){this.className="dhtmlxMenu_"+r.conf.skin+"_TopLevel_Item_Selected";r._addSubItemToSelected(this.id,"parent");r.conf.selected=(r.conf.mode=="win"?(r.conf.selected!=-1?this.id:r.conf.selected):this.id);if(r.conf.dload){if(r.itemPull[this.id].loaded=="no"){this._dynLoadTM=new Date().getTime();r.itemPull[this.id].loaded="get";var c=this.id.replace(r.idPrefix,"");r._dhxdataload.onBeforeXLS=function(){var h={params:{}};h.params[this.conf.dload_pid]=c;for(var l in this.conf.dload_params){h.params[l]=this.conf.dload_params[l]}return h};r.loadStruct(r.conf.dload_url)}if(r.conf.top_mode&&r.conf.mode=="web"&&!r.conf.context){this._mouseOver=true}}if((!r.conf.dload)||(r.conf.dload&&(!r.itemPull[this.id]["loaded"]||r.itemPull[this.id]["loaded"]=="yes"))){if((r.itemPull[this.id]["complex"])&&(r.conf.selected!=-1)){if(r.conf.top_mode&&r.conf.mode=="web"&&!r.conf.context){this._mouseOver=true;var g=this.id;this._menuOpenTM=window.setTimeout(function(){r._showPolygon(g,r.conf.dir_toplv)},r.conf.top_tmtime)}else{r._showPolygon(this.id,r.conf.dir_toplv)}}}}r._doOnTouchMenu(this.id.replace(r.idPrefix,""))};m.onmouseout=function(){if(!((r.itemPull[this.id]["complex"])&&(r.conf.selected!=-1))&&(r.itemPull[this.id]["state"]=="enabled")){if(r.itemPull[this.id]["cssNormal"]!=null){m.className=r.itemPull[this.id]["cssNormal"]}else{m.className="dhtmlxMenu_"+r.conf.skin+"_TopLevel_Item_Normal"}}if(r.conf.mode=="web"){window.clearTimeout(r.conf.tm_handler);r.conf.tm_handler=window.setTimeout(function(){r._clearAndHide()},r.conf.tm_sec,"JavaScript")}if(r.conf.top_mode&&r.conf.mode=="web"&&!r.conf.context){this._mouseOver=false;window.clearTimeout(this._menuOpenTM)}};m.onclick=function(e){if(r.conf.mode=="web"){window.clearTimeout(r.conf.tm_handler)}if(r.conf.mode!="web"&&r.itemPull[this.id]["state"]=="disabled"){return}e=e||event;e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(r.conf.mode=="win"){if(r.itemPull[this.id]["complex"]){if(r.conf.selected==this.id){r.conf.selected=-1;var g=false}else{r.conf.selected=this.id;var g=true}if(g){r._showPolygon(this.id,r.conf.dir_toplv)}else{r._hidePolygon(this.id)}}}var a=(r.itemPull[this.id]["complex"]?"c":"-");var c=(r.itemPull[this.id]["state"]!="enabled"?"d":"-");var h={ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};r._doOnClick(this.id.replace(r.idPrefix,""),a+c+"t",h);return false};if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(n,o){var u=this._renderSublevelPolygon(n,o);var m=this._getMenuNodes(o);for(s=0;s<m.length;s++){if(this.itemPull[m[s]]["type"]=="separator"){this._renderSeparator(m[s],null)}else{this._renderSublevelItem(m[s],null)}}if(n==o){var r="topLevel"}else{var r="subLevel"}for(var s=0;s<m.length;s++){if(this.itemPull[m[s]]["complex"]){this._addSubMenuPolygon(n,this.itemPull[m[s]]["id"])}}};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(m,n){var r=document.createElement("DIV");r.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":"");r.dir="ltr";r.oncontextmenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false};r.id="polygon_"+n;r.onclick=function(a){a=a||event;a.cancelBubble=true};r.style.display="none";document.body.insertBefore(r,document.body.firstChild);r.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var o=document.createElement("TABLE");o.className="dhtmlxMebu_SubLevelArea_Tbl";o.cellSpacing=0;o.cellPadding=0;o.border=0;var l=document.createElement("TBODY");o.appendChild(l);r.childNodes[1].appendChild(o);r.tbl=o;r.tbd=l;this.idPull[r.id]=r;if(this.sxDacProc!=null){this.idPull["sxDac_"+n]=new this.sxDacProc(r,r.className);if(window.dhx4.isIE){this.idPull["sxDac_"+n]._setSpeed(this.dacSpeedIE);this.idPull["sxDac_"+n]._setCustomCycle(this.dacCyclesIE)}else{this.idPull["sxDac_"+n]._setSpeed(this.dacSpeed);this.idPull["sxDac_"+n]._setCustomCycle(this.dacCycles)}}return r};dhtmlXMenuObject.prototype._renderSublevelItem=function(J,x){var A=this;var y=document.createElement("TR");y.className=(this.itemPull[J]["state"]=="enabled"?"sub_item":"sub_item_dis");var C=document.createElement("TD");C.className="sub_item_icon";var N=this.itemPull[J][(this.itemPull[J]["state"]=="enabled"?"imgen":"imgdis")];if(N!=""){var K=this.itemPull[J]["type"];if(K=="checkbox"||K=="radio"){var E=document.createElement("DIV");E.id="image_"+this.itemPull[J]["id"];E.className="sub_icon "+N;C.appendChild(E)}if(!(K=="checkbox"||K=="radio")){var E=document.createElement("IMG");E.id="image_"+this.itemPull[J]["id"];E.className="sub_icon";E.src=this.conf.icons_path+N;C.appendChild(E)}}else{C.innerHTML="&nbsp;"}var D=document.createElement("TD");D.className="sub_item_text";if(this.itemPull[J]["title"]!=""){var L=document.createElement("DIV");L.className="sub_item_text";L.innerHTML=this.itemPull[J]["title"];D.appendChild(L)}else{D.innerHTML="&nbsp;"}var F=document.createElement("TD");F.className="sub_item_hk";if(this.itemPull[J]["complex"]){var I=document.createElement("DIV");I.className="complex_arrow";I.id="arrow_"+this.itemPull[J]["id"];F.appendChild(I)}else{if(this.itemPull[J]["hotkey"].length>0&&!this.itemPull[J]["complex"]){var H=document.createElement("DIV");H.className="sub_item_hk";H.innerHTML=this.itemPull[J]["hotkey"];F.appendChild(H)}else{F.innerHTML="&nbsp;"}}y.appendChild(this.conf.rtl?F:C);y.appendChild(D);y.appendChild(this.conf.rtl?C:F);y.id=this.itemPull[J]["id"];y.parent=this.itemPull[J]["parent"];if(this.itemPull[J]["tip"].length>0){y.title=this.itemPull[J]["tip"]}y.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};y.onmouseover=function(a){if(A.conf.hide_tm[this.id]){window.clearTimeout(A.conf.hide_tm[this.id])}if(A.conf.mode=="web"){window.clearTimeout(A.conf.tm_handler)}if(!this._visible){A._redistribSubLevelSelection(this.id,this.parent)}this._visible=true};y.onmouseout=function(){if(A.conf.mode=="web"){if(A.conf.tm_handler){window.clearTimeout(A.conf.tm_handler)}A.conf.tm_handler=window.setTimeout(function(){if(A&&A._clearAndHide){A._clearAndHide()}},A.conf.tm_sec,"JavaScript")}var a=this;if(A.conf.hide_tm[this.id]){window.clearTimeout(A.conf.hide_tm[this.id])}A.conf.hide_tm[this.id]=window.setTimeout(function(){a._visible=false},50)};y.onclick=function(c){if(!A.checkEvent("onClick")&&A.itemPull[this.id]["complex"]){return}c=c||event;c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}tc=(A.itemPull[this.id]["complex"]?"c":"-");td=(A.itemPull[this.id]["state"]=="enabled"?"-":"d");var a={ctrl:c.ctrlKey,alt:c.altKey,shift:c.shiftKey};switch(A.itemPull[this.id]["type"]){case"checkbox":A._checkboxOnClickHandler(this.id.replace(A.idPrefix,""),tc+td+"n",a);break;case"radio":A._radioOnClickHandler(this.id.replace(A.idPrefix,""),tc+td+"n",a);break;case"item":A._doOnClick(this.id.replace(A.idPrefix,""),tc+td+"n",a);break}return false};var M=this.idPull["polygon_"+this.itemPull[J]["parent"]];if(x!=null){x++;if(x<0){x=0}if(x>M.tbd.childNodes.length-1){x=null}}if(x!=null&&M.tbd.childNodes[x]!=null){M.tbd.insertBefore(y,M.tbd.childNodes[x])}else{M.tbd.appendChild(y)}this.idPull[y.id]=y};dhtmlXMenuObject.prototype._renderSeparator=function(A,u){var C=(this.conf.context?"SubLevelArea":(this.itemPull[A]["parent"]==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"));if(C=="TopLevel"&&this.conf.context){return}var w=this;if(C!="TopLevel"){var v=document.createElement("TR");v.className="sub_sep";var y=document.createElement("TD");y.colSpan="3";v.appendChild(y)}var x=document.createElement("DIV");x.id="separator_"+A;x.className=(C=="TopLevel"?"top_sep":"sub_sep");x.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};x.onclick=function(a){a=a||event;a.cancelBubble=true;var c={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};w._doOnClick(this.id.replace("separator_"+w.idPrefix,""),"--s",c)};if(C=="TopLevel"){if(u!=null){u++;if(u<0){u=0}if(this.cont.childNodes[u]!=null){this.cont.insertBefore(x,this.cont.childNodes[u])}else{this.cont.appendChild(x)}}else{var r=this.cont.childNodes[this.cont.childNodes.length-1];if(String(r).search("TopLevel_Text")==-1){this.cont.appendChild(x)}else{this.cont.insertBefore(x,r)}}this.idPull[x.id]=x}else{var s=this.idPull["polygon_"+this.itemPull[A]["parent"]];if(u!=null){u++;if(u<0){u=0}if(u>s.tbd.childNodes.length-1){u=null}}if(u!=null&&s.tbd.childNodes[u]!=null){s.tbd.insertBefore(v,s.tbd.childNodes[u])}else{s.tbd.appendChild(v)}y.appendChild(x);this.idPull[x.id]=v}};dhtmlXMenuObject.prototype.addNewSeparator=function(g,l){l=this.idPrefix+(l!=null?l:this._genStr(24));var h=this.idPrefix+this.getParentId(g);this._addItemIntoGlobalStrorage(l,h,"","separator",false,"","");this._renderSeparator(l,this.getItemPosition(g))};dhtmlXMenuObject.prototype._initObj=function(L,K,A){if(!(L instanceof Array)){A=L.parentId;if(A!=null&&String(A).indexOf(this.idPrefix)!==0){A=this.idPrefix+String(A)}L=L.items}for(var F=0;F<L.length;F++){if(typeof(L[F].id)=="undefined"||L[F].id==null){L[F].id=this._genStr(24)}if(L[F].text==null){L[F].text=""}if(String(L[F].id).indexOf(this.idPrefix)!==0){L[F].id=this.idPrefix+String(L[F].id)}var E={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var J in E){if(typeof(L[F][J])=="undefined"){L[F][J]=E[J]}}if(L[F].imgen==""&&L[F].img!=null){L[F].imgen=L[F].img}if(L[F].imgdis==""&&L[F].img_disabled!=null){L[F].imgdis=L[F].img_disabled}if(L[F].title==null&&L[F].text!=null){L[F].title=L[F].text}if(L[F].href!=null){if(L[F].href.link!=null){L[F].href_link=L[F].href.link}if(L[F].href.target!=null){L[F].href_target=L[F].href.target}}if(L[F].userdata!=null){for(var J in L[F].userdata){this.userData[L[F].id+"_"+J]=L[F].userdata[J]}}if(typeof(L[F].enabled)!="undefined"&&window.dhx4.s2b(L[F].enabled)==false){L[F].state="disabled"}else{if(typeof(L[F].disabled)!="undefined"&&window.dhx4.s2b(L[F].disabled)==true){L[F].state="disabled"}}if(typeof(L[F].parent)=="undefined"){L[F].parent=(A!=null?A:this.idPrefix+this.topId)}if(L[F].type=="checkbox"){L[F].checked=window.dhx4.s2b(L[F].checked);L[F].imgen=L[F].imgdis="chbx_"+(L[F].checked?"1":"0")}if(L[F].type=="radio"){L[F].checked=window.dhx4.s2b(L[F].checked);L[F].imgen=L[F].imgdis="rdbt_"+(L[F].checked?"1":"0");if(typeof(L[F].group)=="undefined"||L[F].group==null){L[F].group=this._genStr(24)}if(this.radio[L[F].group]==null){this.radio[L[F].group]=[]}this.radio[L[F].group].push(L[F].id)}this.itemPull[L[F].id]=L[F];if(L[F].items!=null&&L[F].items.length>0){this.itemPull[L[F].id].complex=true;this._initObj(L[F].items,true,L[F].id)}else{if(this.conf.dload&&L[F].complex==true){this.itemPull[L[F].id].loaded="no"}}this.itemPull[L[F].id].items=null}if(K!==true){if(this.conf.dload==true){if(A==null){this._initTopLevelMenu()}else{this._addSubMenuPolygon(A,A);if(this.conf.selected==A){var a=(this.itemPull[A].parent==this.idPrefix+this.topId);var H=(a&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv);var D=false;if(a&&this.conf.top_mode&&this.conf.mode=="web"&&!this.conf.context){var I=this.idPull[A];if(I._mouseOver==true){var C=this.conf.top_tmtime-(new Date().getTime()-I._dynLoadTM);if(C>1){var x=A;var y=this;I._menuOpenTM=window.setTimeout(function(){y._showPolygon(x,H);y=x=null},C);D=true}}}if(!D){this._showPolygon(A,H)}}this.itemPull[A].loaded="yes";if(this.conf.dload_icon==true){this._updateLoaderIcon(A,false)}}}else{this._init()}}};dhtmlXMenuObject.prototype._xmlToJson=function(y,A){var w=[];if(A==null){var v=y.getElementsByTagName(this.conf.tags.root);if(v==null||(v!=null&&v.length==0)){return{items:[]}}v=v[0]}else{v=y}if(v.getAttribute("parentId")!=null){A=this.idPrefix+v.getAttribute("parentId")}for(var D=0;D<v.childNodes.length;D++){if(typeof(v.childNodes[D].tagName)!="undefined"&&String(v.childNodes[D].tagName).toLowerCase()==this.conf.tags.item){var E=v.childNodes[D];var F={id:this.idPrefix+(E.getAttribute("id")||this._genStr(24)),title:E.getAttribute("text")||"",imgen:E.getAttribute("img")||"",imgdis:E.getAttribute("imgdis")||"",tip:"",hotkey:"",type:E.getAttribute("type")||"item"};if(E.getAttribute("cssNormal")!=null){F.cssNormal=E.getAttribute("cssNormal")}if(F.type=="checkbox"){F.checked=E.getAttribute("checked")}if(F.type=="radio"){F.checked=E.getAttribute("checked");F.group=E.getAttribute("group")}F.state="enabled";if(E.getAttribute("enabled")!=null&&window.dhx4.s2b(E.getAttribute("enabled"))==false){F.state="disabled"}else{if(E.getAttribute("disabled")!=null&&window.dhx4.s2b(E.getAttribute("disabled"))==true){F.state="disabled"}}F.parent=(A!=null?A:this.idPrefix+this.topId);if(this.conf.dload){F.complex=(E.getAttribute("complex")!=null);if(F.complex){F.loaded="no"}}else{var C=this._xmlToJson(E,F.id);F.items=C.items;F.complex=(F.items.length>0)}for(var r=0;r<E.childNodes.length;r++){if(typeof(E.childNodes[r].tagName)!="undefined"){var H=String(E.childNodes[r].tagName||"").toLowerCase();if(H==this.conf.tags.userdata){var x=E.childNodes[r];if(x.getAttribute("name")!=null){this.userData[F.id+"_"+x.getAttribute("name")]=(x.firstChild!=null&&x.firstChild.nodeValue!=null?x.firstChild.nodeValue:"")}}if(H==this.conf.tags.text_ext){F.title=E.childNodes[r].firstChild.nodeValue}if(H==this.conf.tags.tooltip){F.tip=E.childNodes[r].firstChild.nodeValue}if(H==this.conf.tags.hotkey){F.hotkey=E.childNodes[r].firstChild.nodeValue}if(H==this.conf.tags.href&&F.type=="item"){F.href_link=E.childNodes[r].firstChild.nodeValue;if(E.childNodes[r].getAttribute("target")!=null){F.href_target=E.childNodes[r].getAttribute("target")}}}}w.push(F)}}var E={parentId:A,items:w};return E};dhtmlXMenuObject.prototype.enableDynamicLoading=function(e,g){this.conf.dload=true;this.conf.dload_url=e;this.conf.dload_sign=(String(this.conf.dload_url).search(/\?/)==-1?"?":"&");this.conf.dload_icon=g;this._init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(l,m){if(this.idPull[l]==null){return}if(String(this.idPull[l].className).search("TopLevel_Item")>=0){return}var n=(this.conf.rtl?0:2);if(!this.idPull[l].childNodes[n]){return}if(!this.idPull[l].childNodes[n].childNodes[0]){return}var h=this.idPull[l].childNodes[n].childNodes[0];if(String(h.className).search("complex_arrow")===0){h.className="complex_arrow"+(m?"_loading":"")}};dhtmlXMenuObject.prototype.addNewSibling=function(v,u,s,y,w,x){var o=this.idPrefix+(u!=null?u:this._genStr(24));var r=this.idPrefix+(v!=null?this.getParentId(v):this.topId);this._addItemIntoGlobalStrorage(o,r,s,"item",y,w,x);if((r==this.idPrefix+this.topId)&&(!this.conf.context)){this._renderToplevelItem(o,this.getItemPosition(v))}else{this._renderSublevelItem(o,this.getItemPosition(v))}};dhtmlXMenuObject.prototype.addNewChild=function(n,r,u,o,w,v,s){if(n==null){if(this.conf.context){n=this.topId}else{this.addNewSibling(n,u,o,w,v,s);if(r!=null){this.setItemPosition(u,r)}return}}u=this.idPrefix+(u!=null?u:this._genStr(24));if(this.setHotKey){this.setHotKey(n,"")}n=this.idPrefix+n;this._addItemIntoGlobalStrorage(u,n,o,"item",w,v,s);if(this.idPull["polygon_"+n]==null){this._renderSublevelPolygon(n,n)}this._renderSublevelItem(u,r-1);this._redefineComplexState(n)};dhtmlXMenuObject.prototype.removeItem=function(C,y,A){if(!y){C=this.idPrefix+C}var x=null;if(C!=this.idPrefix+this.topId){if(this.itemPull[C]==null){return}if(this.idPull["polygon_"+C]&&this.idPull["polygon_"+C]._tmShow){window.clearTimeout(this.idPull["polygon_"+C]._tmShow)}var F=this.itemPull[C]["type"];if(F=="separator"){var H=this.idPull["separator_"+C];if(this.itemPull[C]["parent"]==this.idPrefix+this.topId){H.onclick=null;H.onselectstart=null;H.id=null;H.parentNode.removeChild(H)}else{H.childNodes[0].childNodes[0].onclick=null;H.childNodes[0].childNodes[0].onselectstart=null;H.childNodes[0].childNodes[0].id=null;H.childNodes[0].removeChild(H.childNodes[0].childNodes[0]);H.removeChild(H.childNodes[0]);H.parentNode.removeChild(H)}this.idPull["separator_"+C]=null;this.itemPull[C]=null;delete this.idPull["separator_"+C];delete this.itemPull[C];H=null}else{x=this.itemPull[C]["parent"];var H=this.idPull[C];H.onclick=null;H.oncontextmenu=null;H.onmouseover=null;H.onmouseout=null;H.onselectstart=null;H.id=null;while(H.childNodes.length>0){H.removeChild(H.childNodes[0])}H.parentNode.removeChild(H);this.idPull[C]=null;this.itemPull[C]=null;delete this.idPull[C];delete this.itemPull[C];H=null}F=null}for(var v in this.itemPull){if(this.itemPull[v]["parent"]==C){this.removeItem(v,true,true)}}var a=new Array(C);if(x!=null&&!A){if(this.idPull["polygon_"+x]!=null){if(this.idPull["polygon_"+x].tbd.childNodes.length==0){a.push(x);this._updateItemComplexState(x,false,false)}}}for(var E=0;E<a.length;E++){if(this.idPull["polygon_"+a[E]]){var D=this.idPull["polygon_"+a[E]];D.onclick=null;D.oncontextmenu=null;D.tbl.removeChild(D.tbd);D.tbd=null;D.childNodes[1].removeChild(D.tbl);D.tbl=null;D.id=null;D.parentNode.removeChild(D);D=null;if(window.dhx4.isIE6){var w="polygon_"+a[E]+"_ie6cover";if(this.idPull[w]!=null){document.body.removeChild(this.idPull[w]);delete this.idPull[w]}}if(this.idPull["arrowup_"+C]!=null&&this._removeArrow){this._removeArrow("arrowup_"+C)}if(this.idPull["arrowdown_"+C]!=null&&this._removeArrow){this._removeArrow("arrowdown_"+C)}this.idPull["polygon_"+a[E]]=null;delete this.idPull["polygon_"+a[E]]}}a=null;if(this.conf.skin=="dhx_terrace"&&arguments.length==1){this._improveTerraceSkin()}};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(y,s,w,o,v,x,r){var u={id:y,title:w,imgen:(x!=null?x:""),imgdis:(r!=null?r:""),type:o,state:(v==true?"disabled":"enabled"),parent:s,complex:false,hotkey:"",tip:""};this.itemPull[u.id]=u};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=true;if(this.base._autoSkinUpdate==true){this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle","");this.base._autoSkinUpdate=false}if(this.conf.ctx_baseid!=null){this.addContextZone(this.conf.ctx_baseid)}};dhtmlXMenuObject.prototype.addContextZone=function(r){if(r==document.body){r="document.body."+this.idPrefix;var n=document.body}else{if(typeof(r)=="string"){var n=document.getElementById(r)}else{var n=r}}var a=false;for(var o in this.conf.ctx_zones){a=a||(o==r)||(this.conf.ctx_zones[o]==n)}if(a==true){return false}this.conf.ctx_zones[r]=n;var m=this;if(window.dhx4.isOpera){this.operaContext=function(c){m._doOnContextMenuOpera(c,m)};n.addEventListener("mouseup",this.operaContext,false)}else{if(n.oncontextmenu!=null&&!n._oldContextMenuHandler){n._oldContextMenuHandler=n.oncontextmenu}n.oncontextmenu=function(c){for(var e in dhtmlXMenuObject.prototype.liveInst){if(e!=m.conf.live_id){if(dhtmlXMenuObject.prototype.liveInst[e].context){dhtmlXMenuObject.prototype.liveInst[e]._hideContextMenu()}}}c=c||event;c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}m._doOnContextBeforeCall(c,this);return false}}};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(h,e){for(var l in dhtmlXMenuObject.prototype.liveInst){if(l!=e.conf.live_id){if(dhtmlXMenuObject.prototype.liveInst[l].context){dhtmlXMenuObject.prototype.liveInst[l]._hideContextMenu()}}}h.cancelBubble=true;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}if(h.button==0&&h.ctrlKey==true){e._doOnContextBeforeCall(h,this)}return false};dhtmlXMenuObject.prototype.removeContextZone=function(e){if(!this.isContextZone(e)){return false}if(e==document.body){e="document.body."+this.idPrefix}var l=this.conf.ctx_zones[e];if(window.dhx4.isOpera){l.removeEventListener("mouseup",this.operaContext,false)}else{l.oncontextmenu=(l._oldContextMenuHandler!=null?l._oldContextMenuHandler:null);l._oldContextMenuHandler=null}try{this.conf.ctx_zones[e]=null;delete this.conf.ctx_zones[e]}catch(h){}return true};dhtmlXMenuObject.prototype.isContextZone=function(e){if(e==document.body&&this.conf.ctx_zones["document.body."+this.idPrefix]!=null){return true}var g=false;if(this.conf.ctx_zones[e]!=null){if(this.conf.ctx_zones[e]==document.getElementById(e)){g=true}}return g};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false}return(this.idPull["polygon_"+this.idPrefix+this.topId].style.display=="")};dhtmlXMenuObject.prototype._showContextMenu=function(l,h,g){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false}window.clearTimeout(this.conf.tm_handler);this.idPull[this.idPrefix+this.topId]=new Array(l,h);this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[g])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false}this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId)};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(r,w){this.conf.ctx_zoneid=w.id;this._clearAndHide();this._hideContextMenu();var s=(r.srcElement||r.target);var v=(window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML||window.dhx4.isEdge?r.offsetX:r.layerX);var o=(window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML||window.dhx4.isEdge?r.offsetY:r.layerY);var e=window.dhx4.absLeft(s)+v;var u=window.dhx4.absTop(s)+o;if(this.checkEvent("onBeforeContextMenu")){if(this.callEvent("onBeforeContextMenu",[w.id,r])){if(this.conf.ctx_autoshow){this._showContextMenu(e,u,w.id);this.callEvent("onAfterContextMenu",[w.id,r])}}}else{if(this.conf.ctx_autoshow){this._showContextMenu(e,u,w.id);this.callEvent("onAfterContextMenu",[w.id])}}};dhtmlXMenuObject.prototype.showContextMenu=function(e,g){this._showContextMenu(e,g,false)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype.setAutoShowMode=function(c){this.conf.ctx_autoshow=(c==true?true:false)};dhtmlXMenuObject.prototype.setAutoHideMode=function(c){this.conf.ctx_autohide=(c==true?true:false)};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(c){this.conf.ctx_hideall=(c==true?true:false)};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall};dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var m in this.itemPull){if(this.itemPull[m].parent==this.idPrefix+this.topId&&this.idPull[m]!=null){var a=false;var l=false;if(this.idPull[m].parentNode.firstChild==this.idPull[m]){a=true}if(this.idPull[m].parentNode.lastChild==this.idPull[m]){l=true}for(var n in this.itemPull){if(this.itemPull[n].type=="separator"&&this.itemPull[n].parent==this.idPrefix+this.topId){if(this.idPull[m].nextSibling==this.idPull["separator_"+n]){l=true}if(this.idPull[m].previousSibling==this.idPull["separator_"+n]){a=true}}}this.idPull[m].style.borderLeftWidth=(a?"1px":"0px");this.idPull[m].style.borderTopLeftRadius=this.idPull[m].style.borderBottomLeftRadius=(a?"3px":"0px");this.idPull[m].style.borderTopRightRadius=this.idPull[m].style.borderBottomRightRadius=(l?"3px":"0px");this.idPull[m]._bl=a;this.idPull[m]._br=l}}};dhtmlXMenuObject.prototype._improveTerraceButton=function(g,e){if(e){this.idPull[g].style.borderBottomLeftRadius=(this.idPull[g]._bl?"3px":"0px");this.idPull[g].style.borderBottomRightRadius=(this.idPull[g]._br?"3px":"0px")}else{this.idPull[g].style.borderBottomLeftRadius="0px";this.idPull[g].style.borderBottomRightRadius="0px"}};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_menu=function(m,r,n,l,o){if(typeof(o)!="undefined"){m=o}else{m=document.createElement("DIV");m.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders");m.appendChild(document.createElement("DIV"))}this.cell.insertBefore(m,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]);this.conf.ofs_nodes.t.menu=true;this._updateIdx();return m};dhtmlXCellObject.prototype.attachMenu=function(c){if(this.dataNodes.menu){return}this.callEvent("_onBeforeContentAttach",["menu"]);if(typeof(c)=="undefined"){c={}}if(typeof(c.skin)=="undefined"){c.skin=this.conf.skin}c.parent=this._attachObject("menu").firstChild;this.dataNodes.menu=new dhtmlXMenuObject(c);this._adjustCont(this._idd);c.parent=null;c=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.menu};dhtmlXCellObject.prototype.detachMenu=function(){if(!this.dataNodes.menu){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;delete this.dataNodes.menu;this._detachObject("menu")};dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")};dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")};dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu}}dhtmlXMenuObject.prototype.setItemEnabled=function(c){this._changeItemState(c,"enabled",this._getItemLevelType(c))};dhtmlXMenuObject.prototype.setItemDisabled=function(c){this._changeItemState(c,"disabled",this._getItemLevelType(c))};dhtmlXMenuObject.prototype.isItemEnabled=function(c){return(this.itemPull[this.idPrefix+c]!=null?(this.itemPull[this.idPrefix+c]["state"]=="enabled"):false)};dhtmlXMenuObject.prototype._changeItemState=function(m,n,r){var o=false;var l=this.idPrefix+m;if((this.itemPull[l]!=null)&&(this.idPull[l]!=null)){if(this.itemPull[l]["state"]!=n){this.itemPull[l]["state"]=n;if(this.itemPull[l]["parent"]==this.idPrefix+this.topId&&!this.conf.context){this.idPull[l].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+(this.itemPull[l]["state"]=="enabled"?"Normal":"Disabled")}else{this.idPull[l].className="sub_item"+(this.itemPull[l]["state"]=="enabled"?"":"_dis")}this._updateItemComplexState(this.idPrefix+m,this.itemPull[this.idPrefix+m]["complex"],false);this._updateItemImage(m,r);if((this.idPrefix+this.conf.last_click==l)&&(r!="TopLevel")){this._redistribSubLevelSelection(l,this.itemPull[l]["parent"])}if(r=="TopLevel"&&!this.conf.context){}}}return o};dhtmlXMenuObject.prototype.getItemText=function(c){return(this.itemPull[this.idPrefix+c]!=null?this.itemPull[this.idPrefix+c]["title"]:"")};dhtmlXMenuObject.prototype.setItemText=function(m,n){m=this.idPrefix+m;if((this.itemPull[m]!=null)&&(this.idPull[m]!=null)){this._clearAndHide();this.itemPull[m]["title"]=n;if(this.itemPull[m]["parent"]==this.idPrefix+this.topId&&!this.conf.context){var o=null;for(var e=0;e<this.idPull[m].childNodes.length;e++){try{if(this.idPull[m].childNodes[e].className=="top_level_text"){o=this.idPull[m].childNodes[e]}}catch(r){}}if(String(this.itemPull[m]["title"]).length==""||this.itemPull[m]["title"]==null){if(o!=null){o.parentNode.removeChild(o)}}else{if(!o){o=document.createElement("DIV");o.className="top_level_text";if(this.conf.rtl&&this.idPull[m].childNodes.length>0){this.idPull[m].insertBefore(o,this.idPull[m].childNodes[0])}else{this.idPull[m].appendChild(o)}}o.innerHTML=this.itemPull[m]["title"]}}else{var o=null;for(var e=0;e<this.idPull[m].childNodes[1].childNodes.length;e++){if(String(this.idPull[m].childNodes[1].childNodes[e].className||"")=="sub_item_text"){o=this.idPull[m].childNodes[1].childNodes[e]}}if(String(this.itemPull[m]["title"]).length==""||this.itemPull[m]["title"]==null){if(o){o.parentNode.removeChild(o);o=null;this.idPull[m].childNodes[1].innerHTML="&nbsp;"}}else{if(!o){o=document.createElement("DIV");o.className="sub_item_text";this.idPull[m].childNodes[1].innerHTML="";this.idPull[m].childNodes[1].appendChild(o)}o.innerHTML=this.itemPull[m]["title"]}}}};dhtmlXMenuObject.prototype.loadFromHTML=function(s,n,r){var u=this.conf.tags.item;this.conf.tags.item="div";var o=(typeof(s)=="string"?document.getElementById(s):s);var m=this._xmlToJson(o,this.idPrefix+this.topId);this._initObj(m);this.conf.tags.item=u;if(n){o.parentNode.removeChild(o)}o=objOd=null;if(onload!=null){if(typeof(r)=="function"){r()}else{if(typeof(window[r])=="function"){window[r]()}}}};dhtmlXMenuObject.prototype.hideItem=function(c){this._changeItemVisible(c,false)};dhtmlXMenuObject.prototype.showItem=function(c){this._changeItemVisible(c,true)};dhtmlXMenuObject.prototype.isItemHidden=function(g){var e=null;if(this.idPull[this.idPrefix+g]!=null){e=(this.idPull[this.idPrefix+g].style.display=="none")}return e};dhtmlXMenuObject.prototype._changeItemVisible=function(h,l){var g=this.idPrefix+h;if(this.itemPull[g]==null){return}if(this.itemPull[g]["type"]=="separator"){g="separator_"+g}if(this.idPull[g]==null){return}this.idPull[g].style.display=(l?"":"none");this._redefineComplexState(this.itemPull[this.idPrefix+h]["parent"])};dhtmlXMenuObject.prototype.setUserData=function(h,g,l){this.userData[this.idPrefix+h+"_"+g]=l};dhtmlXMenuObject.prototype.getUserData=function(g,e){return(this.userData[this.idPrefix+g+"_"+e]!=null?this.userData[this.idPrefix+g+"_"+e]:null)};dhtmlXMenuObject.prototype.setOpenMode=function(c){this.conf.mode=(c=="win"?"win":"web")};dhtmlXMenuObject.prototype.setWebModeTimeout=function(c){this.conf.tm_sec=(!isNaN(c)?c:400)};dhtmlXMenuObject.prototype.getItemImage=function(g){var e=new Array(null,null);g=this.idPrefix+g;if(this.itemPull[g]["type"]=="item"){e[0]=this.itemPull[g]["imgen"];e[1]=this.itemPull[g]["imgdis"]}return e};dhtmlXMenuObject.prototype.setItemImage=function(h,g,l){if(this.itemPull[this.idPrefix+h]["type"]!="item"){return}this.itemPull[this.idPrefix+h]["imgen"]=g;this.itemPull[this.idPrefix+h]["imgdis"]=l;this._updateItemImage(h,this._getItemLevelType(h))};dhtmlXMenuObject.prototype.clearItemImage=function(c){this.setItemImage(c,"","")};dhtmlXMenuObject.prototype.setVisibleArea=function(n,h,l,m){this.conf.v_enabled=true;this.conf.v.x1=n;this.conf.v.x2=h;this.conf.v.y1=l;this.conf.v.y2=m};dhtmlXMenuObject.prototype.setTooltip=function(g,e){g=this.idPrefix+g;if(!(this.itemPull[g]!=null&&this.idPull[g]!=null)){return}this.idPull[g].title=(e.length>0?e:null);this.itemPull[g]["tip"]=e};dhtmlXMenuObject.prototype.getTooltip=function(c){if(this.itemPull[this.idPrefix+c]==null){return null}return this.itemPull[this.idPrefix+c]["tip"]};dhtmlXMenuObject.prototype.setTopText=function(c){if(this.conf.context){return}if(this._topText==null){this._topText=document.createElement("DIV");this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":(this.conf.align=="left"?"right":"left"));this.base.appendChild(this._topText)}this._topText.innerHTML=c};dhtmlXMenuObject.prototype.setAlign=function(c){if(this.conf.align==c){return}if(c=="left"||c=="right"){this.conf.align=c;if(this.cont){this.cont.className=(this.conf.align=="right"?"align_right":"align_left")}if(this._topText!=null){this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.align=="left"?"right":"left")}}};dhtmlXMenuObject.prototype.setHref=function(h,g,l){if(this.itemPull[this.idPrefix+h]==null){return}this.itemPull[this.idPrefix+h]["href_link"]=g;if(l!=null){this.itemPull[this.idPrefix+h]["href_target"]=l}};dhtmlXMenuObject.prototype.clearHref=function(c){if(this.itemPull[this.idPrefix+c]==null){return}delete this.itemPull[this.idPrefix+c]["href_link"];delete this.itemPull[this.idPrefix+c]["href_target"]};dhtmlXMenuObject.prototype.getCircuit=function(g){var e=new Array(g);while(this.getParentId(g)!=this.topId){g=this.getParentId(g);e[e.length]=g}return e.reverse()};dhtmlXMenuObject.prototype._getCheckboxState=function(c){if(this.itemPull[this.idPrefix+c]==null){return null}return this.itemPull[this.idPrefix+c]["checked"]};dhtmlXMenuObject.prototype._setCheckboxState=function(g,e){if(this.itemPull[this.idPrefix+g]==null){return}this.itemPull[this.idPrefix+g]["checked"]=e};dhtmlXMenuObject.prototype._updateCheckboxImage=function(g){if(this.idPull[this.idPrefix+g]==null){return}this.itemPull[this.idPrefix+g]["imgen"]="chbx_"+(this._getCheckboxState(g)?"1":"0");this.itemPull[this.idPrefix+g]["imgdis"]=this.itemPull[this.idPrefix+g]["imgen"];try{this.idPull[this.idPrefix+g].childNodes[(this.conf.rtl?2:0)].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+g]["imgen"]}catch(e){}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(l,h,n){if(h.charAt(1)=="d"){return}if(this.itemPull[this.idPrefix+l]==null){return}var m=this._getCheckboxState(l);if(this.checkEvent("onCheckboxClick")){if(this.callEvent("onCheckboxClick",[l,m,this.conf.ctx_zoneid,n])){this.setCheckboxState(l,!m)}}else{this.setCheckboxState(l,!m)}if(this.checkEvent("onClick")){this.callEvent("onClick",[l])}};dhtmlXMenuObject.prototype.setCheckboxState=function(g,e){this._setCheckboxState(g,e);this._updateCheckboxImage(g)};dhtmlXMenuObject.prototype.getCheckboxState=function(c){return this._getCheckboxState(c)};dhtmlXMenuObject.prototype.addCheckbox=function(w,C,v,u,H,F,A){if(this.conf.context&&C==this.topId){}else{if(this.itemPull[this.idPrefix+C]==null){return}if(w=="child"&&this.itemPull[this.idPrefix+C]["type"]!="item"){return}}var y="chbx_"+(F?"1":"0");var D=y;if(w=="sibling"){var E=this.idPrefix+(u!=null?u:this._genStr(24));var x=this.idPrefix+this.getParentId(C);this._addItemIntoGlobalStrorage(E,x,H,"checkbox",A,y,D);this.itemPull[E]["checked"]=F;this._renderSublevelItem(E,this.getItemPosition(C))}else{var E=this.idPrefix+(u!=null?u:this._genStr(24));var x=this.idPrefix+C;this._addItemIntoGlobalStrorage(E,x,H,"checkbox",A,y,D);this.itemPull[E]["checked"]=F;if(this.idPull["polygon_"+x]==null){this._renderSublevelPolygon(x,x)}this._renderSublevelItem(E,v-1);this._redefineComplexState(x)}};dhtmlXMenuObject.prototype.setHotKey=function(e,o){e=this.idPrefix+e;if(!(this.itemPull[e]!=null&&this.idPull[e]!=null)){return}if(this.itemPull[e]["parent"]==this.idPrefix+this.topId&&!this.conf.context){return}if(this.itemPull[e]["complex"]){return}var u=this.itemPull[e]["type"];if(!(u=="item"||u=="checkbox"||u=="radio")){return}var n=null;try{if(this.idPull[e].childNodes[this.conf.rtl?0:2].childNodes[0].className=="sub_item_hk"){n=this.idPull[e].childNodes[this.conf.rtl?0:2].childNodes[0]}}catch(r){}if(o.length==0){this.itemPull[e]["hotkey_backup"]=this.itemPull[e]["hotkey"];this.itemPull[e]["hotkey"]="";if(n!=null){n.parentNode.removeChild(n)}}else{this.itemPull[e]["hotkey"]=o;this.itemPull[e]["hotkey_backup"]=null;if(n==null){n=document.createElement("DIV");n.className="sub_item_hk";var s=this.idPull[e].childNodes[this.conf.rtl?0:2];while(s.childNodes.length>0){s.removeChild(s.childNodes[0])}s.appendChild(n)}n.innerHTML=o}};dhtmlXMenuObject.prototype.getHotKey=function(c){if(this.itemPull[this.idPrefix+c]==null){return null}return this.itemPull[this.idPrefix+c]["hotkey"]};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(g){var h=this._getSubItemToDeselectByPolygon(g);for(var l=0;l<this.conf.opened_poly.length;l++){if(this.conf.opened_poly[l]!=g){this._hidePolygon(this.conf.opened_poly[l])}}for(var l=0;l<h.length;l++){if(this.idPull[h[l]]!=null&&this.itemPull[h[l]]["state"]=="enabled"){this.idPull[h[l]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal"}}};dhtmlXMenuObject.prototype._checkArrowsState=function(l){var n=this.idPull["polygon_"+l].childNodes[1];var m=this.idPull["arrowup_"+l];var h=this.idPull["arrowdown_"+l];if(n.scrollTop==0){m.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled"}else{m.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(m.over?"_Over":"")}if(n.scrollTop+n.offsetHeight<n.scrollHeight){h.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(h.over?"_Over":"")}else{h.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled"}n=m=h=null};dhtmlXMenuObject.prototype._addUpArrow=function(l){var n=this;var m=document.createElement("DIV");m.pId=this.idPrefix+l;m.id="arrowup_"+this.idPrefix+l;m.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp";m.over=false;m.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};m.oncontextmenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};m.onmouseover=function(){if(n.conf.mode=="web"){window.clearTimeout(n.conf.tm_handler)}n._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowUp_Disabled"){return}this.className="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowUp_Over";this.over=true;n._canScrollUp=true;n._doScrollUp(this.pId,true)};m.onmouseout=function(){if(n.conf.mode=="web"){window.clearTimeout(n.conf.tm_handler);n.conf.tm_handler=window.setTimeout(function(){n._clearAndHide()},n.conf.tm_sec,"JavaScript")}this.over=false;n._canScrollUp=false;if(this.className=="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowUp_Disabled"){return}this.className="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowUp";window.clearTimeout(n.conf.of_utm)};m.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false};var h=this.idPull["polygon_"+this.idPrefix+l];h.childNodes[0].appendChild(m);this.idPull[m.id]=m;h=m=null};dhtmlXMenuObject.prototype._addDownArrow=function(l){var n=this;var m=document.createElement("DIV");m.pId=this.idPrefix+l;m.id="arrowdown_"+this.idPrefix+l;m.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown";m.over=false;m.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};m.oncontextmenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};m.onmouseover=function(){if(n.conf.mode=="web"){window.clearTimeout(n.conf.tm_handler)}n._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowDown_Disabled"){return}this.className="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowDown_Over";this.over=true;n._canScrollDown=true;n._doScrollDown(this.pId,true)};m.onmouseout=function(){if(n.conf.mode=="web"){window.clearTimeout(n.conf.tm_handler);n.conf.tm_handler=window.setTimeout(function(){n._clearAndHide()},n.conf.tm_sec,"JavaScript")}this.over=false;n._canScrollDown=false;if(this.className=="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowDown_Disabled"){return}this.className="dhtmlxMenu_"+n.conf.skin+"_SubLevelArea_ArrowDown";window.clearTimeout(n.conf.of_dtm)};m.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false};var h=this.idPull["polygon_"+this.idPrefix+l];h.childNodes[2].appendChild(m);this.idPull[m.id]=m;h=m=null};dhtmlXMenuObject.prototype._removeUpArrow=function(g){var e="arrowup_"+this.idPrefix+g;this._removeArrow(e)};dhtmlXMenuObject.prototype._removeDownArrow=function(g){var e="arrowdown_"+this.idPrefix+g;this._removeArrow(e)};dhtmlXMenuObject.prototype._removeArrow=function(e){var l=this.idPull[e];l.onselectstart=null;l.oncontextmenu=null;l.onmouseover=null;l.onmouseout=null;l.onclick=null;if(l.parentNode){l.parentNode.removeChild(l)}l=null;this.idPull[e]=null;try{delete this.idPull[e]}catch(h){}};dhtmlXMenuObject.prototype._isArrowExists=function(c){if(this.idPull["arrowup_"+c]!=null&&this.idPull["arrowdown_"+c]!=null){return true}return false};dhtmlXMenuObject.prototype._doScrollUp=function(n,r){var m=this.idPull["polygon_"+n].childNodes[1];if(this._canScrollUp&&m.scrollTop>0){var s=false;var o=m.scrollTop-this.conf.of_ustep;if(o<0){s=true;o=0}m.scrollTop=o;if(!s){var u=this;this.conf.of_utm=window.setTimeout(function(){u._doScrollUp(n,false);u=null},this.conf.of_utime)}else{r=true}}else{this._canScrollUp=false;this._checkArrowsState(n)}if(r){this._checkArrowsState(n)}};dhtmlXMenuObject.prototype._doScrollDown=function(n,r){var m=this.idPull["polygon_"+n].childNodes[1];if(this._canScrollDown&&m.scrollTop+m.offsetHeight<=m.scrollHeight){var s=false;var o=m.scrollTop+this.conf.of_dstep;if(o+m.offsetHeight>=m.scrollHeight){s=true;o=m.scrollHeight-m.offsetHeight}m.scrollTop=o;if(!s){var u=this;this.conf.of_dtm=window.setTimeout(function(){u._doScrollDown(n,false);u=null},this.conf.of_dtime)}else{r=true}}else{this._canScrollDown=false;this._checkArrowsState(n)}if(r){this._checkArrowsState(n)}};dhtmlXMenuObject.prototype._countPolygonItems=function(a){var n=0;for(var r in this.itemPull){var o=this.itemPull[r]["parent"];var m=this.itemPull[r]["type"];if(o==this.idPrefix+a&&(m=="item"||m=="radio"||m=="checkbox")){n++}}return n};dhtmlXMenuObject.prototype.setOverflowHeight=function(a){if(a==="auto"){this.conf.overflow_limit=0;this.conf.auto_overflow=true;return}if(this.conf.overflow_limit==0&&a<=0){return}this._clearAndHide();if(this.conf.overflow_limit>=0&&a>0){this.conf.overflow_limit=a;return}if(this.conf.overflow_limit>0&&a<=0){for(var h in this.itemPull){if(this._isArrowExists(h)){var l=String(h).replace(this.idPrefix,"");this._removeUpArrow(l);this._removeDownArrow(l);this.idPull["polygon_"+h].childNodes[1].style.height=""}}this.conf.overflow_limit=0;return}};dhtmlXMenuObject.prototype._getRadioImgObj=function(h){try{var e=this.idPull[this.idPrefix+h].childNodes[(this.conf.rtl?2:0)].childNodes[0]}catch(l){var e=null}return e};dhtmlXMenuObject.prototype._setRadioState=function(l,m){var n=this._getRadioImgObj(l);if(n!=null){var h=this.itemPull[this.idPrefix+l];h.checked=m;h.imgen="rdbt_"+(h.checked?"1":"0");h.imgdis=h.imgen;n.className="sub_icon "+h.imgen}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(l,h,n){if(h.charAt(1)=="d"||this.itemPull[this.idPrefix+l]["group"]==null){return}var m=this.itemPull[this.idPrefix+l]["group"];if(this.checkEvent("onRadioClick")){if(this.callEvent("onRadioClick",[m,this.getRadioChecked(m),l,this.conf.ctx_zoneid,n])){this.setRadioChecked(m,l)}}else{this.setRadioChecked(m,l)}if(this.checkEvent("onClick")){this.callEvent("onClick",[l])}};dhtmlXMenuObject.prototype.getRadioChecked=function(r){var n=null;for(var s=0;s<this.radio[r].length;s++){var o=this.radio[r][s].replace(this.idPrefix,"");var m=this._getRadioImgObj(o);if(m!=null){var u=(m.className).match(/rdbt_1$/gi);if(u!=null){n=o}}}return n};dhtmlXMenuObject.prototype.setRadioChecked=function(n,l){if(this.radio[n]==null){return}for(var h=0;h<this.radio[n].length;h++){var m=this.radio[n][h].replace(this.idPrefix,"");this._setRadioState(m,(m==l))}};dhtmlXMenuObject.prototype.addRadioButton=function(x,D,w,L,K,J,I,C){if(this.conf.context&&D==this.topId){}else{if(this.itemPull[this.idPrefix+D]==null){return}if(x=="child"&&this.itemPull[this.idPrefix+D]["type"]!="item"){return}}var F=this.idPrefix+(L!=null?L:this._genStr(24));var A="rdbt_"+(I?"1":"0");var H=A;if(x=="sibling"){var y=this.idPrefix+this.getParentId(D);this._addItemIntoGlobalStrorage(F,y,K,"radio",C,A,H);this._renderSublevelItem(F,this.getItemPosition(D))}else{var y=this.idPrefix+D;this._addItemIntoGlobalStrorage(F,y,K,"radio",C,A,H);if(this.idPull["polygon_"+y]==null){this._renderSublevelPolygon(y,y)}this._renderSublevelItem(F,w-1);this._redefineComplexState(y)}var E=(J!=null?J:this._genStr(24));this.itemPull[F]["group"]=E;if(this.radio[E]==null){this.radio[E]=new Array()}this.radio[E][this.radio[E].length]=F;if(I==true){this.setRadioChecked(E,String(F).replace(this.idPrefix,""))}};dhtmlXMenuObject.prototype.serialize=function(){var c="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return c};dhtmlXMenuObject.prototype._readLevel=function(A){var y="";for(var u in this.itemPull){if(this.itemPull[u]["parent"]==A){var D="";var C="";var E="";var v=String(this.itemPull[u]["id"]).replace(this.idPrefix,"");var w="";var a=(this.itemPull[u]["title"]!=""?' text="'+this.itemPull[u]["title"]+'"':"");var x="";if(this.itemPull[u]["type"]=="item"){if(this.itemPull[u]["imgen"]!=""){D=' img="'+this.itemPull[u]["imgen"]+'"'}if(this.itemPull[u]["imgdis"]!=""){C=' imgdis="'+this.itemPull[u]["imgdis"]+'"'}if(this.itemPull[u]["hotkey"]!=""){E="<hotkey>"+this.itemPull[u]["hotkey"]+"</hotkey>"}}if(this.itemPull[u]["type"]=="separator"){w=' type="separator"'}else{if(this.itemPull[u]["state"]=="disabled"){x=' enabled="false"'}}if(this.itemPull[u]["type"]=="checkbox"){w=' type="checkbox"'+(this.itemPull[u]["checked"]?' checked="true"':"")}if(this.itemPull[u]["type"]=="radio"){w=' type="radio" group="'+this.itemPull[u]["group"]+'" '+(this.itemPull[u]["checked"]?' checked="true"':"")}y+="<item id='"+v+"'"+a+w+D+C+x+">";y+=E;if(this.itemPull[u]["complex"]){y+=this._readLevel(u)}y+="</item>"}}return y};dhtmlXMenuObject.prototype.enableEffect=function(m,a,l){this._menuEffect=(m=="opacity"||m=="slide"||m=="slide+"?m:false);this._pOpStyleIE=(navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0);for(var n in this.idPull){if(n.search(/polygon/)===0){this._pOpacityApply(n,(this._pOpStyleIE?100:1));this.idPull[n].style.height=""}}this._pOpMax=(typeof(a)=="undefined"?100:a)/(this._pOpStyleIE?1:100);this._pOpStyleName=(this._pOpStyleIE?"filter":"opacity");this._pOpStyleValue=(this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#");this._pSlSteps=(this._pOpStyleIE?10:20);this._pSlTMTimeMax=l||50};dhtmlXMenuObject.prototype._showPolygonEffect=function(c){this._pShowHide(c,true)};dhtmlXMenuObject.prototype._hidePolygonEffect=function(c){this._pShowHide(c,false)};dhtmlXMenuObject.prototype._pOpacityApply=function(e,g){this.idPull[e].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",g||this.idPull[e]._op)};dhtmlXMenuObject.prototype._pShowHide=function(e,g){if(!this.idPull){return}if(this.idPull[e]._tmShow!=null){if((this.idPull[e]._step_h>0&&g==true)||(this.idPull[e]._step_h<0&&g==false)){return}window.clearTimeout(this.idPull[e]._tmShow);this.idPull[e]._tmShow=null;this.idPull[e]._max_h=null}if(g==false&&(this.idPull[e].style.visibility=="hidden"||this.idPull[e].style.display=="none")){return}if(g==true&&this.idPull[e].style.display=="none"){this.idPull[e].style.visibility="hidden";this.idPull[e].style.display=""}if(this.idPull[e]._max_h==null){this.idPull[e]._max_h=parseInt(this.idPull[e].offsetHeight);this.idPull[e]._h=(g==true?0:this.idPull[e]._max_h);this.idPull[e]._step_h=Math.round(this.idPull[e]._max_h/this._pSlSteps)*(g==true?1:-1);if(this.idPull[e]._step_h==0){return}this.idPull[e]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps);if(this._menuEffect=="slide+"||this._menuEffect=="opacity"){this.idPull[e].op_tm=this.idPull[e]._step_tm;this.idPull[e].op_step=(this._pOpMax/this._pSlSteps)*(g==true?1:-1);if(this._pOpStyleIE){this.idPull[e].op_step=Math.round(this.idPull[e].op_step)}this.idPull[e]._op=(g==true?0:this._pOpMax);this._pOpacityApply(e)}else{this.idPull[e]._op=(this._pOpStyleIE?100:1);this._pOpacityApply(e)}if(this._menuEffect.search(/slide/)===0){this.idPull[e].style.height="0px"}this.idPull[e].style.visibility="visible"}this._pEffectSet(e,this.idPull[e]._h+this.idPull[e]._step_h)};dhtmlXMenuObject.prototype._pEffectSet=function(h,l){if(!this.idPull){return}if(this.idPull[h]._tmShow){window.clearTimeout(this.idPull[h]._tmShow)}this.idPull[h]._h=Math.max(0,Math.min(l,this.idPull[h]._max_h));if(this._menuEffect.search(/slide/)===0){this.idPull[h].style.height=this.idPull[h]._h+"px"}l+=this.idPull[h]._step_h;if(this._menuEffect=="slide+"||this._menuEffect=="opacity"){this.idPull[h]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[h]._op+this.idPull[h].op_step));this._pOpacityApply(h)}if((this.idPull[h]._step_h>0&&l<=this.idPull[h]._max_h)||(this.idPull[h]._step_h<0&&l>=0)){var g=this;this.idPull[h]._tmShow=window.setTimeout(function(){g._pEffectSet(h,l)},this.idPull[h]._step_tm)}else{if(this._menuEffect.search(/slide/)===0){this.idPull[h].style.height=""}if(this.idPull[h]._step_h<0){this.idPull[h].style.visibility="hidden"}if(this._menuEffect=="slide+"||this._menuEffect=="opacity"){this.idPull[h]._op=(this.idPull[h]._step_h<0?(this._pOpStyleIE?100:1):this._pOpMax);this._pOpacityApply(h)}this.idPull[h]._tmShow=null;this.idPull[h]._h=null;this.idPull[h]._max_h=null;this.idPull[h]._step_tm=null}};function dhtmlXRibbon(l){var m=this,n,h;this.conf={type:"ribbon",icons_path:(l&&l.icons_path)?l.icons_path:"",arrows_mode:(l&&l.arrows_mode)?l.arrows_mode:null,skin:"dhx_skyblue"};this._eventHandlers={};this._base=null;this._items={};this._tabbar=null;this.childIds=[];if(typeof(l)=="string"){h=l}else{if(l&&l.tagName){h=l}else{if(l&&l.parent){if(l.parent.tagName||typeof(l.parent)=="string"){h=l.parent}}}}this._doOnHighlight0=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].mouseover)=="function"){if(m.items[c.type].mouseover(c,m,g)!=true){return false}}if(!/dhxrb_highlight0/.test(e.className)){e.className+=" dhxrb_highlight0"}};this._doOffHighlight0=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].mouseout)=="function"){if(m.items[c.type].mouseout(c,m,g)!=true){return false}}if(/dhxrb_highlight1/.test(e.className)){e.className=e.className.replace(/\s?dhxrb_highlight1/,"")}if(/dhxrb_highlight0/.test(e.className)){e.className=e.className.replace(/\s?dhxrb_highlight0/,"")}};this._doOnHighlight1=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}m.callEvent("_showPopup",[c.id]);if(m.items[c.type]&&typeof(m.items[c.type].mousedown)=="function"){if(m.items[c.type].mousedown(c,m,g)!=true){return false}}if(!/dhxrb_highlight1/.test(e.className)){e.className+=" dhxrb_highlight1"}};this._doOffHighlight1=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].mouseup)=="function"){if(m.items[c.type].mouseup(c,m,g)!=true){return false}}if(/dhxrb_highlight1/.test(e.className)){e.className=e.className.replace(/\s?dhxrb_highlight1/,"")}};this._doOnClick=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].click)=="function"){m.items[c.type].click(c,m,g)}};this._doOnFocus=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}m.callEvent("_showPopup",[c.id]);if(m.items[c.type]&&typeof(m.items[c.type].focus)=="function"){m.items[c.type].focus(c,m,g)}};this._doOnBlur=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].blur)=="function"){m.items[c.type].blur(c,m,g)}};this._doOnChange=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].change)=="function"){m.items[c.type].change(c,m,g)}};this._doOnKeydown=function(g){g=g||event;var a=g.target||g.srcElement;var e=m._findItemByNode(a);var c=m._items[e._dhx_ribbonId];if(c.conf.disable){return}if(m.items[c.type]&&typeof(m.items[c.type].keydown)=="function"){m.items[c.type].keydown(c,m,g)}};this._tabCustomApi={enable:function(g,c){var e=null;c=c||false;if(c!=true){e=m._items[this._idd];for(var a=0;a<e.childIds.length;a++){m.enable(e.childIds[a])}}return m._tabOriginalApi.enable.apply(this,[g])},disable:function(g,c){var e=null;if(c!=false){e=m._items[this._idd];for(var a=0;a<e.childIds.length;a++){m.disable(e.childIds[a])}}return m._tabOriginalApi.disable.apply(this,[g])},close:function(a){var c=m._items[this._idd];m._removeTab(c);m._tabOriginalApi.close.apply(this,[a]);for(var e in m._tabOriginalApi){this[e]=null}}};this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return m.callEvent("onSelect",arguments)});this._tabbar.attachEvent("onTabClick",function(){return m.callEvent("onTabClick",arguments)});this._tabbar.attachEvent("onTabClose",function(){return m.callEvent("onTabClose",arguments)})};if(typeof(h)=="string"){this._base=document.getElementById(h)}else{if(h&&h.tagName){this._base=h}else{this._base=document.createElement("div");this._base._dhx_remove=true;if(document.body.firstChild){document.body.insertBefore(this._base,document.body.firstChild)}else{document.body.appendChild(this._base)}}}n=dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"dhx_skyblue";if(typeof(l)=="object"&&l.skin){n=l.skin}this.setSkin(n);dhx4._eventable(this);dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:true});this.attachEvent("_onHeightChanged",function(){this.conf.inited=true});this._base.className+=" dhxrb_without_tabbar";this._base.innerHTML="<div class='dhxrb_background_area'></div>";if(l!=null){if(l.json){this.loadStruct(l.json,l.onload)}else{if(l.xml){this.loadStruct(l.xml,l.onload)}else{this._renderData(l)}}}this.unload=function(){var c=[];for(var a=0;a<this.childIds.length;a++){c.push(this.childIds[a])}dhx4._enableDataLoading(this,null,null,null,"clear");dhx4._eventable(this,"clear");for(var a=0;a<c.length;a++){if(this._items[c[a]].type=="tab"){this.tabs(c[a]).close(false)}else{this.removeItem(c[a])}}if(this._tabbar){this._tabbar.unload();this._tabbar=null}this._base.innerHTML="";if(this._base._dhx_remove){this._base.parentNode.removeChild(this._base)}else{this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/ig,"")}for(var e in this){this[e]=null}m=null}}dhtmlXRibbon.prototype.setSizes=function(){if(this._tabbar!=null&&typeof(this.setSizes)=="function"){this._tabbar.setSizes()}};dhtmlXRibbon.prototype._renderData=function(g){var e=this._base.firstChild;if(g!=null){this.conf.icons_path=g.icons_path||this.conf.icons_path;if(g.tabs instanceof Array){this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,"");e.className="dhxrb_with_tabbar";this._tabbar=new dhtmlXTabBar(e);this._attachEventTabbar();this._tabbar.setSkin(this.conf.skin);if(this.conf.arrows_mode!=null){this._tabbar.setArrowsMode(this.conf.arrows_mode)}this.childIds=this._appendTabs(g.tabs)}else{if(g.items instanceof Array){if(!/\s?dhxrb_without_tabbar/i.test(this._base.className)){this._base.className+=" dhxrb_without_tabbar"}if(/\s?dhxrb_background_area/i.test(e.className)){e.className="dhxrb_background_area"}e.innerHTML="<div class='dhxrb_g_area'></div>";this.childIds=this._appendBlocks(g.items,e.firstChild)}}this.callEvent("_onHeightChanged",[])}};dhtmlXRibbon.prototype._xmlToJson=function(n){var h=n.lastChild||null,l={},m=[];if(h&&h.tagName=="ribbon"){m=this._convertXmlNodeListIntoObject(h.childNodes)}if(m[0]&&m[0].type&&m[0].type.toLowerCase()=="block"){l.items=m}else{l.tabs=m}return l};dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(r){var o,l,m=[],n;l=r.length;for(o=0;o<l;o++){n=this._covertXmlNodeToObject(r[o]);if(n){m.push(n)}}return m};dhtmlXRibbon.prototype._covertXmlNodeToObject=function(n){if(!n||!n.tagName||!(n.tagName.toLowerCase()=="item"||n.tagName.toLowerCase()=="tab")){return null}var o,l,r=n.attributes,m={};l=r.length;for(o=0;o<l;o++){switch(r[o].name){case"isbig":m.isbig=dhx4.s2b(r[o].value);break;case"state":m.state=dhx4.s2b(r[o].value);break;default:m[r[o].name]=r[o].value}}if(n.childNodes.length){if(n.getAttribute("type")=="buttonCombo"||n.getAttribute("type")=="buttonSelect"){m.data=n}else{if(n.tagName.toLowerCase()=="tab"){m.items=this._convertXmlNodeListIntoObject(n.childNodes)}else{m.list=this._convertXmlNodeListIntoObject(n.childNodes)}}}return m};dhtmlXRibbon.prototype._appendTabs=function(m){var r,l,o,n=[];l=m.length;for(r=0;r<l;r++){o=this._addTab(m[r]);if(m[r].items instanceof Array){o.childIds=this._appendBlocks(m[r].items,o.base,o)}n.push(o.id)}return n};dhtmlXRibbon.prototype._addTab=function(m){var h,l;var n={conf:{active:false,text:"",width:null,position:null,disable:false},base:document.createElement("div"),type:"tab",childIds:[]};for(h in m){if(h=="items"){continue}n.conf[h]=m[h]}if(!m.id){n.id=dhx4.newId()}else{n.id=m.id}while(this._items[n.id]){n.id=dhx4.newId()}this._tabbar.addTab(n.id,n.conf.text,n.conf.width,n.conf.position,n.conf.active);n.base.className="dhxrb_g_area";n.base._dhx_ribbonId=n.id;this.tabs(n.id).attachObject(n.base);this._changeApiForTab(this.tabs(n.id));this._items[n.id]=n;return n};dhtmlXRibbon.prototype._changeApiForTab=function(g){var e;for(e in this._tabOriginalApi){this._tabOriginalApi[e]=this._tabOriginalApi[e]||g[e];g[e]=this._tabCustomApi[e]}};dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null};dhtmlXRibbon.prototype._appendBlocks=function(D,E,A){var w,y,v,x,u,C,l=[];A=A||null;y=D.length;for(w=0;w<y;w++){if(typeof(D[w])=="object"&&D[w].type=="block"){v=this._addBlock(D[w],E);if(D[w].list&&(D[w].list instanceof Array)){x=D[w].list;u=x.length;for(C=0;C<u;C++){this._addItem(v.id,null,null,x[C])}}if(A!=null){v.parentId=A.id}if(v.conf.disable){this.disable(v.id)}l.push(v.id)}}return l};dhtmlXRibbon.prototype._addBlock=function(o,r){var s,n,l,u;l={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:false},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(u in o){if(u=="list"||u=="type"||u=="id"){continue}l.conf[u]=o[u]}if(!o.id){l.id=dhx4.newId()}else{l.id=o.id}while(this._items[l.id]){l.id=dhx4.newId()}l.base.className="dhxrb_block_base";r.appendChild(l.base);l.contForItems.className="dhxrb_block_items";l.contForText.className="dhxrb_block_label";l.base.appendChild(l.contForItems);if(l.conf.text){l.contForText.innerHTML=l.conf.text;if(l.conf.text_pos=="header.html"){l.base.insertBefore(l.contForText,l.contForItems)}else{l.base.appendChild(l.contForText)}}l.base._dhx_ribbonId=l.id;this._items[l.id]=l;return l};dhtmlXRibbon.prototype._addItem=function(D, E, v, x){var A=this._items[D],F,y,H=null,w=this,C;if(x.type!="newLevel"&&!this.items[x.type]){return null}if(x.type=="newLevel"){this._addNewLevel(A)}else{if(A.type=="group"){F=document.createElement("div");F.className="dhxrb_in_group";A.base.appendChild(F)}else{if(x.isbig){F=document.createElement("div");F.className="dhxrb_big_button";A.contForItems.appendChild(F)}else{y=this._getContainerForSmallItem(A);F=document.createElement("div");F.className=(A.conf.mode=="rows")?"dhxrb_in_row":"dhxrb_3rows_button";y.appendChild(F)}}}if(F){this._attachEventForItem(F);C={icons_path:x.icons_path||this.conf.icons_path,skin:this.conf.skin};for(var u in x){C[u]=x[u]}if(!C.id){C.id=dhx4.newId()}while(this._items[C.id]){C.id=dhx4.newId()}H=(this.items[C.type]&&this.items[C.type].render)?this.items[C.type].render(F,C):null}if(H!=null){this._items[H.id]=H;H.parentId=A.id;A.childIds.push(H.id);F._dhx_ribbonId=H.id;if(C.onclick&&(typeof(C.onclick)=="function")){this._eventHandlers[H.id]=this._eventHandlers[H.id]||{};this._eventHandlers[H.id]["onclick"]=C.onclick}H.callEvent=function(){w.callEvent.apply(w,arguments)};H._callHandler=function(){w._callHandler.apply(w,arguments)};if(this.items[C.type]&&typeof(this.items[C.type].callAfterInit)=="function"){this.items[C.type].callAfterInit.apply(this,[H])}}return H};dhtmlXRibbon.prototype._callHandler=function(g,e){if(this._eventHandlers[g]&&this._eventHandlers[g].onclick){this._eventHandlers[g].onclick.apply(this,e)}};dhtmlXRibbon.prototype.items={};dhtmlXRibbon.prototype.items.button={render:function(n,h){var m,l;l={base:n,id:h.id,type:h.type,conf:{text:"",text_pos:(h.isbig)?"bottom":"right",img:null,imgdis:null,isbig:false,disable:false,skin:h.skin}};for(m in h){if(m=="id"||m=="onclick"||m=="type"){continue}l.conf[m]=h[m]}n.innerHTML="<img class='dhxrb_image"+((l.conf.img)?"'":" dhxrb_invisible'")+" src='"+((l.conf.img)?l.conf.icons_path+l.conf.img:"")+"' /><div class='dhxrb_label_button'>"+l.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(l)}if(l.conf.disable){this.disable(l)}return l},getText:function(c){return c.conf.text},setText:function(l,h){var g=l.base.childNodes[1];l.conf.text=h;g.innerHTML=h},setImage:function(g,e){g.conf.img=e;if(g.conf.disable==false){g.base.childNodes[0].src=g.conf.icons_path+g.conf.img}},setImageDis:function(g,e){g.conf.imgdis=e;if(g.conf.disable==true){g.base.childNodes[0].src=g.conf.icons_path+g.conf.imgdis}},mousedown:function(e,h,l){return true},click:function(e,h,l){if(l.button!=0){return false}h._callHandler(e.id,[e.id]);e.callEvent("onClick",[e.id]);return false},disable:function(l){var h=l.base.childNodes[0],g=l.base.childNodes[1];if(l.conf.imgdis){h.src=l.conf.icons_path+l.conf.imgdis;if(/\s?dhxrb_invisible/i.test(h.className)){h.className=h.className.replace(/\s?dhxrb_invisible/i,"")}}if(!/\s?dhxrb_disable_text_style/i.test(g.className)){g.className+=" dhxrb_disable_text_style"}return true},enable:function(l){var h=l.base.childNodes[0],g=l.base.childNodes[1];if(l.conf.img){h.src=l.conf.icons_path+l.conf.img}else{if(!/\s?dhxrb_invisible/i.test(h.className)){h.className+=" dhxrb_invisible"}}if(/\s?dhxrb_disable_text_style/i.test(g.className)){g.className=g.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true}};dhtmlXRibbon.prototype.items.buttonTwoState={click:function(e,h,l){return false},afterRender:function(c){if(c.conf.state){this.setState(c,c.conf.state)}},mouseover:function(c){if(!/dhxrb_highlight0/.test(c.base.className)){c.base.className+=" dhxrb_highlight0"}return false},mouseout:function(c){if(/dhxrb_highlight0/.test(c.base.className)){c.base.className=c.base.className.replace(/\s?dhxrb_highlight0/,"")}return false},mousedown:function(e,h,l){h._callHandler(e.id,[e.id,!e.conf.state]);this.setState(e,!e.conf.state,true);return false},mouseup:function(c){return false},setState:function(g,l,h){h=h||false;l=dhx4.s2b(l);if(l){if(!/dhxrb_highlight1/.test(g.base.className)){g.base.className+=" dhxrb_highlight1"}}else{if(/dhxrb_highlight1/.test(g.base.className)){g.base.className=g.base.className.replace(/\s?dhxrb_highlight1/,"")}}g.conf.state=l;if(h){g.callEvent("onStateChange",[g.id,g.conf.state])}},getState:function(c){return(c.conf.state==true)}};dhtmlXRibbon.prototype.items.buttonSegment={click:function(e,h,l){return false},mousedown:function(e,h,l){this.setState(e,h,true);return false},callAfterInit:function(c){if(c.conf.state||dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(c,this)==null){if(c.conf.state){c.conf.state=false}dhtmlXRibbon.prototype.items.buttonSegment.setState(c,this,false)}},afterRender:function(){},setState:function(l,m,n){n=n||false;var o=null,r=dhx4.s2b(l.conf.state);if(r==false){o=this._getSelectedNeighbor(l,m);if(o!=null){this._unSelect(o)}if(!/dhxrb_highlight1/.test(l.base.className)){l.base.className+=" dhxrb_highlight1"}l.conf.state=true;if(n){m._callHandler(l.id,[l.id,(o?o.id:null)]);m.callEvent("onStateChange",[l.id,(o?o.id:null)])}}},remove:function(v,n){var s=dhx4.s2b(v.conf.state),r=null,o=0,w=n._items[v.parentId],u;if(s){while(w.childIds[o]&&r==null){u=n._items[w.childIds[o]];if(u.type=="buttonSegment"&&u!=v){r=u}o++}if(r){this.setState(r,n)}}},_unSelect:function(e){var g=dhx4.s2b(e.conf.state);if(g){if(/dhxrb_highlight1/.test(e.base.className)){e.base.className=e.base.className.replace(/\s?dhxrb_highlight1/,"")}e.conf.state=false}},_getSelectedNeighbor:function(s,w){var u=w._items[s.parentId],v,o,l,r=null;o=u.childIds.length;for(v=0;v<o;v++){l=w._items[u.childIds[v]];if(l.type=="buttonSegment"&&l.conf.state){r=l;break}}return r}};dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:false,afterRender:function(g){var e=g.base.childNodes[1];e.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>";g.menu=null;this.itemCollection.push(g);this._attachEventToWindow();e=null},setText:function(g,h){var l=g.base.childNodes[1].lastChild;g.conf.text=h;g.base.childNodes[1].innerHTML=h;g.base.childNodes[1].appendChild(l)},setOptionText:function(g,h,l){if(g.menu!=null){g.menu.setItemText(h,l)}else{this._loopThroughItems(g.conf.items,h,l,false)}},getOptionText:function(e,g){if(e.menu!=null){return e.menu.getItemText(g)}return this._loopThroughItems(e.conf.items,g,null,true)},_loopThroughItems:function(n,m,o,r){for(var s=0;s<n.length;s++){if(n[s].id==m){if(r!=true){n[s].text=o;return true}else{return n[s].text}}if(n[s].items!=null){var u=this._loopThroughItems(n[s].items,m,o,r);if(u!=null){return u}}}return null},_attachEventToWindow:function(){if(this._isAttachedEventInWindow==false){if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousedown",this._hideAllMenus,false)}else{document.body.attachEvent("onmousedown",this._hideAllMenus)}this._isAttachedEventInWindow=true}},_detachEventFromWindow:function(){if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("mousedown",this._hideAllMenus,false)}else{document.body.detachEvent("onmousedown",this._hideAllMenus)}this._isAttachedEventInWindow=false},_hideAllMenus:function(m){m=m||event;var r=m.target||m.srcElement;var e=true;while(r!=null&&e==true){if(r.className!=null&&/SubLevelArea_Polygon/i.test(r.className)){e=false}else{r=r.parentNode}}if(e==false){return}var u=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var s in u){var o=u[s];if(o.menu instanceof dhtmlXMenuObject){if(o._skipHiding){o._skipHiding=false}else{dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(o)}}}},mousedown:function(e,h,l){e._skipHiding=true;this.showMenu(e);return false},mouseup:function(c){return false},click:function(){},setState:function(){},showMenu:function(l){var g=dhx4.absLeft(l.base),h=dhx4.absTop(l.base)+l.base.offsetHeight;if(!(l.menu instanceof dhtmlXMenuObject)){l.menu=new dhtmlXMenuObject({parent:l.base,icons_path:l.conf.icons_path,context:true,items:l.conf.items,skin:l.conf.skin});if(l.conf.data){l.menu.loadStruct(l.conf.data);delete l.conf.data}l.menu.setAutoHideMode(false);l.menu.attachEvent("onHide",function(a){if(a==null){dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(l)}});l.menu.attachEvent("onShow",function(a){if(a==null){dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(l)}});l.menu.attachEvent("onClick",function(a){l.callEvent("onClick",[a,l.id])});l.base.oncontextmenu=function(){return false};dhtmlXRibbon.prototype.items.buttonSelect.showMenu(l)}else{l.menu.showContextMenu(g,h)}},hideMenu:function(c){if(c.menu instanceof dhtmlXMenuObject){c.menu.hideContextMenu()}},remove:function(l){var h,g;if(l.menu instanceof dhtmlXMenuObject){l.menu.unload();l.menu=null}l.base.oncontextmenu=null;h=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,l);if(h!=-1){dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(h,1)}if(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length==0){this._detachEventFromWindow()}},setSkin:function(e,g){if(e.menu instanceof dhtmlXMenuObject){e.menu.setSkin(g)}},_doOnHideMenu:function(c){if(c._skipHiding){c._skipHiding=false}else{if(/dhxrb_highlight1/.test(c.base.className)){c.base.className=c.base.className.replace(/\s?dhxrb_highlight1/,"")}}},_doOnShowMenu:function(c){if(!/dhxrb_highlight1/.test(c.base.className)){c.base.className+=" dhxrb_highlight1"}}};dhtmlXRibbon.prototype.items.group={render:function(n,h){var m,l;l={base:n,id:h.id,type:h.type,conf:{disable:false,skin:h.skin},childIds:[]};n.className="dhxrb_group";for(m in h){if(m=="id"||m=="onclick"||m=="type"){continue}l.conf[m]=h[m]}return l},callAfterInit:function(r){this._detachEventFromItem(r.base);var s,o,l=r.conf.list,w,u,v;o=(l)?l.length:0;for(s=0;s<o;s++){w=this._addItem(r.id,null,null,l[s]);if(w==null){continue}u=w.base.childNodes[1];if(u&&!u.innerHTML&&!/\s?dhxrb_label_hide/i.test(u.className)){u.className+=" dhxrb_label_hide"}}dhtmlXRibbon.prototype.items.group.normalize(r);if(r.conf.disable){this.disable(r.id)}l=undefined},normalize:function(y){var r=y.base.children;var v=r.length,x=false,w=0;var u,l;for(var s=0;s<v;s++){if(!/dhxrb_separator_group/i.test(r[s].className)){if(/dhxrb_item_hide/i.test(r[s].className)){w++;continue}}if((Math.ceil((s-w)/2)-Math.floor((s-w)/2))==0){if(/dhxrb_separator_group/i.test(r[s].className)){r[s].parentNode.removeChild(r[s]);x=true;break}}else{if(!/dhxrb_separator_group/i.test(r[s].className)){u=document.createElement("div");u.className="dhxrb_separator_groupp";y.base.insertBefore(u,r[s]);x=true;break}}}if(x){this.normalize(y)}else{l=y.base.lastChild;if(l&&/dhxrb_separator_group/i.test(l.className)){l.parentNode.removeChild(l)}}},hideChild:function(n,l){var h=dhtmlXRibbon.prototype._indexOf(n.base.children,l.base);if(h==0){h++}else{if(h!=-1){h--}else{return}}var m=n.base.children[h];if(m&&/dhxrb_separator_group/i.test(m.className)){m.parentNode.removeChild(m)}},showChild:function(c){this.normalize(c)}};dhtmlXRibbon.prototype.items.input={render:function(n,h){var m,l;l={base:n,id:h.id,type:h.type,conf:{text:"",text_pos:(h.isbig)?"bottom":"right",img:null,imgdis:null,isbig:false,disable:false,skin:h.skin,value:""}};for(m in h){if(m=="id"||m=="onclick"||m=="type"){continue}l.conf[m]=h[m]}n.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+l.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(l)}if(l.conf.disable){this.disable(l)}if(l.conf.width){this.setWidth(l,l.conf.width)}if(l.conf.value){this.setValue(l,l.conf.value)}return l},callAfterInit:function(g){var e=g.base.childNodes[0];this._detachEventFromItem(g.base);this._attachEventsToInput(e)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(g){var e=g.base.childNodes[0];g.conf.value=e.value},keydown:function(n,l,m){if(m.keyCode==13){var e=n.base.childNodes[0];n.conf.value=e.value;l.callEvent("onEnter",[n.id,n.conf.value])}},remove:function(l,h){var g=l.base.childNodes[0];h._detachEventsFromInput(g)},getValue:function(l){var g=l.base.childNodes[0],h;h=g.value;g=undefined;return h},setValue:function(l,h){var g=l.base.childNodes[0],h;g.value=h;l.conf.value=h},setWidth:function(l,h){var g=l.base.childNodes[0];g.style.width=parseInt(h)+"px"},disable:function(h){var l=h.base.childNodes[0],g=h.base.childNodes[1];l.disabled=true;if(!/\s?dhxrb_disable_text_style/i.test(g.className)){g.className+=" dhxrb_disable_text_style"}return true},enable:function(h){var l=h.base.childNodes[0],g=h.base.childNodes[1];l.disabled=false;if(/\s?dhxrb_disable_text_style/i.test(g.className)){g.className=g.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true},getInput:function(c){return c.base.childNodes[0]}};dhtmlXRibbon.prototype.getInput=function(g){var e=this._items[g];if(e==null||e.type!="input"){return null}return this.items[e.type].getInput(e)};dhtmlXRibbon.prototype.items.checkbox={render:function(n,h){var m,l;l={base:n,id:h.id,type:h.type,conf:{text:"",text_pos:(h.isbig)?"bottom":"right",disable:false,checked:false}};for(m in h){if(m=="id"||m=="onclick"||m=="type"){continue}l.conf[m]=h[m]}n.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+l.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(l)}if(l.conf.checked){this.check(l)}return l},callAfterInit:function(c){if(c.conf.disable){this.disable(c.id)}},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(c){return false},mouseup:function(c){return false},click:function(e,h,l){if(l.button!=0){return false}if(e.type=="checkbox"){if(e.conf.checked){this.uncheck(e,true)}else{this.check(e,true)}}},check:function(e,g){g=g||false;if(e.type!="checkbox"){return}e.conf.checked=true;if(!/\s?dhxrb_checked/i.test(e.base.className)){e.base.className+=" dhxrb_checked"}if(g){e.callEvent("onCheck",[e.id,e.conf.checked])}},uncheck:function(e,g){g=g||false;if(e.type!="checkbox"){return}e.conf.checked=false;if(/\s?dhxrb_checked/i.test(e.base.className)){e.base.className=e.base.className.replace(/\s?dhxrb_checked/i,"")}if(g){e.callEvent("onCheck",[e.id,e.conf.checked])}},isChecked:function(c){if(c.type!="checkbox"){return false}return(c.conf.checked==true)},disable:function(c){return true},enable:function(c){return true}};dhtmlXRibbon.prototype.items.text={render:function(h,l){var m={base:h,id:l.id,type:l.type,conf:{text:""}};for(var n in l){if(n=="id"||n=="type"){continue}m.conf[n]=l[n]}h.innerHTML="<div class='dhxrb_item_text'>"+m.conf.text+"</div>";if(typeof(this.afterRender)=="function"){this.afterRender(m)}return m},callAfterInit:function(c){this._detachEventFromItem(c.base)},getText:function(c){return c.conf.text},setText:function(e,g){e.conf.text=g;e.base.firstChild.innerHTML=e.conf.text}};dhtmlXRibbon.prototype.items.buttonCombo={render:function(l,r){var o,n,m={};n={base:l,id:r.id,type:r.type,conf:{text:"",text_pos:"right",width:140,skin:r.skin,callEvent:true}};for(o in r){if(o=="id"||o=="onclick"||o=="type"){continue}n.conf[o]=r[o]}for(o in n.conf){if(o=="text"||o=="text_pos"||o=="disable"||o=="data"){continue}m[o]=n.conf[o]}n.base.className+=" dhxrb_buttoncombo_cont";n.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+n.conf.text+"</div>";m.parent=n.base.firstChild;n.combo=new dhtmlXCombo(m);n.combo.setSkin(m.skin);n.combo.attachEvent("onChange",function(c,a){n._callHandler(n.id,[c,a]);if(n.conf.callEvent==true){n.callEvent("onSelectOption",[n.id,c,a])}n.conf.callEvent=true});if(n.conf.data){n.combo.load(n.conf.data);delete n.conf.data}if(typeof(this.afterRender)=="function"){this.afterRender(n)}if(n.conf.disable){this.disable(n)}return n},callAfterInit:function(c){this._detachEventFromItem(c.base)},disable:function(g){var e=g.base.lastChild;if(g.combo instanceof dhtmlXCombo){g.combo.disable()}if(!/\s?dhxrb_disable_text_style/i.test(e.className)){e.className+=" dhxrb_disable_text_style"}return true},enable:function(g){var e=g.base.lastChild;if(g.combo instanceof dhtmlXCombo){g.combo.enable()}if(/\s?dhxrb_disable_text_style/i.test(e.className)){e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true},remove:function(c){if(c.combo instanceof dhtmlXCombo){c.combo.unload();c.combo=null}},getValue:function(e){var g=null;if(e.combo instanceof dhtmlXCombo){g=e.combo.getSelectedValue()}return g},setValue:function(g,l,h){if(g.combo instanceof dhtmlXCombo){g.conf.callEvent=h;g.combo.setComboValue(l)}},setSkin:function(e,g){if(e.combo instanceof dhtmlXCombo){e.combo.setSkin(g)}}};dhtmlXRibbon.prototype.items.slider={render:function(l,m){var o,n,r={};n={base:l,id:m.id,type:m.type,conf:{text:"",text_pos:"right",size:150,vertical:false,min:0,max:99,value:0,step:1,margin:10,disabled:false,enableTooltip:false}};for(o in m){if(o=="id"||o=="onclick"||o=="type"){continue}n.conf[o]=m[o]}for(o in n.conf){if(o=="text"||o=="text_pos"||o=="isbig"){continue}r[o]=n.conf[o]}n.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+n.conf.text+"</div>";r.parent=n.base.firstChild.firstChild;n.slider=new dhtmlXSlider(r);if(typeof(this.afterRender)=="function"){this.afterRender(n)}if(n.conf.disable){this.disable(n)}n.slider.attachEvent("onChange",function(a){n._callHandler(n.id,[a]);n.callEvent("onValueChange",[n.id,a])});return n},callAfterInit:function(c){this._detachEventFromItem(c.base)},setSkin:function(e,g){if(e.slider instanceof dhtmlXSlider){e.slider.setSkin(g)}},disable:function(g){var e=g.base.childNodes[1];if(g.slider instanceof dhtmlXSlider){g.slider.disable()}if(!/\s?dhxrb_disable_text_style/i.test(e.className)){e.className+=" dhxrb_disable_text_style"}return true},enable:function(g){var e=g.base.childNodes[1];if(g.slider instanceof dhtmlXSlider){g.slider.enable()}if(/\s?dhxrb_disable_text_style/i.test(e.className)){e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")}return true},remove:function(c){if(c.slider instanceof dhtmlXSlider){c.slider.unload();c.slider=null}},getValue:function(e){var g=null;if(e.slider instanceof dhtmlXSlider){g=e.slider.getValue()}return g},setValue:function(e,g){if(e.slider instanceof dhtmlXSlider){e.slider.setValue(g)}}};dhtmlXRibbon.prototype.items._extends=function(h,l){var g;for(g in l){h[g]=h[g]||l[g]}return h};dhtmlXRibbon.prototype._addNewLevel=function(h){var l,g;if(h.conf.mode=="rows"){l=h.contForItems.lastChild;if(l&&/dhxrb_block_rows/i.test(l.className)&&(l.childNodes.length<3)){g=document.createElement("div");g.className="dhxrb_block_row";l.appendChild(g)}else{l=document.createElement("div");l.className="dhxrb_block_rows";h.contForItems.appendChild(l);g=document.createElement("div");g.className="dhxrb_block_row";l.appendChild(g)}}else{var g=document.createElement("div");g.className="dhxrb_3rows_block";h.contForItems.appendChild(g)}};dhtmlXRibbon.prototype._attachEventForItem=function(c){if(typeof(window.addEventListener)=="function"){c.addEventListener("mouseover",this._doOnHighlight0,false);c.addEventListener("mouseout",this._doOffHighlight0,false);c.addEventListener("mousedown",this._doOnHighlight1,false);c.addEventListener("mouseup",this._doOffHighlight1,false);c.addEventListener("click",this._doOnClick,false)}else{c.attachEvent("onmouseover",this._doOnHighlight0);c.attachEvent("onmouseout",this._doOffHighlight0);c.attachEvent("onmousedown",this._doOnHighlight1);c.attachEvent("onmouseup",this._doOffHighlight1);c.attachEvent("onclick",this._doOnClick)}};dhtmlXRibbon.prototype._detachEventFromItem=function(c){if(typeof(window.addEventListener)=="function"){c.removeEventListener("mouseover",this._doOnHighlight0,false);c.removeEventListener("mouseout",this._doOffHighlight0,false);c.removeEventListener("mousedown",this._doOnHighlight1,false);c.removeEventListener("mouseup",this._doOffHighlight1,false);c.removeEventListener("click",this._doOnClick,false)}else{c.detachEvent("onmouseover",this._doOnHighlight0);c.detachEvent("onmouseout",this._doOffHighlight0);c.detachEvent("onmousedown",this._doOnHighlight1);c.detachEvent("onmouseup",this._doOffHighlight1);c.detachEvent("onclick",this._doOnClick)}};dhtmlXRibbon.prototype._attachEventsToInput=function(c){if(typeof(window.addEventListener)=="function"){c.addEventListener("focus",this._doOnFocus,false);c.addEventListener("blur",this._doOnBlur,false);c.addEventListener("change",this._doOnChange,false);c.addEventListener("keydown",this._doOnKeydown,false)}else{c.attachEvent("onfocus",this._doOnFocus);c.attachEvent("onblur",this._doOnBlur);c.attachEvent("onchange",this._doOnChange);c.attachEvent("onkeydown",this._doOnKeydown)}};dhtmlXRibbon.prototype._detachEventsFromInput=function(c){if(typeof(window.addEventListener)=="function"){c.removeEventListener("focus",this._doOnFocus,false);c.removeEventListener("blur",this._doOnBlur,false);c.removeEventListener("change",this._doOnChange,false);c.removeEventListener("keydown",this._doOnKeydown,false)}else{c.detachEvent("onfocus",this._doOnFocus);c.detachEvent("onblur",this._doOnBlur);c.detachEvent("onchange",this._doOnChange);c.detachEvent("onkeydown",this._doOnKeydown)}};dhtmlXRibbon.prototype._getContainerForSmallItem=function(h){var l=h.contForItems.lastChild,g=null;if(h.conf.mode=="rows"){if(l&&/\s?dhxrb_block_rows/i.test(l.className)){g=l.lastChild;if(!g){g=document.createElement("div");g.className="dhxrb_block_row";l.appendChild(g)}}else{l=document.createElement("div");l.className="dhxrb_block_rows";h.contForItems.appendChild(l);g=document.createElement("div");g.className="dhxrb_block_row";l.appendChild(g)}}else{if(l&&/dhxrb_3rows_block/i.test(l.className)&&(l.childNodes.length<3)){g=l}else{g=document.createElement("div");g.className="dhxrb_3rows_block";h.contForItems.appendChild(g)}}return g};dhtmlXRibbon.prototype._findItemByNode=function(c){while(c&&!c._dhx_ribbonId){c=c.parentNode}return c};dhtmlXRibbon.prototype._indexOf=function(h,l){var m,n;n=h.length;for(m=0;m<n;m++){if(h[m]==l){return m}}return -1};dhtmlXRibbon.prototype._removeItem=function(m){var h,l=-1,n=this._items[m.parentId];if(m.type=="group"){this._removeGroup(m);return}delete this._items[m.id];h=m.base.parentNode;this._detachEventFromItem(m.base);h.removeChild(m.base);if(n.type=="block"){if(h!=n.contForItems&&h.childNodes.length==0){h.parentNode.removeChild(h)}}else{if(n.type=="group"){dhtmlXRibbon.prototype.items.group.normalize(n)}}l=this._indexOf(n.childIds,m.id);if(l!=-1){n.childIds.splice(l,1)}if(this.items[m.type]&&(typeof(this.items[m.type].remove)=="function")){this.items[m.type].remove(m,this)}};dhtmlXRibbon.prototype._removeGroup=function(r){var u=[],n,s=this._items[r.parentId],m=r.base.parentNode;for(var o=0;o<r.childIds.length;o++){u.push(this._items[r.childIds[o]])}for(var o=0;o<u.length;o++){this._removeItem(u[o])}delete this._items[r.id];if(r.base.parentNode){m.removeChild(r.base)}if(m.childNodes.length==0){m.parentNode.removeChild(m)}n=this._indexOf(s.childIds,r.id);if(n!=-1){s.childIds.splice(n,1)}if(this.items[r.type]&&(typeof(this.items[r.type].remove)=="function")){this.items[r.type].remove(r)}};dhtmlXRibbon.prototype._removeBlock=function(m){var l=[],n,r;for(var o=0;o<m.childIds.length;o++){l.push(this._items[m.childIds[o]])}for(var o=0;o<l.length;o++){this._removeItem(l[o])}delete this._items[m.id];m.base.parentNode.removeChild(m.base);if(m.parentId){r=this._items[m.parentId]}else{r=this}n=this._indexOf(r.childIds,m.id);if(n!=-1){r.childIds.splice(n,1)}};dhtmlXRibbon.prototype._removeTab=function(r,l){var m=[],n;for(var o=0;o<r.childIds.length;o++){m.push(this._items[r.childIds[o]])}for(var o=0;o<m.length;o++){this._removeBlock(m[o])}delete this._items[r.id];n=this._indexOf(this.childIds,r.id);if(n!=-1){this.childIds.splice(n,1)}};dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true};dhtmlXRibbon.prototype._setSkinForItems=function(h){var g,l;for(g in this._items){l=this._items[g];l.conf.skin=h;if(dhtmlXRibbon.prototype.items[l.type]&&typeof(dhtmlXRibbon.prototype.items[l.type].setSkin)=="function"){dhtmlXRibbon.prototype.items[l.type].setSkin(l,h)}}l=undefined,g=undefined};dhtmlXRibbon.prototype._setBlockText=function(e, g){e.conf.text=g;e.contForText.innerHTML=g;if(!g&&(g!=0)&&e.contForText.parentNode){e.contForText.parentNode.removeChild(e.contForText)}else{if(!e.contForText.parentNode){if(e.conf.text_pos=="header.html"){e.base.insertBefore(e.contForText,e.contForItems)}else{e.base.appendChild(e.contForText)}}}};dhtmlXRibbon.prototype.hide=function(h){var l=this._items[h];if(this.items[l.type]&&(typeof(this.items[l.type].hide)=="function")){if(this.items[l.type].hide(l)!=true){return}}if(l.type=="tab"){return}else{if(!/\s?dhxrb_item_hide/i.test(l.base.className)){l.base.className+=" dhxrb_item_hide"}}var g=this._items[l.parentId];if(g&&this.items[g.type]&&(typeof(this.items[g.type].hideChild)=="function")){this.items[g.type].hideChild(g,l)}};dhtmlXRibbon.prototype.show=function(h){var l=this._items[h];if(this.items[l.type]&&(typeof(this.items[l.type].show)=="function")){if(this.items[l.type].show(l)!=true){return}}if(l.type=="tab"){return}else{if(/\s?dhxrb_item_hide/i.test(l.base.className)){l.base.className=l.base.className.replace(/\s?dhxrb_item_hide/i,"")}}var g=this._items[l.parentId];if(g&&this.items[g.type]&&(typeof(this.items[g.type].showChild)=="function")){this.items[g.type].showChild(g,l)}};dhtmlXRibbon.prototype.check=function(h,l){l=dhx4.s2b(l);var g=this._items[h];if(g&&!g.conf.checked&&typeof(this.items[g.type].check)=="function"){this.items[g.type].check(g);if(l){this.callEvent("onCheck",[g.id,g.conf.checked])}}};dhtmlXRibbon.prototype.uncheck=function(h,l){l=dhx4.s2b(l);var g=this._items[h];if(g&&g.conf.checked&&typeof(this.items[g.type].uncheck)=="function"){this.items[g.type].uncheck(g);if(l){this.callEvent("onCheck",[g.id,g.conf.checked])}}};dhtmlXRibbon.prototype.isChecked=function(g){var e=this._items[g];if(e&&typeof(this.items[e.type].isChecked)=="function"){return this.items[e.type].isChecked(e)}};dhtmlXRibbon.prototype.disable=function(l,h){var n=this._items[l];if(this.items[n.type]&&(typeof(this.items[n.type].disable)=="function")){if(this.items[n.type].disable(n)!=true){return}}if(n.type=="tab"){return}else{if(n.type=="block"||n.type=="group"){for(var m=0;m<n.childIds.length;m++){this.disable(n.childIds[m])}}}if(!/\s?dhxrb_item_disable/i.test(n.base.className)){n.base.className+=" dhxrb_item_disable"}n.conf.disable=true};dhtmlXRibbon.prototype.enable=function(h,g){var l=this._items[h];if(this.items[l.type]&&(typeof(this.items[l.type].enable)=="function")){if(this.items[l.type].enable(l)!=true){return}}if(l.type=="tab"){return}else{if(l.type=="block"||l.type=="group"){for(q=0;q<l.childIds.length;q++){this.enable(l.childIds[q])}}}if(/\s?dhxrb_item_disable/i.test(l.base.className)){l.base.className=l.base.className.replace(/\s?dhxrb_item_disable/i,"")}l.conf.disable=false};dhtmlXRibbon.prototype.isEnabled=function(g){var e=this._items[g];if(this.items[e.type]&&typeof(this.items[e.type].isEnabled)=="function"){return this.items[e.type].isEnabled(e)}if(e.type=="tab"){return}else{return e.conf.disable!=true}};dhtmlXRibbon.prototype.isVisible=function(g){var e=this._items[g];if(this.items[e.type]&&(typeof(this.items[e.type].isVisible)=="function")){return this.items[e.type].isVisible(e)}if(e.type=="tab"){return}else{return !/\s?dhxrb_item_hide/i.test(e.base.className)}};dhtmlXRibbon.prototype.setItemState=function(l,n,m){n=dhx4.s2b(n);m=dhx4.s2b(m);var h=this._items[l];if(h&&(typeof(this.items[h.type].setState)=="function")){switch(h.type){case"buttonSegment":this.items[h.type].setState(h,this,m);break;default:this.items[h.type].setState(h,n,m)}}};dhtmlXRibbon.prototype.getItemState=function(g){var e=this._items[g];if(e&&(typeof(this.items[e.type].getState)=="function")){switch(e.type){case"buttonTwoState":case"buttonSegment":return this.items[e.type].getState(e);break}}return null};dhtmlXRibbon.prototype.setIconPath=function(c){this.conf.icons_path=c};dhtmlXRibbon.prototype.removeItem=function(g){var e=this._items[g];if(e==null){return}switch(e.type){case"tab":break;case"block":this._removeBlock(e);break;case"group":this._removeGroup(e);break;default:this._removeItem(e)}};dhtmlXRibbon.prototype.setSkin=function(m){m=(typeof(m)=="string")?m.toLowerCase():"";if(this._skinCollection[m]!=true){return}var o,r=-1,l,n="dhtmlxribbon";o=this._base.className.match(/\S\w+/ig);if(o instanceof Array){for(l in this._skinCollection){if(r==-1){r=this._indexOf(o,n+"_"+l)}else{break}}r=(r==-1)?o.length:r}else{o=[];r=0}o[r]=n+"_"+m;this._base.className=o.join(" ");this.conf.skin=m;if(this._tabbar!=null){this._tabbar.setSkin(m)}this._setSkinForItems(m)};dhtmlXRibbon.prototype.tabs=function(c){if(this._tabbar instanceof dhtmlXTabBar){return this._tabbar.tabs(c)}else{return undefined}};dhtmlXRibbon.prototype.getItemType=function(g){var e=this._items[g];if(e){return e.type}else{return undefined}};dhtmlXRibbon.prototype.getValue=function(h){var g=this._items[h],l=undefined;if(g&&this.items[g.type]&&typeof(this.items[g.type].getValue)=="function"){l=this.items[g.type].getValue(g)}return l};dhtmlXRibbon.prototype.setValue=function(l,n,m){var h=this._items[l];m=(m===false?false:true);if(h&&this.items[h.type]&&typeof(this.items[h.type].setValue)=="function"){this.items[h.type].setValue(h,n,m)}};dhtmlXRibbon.prototype.getItemText=function(g){var e=this._items[g];if(!e){return null}else{if(e.type=="tab"){return this.tabs(e.id).getText()}else{if(e.type=="block"){return this.items.button.getText(e)}else{if(this.items[e.type]&&typeof(this.items[e.type].getText)=="function"){return this.items[e.type].getText(e)}else{return null}}}}};dhtmlXRibbon.prototype.setItemText=function(h,l){var g=this._items[h];if(!g){return}else{if(g.type=="tab"){this.tabs(g.id).setText(l)}else{if(g.type=="block"){this._setBlockText(g,l)}else{if(this.items[g.type]&&typeof(this.items[g.type].setText)=="function"){this.items[g.type].setText(g,l)}}}}};dhtmlXRibbon.prototype.setItemOptionText=function(l,m,n){var h=this._items[l];if(h.type=="buttonSelect"){this.items[h.type].setOptionText(h,m,n)}};dhtmlXRibbon.prototype.getItemOptionText=function(h,l){var g=this._items[h];if(g.type=="buttonSelect"){return this.items[g.type].getOptionText(g,l)}return null};dhtmlXRibbon.prototype.setItemImage=function(h,g){var l=this._items[h];if(l!=null&&this.items[l.type]!=null&&typeof(this.items[l.type].setImage)=="function"){this.items[l.type].setImage(l,g)}};dhtmlXRibbon.prototype.setItemImageDis=function(h,g){var l=this._items[h];if(l!=null&&this.items[l.type]!=null&&typeof(this.items[l.type].setImageDis)=="function"){this.items[l.type].setImageDis(l,g)}};dhtmlXRibbon.prototype.getCombo=function(g){var e=this._items[g];if(e!=null&&e.type=="buttonCombo"){return e.combo}return null};(function(){var c=dhtmlXRibbon.prototype.items;c.buttonTwoState=c._extends(c.buttonTwoState,c.button);c.buttonSelect=c._extends(c.buttonSelect,c.buttonTwoState);c.buttonSegment=c._extends(c.buttonSegment,c.buttonTwoState)})();if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_ribbon=function(m,r,n,l,o){if(typeof(o)!="undefined"){m=o}else{m=document.createElement("DIV");m.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders");m.appendChild(document.createElement("DIV"))}this.cell.insertBefore(m,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.ribbon=true;this._updateIdx();this._adjustCont(this._idd);return m};dhtmlXCellObject.prototype.attachRibbon=function(e){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.callEvent("_onBeforeContentAttach",["ribbon"]);if(typeof(e)=="undefined"){e={}}if(typeof(e.skin)=="undefined"){e.skin=this.conf.skin}e.parent=this._attachObject("ribbon").firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(e);var g=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){g._adjustCont(g._idd)});this._adjustCont();e.parent=null;e=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.ribbon};dhtmlXCellObject.prototype.detachRibbon=function(){if(!this.dataNodes.ribbon){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;delete this.dataNodes.ribbon;this._detachObject("ribbon")};dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")};dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")};dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon}}function dhtmlXToolbarObject(l,h){var g=this;this.conf={skin:(h||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue"),align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null};if(typeof(l)=="object"&&l!=null&&typeof(l.tagName)=="undefined"){if(l.icons_path!=null||l.icon_path!=null){this.conf.icons_path=(l.icons_path||l.icon_path)}if(l.icons_size!=null){this.conf.icons_size_autoload=l.icons_size}if(l.json!=null){this.conf.json_autoload=l.json}if(l.xml!=null){this.conf.xml_autoload=l.xml}if(l.onload!=null){this.conf.onload_autoload=l.onload}if(l.onclick!=null||l.onClick!=null){this.conf.auto_onclick=(l.onclick||l.onClick)}if(l.items!=null){this.conf.items_autoload=l.items}if(l.skin!=null){this.conf.skin=l.skin}if(l.align!=null){this.conf.align_autostart=l.align}l=l.parent}this.cont=(typeof(l)!="object")?document.getElementById(l):l;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}l=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);if(window.dhx4.isIPad){this.cont.ontouchstart=function(a){a=a||event;if((String(a.target.tagName||"").toLowerCase()=="input")){return true}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false}}this.setSkin(this.conf.skin);this.objPull={};this.anyUsed="none";this._genStr=function(n){var e="dhxId_";var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var c=0;c<n;c++){e+=a.charAt(Math.round(Math.random()*(a.length-1)))}return e};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:true});window.dhx4._eventable(this);this._getObj=function(a,n){var e=null;for(var c=0;c<a.childNodes.length;c++){if(a.childNodes[c].tagName!=null){if(String(a.childNodes[c].tagName).toLowerCase()==String(n).toLowerCase()){e=a.childNodes[c]}}}return e};this._addImgObj=function(a){var c=document.createElement("IMG");if(a.childNodes.length>0){a.insertBefore(c,a.childNodes[0])}else{a.appendChild(c)}return c};this._setItemImage=function(a,e,n){if(n==true){a.imgEn=e}else{a.imgDis=e}if((!a.state&&n==true)||(a.state&&n==false)){return}var c=this._getObj(a.obj,"img");if(c==null){c=this._addImgObj(a.obj)}c.src=this.conf.icons_path+e};this._clearItemImage=function(a,e){if(e==true){a.imgEn=""}else{a.imgDis=""}if((!a.state&&e==true)||(a.state&&e==false)){return}var c=this._getObj(a.obj,"img");if(c!=null){c.parentNode.removeChild(c)}};this._setItemText=function(e,a){var c=this._getObj(e.obj,"div");if(a==null||a.length==0){if(c!=null){c.parentNode.removeChild(c)}return}if(c==null){c=document.createElement("DIV");c.className="dhxtoolbar_text";e.obj.appendChild(c)}c.innerHTML=a};this._getItemText=function(c){var a=this._getObj(c.obj,"div");if(a!=null){return a.innerHTML}return""};this._enableItem=function(a){if(a.state){return}a.state=true;if(this.objPull[a.id]["type"]=="buttonTwoState"&&this.objPull[a.id]["obj"]["pressed"]==true){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.renderAs=a.obj.className}if(a.arw){a.arw.className=String(a.obj.className).replace("btn","arw")}var c=this._getObj(a.obj,"img");if(a.imgEn!=""){if(c==null){c=this._addImgObj(a.obj)}c.src=this.conf.icons_path+a.imgEn}else{if(c!=null){c.parentNode.removeChild(c)}}};this._disableItem=function(a){if(!a.state){return}a.state=false;a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[a.id]["type"]=="buttonTwoState"&&a.obj.pressed?"pres_":"")+"dis";a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";if(a.arw){a.arw.className=String(a.obj.className).replace("btn","arw")}var c=this._getObj(a.obj,"img");if(a.imgDis!=""){if(c==null){c=this._addImgObj(a.obj)}c.src=this.conf.icons_path+a.imgDis}else{if(c!=null){c.parentNode.removeChild(c)}}if(a.polygon!=null){if(a.polygon.style.display!="none"){window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(this.conf.skin=="dhx_terrace"){this._improveTerraceButtonSelect(a.id,true)}this.callEvent("onButtonSelectHide",[a.obj.idd])}}this.anyUsed="none"};this.clearAll=function(){for(var a in this.objPull){this._removeItem(String(a).replace(this.idPrefix,""))}};this._doOnClick=function(a){if(g&&g.forEachItem){g.forEachItem(function(c){if(g.objPull[g.idPrefix+c]["type"]=="buttonSelect"){var e=g.objPull[g.idPrefix+c];if(e.arw._skip===true){e.arw._skip=false}else{if(e.polygon.style.display!="none"){e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.className=e.obj.renderAs;e.arw.className=String(e.obj.renderAs).replace("btn","arw");g.anyUsed="none";window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(g.conf.skin=="dhx_terrace"){g._improveTerraceButtonSelect(e.id,true)}g.callEvent("onButtonSelectHide",[e.obj.idd])}}}})}};if(window.dhx4.isIPad){document.addEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousedown",this._doOnClick,false)}else{document.body.attachEvent("onmousedown",this._doOnClick)}}if(this.conf.icons_size_autoload!=null){this.setIconSize(this.conf.icons_size_autoload);this.conf.icons_size_autoload=null}if(this.conf.items_autoload!=null){this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload);this.conf.items_autoload=null}else{if(this.conf.json_autoload!=null){this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload);this.conf.json_autoload=null}else{if(this.conf.xml_autoload!=null){this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload);this.conf.xml_autoload=null}}}if(this.conf.align_autostart!=this.conf.align){this.setAlign(this.conf.align_autostart);this.conf.align_autostart=null}if(typeof(this.conf.auto_onclick)=="function"){this.attachEvent("onClick",this.conf.auto_onclick)}else{if(typeof(this.conf.auto_onclick)=="string"&&typeof(window[this.conf.auto_onclick])=="function"){this.attachEvent("onClick",window[this.conf.auto_onclick])}}return this}dhtmlXToolbarObject.prototype.addSpacer=function(v){var w=this.idPrefix+v;if(this._spacer!=null){if(this._spacer.idd==v){return}if(this._spacer==this.objPull[w].obj.parentNode){var r=true;while(r){var n=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(n==v||this._spacer.childNodes.length==0){if(this.objPull[w].arw!=null){this.base.appendChild(this.objPull[w].arw)}r=false}}this._spacer.idd=v;this._fixSpacer();return}if(this.base==this.objPull[w].obj.parentNode){var r=true;var o=(this.objPull[w].arw!=null);while(r){var u=this.base.childNodes.length-1;if(o==true){if(this.base.childNodes[u]==this.objPull[w].arw){r=false}}if(this.base.childNodes[u].idd==v){r=false}if(r){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[u],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[u])}}}this._spacer.idd=v;this._fixSpacer();return}}else{var s=null;for(var u=0;u<this.base.childNodes.length;u++){if(this.base.childNodes[u]==this.objPull[this.idPrefix+v].obj){s=u;if(this.objPull[this.idPrefix+v].arw!=null){s=u+1}}}if(s!=null){this._spacer=document.createElement("DIV");this._spacer.className=(this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right");this._spacer.dir="ltr";this._spacer.idd=v;while(this.base.childNodes.length>s+1){this._spacer.appendChild(this.base.childNodes[s+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var c=this._spacer;window.setTimeout(function(){c.style.borderLeft="0px solid #a4bed4";c=null},1)}};dhtmlXToolbarObject.prototype.getType=function(m){var l=this.getParentId(m);if(l!=null){var n=null;var h=this.objPull[this.idPrefix+l]._listOptions[m];if(h!=null){if(h.sep!=null){n="buttonSelectSeparator"}else{n="buttonSelectButton"}}return n}else{if(this.objPull[this.idPrefix+m]==null){return null}return this.objPull[this.idPrefix+m]["type"]}};dhtmlXToolbarObject.prototype.getTypeExt=function(g){var e=this.getType(g);if(e=="buttonSelectButton"||e=="buttonSelectSeparator"){if(e=="buttonSelectButton"){e="button"}else{e="separator"}return e}return null};dhtmlXToolbarObject.prototype.inArray=function(h,l){for(var g=0;g<h.length;g++){if(h[g]==l){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(l){var a=null;for(var m in this.objPull){if(this.objPull[m]._listOptions){for(var n in this.objPull[m]._listOptions){if(n==l){a=String(m).replace(this.idPrefix,"")}}}}return a};dhtmlXToolbarObject.prototype._addItem=function(e,g){if(typeof(e.text)=="string"){e.text=window.dhx4.trim(e.text);if(e.text.length==0){e.text=null}}this._addItemToStorage(e,g);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(m,n,r,l,o){this._addItem({id:m,type:"button",text:r,img:l,imgdis:o},n)};dhtmlXToolbarObject.prototype.addText=function(h,l,g){this._addItem({id:h,type:"text",text:g},l)};dhtmlXToolbarObject.prototype.addButtonSelect=function(E,y,L,I,H,x,A,J,D,C){var K=[];for(var F=0;F<I.length;F++){var u={};if(I[F] instanceof Array){u.id=I[F][0];u.type=(I[F][1]=="obj"?"button":"separator");u.text=(I[F][2]||null);u.img=(I[F][3]||null)}else{if(I[F] instanceof Object&&I[F]!=null&&typeof(I[F].id)!="undefined"&&typeof(I[F].type)!="undefined"){u.id=I[F].id;u.type=(I[F].type=="obj"?"button":"separator");u.text=I[F].text;u.img=I[F].img}}K.push(u)}this._addItem({id:E,type:"buttonSelect",text:L,img:H,imgdis:x,renderSelect:A,openAll:J,options:K,maxOpen:D,mode:C},y)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(m,n,r,l,o){this._addItem({id:m,type:"buttonTwoState",img:l,imgdis:o,text:r},n)};dhtmlXToolbarObject.prototype.addSeparator=function(g,e){this._addItem({id:g,type:"separator"},e)};dhtmlXToolbarObject.prototype.addSlider=function(A,u,w,x,r,y,v,C,s){this._addItem({id:A,type:"slider",length:w,valueMin:x,valueMax:r,valueNow:y,textMin:v,textMax:C,toolTip:s},u)};dhtmlXToolbarObject.prototype.addInput=function(l,m,n,h){this._addItem({id:l,type:"buttonInput",value:n,width:h},m)};dhtmlXToolbarObject.prototype.forEachItem=function(a){for(var g in this.objPull){if(this.inArray(this.rootTypes,this.objPull[g]["type"])){a(this.objPull[g]["id"].replace(this.idPrefix,""))}}};(function(){var n="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var s=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var u=function(a,c){return function(e,g,h){e=this.idPrefix+e;if(this.objPull[e][a]!=null){return this.objPull[e][a].call(this.objPull[e],g,h)}else{return c}}};for(var o=0;o<n.length;o++){var m=n[o];var r=s[o];dhtmlXToolbarObject.prototype[m]=u(m,r)}})();dhtmlXToolbarObject.prototype.showItem=function(c){c=this.idPrefix+c;if(this.objPull[c]!=null&&this.objPull[c].showItem!=null){this.objPull[c].showItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(c){c=this.idPrefix+c;if(this.objPull[c]!=null&&this.objPull[c].hideItem!=null){this.objPull[c].hideItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.getPosition=function(c){return this._getPosition(c)};dhtmlXToolbarObject.prototype._getPosition=function(m,o){if(this.objPull[this.idPrefix+m]==null){return null}var n=null;var l=0;for(var r=0;r<this.base.childNodes.length;r++){if(this.base.childNodes[r].idd!=null){if(this.base.childNodes[r].idd==m){n=l}l++}}if(!n&&this._spacer!=null){for(var r=0;r<this._spacer.childNodes.length;r++){if(this._spacer.childNodes[r].idd!=null){if(this._spacer.childNodes[r].idd==m){n=l}l++}}}return n};dhtmlXToolbarObject.prototype.setPosition=function(e,g){this._setPosition(e,g)};dhtmlXToolbarObject.prototype._setPosition=function(m,n){if(this.objPull[this.idPrefix+m]==null){return}if(isNaN(n)){n=this.base.childNodes.length}if(n<0){n=0}var l=null;if(this._spacer){l=this._spacer.idd;this.removeSpacer()}var o=this.objPull[this.idPrefix+m];this.base.removeChild(o.obj);if(o.arw){this.base.removeChild(o.arw)}var r=this._getIdByPosition(n,true);if(r[0]==null){this.base.appendChild(o.obj);if(o.arw){this.base.appendChild(o.arw)}}else{this.base.insertBefore(o.obj,this.base.childNodes[r[1]]);if(o.arw){this.base.insertBefore(o.arw,this.base.childNodes[r[1]+1])}}if(l!=null){this.addSpacer(l)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(n,u){var o=null;var m=0;var s=0;for(var r=0;r<this.base.childNodes.length;r++){if(this.base.childNodes[r]["idd"]!=null&&o==null){if((m++)==n){o=this.base.childNodes[r]["idd"]}}if(o==null){s++}}s=(o==null?null:s);return(u==true?new Array(o,s):o)};dhtmlXToolbarObject.prototype.removeItem=function(c){this._removeItem(c);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(a){var m=this.getType(a);a=this.idPrefix+a;var l=this.objPull[a];if(m=="button"){l.obj._doOnMouseOver=null;l.obj._doOnMouseOut=null;l.obj._doOnMouseUp=null;l.obj._doOnMouseUpOnceAnywhere=null;l.obj.onclick=null;l.obj.onmouseover=null;l.obj.onmouseout=null;l.obj.onmouseup=null;l.obj.onmousedown=null;l.obj.onselectstart=null;l.obj.renderAs=null;l.obj.idd=null;l.obj.parentNode.removeChild(l.obj);l.obj=null;l.id=null;l.state=null;l.img=null;l.imgEn=null;l.imgDis=null;l.type=null;l.enableItem=null;l.disableItem=null;l.isEnabled=null;l.showItem=null;l.hideItem=null;l.isVisible=null;l.setItemText=null;l.getItemText=null;l.setItemImage=null;l.clearItemImage=null;l.setItemImageDis=null;l.clearItemImageDis=null;l.setItemToolTip=null;l.getItemToolTip=null}if(m=="buttonTwoState"){l.obj._doOnMouseOver=null;l.obj._doOnMouseOut=null;l.obj.onmouseover=null;l.obj.onmouseout=null;l.obj.onmousedown=null;l.obj.onselectstart=null;l.obj.renderAs=null;l.obj.idd=null;l.obj.parentNode.removeChild(l.obj);l.obj=null;l.id=null;l.state=null;l.img=null;l.imgEn=null;l.imgDis=null;l.type=null;l.enableItem=null;l.disableItem=null;l.isEnabled=null;l.showItem=null;l.hideItem=null;l.isVisible=null;l.setItemText=null;l.getItemText=null;l.setItemImage=null;l.clearItemImage=null;l.setItemImageDis=null;l.clearItemImageDis=null;l.setItemToolTip=null;l.getItemToolTip=null;l.setItemState=null;l.getItemState=null}if(m=="buttonSelect"){for(var n in l._listOptions){this.removeListOption(a,n)}l._listOptions=null;if(l.polygon._ie6cover){document.body.removeChild(l.polygon._ie6cover);l.polygon._ie6cover=null}l.p_tbl.removeChild(l.p_tbody);l.polygon.removeChild(l.p_tbl);l.polygon.onselectstart=null;document.body.removeChild(l.polygon);l.p_tbody=null;l.p_tbl=null;l.polygon=null;l.obj.onclick=null;l.obj.onmouseover=null;l.obj.onmouseout=null;l.obj.onmouseup=null;l.obj.onmousedown=null;l.obj.onselectstart=null;l.obj.idd=null;l.obj.iddPrefix=null;l.obj.parentNode.removeChild(l.obj);l.obj=null;l.arw.onclick=null;l.arw.onmouseover=null;l.arw.onmouseout=null;l.arw.onmouseup=null;l.arw.onmousedown=null;l.arw.onselectstart=null;l.arw.parentNode.removeChild(l.arw);l.arw=null;l.renderSelect=null;l.state=null;l.type=null;l.id=null;l.img=null;l.imgEn=null;l.imgDis=null;l.openAll=null;l._isListButton=null;l._separatorButtonSelectObject=null;l._buttonButtonSelectObject=null;l.setWidth=null;l.enableItem=null;l.disableItem=null;l.isEnabled=null;l.showItem=null;l.hideItem=null;l.isVisible=null;l.setItemText=null;l.getItemText=null;l.setItemImage=null;l.clearItemImage=null;l.setItemImageDis=null;l.clearItemImageDis=null;l.setItemToolTip=null;l.getItemToolTip=null;l.addListOption=null;l.removeListOption=null;l.showListOption=null;l.hideListOption=null;l.isListOptionVisible=null;l.enableListOption=null;l.disableListOption=null;l.isListOptionEnabled=null;l.setListOptionPosition=null;l.getListOptionPosition=null;l.setListOptionImage=null;l.getListOptionImage=null;l.clearListOptionImage=null;l.setListOptionText=null;l.getListOptionText=null;l.setListOptionToolTip=null;l.getListOptionToolTip=null;l.forEachListOption=null;l.getAllListOptions=null;l.setListOptionSelected=null;l.getListOptionSelected=null}if(m=="buttonInput"){l.obj.childNodes[0].onkeydown=null;l.obj.removeChild(l.obj.childNodes[0]);l.obj.w=null;l.obj.idd=null;l.obj.parentNode.removeChild(l.obj);l.obj=null;l.id=null;l.type=null;l.enableItem=null;l.disableItem=null;l.isEnabled=null;l.showItem=null;l.hideItem=null;l.isVisible=null;l.setItemToolTip=null;l.getItemToolTip=null;l.setWidth=null;l.getWidth=null;l.setValue=null;l.getValue=null;l.setItemText=null;l.getItemText=null}if(m=="slider"){if(window.dhx4.isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",l.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",l.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent("onmousemove",l.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",l.pen._doOnMouseMoveEnd)}}l.pen.allowMove=null;l.pen.initXY=null;l.pen.maxX=null;l.pen.minX=null;l.pen.nowX=null;l.pen.newNowX=null;l.pen.valueMax=null;l.pen.valueMin=null;l.pen.valueNow=null;l.pen._definePos=null;l.pen._detectLimits=null;l.pen._doOnMouseMoveStart=null;l.pen._doOnMouseMoveEnd=null;l.pen.onmousedown=null;l.obj.removeChild(l.pen);l.pen=null;l.label.tip=null;document.body.removeChild(l.label);l.label=null;l.obj.onselectstart=null;l.obj.idd=null;while(l.obj.childNodes.length>0){l.obj.removeChild(l.obj.childNodes[0])}l.obj.parentNode.removeChild(l.obj);l.obj=null;l.id=null;l.type=null;l.state=null;l.enableItem=null;l.disableItem=null;l.isEnabled=null;l.setItemToolTipTemplate=null;l.getItemToolTipTemplate=null;l.setMaxValue=null;l.setMinValue=null;l.getMaxValue=null;l.getMinValue=null;l.setValue=null;l.getValue=null;l.showItem=null;l.hideItem=null;l.isVisible=null}if(m=="separator"){l.obj.onselectstart=null;l.obj.idd=null;l.obj.parentNode.removeChild(l.obj);l.obj=null;l.id=null;l.type=null;l.showItem=null;l.hideItem=null;l.isVisible=null}if(m=="text"){l.obj.onselectstart=null;l.obj.idd=null;l.obj.parentNode.removeChild(l.obj);l.obj=null;l.id=null;l.type=null;l.showItem=null;l.hideItem=null;l.isVisible=null;l.setWidth=null;l.setItemText=null;l.getItemText=null}m=null;l=null;this.objPull[this.idPrefix+a]=null;delete this.objPull[this.idPrefix+a]};(function(){var l="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var n=function(a){return function(g,c,e,u,v,w){g=this.idPrefix+g;if(this.objPull[g]==null){return}if(this.objPull[g]["type"]!="buttonSelect"){return}return this.objPull[g][a].call(this.objPull[g],c,e,u,v,w)}};for(var m=0;m<l.length;m++){var h=l[m];dhtmlXToolbarObject.prototype[h]=n(h)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(g,e){return g+e};dhtmlXToolbarObject.prototype._separatorObject=function(g,h,l){this.id=g.idPrefix+h;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(l.hidden!=null?"none":"");this.obj.idd=String(h);this.obj.title=(l.title||"");this.obj.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false}}g.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};return this};dhtmlXToolbarObject.prototype._textObject=function(g,h,l){this.id=g.idPrefix+h;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(l.hidden!=null?"none":"");this.obj.idd=String(h);this.obj.title=(l.title||"");this.obj.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false}}this.obj.innerHTML=(l.text||"");g.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(a){this.obj.innerHTML=a};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(a){this.obj.style.width=a+"px"};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(h,l,n){this.id=h.idPrefix+l;this.state=(n.enabled!=null?false:true);this.imgEn=(n.img||"");this.imgDis=(n.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(n.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(n.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(l);this.obj.title=(n.title||"");this.obj.pressed=false;this.obj.innerHTML=h._rtlParseBtn((this.img!=""?"<img src='"+h.conf.icons_path+this.img+"'>":""),(n.text!=null?"<div class='dhxtoolbar_text'>"+n.text+"</div>":""));var m=this;this.obj.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=true;if(m.state==false){return}if(h.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){this.allowClick=false;if(m.state==false){return}if(h.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.renderAs};this.obj.onclick=function(c){if(m.state==false){return}if(this.allowClick==false){return}c=c||event;var a=this.idd.replace(h.idPrefix,"");if(this.extAction){try{window[this.extAction](a)}catch(c){}}if(h&&h.callEvent){h.callEvent("onClick",[a])}};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){if(m.state==false){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false}if(h.anyUsed!="none"){return}h.anyUsed=this.idd;this.className="dhx_toolbar_btn dhxtoolbar_btn_pres";this.pressed=true;this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){h.anyUsed="none";this._doOnMouseOut()};return false};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(a){if(m.state==false){return}if(h.anyUsed!="none"){if(h.anyUsed!=this.idd){return}}var c=h.anyUsed;this._doOnMouseUp();if(window.dhx4.isIPad&&c!="none"){if(this.extAction){var e=this;window.setTimeout(function(){try{window[e.extAction](l)}catch(g){}e=null},1)}h.callEvent("onClick",[this.idd.replace(h.idPrefix,"")])}};if(window.dhx4.isIPad){this.obj.ontouchmove=function(a){this._doOnMouseUp()}}this.obj._doOnMouseUp=function(){h.anyUsed="none";this.className=this.renderAs;this.pressed=false};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};h.base.appendChild(this.obj);this.enableItem=function(){h._enableItem(this)};this.disableItem=function(){h._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(a){h._setItemText(this,a)};this.getItemText=function(){return h._getItemText(this)};this.setItemImage=function(a){h._setItemImage(this,a,true)};this.clearItemImage=function(){h._clearItemImage(this,true)};this.setItemImageDis=function(a){h._setItemImage(this,a,false)};this.clearItemImageDis=function(){h._clearItemImage(this,false)};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(s,n,o){this.id=s.idPrefix+n;this.state=(o.enabled!=null?(o.enabled=="true"?true:false):true);this.imgEn=(o.img||"");this.imgDis=(o.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(o.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!o.text||o.text.length==0){o.text="&nbsp;"}}else{this.openAll=(window.dhx4.s2b(o.openAll)==true);this.renderSelect=(o.renderSelect==null?true:window.dhx4.s2b(o.renderSelect))}this.maxOpen=(!isNaN(o.maxOpen?o.maxOpen:"")?o.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!s._sbw){var c=document.createElement("DIV");c.className="dhxtoolbar_maxopen_test";document.body.appendChild(c);var a=document.createElement("DIV");a.className="dhxtoolbar_maxopen_test2";c.appendChild(a);s._sbw=c.offsetWidth-a.offsetWidth;c.removeChild(a);a=null;document.body.removeChild(c);c=null}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(o.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(o.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this.obj.idd=String(n);this.obj.title=(o.title||"");this.obj.pressed=false;this.callEvent=false;this.obj.innerHTML=s._rtlParseBtn((this.img!=""?"<img src='"+s.conf.icons_path+this.img+"'>":""),(o.text!=null?"<div class='dhxtoolbar_text'>"+o.text+"</div>":""));s.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};s.base.appendChild(this.arw);var m=this;this.obj.onmouseover=function(a){a=a||event;if(s.anyUsed!="none"){return}if(!m.state){return}m.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";m.obj.className=m.obj.renderAs;m.arw.className=String(m.obj.renderAs).replace("btn","arw")};this.obj.onmouseout=function(){m.obj.allowClick=false;if(s.anyUsed!="none"){return}if(!m.state){return}m.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";m.obj.className=m.obj.renderAs;m.arw.className=String(m.obj.renderAs).replace("btn","arw");m.callEvent=false};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll==true){}else{this.obj.onclick=function(a){a=a||event;if(!m.obj.allowClick){return}if(!m.state){return}if(s.anyUsed!="none"){return}var c=m.obj.idd.replace(s.idPrefix,"");if(m.obj.extAction){try{window[m.obj.extAction](c)}catch(a){}}s.callEvent("onClick",[c])};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;if(s.anyUsed!="none"){return}if(!m.state){return}m.obj.allowClick=true;m.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";m.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";m.callEvent=true};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(e){e=e||event;e.cancelBubble=true;if(s.anyUsed!="none"){return}if(!m.state){return}m.obj.className=m.obj.renderAs;m.arw.className=String(m.obj.renderAs).replace("btn","arw");if(window.dhx4.isIPad){if(this.extAction){var a=this;window.setTimeout(function(){try{window[a.extAction](c)}catch(g){}a=null},1)}if(m.callEvent){var c=m.obj.idd.replace(s.idPrefix,"");s.callEvent("onClick",[c])}}}}if(window.dhx4.isIPad){this.obj.ontouchmove=this.obj.onmouseout}this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(c){c=c||event;var h=(this.className.indexOf("dhx_toolbar_arw")===0?this:this.nextSibling);if(h._skip){c=c||event;c.cancelBubble=true}else{h._skip=true}h=null;if(!m.state){return}if(s.anyUsed==m.obj.idd){m.obj.className=m.obj.renderAs;m.arw.className=String(m.obj.renderAs).replace("btn","arw");s.anyUsed="none";window.dhx4.zim.clear(m.polygon._idd);m.polygon.style.display="none";if(m.polygon._ie6cover){m.polygon._ie6cover.style.display="none"}if(s.conf.skin=="dhx_terrace"){s._improveTerraceButtonSelect(m.id,true)}s.callEvent("onButtonSelectHide",[m.obj.idd])}else{if(s.anyUsed!="none"){if(s.objPull[s.idPrefix+s.anyUsed]["type"]=="buttonSelect"){var l=s.objPull[s.idPrefix+s.anyUsed];if(l.polygon.style.display!="none"){l.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";l.obj.className=l.obj.renderAs;l.arw.className=String(m.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(l.polygon._idd);l.polygon.style.display="none";if(l.polygon._ie6cover){l.polygon._ie6cover.style.display="none"}if(s.conf.skin=="dhx_terrace"){s._improveTerraceButtonSelect(l.id,true)}s.callEvent("onButtonSelectHide",[l.obj.idd])}}}m.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";m.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";s.anyUsed=m.obj.idd;m.polygon.style.top="0px";m.polygon.style.visibility="hidden";m.polygon.style.zIndex=window.dhx4.zim.reserve(m.polygon._idd);m.polygon.style.display="";if(s.conf.skin=="dhx_terrace"){s._improveTerraceButtonSelect(m.id,false)}m._fixMaxOpenHeight(m.maxOpen||null);s._autoDetectVisibleArea();var a=window.dhx4.absTop(m.obj)+m.obj.offsetHeight+s.conf.sel_ofs_y;var A=m.polygon.offsetHeight;if(a+A>s.tY2){var C=(m.maxOpen!=null?Math.floor((s.tY2-a)/22):0);if(C>=1){m._fixMaxOpenHeight(C)}else{a=window.dhx4.absTop(m.obj)-A-s.conf.sel_ofs_y;if(a<0){a=0}}}m.polygon.style.top=a+"px";if(s.rtl){m.polygon.style.left=window.dhx4.absLeft(m.obj)+m.obj.offsetWidth-m.polygon.offsetWidth+s.conf.sel_ofs_x+"px"}else{var e=document.body.scrollLeft;var g=e+(window.innerWidth||document.body.clientWidth);var y=window.dhx4.absLeft(m.obj)+s.conf.sel_ofs_x;if(y+m.polygon.offsetWidth>g){y=window.dhx4.absLeft(m.arw)+m.arw.offsetWidth-m.polygon.offsetWidth}m.polygon.style.left=Math.max(y,5)+"px"}m.polygon.style.visibility="visible";if(m.polygon._ie6cover){m.polygon._ie6cover.style.left=m.polygon.style.left;m.polygon._ie6cover.style.top=m.polygon.style.top;m.polygon._ie6cover.style.width=m.polygon.offsetWidth+"px";m.polygon._ie6cover.style.height=m.polygon.offsetHeight+"px";m.polygon._ie6cover.style.display=""}s.callEvent("onButtonSelectShow",[m.obj.idd])}return false};this.arw.onclick=function(a){a=a||event;a.cancelBubble=true};this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(a){a=a||event;a.cancelBubble=true};if(this.openAll===true){this.obj.onclick=this.arw.onclick;this.obj.onmousedown=this.arw.onmousedown;this.obj.onmouseup=this.arw.onmouseup;if(window.dhx4.isIPad){this.obj.ontouchstart=this.arw.ontouchstart;this.obj.ontouchend=this.arw.ontouchend}}this.obj.iddPrefix=s.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(c){var e="auto";var g=false;if(c!==null){var h=0;for(var a in this._listOptions){h++}if(h>c){this._ph=22*c;e=this._ph+"px"}else{g=true}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!g&&m.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+s._sbw+"px";this.polygon.style.height=e}};this._separatorButtonSelectObject=function(c,a,e){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};if(isNaN(e)){e=m.p_tbody.childNodes.length+1}else{if(e<1){e=1}}if(e>m.p_tbody.childNodes.length){m.p_tbody.appendChild(this.obj.tr)}else{m.p_tbody.insertBefore(this.obj.tr,m.p_tbody.childNodes[e-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);m._listOptions[c]=this.obj;return this};this._buttonButtonSelectObject=function(c,g,e){var h=true;if(typeof(g.enabled)!="undefined"){h=window.dhx4.s2b(g.enabled)}else{if(typeof(g.disabled)!="undefined"){h=window.dhx4.s2b(g.disabled)}}this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=h;this.obj.tr.extAction=(g.action||null);this.obj.tr._selected=(g.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&m.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.obj.tr.idd=String(c);if(isNaN(e)){e=m.p_tbody.childNodes.length+1}else{if(e<1){e=1}}if(e>m.p_tbody.childNodes.length){m.p_tbody.appendChild(this.obj.tr)}else{m.p_tbody.insertBefore(this.obj.tr,m.p_tbody.childNodes[e-1])}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};if(s.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(g.img!=null){this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+s.conf.icons_path+g.img+"' border='0'>";this.obj.tr._img=g.img}else{this.obj.td_a.innerHTML="&nbsp;"}var a=(g.text!=null?g.text:(g.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+a+"</div>";this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){if(!this.en||(this._selected&&m.renderSelect)){return}this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(){if(!this.en){return}if(this._selected&&m.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}};this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(w){w=w||event;w.cancelBubble=true;if(!this.en){return}m.setListOptionSelected(this.idd.replace(s.idPrefix,""));m.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";m.obj.className=m.obj.renderAs;m.arw.className=String(m.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(m.polygon._idd);m.polygon.style.display="none";if(m.polygon._ie6cover){m.polygon._ie6cover.style.display="none"}if(s.conf.skin=="dhx_terrace"){s._improveTerraceButtonSelect(m.id,true)}s.anyUsed="none";s.callEvent("onButtonSelectHide",[m.obj.idd]);var l=this.idd.replace(s.idPrefix,"");if(this.extAction){try{window[this.extAction](l)}catch(w){}}s.callEvent("onClick",[l])};m._listOptions[c]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+s.conf.skin+" dhxtoolbar_icons_"+s.conf.iconSize;this.polygon.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this.polygon.onmousedown=function(a){a=a||event;a.cancelBubble=true};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();if(window.dhx4.isIPad){this.polygon.ontouchstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;return false}}this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(o.options!=null){for(var r=0;r<o.options.length;r++){var u="_"+(o.options[r].type||"")+"ButtonSelectObject";if(o.options[r].id==null){o.options[r].id=s._genStr(24)}if(typeof(this[u])=="function"){new this[u](o.options[r].id,o.options[r])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(a){this.obj.style.width=a-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){s._enableItem(this)};this.disableItem=function(){s._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(a){s._setItemText(this,a)};this.getItemText=function(){return s._getItemText(this)};this.setItemImage=function(a){s._setItemImage(this,a,true)};this.clearItemImage=function(){s._clearItemImage(this,true)};this.setItemImageDis=function(a){s._setItemImage(this,a,false)};this.clearItemImageDis=function(){s._clearItemImage(this,false)};this.setItemToolTip=function(a){this.obj.title=a;this.arw.title=a};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(c,e,h,g,a){if(!(h=="button"||h=="separator")){return}var l={id:c,type:h,text:g,img:a};new this["_"+h+"ButtonSelectObject"](c,l,e)};this.removeListOption=function(c){if(!this._isListButton(c,true)){return}var a=this._listOptions[c];if(a.td_a!=null&&a.td_b!=null){a.td_a.onselectstart=null;a.td_b.onselectstart=null;while(a.td_a.childNodes.length>0){a.td_a.removeChild(a.td_a.childNodes[0])}while(a.td_b.childNodes.length>0){a.td_b.removeChild(a.td_b.childNodes[0])}a.tr.onselectstart=null;a.tr.onmouseover=null;a.tr.onmouseout=null;a.tr.onclick=null;while(a.tr.childNodes.length>0){a.tr.removeChild(a.tr.childNodes[0])}a.tr.parentNode.removeChild(a.tr);a.td_a=null;a.td_b=null;a.tr=null}else{a.sep.onselectstart=null;a.td.onselectstart=null;a.tr.onselectstart=null;while(a.td.childNodes.length>0){a.td.removeChild(a.td.childNodes[0])}while(a.tr.childNodes.length>0){a.tr.removeChild(a.tr.childNodes[0])}a.tr.parentNode.removeChild(a.tr);a.sep=null;a.td=null;a.tr=null}a=null;this._listOptions[c]=null;try{delete this._listOptions[c]}catch(e){}};this.showListOption=function(a){if(!this._isListButton(a,true)){return}this._listOptions[a].tr.style.display=""};this.hideListOption=function(a){if(!this._isListButton(a,true)){return}this._listOptions[a].tr.style.display="none"};this.isListOptionVisible=function(a){if(!this._isListButton(a,true)){return}return(this._listOptions[a].tr.style.display!="none")};this.enableListOption=function(a){if(!this._isListButton(a)){return}this._listOptions[a].tr.en=true;this._listOptions[a].tr.className="tr_btn"+(this._listOptions[a].tr._selected&&s.renderSelect?" tr_btn_selected":"")};this.disableListOption=function(a){if(!this._isListButton(a)){return}this._listOptions[a].tr.en=false;this._listOptions[a].tr.className="tr_btn tr_btn_disabled"};this.isListOptionEnabled=function(a){if(!this._isListButton(a)){return}return this._listOptions[a].tr.en};this.setListOptionPosition=function(c,e){if(!this._listOptions[c]||this.getListOptionPosition(c)==e||isNaN(e)){return}if(e<1){e=1}var a=this._listOptions[c].tr;this.p_tbody.removeChild(a);if(e>this.p_tbody.childNodes.length){this.p_tbody.appendChild(a)}else{this.p_tbody.insertBefore(a,this.p_tbody.childNodes[e-1])}a=null};this.getListOptionPosition=function(c){var e=-1;if(!this._listOptions[c]){return e}for(var a=0;a<this.p_tbody.childNodes.length;a++){if(this.p_tbody.childNodes[a]==this._listOptions[c].tr){e=a+1}}return e};this.setListOptionImage=function(c,a){if(!this._isListButton(c)){return}var e=this._listOptions[c].tr.childNodes[(s.rtl?1:0)];e.innerHTML="<img src='"+s.conf.icons_path+a+"' class='btn_sel_img'>";e=null};this.getListOptionImage=function(c){if(!this._isListButton(c)){return}var e=this._listOptions[c].tr.childNodes[(s.rtl?1:0)];var a=null;if(e.childNodes.length>0){a=e.childNodes[0].src}e=null;return a};this.clearListOptionImage=function(c){if(!this._isListButton(c)){return}var a=this._listOptions[c].tr.childNodes[(s.rtl?1:0)];while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.innerHTML="&nbsp;";a=null};this.setListOptionText=function(c,a){if(!this._isListButton(c)){return}this._listOptions[c].tr.childNodes[(s.rtl?0:1)].childNodes[0].innerHTML=a};this.getListOptionText=function(a){if(!this._isListButton(a)){return}return this._listOptions[a].tr.childNodes[(s.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(c,a){if(!this._isListButton(c)){return}this._listOptions[c].tr.title=a};this.getListOptionToolTip=function(a){if(!this._isListButton(a)){return}return this._listOptions[a].tr.title};this.forEachListOption=function(c){for(var a in this._listOptions){c(a)}};this.getAllListOptions=function(){var c=new Array();for(var a in this._listOptions){c[c.length]=a}return c};this.setListOptionSelected=function(c){for(var a in this._listOptions){var e=this._listOptions[a];if(e.td_a!=null&&e.td_b!=null&&e.tr.en){if(a==c){e.tr._selected=true;e.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(e.tr._img){this.setItemImage(e.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(c))}}else{e.tr._selected=false;e.tr.className="tr_btn"}}e=null}};this.getListOptionSelected=function(){var c=null;for(var a in this._listOptions){if(this._listOptions[a].tr._selected==true){c=a}}return c};this._isListButton=function(c,a){if(this._listOptions[c]==null){return false}if(!a&&this._listOptions[c].tr.className=="tr_sep"){return false}return true};this.setMaxOpen=function(a){this._ph=null;if(typeof(a)=="number"){this.maxOpen=a;this._maxOpenTest();return}this.maxOpen=null};if(o.width){this.setWidth(o.width)}if(this.mode=="select"&&typeof(o.selected)!="undefined"){this.setListOptionSelected(o.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(o,m,n){this.id=o.idPrefix+m;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=(n.hidden!=null?"none":"");this.obj.idd=String(m);this.obj.w=(n.width!=null?n.width:100);this.obj.title=(n.title!=null?n.title:"");this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(n.value!=null?" value='"+n.value+"'":"")+">";var r=o;var l=this;this.obj.childNodes[0].onkeydown=function(a){a=a||event;if(a.keyCode==13){r.callEvent("onEnter",[l.obj.idd,this.value])}};o.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display!="none")};this.setValue=function(a){this.obj.childNodes[0].value=a};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(a){this.obj.w=a;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(n.enabled)!="undefined"&&window.dhx4.s2b(n.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(h,l,n){this.id=h.idPrefix+l;this.state=(n.enabled!=null?false:true);this.imgEn=(n.img!=null?n.img:"");this.imgDis=(n.imgdis!=null?n.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(n.selected!=null);this.obj.extAction=(n.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(n.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(l);this.obj.title=(n.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}this.obj.innerHTML=h._rtlParseBtn((this.img!=""?"<img src='"+h.conf.icons_path+this.img+"'>":""),(n.text!=null?"<div class='dhxtoolbar_text'>"+n.text+"</div>":""));h.base.appendChild(this.obj);var m=this;this.obj.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){if(m.state==false){return}if(h.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){if(m.state==false){return}if(h.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.className};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(c){if(h.checkEvent("onBeforeStateChange")){if(!h.callEvent("onBeforeStateChange",[this.idd.replace(h.idPrefix,""),this.pressed])){return}}if(m.state==false){return}if(h.anyUsed!="none"){return}this.pressed=!this.pressed;this.className=(this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs);var a=this.idd.replace(h.idPrefix,"");if(this.extAction){try{window[this.extAction](a,this.pressed)}catch(c){}}h.callEvent("onStateChange",[a,this.pressed]);return false};this.setItemState=function(e,a){if(this.obj.pressed!=e){if(e==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis");this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.renderAs=this.obj.className}if(a==true){var g=this.obj.idd.replace(h.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](g,this.obj.pressed)}catch(c){}}h.callEvent("onStateChange",[g,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){h._enableItem(this)};this.disableItem=function(){h._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(a){h._setItemText(this,a)};this.getItemText=function(){return h._getItemText(this)};this.setItemImage=function(a){h._setItemImage(this,a,true)};this.clearItemImage=function(){h._clearItemImage(this,true)};this.setItemImageDis=function(a){h._setItemImage(this,a,false)};this.clearItemImageDis=function(){h._clearItemImage(this,false)};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(r,n,o){this.id=r.idPrefix+n;this.state=(o.enabled!=null?(o.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(o.hidden!=null?"none":"");this.obj.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this.obj.idd=String(n);this.obj.len=(o.length!=null?Number(o.length):50);this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(o.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(o.textMax||"")+"</div>";r.base.appendChild(this.obj);var m=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var s=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+r.conf.skin+(r.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(o.toolTip||"%v");this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var u=this.label;this.pen.valueMin=(o.valueMin!=null?Number(o.valueMin):0);this.pen.valueMax=(o.valueMax!=null?Number(o.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(o.valueNow!=null?Number(o.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=m.obj.childNodes[1].offsetLeft+2;this.maxX=m.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){if(m.state==false){return}a=a||event;this.initXY=(window.dhx4.isIPad?a.touches[0].clientX:a.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="dhxtoolbar_sl_pen dhxtoolbar_over";if(u.tip!=""){u.style.visibility="hidden";u.style.display="";u.innerHTML=u.tip.replace("%v",this.valueNow);u.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-u.offsetWidth/2)+"px";u.style.top=window.dhx4.absTop(this)-u.offsetHeight-3+"px";u.style.visibility="";u.style.zIndex=window.dhx4.zim.reserve(u._zi)}};this.pen._doOnMouseMoveStart=function(e){e=e||event;if(!s.allowMove){return}var a=(window.dhx4.isIPad?e.touches[0].clientX:e.clientX);var c=a-s.initXY;if(a<window.dhx4.absLeft(s)+Math.round(s.offsetWidth/2)&&s.nowX==s.minX){return}if(a>window.dhx4.absLeft(s)+Math.round(s.offsetWidth/2)&&s.nowX==s.maxX){return}s.newNowX=s.nowX+c;if(s.newNowX<s.minX){s.newNowX=s.minX}if(s.newNowX>s.maxX){s.newNowX=s.maxX}s.nowX=s.newNowX;s.style.left=s.nowX+"px";s.initXY=a;s.newValueNow=Math.round((s.valueMax-s.valueMin)*(s.newNowX-s.minX)/(s.maxX-s.minX)+s.valueMin);if(u.tip!=""){u.innerHTML=u.tip.replace(/%v/gi,s.newValueNow);u.style.left=Math.round(window.dhx4.absLeft(s)+s.offsetWidth/2-u.offsetWidth/2)+"px";u.style.top=window.dhx4.absTop(s)-u.offsetHeight-3+"px"}e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!s.allowMove){return}s.className="dhxtoolbar_sl_pen";s.allowMove=false;s.nowX=s.newNowX;s.valueNow=s.newValueNow;if(u.tip!=""){u.style.display="none";window.dhx4.zim.clear(u._zi)}r.callEvent("onValueChange",[m.obj.idd.replace(r.idPrefix,""),s.valueNow])};if(window.dhx4.isIPad){document.addEventListener("touchmove",s._doOnMouseMoveStart,false);document.addEventListener("touchend",s._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousemove",s._doOnMouseMoveStart,false);window.addEventListener("mouseup",s._doOnMouseMoveEnd,false)}else{document.body.attachEvent("onmousemove",s._doOnMouseMoveStart);document.body.attachEvent("onmouseup",s._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis"};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setValue=function(a,c){a=Number(a);if(a<this.pen.valueMin){a=this.pen.valueMin}if(a>this.pen.valueMax){a=this.pen.valueMax}this.pen.valueNow=a;this.pen._definePos();if(c==true){r.callEvent("onValueChange",[this.obj.idd.replace(r.idPrefix,""),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(c,a){c=Number(c);if(c>this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=a;this.obj.childNodes[0].style.display=(a.length>0?"":"none");this.pen.valueMin=c;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(c,a){c=Number(c);if(c<this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=a;this.obj.childNodes[4].style.display=(a.length>0?"":"none");this.pen.valueMax=c;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var a=this.obj.childNodes[0].innerHTML;var c=this.pen.valueMin;return new Array(c,a)};this.getMaxValue=function(){var a=this.obj.childNodes[4].innerHTML;var c=this.pen.valueMax;return new Array(c,a)};this.setItemToolTipTemplate=function(a){this.label.tip=a};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(this.conf.isIPad){document.removeEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._doOnClick,false)}else{document.body.detachEvent("onmousedown",this._doOnClick)}}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var c=window.dhx4.screenDim();this.tX1=c.left;this.tX2=c.right;this.tY1=c.top;this.tY2=c.bottom};dhtmlXToolbarObject.prototype._initObj=function(g){for(var e=0;e<g.length;e++){this._addItemToStorage(g[e])}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(N){var r=[];var u=N.getElementsByTagName("toolbar");if(u!=null&&u[0]!=null){u=u[0];var M=function(c){var a=c.getElementsByTagName("itemText");if(a!=null&&a[0]!=null){return window.dhx4._xmlNodeValue(a[0])}return null};var P=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var I=["id","type","enabled","disabled","action","selected","img","text"];for(var J=0;J<u.childNodes.length;J++){if(u.childNodes[J].tagName=="item"){var w={};for(var h=0;h<P.length;h++){var H=u.childNodes[J].getAttribute(P[h]);if(H!=null){w[P[h]]=H}}for(var K=0;K<u.childNodes[J].childNodes.length;K++){if(u.childNodes[J].childNodes[K].tagName=="item"&&w.type=="buttonSelect"){var e={};for(var h=0;h<I.length;h++){var H=u.childNodes[J].childNodes[K].getAttribute(I[h]);if(H!=null){e[I[h]]=H}}var O=u.childNodes[J].childNodes[K].getElementsByTagName("userdata");for(var h=0;h<O.length;h++){if(!e.userdata){e.userdata={}}var L={};try{L.name=O[h].getAttribute("name")}catch(F){L.name=null}try{L.value=O[h].firstChild.nodeValue}catch(F){L.value=""}if(L.name!=null){e.userdata[L.name]=L.value}}e.text=M(u.childNodes[J].childNodes[K])||e.text;if(w.options==null){w.options=[]}w.options.push(e)}if(u.childNodes[J].childNodes[K].tagName=="userdata"){if(w.userdata==null){w.userdata={}}var e={};try{e.name=u.childNodes[J].childNodes[K].getAttribute("name")}catch(F){e.name=null}try{e.value=u.childNodes[J].childNodes[K].firstChild.nodeValue}catch(F){e.value=""}if(e.name!=null){w.userdata[e.name]=e.value}}}w.text=M(u.childNodes[J])||w.text;r.push(w)}}M=null}return r};dhtmlXToolbarObject.prototype._addItemToStorage=function(o,w){var a=(o.id||this._genStr(24));var s=(o.type||"");if(s=="spacer"){this.addSpacer(this._lastId)}else{this._lastId=a}if(s!=""&&this["_"+s+"Object"]!=null){if(s=="buttonSelect"){if(o.options!=null){for(var r=0;r<o.options.length;r++){if(o.options[r].type=="obj"){o.options[r].type="button"}if(o.options[r].type=="sep"){o.options[r].type="separator"}}}}if(s=="slider"){var u={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var v in u){if(o[u[v]]==null&&o[v]!=null){o[u[v]]=o[v]}}}if(s=="buttonInput"){if(o.value==null&&o.text!=null){o.value=o.text}}if(s=="buttonTwoState"){if(typeof(o.selected)=="undefined"&&typeof(o.pressed)!="undefined"&&window.dhx4.s2b(o.pressed)){o.selected=true}}if(typeof(o.enabled)=="undefined"&&typeof(o.disabled)!="undefined"&&window.dhx4.s2b(o.disabled)){o.enabled=false}if(o.imgDis==null&&o.img_disabled!=null){o.imgdis=o.img_disabled}if((typeof(o.openAll)=="undefined"||o.openAll==null)&&this.conf.skin=="dhx_terrace"){o.openAll=true}this.objPull[this.idPrefix+a]=new this["_"+s+"Object"](this,a,o);this.objPull[this.idPrefix+a]["type"]=s;this.setPosition(a,w)}if(o.userdata!=null){for(var v in o.userdata){this.setUserData(a,v,o.userdata[v])}}if(o.options!=null){for(var r=0;r<o.options.length;r++){if(o.options[r].userdata!=null){for(var v in o.options[r].userdata){this.setListOptionUserData(o.id,o.options[r].id,v,o.options[r].userdata[v])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(a,m){if(m===true){this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize)}else{this.conf.skin=a;if(this.conf.skin=="dhx_skyblue"){this.conf.sel_ofs_y=1}if(this.conf.skin=="dhx_web"){this.conf.sel_ofs_y=1;this.conf.sel_ofs_x=1}if(this.conf.skin=="dhx_terrace"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}for(var n in this.objPull){var l=this.objPull[n];if(l.type=="slider"){l.pen._detectLimits();l.pen._definePos();l.label.className="dhx_toolbar_slider_label_"+this.conf.skin}if(l.type=="buttonSelect"){l.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}}if(a=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(c){this.conf.align=(c=="right"?"right":"left");this.base.className=(c=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left");if(this._spacer){this._spacer.className=(c=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")}};dhtmlXToolbarObject.prototype.setIconSize=function(c){this.conf.iconSize=({18:true,24:true,32:true,48:true}[c]?c:18);this.setSkin(this.conf.skin,true);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(c){this.conf.icons_path=c};dhtmlXToolbarObject.prototype.setUserData=function(h,g,l){h=this.idPrefix+h;if(this.objPull[h]!=null){if(this.objPull[h].userData==null){this.objPull[h].userData={}}this.objPull[h].userData[g]=l}};dhtmlXToolbarObject.prototype.getUserData=function(g,e){g=this.idPrefix+g;if(this.objPull[g]!=null&&this.objPull[g].userData!=null){return this.objPull[g].userData[e]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(g,h){if(this.objPull[this.idPrefix+g]==null){return false}var l=this.objPull[this.idPrefix+g];if(l.type!="buttonSelect"){return false}if(l._listOptions[h]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(l,m,r,n){if(!this._isListOptionExists(l,m)){return}var o=this.objPull[this.idPrefix+l]._listOptions[m];if(o.userData==null){o.userData={}}o.userData[r]=n};dhtmlXToolbarObject.prototype.getListOptionUserData=function(h,l,n){if(!this._isListOptionExists(h,l)){return null}var m=this.objPull[this.idPrefix+h]._listOptions[l];if(!m.userData){return null}return(m.userData[n]?m.userData[n]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.conf.terrace_radius==null){this.conf.terrace_radius="3px"}var y=[];var x={separator:true,text:true};var v=[this.base];if(this._spacer!=null){v.push(this._spacer)}for(var e=0;e<v.length;e++){y[e]=[];for(var A=0;A<v[e].childNodes.length;A++){if(v[e].childNodes[A].idd!=null&&v[e].childNodes[A].style.display!="none"){var u=this.idPrefix+v[e].childNodes[A].idd;if(this.objPull[u]!=null&&this.objPull[u].obj==v[e].childNodes[A]){y[e].push({a:u,type:this.objPull[u].type,node:this.objPull[u][this.objPull[u].type=="buttonSelect"?"arw":"obj"]})}}}v[e]=null}for(var e=0;e<y.length;e++){for(var A=0;A<y[e].length;A++){var a=y[e][A];var C=false;var w=false;if(!x[a.type]){if(A==y[e].length-1||(y[e][A+1]!=null&&x[y[e][A+1].type])){C=true}if(A==0||(A-1>=0&&y[e][A-1]!=null&&x[y[e][A-1].type])){w=true}}a.node.style.borderRightWidth=(C?"1px":"0px");a.node.style.borderTopRightRadius=a.node.style.borderBottomRightRadius=(C?this.conf.terrace_radius:"0px");if(a.type=="buttonSelect"){a.node.previousSibling.style.borderTopLeftRadius=a.node.previousSibling.style.borderBottomLeftRadius=(w?this.conf.terrace_radius:"0px");a.node.previousSibling._br=C;a.node.previousSibling._bl=w}else{a.node.style.borderTopLeftRadius=a.node.style.borderBottomLeftRadius=(w?this.conf.terrace_radius:"0px")}a.node._br=C;a.node._bl=w}}for(var e=0;e<y.length;e++){for(var A=0;A<y[e].length;A++){for(var u in y[e][A]){y[e][A][u]=null}y[e][A]=null}y[e]=null}y=v=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(h,l){var g=this.objPull[h];if(l==true){g.obj.style.borderBottomLeftRadius=(g.obj._bl?this.conf.terrace_radius:"0px");g.arw.style.borderBottomRightRadius=(g.obj._br?this.conf.terrace_radius:"0px")}else{g.obj.style.borderBottomLeftRadius="0px";g.arw.style.borderBottomRightRadius="0px"}g=null};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_toolbar=function(m,r,n,l,o){if(typeof(o)!="undefined"){m=o}else{m=document.createElement("DIV");m.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders");m.appendChild(document.createElement("DIV"));m.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"}this.cell.insertBefore(m,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=true;this._updateIdx();return m};dhtmlXCellObject.prototype.attachToolbar=function(c){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.callEvent("_onBeforeContentAttach",["toolbar"]);if(typeof(c)=="undefined"){c={}}else{if(typeof(c)=="string"){c={skin:c}}}if(typeof(c.skin)=="undefined"){c.skin=this.conf.skin}c.parent=this._attachObject("toolbar").firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(c);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()});c.parent=null;c=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(!this.dataNodes.toolbar){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject("toolbar")};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}}function dhtmlXEditor(o,n){var r=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:(navigator.userAgent.match(/Mobile/gi)!=null&&navigator.userAgent.match(/iPad/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null)};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(o)=="object"&&o!=null&&o.tagName==null){n=o.skin;if(o.content!=null){this.conf.content=o.content}if(o.contentHTML!=null){this.conf.contentHTML=o.contentHTML}if(o.iconsPath!=null){this.conf.iconsPath=o.iconsPath}if(o.toolbar!=null){this.conf.toolbar=window.dhx4.s2b(o.toolbar)}if(o.onFocusChanged!=null){this._doOnFocusChanged=o.onFocusChanged}if(o.onAccess!=null){this._doOnAccess=o.onAccess}o=o.parent}this.conf.skin=(n||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue");if(typeof(o)=="string"){o=document.getElementById(o)}this.base=o;this.base.className+=" dhxeditor_"+this.conf.skin;while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}var m=(window.dhx4.isIE?this.base.currentStyle.position:(window.getComputedStyle!=null?window.getComputedStyle(this.base,null).getPropertyValue("position"):""));if(!(m=="relative"||m=="absolute")){this.base.style.position="relative"}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling="yes"}this.setSizes();var l=this.editor;if(typeof(window.addEventListener)!="undefined"){l.onload=function(){for(var a=0;a<r.conf.evs.length;a++){l.contentWindow.addEventListener(r.conf.evs[a],r._ev,false)}}}else{l.onreadystatechange=function(c){if(typeof(l.readyState)!="undefined"&&l.readyState=="complete"){try{for(var a=0;a<r.conf.evs.length;a++){l.contentWindow.document.body.attachEvent("on"+r.conf.evs[a],r._ev)}}catch(e){}}}}this._ev=function(a){a=a||event;var c=a.type;if(r.conf.iOSfix==true&&c=="touchend"){r.editor.contentWindow.focus();return}r.callEvent("onAccess",[c,a]);if(typeof(r._doOnAccess)=="function"){r._doOnAccess(c,a)}else{if(typeof(r._doOnAccess)=="string"&&typeof(window[r._doOnAccess])=="function"){window[r._doOnAccess](c,a)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(h,e){var a="";if(h===true&&this.getContent!=null){a=this.getContent()}var c=this.editor.contentWindow.document;c.open("text/html","replace");if(window.dhx4.isOpera){c.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(e!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isKHTML){c.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(e!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isIE){c.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none; } </style></head><body "+(e!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{c.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(e!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}}}c.close();if(window.dhx4.isIE){c.contentEditable=(e!==true)}else{c.designMode=(e!==true?"On":"Off")}if(window.dhx4.isFF){try{c.execCommand("useCSS",false,true)}catch(g){}}if(h===true&&this.setContent!=null){this.setContent(a)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(r.conf.resizeTM);r.conf.resizeTM=window.setTimeout(function(){if(r.setSizes){r.setSizes()}},r.conf.resizeTMTime)};this._runCommand=function(h,e){if(this.conf.roMode===true){return}if(arguments.length<2){e=null}if(window.dhx4.isIE){this.edWin.focus()}try{var a=this.editor.contentWindow.document;a.execCommand(h,false,e)}catch(g){}if(window.dhx4.isIE){this.edWin.focus();var c=this;window.setTimeout(function(){c.edWin.focus();c=null},1)}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat");var a=this.getContent();a=a.replace(/<\/?h\d>/gi,"");this.setContent(a)};this._doOnClick=function(e){var a=e||window.event;var c=a.target||a.srcElement;r._showInfo(c)};this._doOnMouseDown=function(e){var a=e||window.event;var c=a.target||a.srcElement;r._showInfo(c)};this._doOnKeyUp=function(e){var g=e||window.event;var c=g.keyCode;var a=g.target||g.srcElement;if({37:1,38:1,39:1,40:1,13:1}[c]==1){r._showInfo(a)}};this._getParentByTag=function(c,e){e=e.toLowerCase();var a=c;do{if(e==""||a.nodeName.toLowerCase()==e){return a}}while(a=a.parentNode);return c};this._isStyleProperty=function(a,g,c,h){g=g.toLowerCase();var e=a;do{if((e.nodeName.toLowerCase()==g)&&(e.style[c]==h)){return true}}while(e=e.parentNode);return false};this._setStyleProperty=function(c,e){this.style[e]=false;var a=this._getParentByTag(c,e);if(a&&(a.tagName.toLowerCase()==e)){this.style[e]=true}if(e=="del"&&this._getParentByTag(c,"strike")&&this._getParentByTag(c,"strike").tagName.toLowerCase()=="strike"){this.style.del=true}};this._showInfo=function(a){var a=(this._getSelectionBounds().end)?this._getSelectionBounds().end:a;if(!a||!this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var c=this.edWin.getComputedStyle(a,null);var g=((c.getPropertyValue("font-weight")==401)?700:c.getPropertyValue("font-weight"));this.style={fontStyle:c.getPropertyValue("font-style"),fontSize:c.getPropertyValue("font-size"),textDecoration:c.getPropertyValue("text-decoration"),fontWeight:g,fontFamily:c.getPropertyValue("font-family"),textAlign:c.getPropertyValue("text-align")};if(window.dhx4.isKHTML){this.style.fontStyle=c.getPropertyValue("font-style");this.style.vAlign=c.getPropertyValue("vertical-align");this.style.del=this._isStyleProperty(a,"span","textDecoration","line-through");this.style.u=this._isStyleProperty(a,"span","textDecoration","underline")}}else{var c=a.currentStyle;this.style={fontStyle:c.fontStyle,fontSize:c.fontSize,textDecoration:c.textDecoration,fontWeight:c.fontWeight,fontFamily:c.fontFamily,textAlign:c.textAlign}}this._setStyleProperty(a,"h1");this._setStyleProperty(a,"h2");this._setStyleProperty(a,"h3");this._setStyleProperty(a,"h4");if(!window.dhx4.isKHTML){this._setStyleProperty(a,"del");this._setStyleProperty(a,"sub");this._setStyleProperty(a,"sup");this._setStyleProperty(a,"u")}this.callEvent("onFocusChanged",[this.style,c])}catch(e){return null}};this._getSelectionBounds=function(){var h,w,e,a;if(this.edWin.getSelection){var g=this.edWin.getSelection();if(window.dhx4.isEdge&&g.rangeCount==0){return{root:null,start:null,end:null}}h=g.getRangeAt(g.rangeCount-1);e=h.startContainer;a=h.endContainer;w=h.commonAncestorContainer;if(e.nodeName=="#text"){w=w.parentNode}if(e.nodeName=="#text"){e=e.parentNode}if(e.nodeName.toLowerCase()=="body"){e=e.firstChild}if(a.nodeName=="#text"){a=a.parentNode}if(a.nodeName.toLowerCase()=="body"){a=a.lastChild}if(e==a){w=e}return{root:w,start:e,end:a}}else{if(this.edWin.document.selection){h=this.edDoc.selection.createRange();if(!h.duplicate){return null}w=h.parentElement();var v=h.duplicate();var c=h.duplicate();v.collapse(true);c.moveToElementText(v.parentElement());c.setEndPoint("EndToStart",v);e=v.parentElement();v=h.duplicate();c=h.duplicate();c.collapse(false);v.moveToElementText(c.parentElement());v.setEndPoint("StartToEnd",c);a=c.parentElement();if(e.nodeName.toLowerCase()=="body"){e=e.firstChild}if(a.nodeName.toLowerCase()=="body"){a=a.lastChild}if(e==a){w=e}return{root:w,start:e,end:a}}}return null};this.getContent=function(){if(!this.edDoc.body){return""}else{if(window.dhx4.isFF){return this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,"")}if(window.dhx4.isIE&&this.edDoc.body.innerText.length==0){return""}return this.edDoc.body.innerHTML}};this.setContent=function(e){e=e||"";if(this.edDoc.body){var a=false;if(window.dhx4.isFF){var c=navigator.userAgent.match(/Firefox\/(\d*)/);a=(c!=null&&c[1]<28)}if(a){if(typeof(this.conf.ffTest)=="undefined"){this.editor.contentWindow.document.body.innerHTML="";this._runCommand("InsertHTML","test");this.conf.ffTest=(this.editor.contentWindow.document.body.innerHTML.length>0)}if(this.conf.ffTest){this.editor.contentWindow.document.body.innerHTML=e}else{this.editor.contentWindow.document.body.innerHTML="";if(e.length==0){e=" "}this._runCommand("InsertHTML",e)}}else{this.editor.contentWindow.document.body.innerHTML=e}this.callEvent("onContentSet",[])}else{if(!this.conf.firstLoadEv){this.conf.firstLoadEv=true;this.conf.firstLoadData=e;this._onFirstLoad=function(){r.setContent(r.conf.firstLoadData);if(typeof(window.addEventListener)=="function"){r.edWin.removeEventListener("load",r._onFirstLoad,false)}else{r.edWin.detachEvent("onload",r._onFirstLoad)}r.conf.firstLoadData=null;r.conf.firstLoadEv=false;r._onFirstLoad=null};if(typeof(window.addEventListener)=="function"){this.edWin.addEventListener("load",this._onFirstLoad,false)}else{this.edWin.attachEvent("onload",this._onFirstLoad)}}}};this.setContentHTML=function(a){window.dhx4.ajax.get(a,function(c){if(c.xmlDoc.responseText!=null){r.setContent(c.xmlDoc.responseText)}})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(a){if(typeof(this._doOnFocusChanged)=="function"){this._doOnFocusChanged(a)}else{if(typeof(this._doOnFocusChanged)=="string"&&typeof(window[this._doOnFocusChanged])=="function"){window[this._doOnFocusChanged](a)}}});if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResize,false);this.edDoc.addEventListener("click",this._doOnClick,false);this.edDoc.addEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener("mousedown",this._doOnMouseDown,false)}}else{window.attachEvent("onresize",this._doOnResize);this.edDoc.attachEvent("onclick",this._doOnClick);this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResize,false);this.edDoc.removeEventListener("click",this._doOnClick,false);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,false)}for(var a=0;a<r.conf.evs.length;a++){l.contentWindow.removeEventListener(r.conf.evs[a],r._ev,false)}if(this.tb!=null&&this.conf.iOSfix==true){this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,false);this._doOnIOSFix=null}}else{window.detachEvent("onresize",this._doOnResize,false);this.edDoc.detachEvent("onclick",this._doOnClick);this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var a=0;a<r.conf.evs.length;a++){l.contentWindow.document.body.detachEvent("on"+r.conf.evs[a],r._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)=="function"){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;r=l=null};if(this.conf.toolbar==true&&typeof(this.attachToolbar)=="function"&&typeof(window.dhtmlXToolbarObject)=="function"){this.attachToolbar(this.conf.iconsPath);if(this.conf.iOSfix==true){this._doOnIOSFix=function(){r.editor.contentWindow.focus()};this.tb.cont.addEventListener("touchend",this._doOnIOSFix,false)}}this.setIconsPath=function(a){this.conf.iconsPath=a};if(this.conf.content.length>0){this.setContent(this.conf.content);this.conf.content=""}else{if(this.conf.contentHTML.length>0){this.setContentHTML(this.conf.contentHTML);this.conf.contentHTML=""}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight);if(this.editor!=null){this.editor.style.left="5px";this.editor.style.width=this.base.clientWidth-5+"px"}};dhtmlXEditor.prototype.setReadonly=function(c){this.conf.roMode=(c===true);this._prepareContent(true,this.conf.roMode);this.cBlock.style.display=(this.conf.roMode?"":"none")};dhtmlXEditor.prototype.isReadonly=function(c){return(this.conf.roMode||false)};dhtmlXEditor.prototype.setSkin=function(c){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+c);this.conf.skin=this.cell.conf.skin=c;if(this.tb){this.cell.detachToolbar(c);this.tb=null;this.attachToolbar()}this.setSizes()};window.dhtmlXEditorCell=function(h,g){dhtmlXCellObject.apply(this,[h,"_editor"]);var l=this;this.editor=g;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;l=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var n=this;var o=document.createElement("DIV");o.className="dhx_cell_stb";this.cell.insertBefore(o,this.cell.childNodes[this.conf.idx.cont]);o.onselectstart=function(c){c=c||event;c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};var r={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var s in r){var u=document.createElement("A");u.href="javascript:void(0);";u.tabIndex=-1;o.appendChild(u);u.onmousedown=u.onclick=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};var a=document.createElement("DIV");a.className="dhx_cell_stb_button btn_"+s;a._actv=s.charAt(0);a._cmd=r[s];u.appendChild(a);a.onclick=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};a.onmousedown=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}n.editor[this._cmd]();n.editor.callEvent("onToolbarClick",[this._actv])};a=u=null}o=null;this._stbUnload=function(){var c=this.cell.childNodes[this.conf.idx.stb];c.onselectstart=null;while(c.childNodes.length>0){c.lastChild.onmousedown=c.lastChild.onclick=null;c.lastChild.firstChild.onmousedown=c.lastChild.firstChild.onclick=null;c.lastChild.firstChild._actv=c.lastChild.firstChild._cmd=null;c.lastChild.removeChild(c.lastChild.firstChild);c.removeChild(c.lastChild)}c.parentNode.removeChild(c);c=n=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXCellObject.prototype.attachEditor=function(h){this.callEvent("_onBeforeContentAttach",["editor"]);var m=document.createElement("DIV");m.style.width="100%";m.style.height="100%";m.style.position="relative";m.style.overflow="hidden";this._attachObject(m);if(!(typeof(h)=="object"&&h!=null)){h={}}h.parent=m;this.dataType="editor";this.dataObj=new dhtmlXEditor(h);m=null;h.parent=null;h=null;if(typeof(window.dhtmlXPortalCell)!="undefined"&&this instanceof window.dhtmlXPortalCell){if(this.portal.conf.editor_ev==null){var l=this.portal.attachEvent("onBeforeDrag",function(a){if(this.cdata[a].dataType=="editor"){this.cdata[a].conf.editor_cont=this.cdata[a].dataObj.getContent()}return true});var n=this.portal.attachEvent("onDrop",function(a){if(this.cdata[a].dataType=="editor"){this.cdata[a].dataObj.setContent(this.cdata[a].conf.editor_cont);this.cdata[a].dataObj._prepareContent(true);this.cdata[a].conf.editor_cont=null}});this.portal.conf.editor_ev=[l,n]}this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){this.detachEvent(this.conf.editor_ev);this.conf.editor_ev=null;if(this instanceof window.dhtmlXPortalCell){var c=false;for(var e in this.portal.cdata){if(this.portal.cdata[e]!=this&&this.portal.cdata[e].dataType=="editor"){c=true}}if(c==false){for(var a=0;a<this.portal.conf.editor_ev.length;a++){this.portal.detachEvent(this.portal.conf.editor_ev[a])}this.portal.conf.editor_ev=null}}})}this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXEditor.prototype.attachToolbar=function(r){if(this.tb!=null){return}if(r!=null){this.conf.iconsPath=r}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana");this._initFont=this._availFonts[0];this._xmlFonts="";for(var a=0;a<this._availFonts.length;a++){var n=String(this._availFonts[a]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+n+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(n).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(var o in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+o+":"+this._availSizes[o]+'" text="'+this._availSizes[o]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(c){this.tb.setItemState("alignCenter",false);this.tb.setItemState("alignRight",false);this.tb.setItemState("alignJustify",false);this.tb.setItemState("alignLeft",false);if(c){this.tb.setItemState(c,true)}};this._checkH=function(c){this.tb.setItemState("applyH1",false);this.tb.setItemState("applyH2",false);this.tb.setItemState("applyH3",false);this.tb.setItemState("applyH4",false);if(c){this.tb.setItemState(c,true)}};this._doOnFocusChanged=function(g){if(!g.h1&&!g.h2&&!g.h3&&!g.h4){var e=(String(g.fontWeight).search(/bold/i)!=-1)||(Number(g.fontWeight)>=700);this.tb.setItemState("applyBold",e)}else{this.tb.setItemState("applyBold",false)}var c="alignLeft";if(String(g.textAlign).search(/center/)!=-1){c="alignCenter"}if(String(g.textAlign).search(/right/)!=-1){c="alignRight"}if(String(g.textAlign).search(/justify/)!=-1){c="alignJustify"}this.tb.setItemState(c,true);this._checkAlign(c);this.tb.setItemState("applyH1",g.h1);this.tb.setItemState("applyH2",g.h2);this.tb.setItemState("applyH3",g.h3);this.tb.setItemState("applyH4",g.h4);if(window._KHTMLrv){g.sub=(g.vAlign=="sub");g.sup=(g.vAlign=="super")}this.tb.setItemState("applyItalic",(g.fontStyle=="italic"));this.tb.setItemState("applyStrikethrough",g.del);this.tb.setItemState("applySub",g.sub);this.tb.setItemState("applySuper",g.sup);this.tb.setItemState("applyUnderscore",g.u)};this._doOnToolbarClick=function(c){var e=String(c).split(":");if(this[e[0]]!=null){if(typeof(this[e[0]])=="function"){this[e[0]](e[1]);this.callEvent("onToolbarClick",[c])}}};this._doOnStateChange=function(c,e){this[c]();switch(c){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(c);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(c);break}this.callEvent("onToolbarClick",[c])};this._doOnBeforeStateChange=function(c,e){if((c=="alignLeft"||c=="alignCenter"||c=="alignRight"||c=="alignJustify")&&e==true){return false}return true};var m=this;this.tb.attachEvent("onClick",function(c){m._doOnToolbarClick(c)});this.tb.attachEvent("onStateChange",function(c,e){m._doOnStateChange(c,e)});this.tb.attachEvent("onBeforeStateChange",function(c,e){return m._doOnBeforeStateChange(c,e)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",false);this.tb.setItemState("applyItalic",false);this.tb.setItemState("applyStrikethrough",false);this.tb.setItemState("applySub",false);this.tb.setItemState("applySuper",false);this.tb.setItemState("applyUnderscore",false);var c=this.getContent();c=c.replace(/<\/?h\d>/gi,"");this.setContent(c)}};dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping");this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){if(this._settings.group){this.group(this._settings.group,false)}},this));this.attachEvent("onBeforeRender",dhtmlx.bind(function(c){if(this._settings.sort){c.block();c.sort(this._settings.sort);c.unblock()}},this));this.data.attachEvent("onClearAll",dhtmlx.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null},this));this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(g,e){g.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(false);this.block();this.clearAll();this.unblock()},e))},sum:function(l,g){l=dhtmlx.Template.setter(l);g=g||this.data;var h=0;g.each(function(a){h+=l(a)*1});return h},min:function(h,l){h=dhtmlx.Template.setter(h);l=l||this.data;var g=Infinity;l.each(function(a){if(h(a)*1<g){g=h(a)*1}});return g*1},max:function(h,l){h=dhtmlx.Template.setter(h);l=l||this.data;var g=-Infinity;l.each(function(a){if(h(a)*1>g){g=h(a)*1}});return g},_split_data_by:function(v){var s=function(a,c){a=dhtmlx.Template.setter(a);return a(c[0])};var r=dhtmlx.Template.setter(v.by);if(!v.map[r]){v.map[r]=[r,s]}var y={};var u=[];this.data.each(function(c){var a=r(c);if(!y[a]){u.push({id:a});y[a]=dhtmlx.toArray()}y[a].push(c)});for(var C in v.map){var w=(v.map[C][1]||s);if(typeof w!="function"){w=this[w]}for(var x=0;x<u.length;x++){u[x][C]=w.call(this,v.map[C][0],y[u[x].id])}}this.data._not_grouped_order=this.data.order;this.data._not_grouped_pull=this.data.pull;this.data.order=dhtmlx.toArray();this.data.pull={};for(var x=0;x<u.length;x++){var A=this.data.id(u[x]);this.data.pull[A]=u[x];this.data.order.push(A)}this.callEvent("onStoreUpdated",[])},group:function(e,g){this.ungroup(false);this._split_data_by(e);if(g!==false){this.data.callEvent("onStoreUpdated",[])}},ungroup:function(c){if(this.data._not_grouped_order){this.data.order=this.data._not_grouped_order;this.data.pull=this.data._not_grouped_pull;this.data._not_grouped_pull=this.data._not_grouped_order=null}if(c!==false){this.data.callEvent("onStoreUpdated",[])}},group_setter:function(c){dhtmlx.assert(typeof c=="object","Incorrect group value");dhtmlx.assert(c.by,"group.by is mandatory");dhtmlx.assert(c.map,"group.map is mandatory");return c},sort_setter:function(c){if(typeof c!="object"){c={by:c}}this._mergeSettings(c,{as:"string",dir:"asc"});return c}};dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(c){c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);return c},time_part:function(c){return(c.valueOf()/1000-c.getTimezoneOffset()*60)%86400},week_start:function(g){var e=g.getDay();if(this.config.start_on_monday){if(e===0){e=6}else{e--}}return this.date_part(this.add(g,-1*e,"day"))},month_start:function(c){c.setDate(1);return this.date_part(c)},year_start:function(c){c.setMonth(0);return this.month_start(c)},day_start:function(c){return this.date_part(c)},add:function(n,m,l){var h=new Date(n.valueOf());switch(l){case"day":h.setDate(h.getDate()+m);break;case"week":h.setDate(h.getDate()+7*m);break;case"month":h.setMonth(h.getMonth()+m);break;case"year":h.setYear(h.getFullYear()+m);break;case"hour":h.setHours(h.getHours()+m);break;case"minute":h.setMinutes(h.getMinutes()+m);break;default:return dhtmlx.Date["add_"+l](n,m,l)}return h},to_fixed:function(c){if(c<10){return"0"+c}return c},copy:function(c){return new Date(c.valueOf())},date_to_str:function(g,e){g=g.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return a}});if(e){g=g.replace(/date\.get/g,"date.getUTC")}return new Function("date",'return "'+g+'";')},str_to_date:function(o,s){var n="var temp=date.split(/[^0-9a-zA-Z]+/g);";var m=o.match(/%[a-zA-Z]/g);for(var u=0;u<m.length;u++){switch(m[u]){case"%j":case"%d":n+="set[2]=temp["+u+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+u+"]||1)-1;";break;case"%y":n+="set[0]=temp["+u+"]*1+(temp["+u+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+u+"]||0;";break;case"%i":n+="set[4]=temp["+u+"]||0;";break;case"%Y":n+="set[0]=temp["+u+"]||0;";break;case"%a":case"%A":n+="set[3]=set[3]%12+((temp["+u+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":n+="set[5]=temp["+u+"]||0;";break}}var r="set[0],set[1],set[2],set[3],set[4],set[5]";if(s){r=" Date.UTC("+r+")"}return new Function("date","var set=[0,0,1,0,0,0]; "+n+" return new Date("+r+");")},getISOWeek:function(s){if(!s){return false}var u=s.getDay();if(u===0){u=7}var r=new Date(s.valueOf());r.setDate(s.getDate()+(4-u));var n=r.getFullYear();var m=Math.floor((r.getTime()-new Date(n,0,1).getTime())/86400000);var o=1+Math.floor(m/7);return o},getUTCISOWeek:function(c){return this.getISOWeek(c)}};dhtmlx.math={};dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];dhtmlx.math.toHex=function(g,e){g=parseInt(g,10);str="";while(g>0){str=this._toHex[g%16]+str;g=Math.floor(g/16)}while(str.length<e){str="0"+str}return str};dhtmlx.math.hexToDec=function(c){return parseInt(c,16)};dhtmlx.math.toRgb=function(r){var n,o,m,g;if(typeof(r)!="string"){n=r[0];o=r[1];m=r[2]}else{if(r.indexOf("rgb")!=-1){g=r.substr(r.indexOf("(")+1,r.lastIndexOf(")")-r.indexOf("(")-1).split(",");n=g[0];o=g[1];m=g[2]}else{if(r.substr(0,1)=="#"){r=r.substr(1)}n=this.hexToDec(r.substr(0,2));o=this.hexToDec(r.substr(2,2));m=this.hexToDec(r.substr(4,2))}}n=(parseInt(n,10)||0);o=(parseInt(o,10)||0);m=(parseInt(m,10)||0);if(n<0||n>255){n=0}if(o<0||o>255){o=0}if(m<0||m>255){m=0}return[n,o,m]};dhtmlx.math.hsvToRgb=function(r,C,F){var s,g,v,A,E,D,h,H;s=Math.floor((r/60))%6;g=r/60-s;v=F*(1-C);A=F*(1-g*C);E=F*(1-(1-g)*C);D=0;h=0;H=0;switch(s){case 0:D=F;h=E;H=v;break;case 1:D=A;h=F;H=v;break;case 2:D=v;h=F;H=E;break;case 3:D=v;h=A;H=F;break;case 4:D=E;h=v;H=F;break;case 5:D=F;h=v;H=A;break}D=Math.floor(D*255);h=Math.floor(h*255);H=Math.floor(H*255);return[D,h,H]};dhtmlx.math.rgbToHsv=function(A,h,g){var s,v,H,E,F,C,r,D;s=A/255;v=h/255;H=g/255;var E=Math.min(s,v,H);var F=Math.max(s,v,H);r=0;C=F==0?0:(1-E/F);D=F;if(F==E){r=0}else{if(F==s&&v>=H){r=60*(v-H)/(F-E)+0}else{if(F==s&&v<H){r=60*(v-H)/(F-E)+360}else{if(F==v){r=60*(H-s)/(F-E)+120}else{if(F==H){r=60*(s-v)/(F-E)+240}}}}}return[r,C,D]};if(!dhtmlx.presets){dhtmlx.presets={}}dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:false,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:false},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:true},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:true,fill:false,disableItems:false,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:false,disableItems:false,disableLines:false,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:true,alpha:0.2,disableLines:false},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:false,alpha:0.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:false,alpha:1}},column:{color:"RAINBOW",gradient:false,width:45,radius:0,alpha:1,border:true},stick:{width:5,gradient:false,color:"#67b5c9",radius:2,alpha:1,border:false},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:0.5,border:true}};dhtmlx.ui.Map=function(c){this.name="Map";this._id="map_"+dhtmlx.uid();this._key=c;this._map=[];this._areas=[]};dhtmlx.ui.Map.prototype={addRect:function(h,l,g){this._areas.push({index:g,points:l});this._createMapArea(h,"RECT",l,g)},addPoly:function(h,l,g){this._createMapArea(h,"POLY",l,g)},_createMapArea:function(m,r,n,o){var l="";if(arguments.length==4){l="userdata='"+o+"'"}this._map.push("<area "+this._key+"='"+m+"' shape='"+r+"' coords='"+n.join()+"' "+l+"></area>")},addSector:function(E,s,u,w,y,C,A,x){var v=[];v.push(w);v.push(Math.floor(y*A));for(var D=s;D<u;D+=Math.PI/18){v.push(Math.floor(w+C*Math.cos(D)));v.push(Math.floor((y+C*Math.sin(D))*A))}v.push(Math.floor(w+C*Math.cos(u)));v.push(Math.floor((y+C*Math.sin(u))*A));v.push(w);v.push(Math.floor(y*A));return this.addPoly(E,v,x)},render:function(g){var h=dhtmlx.html.create("DIV");h.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";g.appendChild(h);var l=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";h.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+l+" class='dhx_map_img' usemap='#"+this._id+"' onmousedown='return false;'>";g._htmlmap=h;this._map=[]}};dhtmlx.chart={};dhtmlx.chart.scatter={pvt_render_scatter:function(s,x,u,v,w,E){if(!this._settings.xValue){return dhtmlx.log("warning","Undefined propery: xValue")}var C=this._getLimits();var y=this._getLimits("h","xValue");if(!w){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")}if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")}this._drawYAxis(this.canvases.y.getCanvas(),x,u,v,C.min,C.max);this._drawHXAxis(this.canvases.x.getCanvas(),x,u,v,y.min,y.max)}C={min:this._settings.yAxis.start,max:this._settings.yAxis.end};y={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var D=this._getScatterParams(s,x,u,v,y,C);this._mapStart=u;for(var A=0;A<x.length;A++){this._drawScatterItem(s,E,u,v,D,y,C,x[A],w)}},_getScatterParams:function(r,u,v,w,n,o){var s={};s.totalHeight=w.y-v.y;s.totalWidth=w.x-v.x;this._calcScatterUnit(s,n.min,n.max,s.totalWidth,"X");this._calcScatterUnit(s,o.min,o.max,s.totalHeight,"Y");return s},_drawScatterItem:function(H,F,v,w,D,A,C,y,x){var E=this._calculateScatterItemPosition(D,w,v,A,y,"X");var u=this._calculateScatterItemPosition(D,v,w,C,y,"Y");this._drawItem(H,E,u,y,this._settings.label.call(this,y),x,F)},_calculateScatterItemPosition:function(D,w,x,F,A,E){var u=this._settings[E=="X"?"xValue":"value"].call(this,A);var C=D["valueFactor"+E];var H=(parseFloat(u||0)-F.min)*C;var v=D["unit"+E];var y=x[E.toLowerCase()]-(E=="X"?(-1):1)*Math.floor(v*H);if(H<0){y=x[E.toLowerCase()]}if(u>F.max){y=w[E.toLowerCase()]}if(u<F.min){y=x[E.toLowerCase()]}return y},_calcScatterUnit:function(n,s,m,u,r){var o=this._getRelativeValue(s,m);r=(r||"");n["relValue"+r]=o[0];n["valueFactor"+r]=o[1];n["unit"+r]=(n["relValue"+r]?u/n["relValue"+r]:10)}};dhtmlx.chart.radar={pvt_render_radar:function(u,r,n,m,s,o){this._renderRadarChart(u,r,n,m,s,o)},_renderRadarChart:function(J,D,L,w,x,I){if(!D.length){return}var A=this._getPieParameters(L,w);var y=(this._settings.radius?this._settings.radius:A.radius);var H=(this._settings.x?this._settings.x:A.x);var K=(this._settings.y?this._settings.y:A.y);var F=[];for(var E=0;E<D.length;E++){F.push(1)}var C=this._getRatios(F,D.length);this._mapStart=L;if(!x){this._drawRadarAxises(C,H,K,y,D)}this._drawRadarData(J,C,H,K,y,D,x,I)},_drawRadarData:function(ac,Z,ah,ai,ak,x,aa,y){var ae,W,P,S,Y,T,al,am,V,Q,U,X,an,af,ad,ag,ao,ab,aj;P=this._settings;Y=P.yAxis.start;T=P.yAxis.end;aj=this._getRelativeValue(Y,T);X=aj[0];ab=(X?ak/X:ak/2);ao=aj[1];an=-Math.PI/2;ae=W=an;V=[];am=0;for(S=0;S<x.length;S++){if(!ag){af=P.value(x[S]);ad=(parseFloat(af||0)-Y)*ao}else{ad=ag}Q=Math.floor(ab*ad);af=P.value((S!=(x.length-1))?x[S+1]:x[0]);ag=(parseFloat(af||0)-Y)*ao;U=Math.floor(ab*ag);ae=W;W=((S!=(x.length-1))?(an+Z[S]-0.0001):an);al=(am||this._getPositionByAngle(ae,ah,ai,Q));am=this._getPositionByAngle(W,ah,ai,U);V.push(al)}if(P.fill){this._fillRadarChart(ac,V,x)}if(!P.disableLines){this._strokeRadarChart(ac,V,x)}if(!P.disableItems){this._drawRadarItemMarkers(ac,V,x,aa,y)}V=null},_drawRadarItemMarkers:function(n,s,o,r,m){for(var u=0;u<s.length;u++){this._drawItem(n,s[u].x,s[u].y,o[u],this._settings.label.call(this,o),r,m)}},_fillRadarChart:function(n,r,m){var o,s;n.globalAlpha=this._settings.alpha.call(this,{});n.beginPath();for(var u=0;u<r.length;u++){n.fillStyle=this._settings.fill.call(this,m[u]);o=r[u];s=(r[u+1]||r[0]);if(!u){n.moveTo(o.x,o.y)}n.lineTo(s.x,s.y)}n.fill();n.globalAlpha=1},_strokeRadarChart:function(n,r,m){var o,s;for(var u=0;u<r.length;u++){o=r[u];s=(r[u+1]||r[0]);this._drawLine(n,o.x,o.y,s.x,s.y,this._settings.line.color.call(this,m[u]),this._settings.line.width)}},_drawRadarAxises:function(ae,X,Y,aj,c){var ao=this._settings.yAxis;var am=this._settings.xAxis;var ai=ao.start;var ak=ao.end;var af=ao.step;var ad={};var x=this._configYAxis;if(typeof x.step=="undefined"||typeof x.start=="undefined"||typeof x.end=="undefined"){var ac=this._getLimits();ad=this._calculateScale(ac.min,ac.max);ai=ad.start;ak=ad.end;af=ad.step;ao.end=ak;ao.start=ai}var U=[];var Q,S,ab;var y=0;var an=aj*af/(ak-ai);var aa,ag;if(af<1){aa=Math.min(this._log10(af),(ai<=0?0:this._log10(ai)));ag=Math.pow(10,-aa)}var T=[];if(!this.canvases.scale){this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale")}var V=this.canvases.scale.getCanvas();for(Q=ak;Q>=ai;Q-=af){if(ad.fixNum){Q=parseFloat((new Number(Q)).toFixed(ad.fixNum))}U.push(Math.floor(y*an)+0.5);if(ag){Q=Math.round(Q*ag)/ag}var ah=Y-aj+U[U.length-1];this.canvases.scale.renderTextAt("middle","left",X,ah,ao.template(Q.toString()),"dhx_axis_item_y dhx_radar");if(ae.length<2){this._drawScaleSector(V,"arc",X,Y,aj-U[U.length-1],-Math.PI/2,3*Math.PI/2,Q);return}var al=-Math.PI/2;var W=al;var Z;for(S=0;S<ae.length;S++){if(Q==ak){T.push(W)}Z=al+ae[S]-0.0001;this._drawScaleSector(V,(x.lineShape||"line"),X,Y,aj-U[U.length-1],W,Z,Q,S,c[Q]);W=Z}y++}for(Q=0;Q<T.length;Q++){ab=this._getPositionByAngle(T[Q],X,Y,aj);if(am.lines.call(this,c[Q],Q)){this._drawLine(V,X,Y,ab.x,ab.y,(am?am.lineColor.call(this,c[Q]):"#cfcfcf"),1)}this._drawRadarScaleLabel(V,X,Y,aj,T[Q],(am?am.template.call(this,c[Q]):"&nbsp;"))}},_drawScaleSector:function(I,A,J,w,C,F,H,D,E){var v,x;if(C<0){return false}v=this._getPositionByAngle(F,J,w,C);x=this._getPositionByAngle(H,J,w,C);var y=this._settings.yAxis;if(y.bg){I.beginPath();I.moveTo(J,w);if(A=="arc"){I.arc(J,w,C,F,H,false)}else{I.lineTo(v.x,v.y);I.lineTo(x.x,x.y)}I.fillStyle=y.bg(D,E);I.moveTo(J,w);I.fill();I.closePath()}if(y.lines.call(this,D)){I.lineWidth=1;I.beginPath();if(A=="arc"){I.arc(J,w,C,F,H,false)}else{I.moveTo(v.x,v.y);I.lineTo(x.x,x.y)}I.strokeStyle=y.lineColor.call(this,D);I.stroke()}},_drawRadarScaleLabel:function(r,a,y,H,x,J){var I=this.canvases.scale.renderText(0,0,J,"dhx_axis_radar_title",1);var F=I.scrollWidth;var K=I.offsetHeight;var L=0.001;var C=this._getPositionByAngle(x,a,y,H+5);var D=0,E=0;if(x<0||x>Math.PI){E=-K}if(x>Math.PI/2){D=-F}if(Math.abs(x+Math.PI/2)<L||Math.abs(x-Math.PI/2)<L){D=-F/2}else{if(Math.abs(x)<L||Math.abs(x-Math.PI)<L){E=-K/2}}I.style.top=C.y+E+"px";I.style.left=C.x+D+"px";I.style.width=F+"px";I.style.whiteSpace="nowrap"}};dhtmlx.chart.area={pvt_render_area:function(V,L,Y,Z,U,Q){var O,T,M,S,X,H,W,N,P,I,J,ab,K,ac,aa;H=this._calculateLineParams(V,L,Y,Z,U);T=this._settings;S=(T.eventRadius||Math.floor(H.cellWidth/2));if(L.length){W=[];I=(!T.offset?Y.x:Y.x+H.cellWidth*0.5);for(M=0;M<L.length;M++){X=L[M];P=this._getPointY(X,Y,Z,H);K=I+H.cellWidth*M;if(P){ac=(typeof P=="object"?P.y0:P);if(M&&this._settings.fixOverflow){N=this._getPointY(L[M-1],Y,Z,H);if(N.out&&N.out==P.out){continue}J=H.cellWidth*(M-1)-0.5+I;ab=(typeof N=="object"?N.y0:N);if(N.out){aa=(N.out=="min"?Z.y:Y.y);W.push([this._calcOverflowX(J,K,ab,ac,aa),aa])}if(P.out){aa=(P.out=="min"?Z.y:Y.y);W.push([this._calcOverflowX(J,K,ab,ac,aa),aa]);if(M==(L.length-1)&&aa==Y.y){W.push([K,Y.y])}}}if(!P.out){W.push([K,ac]);Q.addRect(X.id,[K-S-Y.x,ac-S-Y.y,K+S-Y.x,ac+S-Y.y],U)}if(!T.yAxis){O=(!T.offset&&(M==L.length-1)?"left":"center");this.canvases[U].renderTextAt(false,O,K,ac-T.labelOffset,T.label(X))}}}if(W.length){W.push([K,Z.y]);W.push([W[0][0],Z.y])}V.globalAlpha=this._settings.alpha.call(this,L[0]);V.fillStyle=this._settings.color.call(this,L[0]);V.beginPath();this._path(V,W);V.fill();if(T.border){V.lineWidth=T.borderWidth||1;if(T.borderColor){V.strokeStyle=T.borderColor.call(this,L[0])}else{this._setBorderStyles(V,V.fillStyle)}V.beginPath();this._path(V,W);V.stroke()}V.lineWidth=1;V.globalAlpha=1}}};dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(W,K,ad,ae,U,P){var x,y,M,S,V,L,aa,O,Z,T,X,ab,ac,Y;T=this._calculateLineParams(W,K,ad,ae,U);S=this._settings;O=(S.eventRadius||Math.floor(T.cellWidth/2));if(K.length){X=[];Y=[];ab=(!S.offset?ad.x:ad.x+T.cellWidth*0.5);var N=function(a,c){return U?(K[a].$startY?c-ae.y+K[a].$startY:0):c};var Q=function(g,e,a){var c=(a.y-e.y)/(a.x-e.x);return c*g+e.y-c*e.x};for(V=0;V<K.length;V++){Z=K[V];if(!V){ac=N(V,ae.y);X.push([ab,ac])}else{ab+=T.cellWidth}ac=N(V,this._getPointY(Z,ad,ae,T));Y.push((isNaN(ac)&&!V)?(K[V].$startY||ae.y):ac);if(ac){X.push([ab,ac]);P.addRect(Z.id,[ab-O-ad.x,ac-O-ad.y,ab+O-ad.x,ac+O-ad.y],U);if(!S.yAxis){M=(!S.offset&&aa?"left":"center");this.canvases[U].renderTextAt(false,M,ab,ac-S.labelOffset,S.label(Z))}}}X.push([ab,N(V-1,ae.y)]);if(U){for(V=K.length-2;V>0;V--){ab-=T.cellWidth;ac=K[V].$startY;if(ac){X.push([ab,ac])}}}X.push([X[0][0],X[0][1]]);W.globalAlpha=this._settings.alpha.call(this,K[0]);W.fillStyle=this._settings.color.call(this,K[0]);W.beginPath();this._path(W,X);W.fill();for(V=0;V<K.length;V++){ac=Y[V];if(!ac){if(V==K.length-1){ac=K[V].$startY}for(L=V+1;L<K.length;L++){if(Y[L]){x={x:ad.x,y:Y[0]};y={x:(ad.x+T.cellWidth*L),y:Y[L]};ac=Q(ad.x+T.cellWidth*V,x,y);break}}}K[V].$startY=ac}}}};dhtmlx.chart.spline={pvt_render_spline:function(U,x,Z,aa,S,y){var L,M,V,P,N,W,X,T,J,K,Y,ab,ac;N=this._calculateLineParams(U,x,Z,aa,S);L=this._settings;this._mapStart=Z;V=[];if(x.length){T=(L.offset?Z.x+N.cellWidth*0.5:Z.x);for(M=0; M<x.length; M++){Y=this._getPointY(x[M],Z,aa,N);if(Y){X=((!M)?T:N.cellWidth*M-0.5+T);V.push({x:X,y:Y,index:M})}}W=this._getSplineParameters(V);for(M=0; M<V.length; M++){J=V[M].x;ab=V[M].y;if(M<V.length-1){K=V[M+1].x;ac=V[M+1].y;for(P=J; P<K; P++){var O=this._getSplineYPoint(P,J,M,W.a,W.b,W.c,W.d);if(O<Z.y){O=Z.y}if(O>aa.y){O=aa.y}var Q=this._getSplineYPoint(P+1,J,M,W.a,W.b,W.c,W.d);if(Q<Z.y){Q=Z.y}if(Q>aa.y){Q=aa.y}this._drawLine(U,P,O,P+1,Q,L.line.color(x[M]),L.line.width)}this._drawLine(U,K-1,this._getSplineYPoint(P,J,M,W.a,W.b,W.c,W.d),K,ac,L.line.color(x[M]),L.line.width)}this._drawItem(U,J,ab,x[V[M].welcome],L.label(x[V[M].welcome]),S,y)}}},_getSplineParameters:function(n){var s,c,h,J,F,H,I,a,m=[],u=[],v=n.length;for(s=0; s<v-1; s++){m[s]=n[s+1].x-n[s].x;u[s]=(n[s+1].y-n[s].y)/m[s]}c=[];h=[];c[0]=0;c[1]=2*(m[0]+m[1]);h[0]=0;h[1]=6*(u[1]-u[0]);for(s=2; s<v-1; s++){c[s]=2*(m[s-1]+m[s])-m[s-1]*m[s-1]/c[s-1];h[s]=6*(u[s]-u[s-1])-m[s-1]*h[s-1]/c[s-1]}J=[];J[v-1]=J[0]=0;for(s=v-2; s>=1; s--){J[s]=(h[s]-m[s]*J[s+1])/c[s]}F=[];H=[];I=[];a=[];for(s=0; s<v-1; s++){F[s]=n[s].y;H[s]=-m[s]*J[s+1]/6-m[s]*J[s]/3+(n[s+1].y-n[s].y)/m[s];I[s]=J[s]/2;a[s]=(J[s+1]-J[s])/(6*m[s])}return{a:F,b:H,c:I,d:a}},_getSplineYPoint:function(s,c,a,r,u,v,w){return r[a]+(s-c)*(u[a]+(s-c)*(v[a]+(s-c)*w[a]))}};dhtmlx.chart.barH={pvt_render_barH:function(ak,S,aq,ar,ai,T){var ah,ae,ad,ag,ax,aa,am,V,ac,U,aw,an,ap,Y,Z,at,al,af,W,au,aj;ad=(ar.y-aq.y)/S.length;am=this._getLimits("h");V=am.max;ac=am.min;at=ar.x-aq.x;aj=!!this._settings.yAxis;if(!ai){this._drawHScales(ak,S,aq,ar,ac,V,ad)}if(aj){V=parseFloat(this._settings.xAxis.end);ac=parseFloat(this._settings.xAxis.start)}Y=this._getRelativeValue(ac,V);an=Y[0];aw=Y[1];af=(an?at/an:10);if(!aj){Z=10;af=(an?(at-Z)/an:10)}ae=parseInt(this._settings.width,10);var X=this._series.length;var ao=this._settings.seriesMargin;var av=this._settings.seriesPadding;if(this._series&&(ae*X+av+(X>2?ao*X:0)>ad)){ae=ad/X-av-(X>2?ao:0)}ah=(ad-ae*X-ao*(X-1))/2;if(this._settings.border){ae=parseInt(ae,10);ah=parseInt(ah,10)}ap=(typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(ae/5));U=false;ax=this._settings.gradient;if(ax&&typeof(ax)!="function"){U=ax;ax=false}else{if(ax){ax=ak.createLinearGradient(aq.x,aq.y,ar.x,aq.y);this._settings.gradient(ax)}}if(!aj){this._drawLine(ak,aq.x-0.5,aq.y,aq.x-0.5,ar.y,"#000000",1)}for(aa=0;aa<S.length;aa++){al=parseFloat(this._settings.value(S[aa]||0));if(al>V){al=V}al-=ac;al*=aw;W=aq.x;au=aq.y+ah+(X>2?ao*ai:0)+parseInt(aa*ad,10)+ae*ai;if((al<0&&this._settings.origin=="auto")||(this._settings.xAxis&&al===0&&!(this._settings.origin!="auto"&&this._settings.origin>ac))){this.canvases[ai].renderTextAt("middle","right",W+10,au+ae/2+ah,this._settings.label(S[aa]));continue}if(al<0&&this._settings.origin!="auto"&&this._settings.origin>ac){al=0}if(!aj){al+=Z/af}ag=ax||this._settings.color.call(this,S[aa]);if(this._settings.border){this._drawBarHBorder(ak,W,au,ae,ac,ap,af,al,ag)}ak.globalAlpha=this._settings.alpha.call(this,S[aa]);var ab=this._drawBarH(ak,ar,W,au,ae,ac,ap,af,al,ag,ax,U);if(U!=false){this._drawBarHGradient(ak,W,au,ae,ac,ap,af,al,ag,U)}ak.globalAlpha=1;if(ab[3]==au){this.canvases[ai].renderTextAt("middle","left",ab[0]-5,ab[3]+Math.floor(ae/2),this._settings.label(S[aa]));T.addRect(S[aa].id,[ab[0]-aq.x,ab[3]-aq.y,ab[2]-aq.x,ab[3]+ae-aq.y],ai)}else{this.canvases[ai].renderTextAt("middle",false,ab[2]+5,ab[1]+Math.floor(ae/2),this._settings.label(S[aa]));T.addRect(S[aa].id,[ab[0]-aq.x,au-aq.y,ab[2]-aq.x,ab[3]-aq.y],ai)}}},_setBarHPoints:function(N,I,P,L,E,O,Q,F,H){var K=0;if(E>O*Q){var S=(E-O*Q)/E;K=-Math.asin(S)+Math.PI/2}N.moveTo(I,P+F);var J=I+O*Q-E-(E?0:F);if(E<O*Q){N.lineTo(J,P+F)}var A=P+E;if(E&&E>0){N.arc(J,A,E-F,-Math.PI/2+K,0,false)}var C=P+L-E-(E?0:F);var M=J+E-(E?F:0);N.lineTo(M,C);if(E&&E>0){N.arc(J,C,E-F,0,Math.PI/2-K,false)}var D=P+L-F;N.lineTo(I,D);if(!H){N.lineTo(I,P+F)}return[M,D]},_drawHScales:function(w,o,s,u,y,x,v){var r=0;if(this._settings.xAxis){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj)}r=this._drawHXAxis(this.canvases.x.getCanvas(),o,s,u,y,x)}if(this._settings.yAxis){if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj)}this._drawHYAxis(this.canvases.y.getCanvas(),o,s,u,v,r)}},_drawHYAxis:function(I,C,w,y,E,H){if(!this._settings.yAxis){return}var A;var F=parseInt((H?H:w.x),10)-0.5;var v=y.y+0.5;var x=w.y;this._drawLine(I,F,v,F,x,this._settings.yAxis.color,1);for(var D=0;D<C.length;D++){var J=((this._settings.origin!="auto")&&(this._settings.view=="barH")&&(parseFloat(this._settings.value(C[D]))<this._settings.origin));A=x+E/2+D*E;this.canvases.y.renderTextAt("middle",(J?false:"left"),(J?F+5:F-5),A,this._settings.yAxis.template(C[D]),"dhx_axis_item_y",(J?0:F-10));if(this._settings.yAxis.lines.call(this,C[D])){this._drawLine(I,w.x,A,y.x,A,this._settings.yAxis.lineColor.call(this,C[D]),1)}}this._drawLine(I,w.x+0.5,x+0.5,y.x,x+0.5,this._settings.yAxis.lineColor.call(this,{}),1);this._setYAxisTitle(w,y)},_drawHXAxis:function(D,T,N,P,M,F){var I;var K={};var H=this._settings.xAxis;if(!H){return}var E=P.y+0.5;var L=N.x-0.5;var O=P.x-0.5;var U=N.x;this._drawLine(D,L,E,O,E,H.color,1);if(H.step){I=parseFloat(H.step)}if(typeof this._configXAxis.step=="undefined"||typeof this._configXAxis.start=="undefined"||typeof this._configXAxis.end=="undefined"){K=this._calculateScale(M,F);M=K.start;F=K.end;I=K.step;this._settings.xAxis.end=F;this._settings.xAxis.start=M;this._settings.xAxis.step=I}if(I===0){return}var J=(O-L)*I/(F-M);var Q=0;for(var c=M;c<=F;c+=I){if(K.fixNum){c=parseFloat((new Number(c)).toFixed(K.fixNum))}var S=Math.floor(L+Q*J)+0.5;if(!(c==M&&this._settings.origin=="auto")&&H.lines.call(this,c)){this._drawLine(D,S,E,S,N.y,this._settings.xAxis.lineColor.call(this,c),1)}if(c==this._settings.origin){U=S+1}this.canvases.x.renderTextAt(false,true,S,E+2,H.template(c.toString()),"dhx_axis_item_x");Q++}this.canvases.x.renderTextAt(true,false,L,P.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",P.x-N.x);if(!H.lines.call(this,{})){this._drawLine(D,L,N.y-0.5,O,N.y-0.5,this._settings.xAxis.color,0.2)}return U},_correctBarHParams:function(s,w,y,v,u,r,x){var C=this._settings.yAxis;var A=w;if(!!C&&this._settings.origin!="auto"&&(this._settings.origin>x)){w+=(this._settings.origin-x)*u;A=w;v=v-(this._settings.origin-x);if(v<0){v*=(-1);s.translate(w,y+r);s.rotate(Math.PI);w=0.5;y=0}w+=0.5}return{value:v,x0:w,y0:y,start:A}},_drawBarH:function(H,S,K,T,N,L,Q,O,I,F,W,P){var E;H.save();var J=this._correctBarHParams(H,K,T,I,O,N,L);H.fillStyle=F;H.beginPath();if(O*J.value>0){E=this._setBarHPoints(H,J.x0,J.y0,N,Q,O,J.value,(this._settings.border?1:0));if(W&&!P){H.lineTo(S.x,J.y0+(this._settings.border?1:0))}}else{E=[J.x0,J.y0+1]}H.fill();H.restore();var U=J.y0;var V=(J.y0!=T?T:E[1]);var M=(J.y0!=T?(J.start-E[0]):J.start);var D=(J.y0!=T?J.start:E[0]);return[M,U,D,V]},_drawBarHBorder:function(u,D,w,s,y,A,v,x,C){u.save();var E=this._correctBarHParams(u,D,w,x,v,s,y);u.beginPath();this._setBorderStyles(u,C);u.globalAlpha=0.9;if(v*E.value>0){this._setBarHPoints(u,E.x0,E.y0,s,A,v,E.value,u.lineWidth/2,1)}u.stroke();u.restore()},_drawBarHGradient:function(J,E,w,I,y,A,v,x,D,H){J.save();var F=this._correctBarHParams(J,E,w,x,v,I,y);var C=this._setBarGradient(J,F.x0,F.y0+I,F.x0+v*F.value,F.y0,H,D,"x");J.fillStyle=C.gradient;J.beginPath();if(v*F.value>0){this._setBarHPoints(J,F.x0,F.y0+C.offset,I-C.offset*2,A,v,F.value,C.offset)}J.fill();J.globalAlpha=1;J.restore()}};dhtmlx.assert(dhtmlx.chart.barH);dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(ak,S,at,au,ai,T){var U,ae;var aw;var ac;var an=au.x-at.x;var ap=!!this._settings.yAxis;var aq=this._getStackedLimits(S);U=aq.max;ae=aq.min;var ad=Math.floor((au.y-at.y)/S.length);if(!ai){this._drawHScales(ak,S,at,au,ae,U,ad)}if(ap){U=parseFloat(this._settings.xAxis.end);ae=parseFloat(this._settings.xAxis.start)}var X=this._getRelativeValue(ae,U);ac=X[0];aw=X[1];var ah=(ac?an/ac:10);if(!ap){var aa=10;ah=(ac?(an-aa)/ac:10)}var af=parseInt(this._settings.width,10);if((af+4)>ad){af=ad-4}var ao=(ad-af)/2;var ar=0;var am=false;var ax=this._settings.gradient;if(ax){am=true}if(!ap){this._drawLine(ak,at.x-0.5,at.y,at.x-0.5,au.y,"#000000",1)}var V=0;var Y=0;for(Z=0;Z<this._series.length;Z++){if(Z==ai){Y=V}if(this._series[Z].view=="stackedBarH"){V++}}for(var Z=0;Z<S.length;Z++){if(!Y){S[Z].$startX=at.x}var al=parseFloat(this._settings.value(S[Z]||0));if(al>U){al=U}al-=ae;al*=aw;var W=at.x;var av=at.y+ao+Z*ad;if(!Y){S[Z].$startX=W}else{W=S[Z].$startX}if(al<0||(this._settings.yAxis&&al===0)){this.canvases.y.renderTextAt("middle",true,W+10,av+af/2,this._settings.label(S[Z]));continue}if(!ap){al+=aa/ah}var ag=this._settings.color.call(this,S[Z]);ak.globalAlpha=this._settings.alpha.call(this,S[Z]);ak.fillStyle=this._settings.color.call(this,S[Z]);ak.beginPath();var ab=this._setBarHPoints(ak,W,av,af,ar,ah,al,(this._settings.border?1:0));if(ax&&!am){ak.lineTo(at.x+an,av+(this._settings.border?1:0))}ak.fill();if(am!=false){var aj=this._setBarGradient(ak,W,av+af,W,av,am,ag,"x");ak.fillStyle=aj.gradient;ak.beginPath();ab=this._setBarHPoints(ak,W,av,af,ar,ah,al,0);ak.fill()}if(this._settings.border){this._drawBarHBorder(ak,W,av,af,ae,ar,ah,al,ag)}ak.globalAlpha=1;this.canvases[ai].renderTextAt("middle",true,S[Z].$startX+(ab[0]-S[Z].$startX)/2-1,av+(ab[1]-av)/2,this._settings.label(S[Z]));T.addRect(S[Z].id,[S[Z].$startX-at.x,av-at.y,ab[0]-at.x,ab[1]-at.y],ai);S[Z].$startX=ab[0]}}};dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(S,N,al,am,af,O){var Q,Z;var ao;var X;var W=am.y-al.y;var aj=!!this._settings.yAxis;var P=!!this._settings.xAxis;var ak=this._getStackedLimits(N);Q=ak.max;Z=ak.min;var ac=Math.floor((am.x-al.x)/N.length);if(!af){this._drawScales(N,al,am,Z,Q,ac)}if(aj){Q=parseFloat(this._settings.yAxis.end);Z=parseFloat(this._settings.yAxis.start)}var V=this._getRelativeValue(Z,Q);X=V[0];ao=V[1];var ae=(X?W/X:10);var ab=parseInt(this._settings.width,10);if(ab+4>ac){ab=ac-4}var ai=Math.floor((ac-ab)/2);var ah=(this._settings.gradient?this._settings.gradient:false);if(!P){this._drawLine(S,al.x,am.y+0.5,am.x,am.y+0.5,"#000000",1)}for(var Y=0;Y<N.length;Y++){var U=parseFloat(this._settings.value(N[Y]||0));if(!U){if(!af||!N[Y].$startY){N[Y].$startY=am.y}continue}if(!af){U-=Z}U*=ao;var T=al.x+ai+Y*ac;var an=am.y;if(!af){N[Y].$startY=an}else{an=N[Y].$startY}if(an<(al.y+1)){continue}if(U<0||(this._settings.yAxis&&U===0)){this.canvases.y.renderTextAt(true,true,T+Math.floor(ab/2),an,this._settings.label(N[Y]));continue}var ad=this._settings.color.call(this,N[Y]);S.globalAlpha=this._settings.alpha.call(this,N[Y]);S.fillStyle=this._settings.color.call(this,N[Y]);S.beginPath();var aa=this._setStakedBarPoints(S,T-(this._settings.border?0.5:0),an,ab+(this._settings.border?0.5:0),ae,U,0,al.y);S.fill();if(ah){S.save();var ag=this._setBarGradient(S,T,an,T+ab,aa[1],ah,ad,"y");S.fillStyle=ag.gradient;S.beginPath();aa=this._setStakedBarPoints(S,T+ag.offset,an,ab-ag.offset*2,ae,U,(this._settings.border?1:0),al.y);S.fill();S.restore()}if(this._settings.border){S.save();this._setBorderStyles(S,ad);S.beginPath();this._setStakedBarPoints(S,T-0.5,an,ab+1,ae,U,0,al.y,1);S.stroke();S.restore()}S.globalAlpha=1;this.canvases[af].renderTextAt(false,true,T+Math.floor(ab/2),(aa[1]+(an-aa[1])/2)-7,this._settings.label(N[Y]));O.addRect(N[Y].id,[T-al.x,aa[1]-al.y,aa[0]-al.x,(N[Y].$startY||an)-al.y],af);N[Y].$startY=(this._settings.border?(aa[1]+1):aa[1])}},_setStakedBarPoints:function(K,H,x,J,w,y,E,F,D){K.moveTo(H,x);var A=x-w*y+E;if(A<F){A=F}K.lineTo(H,A);var I=H+J;var C=A;K.lineTo(I,C);var L=H+J;K.lineTo(L,x);if(!D){K.lineTo(H,x)}return[L,C-2*E]}};dhtmlx.chart.line={pvt_render_line:function(P,K,S,T,O,D){var E,N,Q,H,I,J,L,V,W,U,M,F;H=this._calculateLineParams(P,K,S,T,O);E=this._settings;if(K.length){I=(E.offset?S.x+H.cellWidth*0.5:S.x);Q=[];for(N=0; N<K.length; N++){F=this._getPointY(K[N],S,T,H);if(F){L=((!N)?I:H.cellWidth*N-0.5+I);W=(typeof F=="object"?F.y0:F);if(N&&this._settings.fixOverflow){M=this._getPointY(K[N-1],S,T,H);if(M.out&&M.out==F.out){continue}J=H.cellWidth*(N-1)-0.5+I;V=(typeof M=="object"?M.y0:M);if(M.out){U=(M.out=="min"?T.y:S.y);Q.push({x:this._calcOverflowX(J,L,V,W,U),y:U})}if(F.out){U=(F.out=="min"?T.y:S.y);Q.push({x:this._calcOverflowX(J,L,V,W,U),y:U})}}if(!F.out){Q.push({x:L,y:F,index:N})}}}this._mapStart=S;for(N=1; N<=Q.length; N++){J=Q[N-1].x;V=Q[N-1].y;if(N<Q.length){L=Q[N].x;W=Q[N].y;this._drawLine(P,J,V,L,W,E.line.color.call(this,K[N-1]),E.line.width);if(E.line&&E.line.shadow){P.globalAlpha=0.3;this._drawLine(P,J+2,V+E.line.width+8,L+2,W+E.line.width+8,"#eeeeee",E.line.width+3);P.globalAlpha=1}}if(typeof Q[N-1].welcome!="undefined"){this._drawItem(P,J,V,K[Q[N-1].welcome],E.label(K[Q[N-1].welcome]),O,D,S)}}}},_calcOverflowX:function(r, l, n, o, m){return r+(m-n)*(l-r)/(o-n)},_drawItem:function(J, F, K, x, L, w, H){var E=this._settings.item;var y=parseInt(E.radius.call(this,x),10)||0;var A=this._mapStart;if(y){J.save();if(E.shadow){J.lineWidth=1;J.strokeStyle="#bdbdbd";J.fillStyle="#bdbdbd";var I=[0.1,0.2,0.3];for(var C=(I.length-1); C>=0; C--){J.globalAlpha=I[C];J.strokeStyle="#d0d0d0";J.beginPath();this._strokeChartItem(J,F,K+2*y/3,y+C+1,E.type);J.stroke()}J.beginPath();J.globalAlpha=0.3;J.fillStyle="#bdbdbd";this._strokeChartItem(J,F,K+2*y/3,y+1,E.type);J.fill()}J.restore();if(E.type=="image"&&E.src){this._drawImage(J,F-y,K-y,E.src,y*2,y*2)}else{J.lineWidth=E.borderWidth;J.fillStyle=E.color.call(this,x);J.strokeStyle=E.borderColor.call(this,x);J.globalAlpha=E.alpha.call(this,x);J.beginPath();this._strokeChartItem(J,F,K,y+1,E.type);J.fill();J.stroke();J.globalAlpha=1}}if(L){this.canvases[w].renderTextAt(false,true,F,K-y-this._settings.labelOffset,this._settings.label.call(this,x))}var D=(this._settings.eventRadius||y+1);H.addRect(x.id,[F-D-A.x,K-D-A.y,F+D-A.x,K+D-A.y],w)},_drawImage:function(w,y,x,s,v,r){var u=document.createElement("img");u.style.display="none";u.style.width=v+"px";u.style.height=r+"px";document.body.appendChild(u);u.src=s;var o=function(){w.drawImage(u,y,x)};if(u.complete){o(u)}else{u.onload=o}},_strokeChartItem:function(r,w,s,u,v){var o=[];w=parseInt(w,10);s=parseInt(s,10);if(v&&(v=="square"||v=="s")){u*=Math.sqrt(2)/2;o=[[w-u-r.lineWidth/2,s-u],[w+u,s-u],[w+u,s+u],[w-u,s+u],[w-u,s-u]]}else{if(v&&(v=="diamond"||v=="d")){var n=(r.lineWidth>1?r.lineWidth*Math.sqrt(2)/4:0);o=[[w,s-u],[w+u,s],[w,s+u],[w-u,s],[w+n,s-u-n]]}else{if(v&&(v=="triangle"||v=="t")){o=[[w,s-u],[w+Math.sqrt(3)*u/2,s+u/2],[w-Math.sqrt(3)*u/2,s+u/2],[w,s-u]]}else{o=[[w,s,u,0,Math.PI*2,true]]}}}this._path(r,o)},_getPointY:function(D,w,y,F){var x=F.minValue;var C=F.maxValue;var u=F.unit;var E=F.valueFactor;var v=this._settings.value(D);var H=(parseFloat(v||0)-x)*E;if(!this._settings.yAxis){H+=F.startValue/u}var A=y.y-u*H;if(this._settings.fixOverflow&&(this._settings.view=="line"||this._settings.view=="area")){if(v>C){A={y:w.y,y0:A,out:"max"}}else{if(H<0||v<x){A={y:y.y,y0:A,out:"min"}}}}else{if(v>C){A=w.y}if(H<0||v<x){A=y.y}}return A},_calculateLineParams:function(u,A,w,x,y){var D={};var s;D.totalHeight=x.y-w.y;D.cellWidth=(x.x-w.x)/((!this._settings.offset)?(A.length-1):A.length);var C=!!this._settings.yAxis;var E=(this._settings.view.indexOf("stacked")!=-1?this._getStackedLimits(A):this._getLimits());D.maxValue=E.max;D.minValue=E.min;if(!y){this._drawScales(A,w,x,D.minValue,D.maxValue,D.cellWidth)}if(C){D.maxValue=parseFloat(this._settings.yAxis.end);D.minValue=parseFloat(this._settings.yAxis.start)}var v=this._getRelativeValue(D.minValue,D.maxValue);s=v[0];D.valueFactor=v[1];D.unit=(s?D.totalHeight/s:10);D.startValue=0;if(!C){D.startValue=10;if(D.unit!=D.totalHeight){D.unit=(s?(D.totalHeight-D.startValue)/s:10)}}return D}};dhtmlx.chart.bar={pvt_render_bar:function(ao,U,aw,ax,am,V){var ai,ah,ac,at,X,ag,ae,aA,ab,ar,aj,Y,aq,W=ax.y-aw.y;aq=!!this._settings.yAxis;Y=!!this._settings.xAxis;at=this._getLimits();X=at.max;ag=at.min;ah=(ax.x-aw.x)/U.length;if(!am&&!(this._settings.origin!="auto"&&!aq)){this._drawScales(U,aw,ax,ag,X,ah)}if(aq){X=parseFloat(this._settings.yAxis.end);ag=parseFloat(this._settings.yAxis.start)}ab=this._getRelativeValue(ag,X);ae=ab[0];aA=ab[1];aj=(ae?W/ae:ae);if(!aq&&!(this._settings.origin!="auto"&&Y)){ar=10;aj=(ae?(W-ar)/ae:ar)}if(!am&&(this._settings.origin!="auto"&&!aq)&&this._settings.origin>ag){this._drawXAxis(ao,U,aw,ax,ah,ax.y-aj*(this._settings.origin-ag))}ai=parseInt(this._settings.width,10);var Z=0;var ad=0;for(ac=0;ac<this._series.length;ac++){if(ac==am){ad=Z}if(this._series[ac].view=="bar"){Z++}}var au=this._settings.seriesMargin;var ay=this._settings.seriesPadding;if(this._series&&(ai*Z+ay+(Z>2?au*Z:0)>ah)){ai=ah/Z-ay-(Z>2?au:0)}var an=(ah-ai*Z-au*(Z-1))/2;if(this._settings.border){ai=parseInt(ai,10);an=parseInt(an,10)}var av=(typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(ai/5));var al=false;var aB=this._settings.gradient;if(aB&&typeof(aB)!="function"){al=aB;aB=false}else{if(aB){aB=ao.createLinearGradient(0,ax.y,0,aw.y);this._settings.gradient(aB)}}if(!Y){this._drawLine(ao,aw.x,ax.y+0.5,ax.x,ax.y+0.5,"#000000",1)}for(ac=0;ac<U.length;ac++){var ap=parseFloat(this._settings.value(U[ac])||0);if(isNaN(ap)){continue}if(ap>X){ap=X}ap-=ag;ap*=aA;var aa=aw.x+an+(Z>2?au*ad:0)+ac*ah+ai*ad;var az=ax.y;if(ap<0||(this._settings.yAxis&&ap===0&&!(this._settings.origin!="auto"&&this._settings.origin>ag))){this.canvases[am].renderTextAt(true,true,aa+Math.floor(ai/2),az,this._settings.label(U[ac]));continue}if(!aq&&!(this._settings.origin!="auto"&&Y)){ap+=ar/aj}var ak=aB||this._settings.color.call(this,U[ac]);ao.globalAlpha=this._settings.alpha.call(this,U[ac]);var af=this._drawBar(ao,aw,aa,az,ai,ag,av,aj,ap,ak,aB,al);if(al){this._drawBarGradient(ao,aa,az,ai,ag,av,aj,ap,ak,al)}if(this._settings.border){this._drawBarBorder(ao,aa,az,ai,ag,av,aj,ap,ak)}ao.globalAlpha=1;if(af[0]!=aa){this.canvases[am].renderTextAt(false,true,aa+Math.floor(ai/2),af[1],this._settings.label(U[ac]))}else{this.canvases[am].renderTextAt(true,true,aa+Math.floor(ai/2),af[3],this._settings.label(U[ac]))}V.addRect(U[ac].id,[aa-aw.x,af[3]-aw.y,af[2]-aw.x,af[1]-aw.y],am)}},_correctBarParams:function(s,w,y,v,u,r,x){var C=this._settings.xAxis;var A=y;if(!!C&&this._settings.origin!="auto"&&(this._settings.origin>x)){y-=(this._settings.origin-x)*u;A=y;v=v-(this._settings.origin-x);if(v<0){v*=(-1);s.translate(w+r,y);s.rotate(Math.PI);w=0;y=0}y-=0.5}return{value:v,x0:w,y0:y,start:A}},_drawBar:function(H,S,K,T,N,L,Q,O,I,F,W,P){var E;H.save();H.fillStyle=F;var J=this._correctBarParams(H,K,T,I,O,N,L);if(O*J.value>0){E=this._setBarPoints(H,J.x0,J.y0,N,Q,O,J.value,(this._settings.border?1:0))}else{E=[J.x0,J.y0]}if(W&&!P){H.lineTo(J.x0+(this._settings.border?1:0),S.y)}H.fill();H.restore();var M=J.x0;var D=(J.x0!=K?K+E[0]:E[0]);var U=(J.x0!=K?(J.start-E[1]-J.y0):J.y0);var V=(J.x0!=K?J.start-J.y0:E[1]);return[M,U,D,V]},_drawBarBorder:function(u,D,w,s,y,A,v,x,C){var E;u.save();E=this._correctBarParams(u,D,w,x,v,s,y);this._setBorderStyles(u,C);if(v*E.value>0){this._setBarPoints(u,E.x0,E.y0,s,A,v,E.value,u.lineWidth/2,1)}u.stroke();u.restore()},_drawBarGradient:function(K,E,w,J,y,A,L,x,D,H){K.save();var F=this._correctBarParams(K,E,w,x,L,J,y);var C=this._setBarGradient(K,F.x0,F.y0,F.x0+J,F.y0-L*F.value+2,H,D,"y");var I=this._settings.border?1:0;K.fillStyle=C.gradient;if(L*F.value>0){this._setBarPoints(K,F.x0+C.offset,F.y0,J-C.offset*2,A,L,F.value,C.offset+I)}K.fill();K.restore()},_setBarPoints:function(N,I,Q,L,D,P,S,H,E){N.beginPath();var K=0;if(D>P*S){var F=(D-P*S)/D;if(F<=1&&F>=-1){K=-Math.acos(F)+Math.PI/2}}N.moveTo(I+H,Q);var A=Q-Math.floor(P*S)+D+(D?0:H);if(D<P*S){N.lineTo(I+H,A)}var J=I+D;if(D&&D>0){N.arc(J,A,D-H,-Math.PI+K,-Math.PI/2,false)}var M=I+L-D-H;var C=A-D+(D?H:0);N.lineTo(M,C);if(D&&D>0){N.arc(M,A,D-H,-Math.PI/2,0-K,false)}var O=I+L-H;N.lineTo(O,Q);if(!E){N.lineTo(I+H,Q)}return[O,C]}};dhtmlx.chart.pie={pvt_render_pie:function(u,r,n,m,s,o){this._renderPie(u,r,n,m,1,o,s)},_renderPie:function(O,K,aa,ab,P,N,M){if(!K.length){return}var L=this._getPieParameters(aa,ab);var Y=(this._settings.radius?this._settings.radius:L.radius);if(Y<0){return}var ae=this._getValues(K);var Z=this._getTotalValue(ae);var X=this._getRatios(ae,Z);var S=(this._settings.x?this._settings.x:L.x);var ac=(this._settings.y?this._settings.y:L.y);if(P==1&&this._settings.shadow){this._addShadow(O,S,ac,Y)}ac=ac/P;var Q=-Math.PI/2;var U;var I=[];O.scale(1,P);if(this._settings.gradient){var T=(P!=1?S+Y/3:S);var ad=(P!=1?ac+Y/3:ac);this._showRadialGradient(O,S,ac,Y,T,ad)}if(this._settings.labelLines){this._labelMargins=this._getLabelMargins(X,Y)}for(var V=0;V<K.length;V++){if(!ae[V]){continue}O.strokeStyle=(K.length==1?this._settings.color.call(this,K[V]):this._settings.lineColor.call(this,K[V]));O.beginPath();O.moveTo(S,ac);I.push(Q);U=-Math.PI/2+X[V]-0.0001;O.arc(S,ac,Y,Q,U,false);O.lineTo(S,ac);var J=this._settings.color.call(this,K[V]);O.fillStyle=J;O.fill();if(this._settings.pieInnerText){this._drawSectorLabel(S,ac,5*Y/6,Q,U,P,this._settings.pieInnerText(K[V],Z),true)}if(this._settings.label){this._drawSectorLabel(S,ac,Y,Q,U,P,this._settings.label(K[V]),0,(this._labelMargins?this._labelMargins[V]:{}),O)}if(P!=1){this._createLowerSector(O,S,ac,Q,U,Y,true);O.fillStyle="#000000";O.globalAlpha=0.2;this._createLowerSector(O,S,ac,Q,U,Y,false);O.globalAlpha=1;O.fillStyle=J}N.addSector(K[V].id,Q,U,S-aa.x,ac-aa.y/P,Y,P,M);Q=U}O.globalAlpha=0.8;var W;if(I.length>1){for(V=0;V<I.length;V++){W=this._getPositionByAngle(I[V],S,ac,Y);this._drawLine(O,S,ac,W.x,W.y,this._settings.lineColor.call(this,K[V]),2)}}if(P==1){O.lineWidth=2;O.strokeStyle="#ffffff";O.beginPath();O.arc(S,ac,Y+1,0,2*Math.PI,false);O.stroke()}O.globalAlpha=1;O.scale(1,1/P)},_getLabelMargins:function(V,ag){var aa,ab,O,S,ak=[],U=[];var c={1:[0]};for(O=1;O<V.length;O++){aa=-Math.PI/2+(O>1?(V[O-1]-(V[O-1]-V[O-2])/2):V[O-1]/2);ab=-Math.PI/2+V[O]-(V[O]-V[O-1])/2;var ah=Math.cos(ab);var P=Math.sin(ab);var af=Math.cos(aa);var ac=Math.sin(aa);var Y=Math.round((ag+8)*Math.abs(Math.sin(ab)-Math.sin(aa)));var Z=(ah<0?(P<0?4:3):(P<0?1:2));var X=(af<0?(ac<0?4:3):(ac<0?1:2));if(!c[Z]){c[Z]=[]}c[Z].push(X==Z?Y:0)}var W=[];var r=0;for(var Q in c){var ai=0;var aj=c[Q].length;var ad=0;var ae=0;if(Q==1||Q==3){S=Q-1;var N=0;while(S>0){if(c[S]){N+=c[S].length}S--}W[N+c[Q].length-1]={y:0,x:0};var S=c[Q].length-2;while(S>=0){if((ad||S)&&c[Q][S+1]-ad<18){ad+=18-c[Q][S+1]}else{ad=0}W[N+S]={y:ad*(Q==1?-1:1)};S--}for(var T=W.length-c[Q].length;T<W.length;T++){if(W[T]["y"]!=0){ae+=6;W[T]["x"]=ae}else{W[T]["x"]=0;ae=0}}}else{var S=1;W.push({y:0,x:0});while(S<c[Q].length){if(c[Q][S]-ad<18){ad+=18-c[Q][S]}else{ad=0}W.push({y:ad*(Q==4?-1:1)});S++}for(var T=W.length-1;T>=W.length-c[Q].length;T--){if(W[T]["y"]!=0){ae+=8;W[T]["x"]=ae}else{ae=0;W[T]["x"]=0}}}}return W},_getValues:function(h){var g=[];for(var l=0;l<h.length;l++){g.push(parseFloat(this._settings.value(h[l])||0))}return g},_getTotalValue:function(g){var h=0;for(var l=0;l<g.length;l++){h+=g[l]}return h},_getRatios:function(u,n){var m;var o=[];var r=0;n=n||this._getTotalValue(u);for(var s=0;s<u.length;s++){m=u[s];o[s]=Math.PI*2*(n?((m+r)/n):(1/u.length));r+=m}return o},_getPieParameters:function(n,s){var u=s.x-n.x;var w=s.y-n.y;var v=n.x+u/2;var r=n.y+w/2;var o=Math.min(u/2,w/2);return{x:v,y:r,radius:o}},_createLowerSector:function(v,u,o,w,s,r,y){v.lineWidth=1;if(!((w<=0&&s>=0)||(w>=0&&s<=Math.PI)||(Math.abs(w-Math.PI)>0.003&&w<=Math.PI&&s>=Math.PI))){return}if(w<=0&&s>=0){w=0;y=false;this._drawSectorLine(v,u,o,r,w,s)}if(w<=Math.PI&&s>=Math.PI){s=Math.PI;y=false;this._drawSectorLine(v,u,o,r,w,s)}var x=(this._settings.height||Math.floor(r/4))/this._settings.cant;v.beginPath();v.arc(u,o,r,w,s,false);v.lineTo(u+r*Math.cos(s),o+r*Math.sin(s)+x);v.arc(u,o+x,r,s,w,true);v.lineTo(u+r*Math.cos(w),o+r*Math.sin(w));v.fill();if(y){v.stroke()}},_drawSectorLine:function(s,r,n,o,u,m){s.beginPath();s.arc(r,n,o,u,m,false);s.stroke()},_addShadow:function(u,n,m,r){u.globalAlpha=0.5;var o=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"];for(var s=o.length-1;s>-1;s--){u.beginPath();u.fillStyle=o[s];u.arc(n+1,m+1,r+s,0,Math.PI*2,true);u.fill()}u.globalAlpha=1},_getGrayGradient:function(c){c.addColorStop(0,"#ffffff");c.addColorStop(0.7,"#7a7a7a");c.addColorStop(1,"#000000");return c},_showRadialGradient:function(v,w,n,r,u,s){v.beginPath();var o;if(typeof this._settings.gradient!="function"){o=v.createRadialGradient(u,s,r/4,w,n,r);o=this._getGrayGradient(o)}else{o=this._settings.gradient(o)}v.fillStyle=o;v.arc(w,n,r,0,Math.PI*2,true);v.fill();v.globalAlpha=0.7},_drawSectorLabel:function(Q,an,ak,ab,ac,y,af,aq,ae,W){var ah=this.canvases[0].renderText(0,0,af,0,1);if(!ah){return}var x=ah.scrollWidth;ah.style.width=x+"px";if(x>Q){x=Q}var Y=(ac-ab<0.2?4:8);if(aq){Y=x/1.8}var al=ab+(ac-ab)/2;var am=ak;ak=(aq?5*ak/6:ak+this._settings.labelOffset);ak=ak-(Y-8)/2;var ad=-Y;var ag=-8;var V="right";if(al>=Math.PI/2&&al<Math.PI||al<=3*Math.PI/2&&al>=Math.PI){ad=-x-ad;V="left"}var aj=0;if(!aq&&y<1&&(al>0&&al<Math.PI)){aj=(this._settings.height||Math.floor(ak/4))/y}var aa=(an+Math.floor(ak+aj)*Math.sin(al))*y+ag;var Z=Q+Math.floor(ak+Y/2)*Math.cos(al)+ad;var ai=(ac<Math.PI/2+0.01);var X=(ab<Math.PI/2);if(X&&ai){Z=Math.max(Z,Q+3)}else{if(!X&&!ai){Z=Math.min(Z,Q-x)}else{if(!aq&&!this._settings.labelLines&&(al>=Math.PI/2&&al<Math.PI||al<=3*Math.PI/2&&al>=Math.PI)){Z+=x/3}}}if(this._settings.labelLines&&!aq){var U=Math.abs((Math.abs(ae||0)+Math.abs(am*Math.sin(al)))/Math.sin(al));if(ae.y){aa+=ae.y}if(V=="left"){Z-=ae.x}else{Z+=ae.x}W.beginPath();W.strokeStyle="#555";var S=Q+am*Math.cos(al);var ao=an+am*Math.sin(al);W.moveTo(S,ao);var T=Z-(V=="left"?ad-8:2);var ap=aa;if(V=="left"&&T>S){T=S-Math.abs(ap-ao+16)/Math.tan(al-Math.PI);ap=ap+16;if(al<Math.PI){ap-=8}}else{ap+=8}W.lineTo(T,ap);W.lineTo(T+(V=="left"?-5:5),ap);W.stroke();aa=ap-8;Z=T+ad+(V=="left"?-15:15)}ah.style.top=aa+"px";ah.style.left=Z+"px";ah.style.width=x+"px";ah.style.textAlign=V;ah.style.whiteSpace="nowrap"}};dhtmlx.chart.pie3D={pvt_render_pie3D:function(u,r,n,m,s,o){this._renderPie(u,r,n,m,this._settings.cant,o)}};dhtmlx.chart.donut={pvt_render_donut:function(I,C,v,w,y,F){if(!C.length){return}this._renderPie(I,C,v,w,1,F);var D=this._settings;var A=this._getPieParameters(v,w);var H=(D.radius?D.radius:A.radius);var x=((D.innerRadius&&(D.innerRadius<H))?D.innerRadius:H/3);var E=(D.x?D.x:A.x);var J=(D.y?D.y:A.y);I.fillStyle="#ffffff";I.beginPath();I.arc(E,J,x,0,Math.PI*2,true);I.fill()}};dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(c){this._grid=c;return c},getRecords:function(c){return c.rowsBuffer},getDetails:function(h){var g={};for(var l=0;l<this._grid.getColumnsNum();l++){g["data"+l]=this._grid[this._grid_getter](h,l)}return g},getInfo:function(c){return{_size:0,_from:0}}};dhtmlx.ui.Canvas=function(r,o,m){this._canvas_labels=[];this._canvas_name=o;this._obj=r;var n=r.offsetWidth*(window.devicePixelRatio||1);var l=r.offsetHeight*(window.devicePixelRatio||1);var m=m||"";m+=";width:"+r.offsetWidth+"px;height:"+r.offsetHeight+"px;";this._prepareCanvas(o,m,n,l)};dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(n,l,m,h){this._canvas=dhtmlx.html.create("canvas",{width:m,height:h,canvas_id:n,style:(l||"")});this._obj.appendChild(this._canvas);if(!this._canvas.getContext){if(dhtmlx._isIE){dhtmlx.require("thirdparty/excanvas/excanvas.js");G_vmlCanvasManager.init_(document);G_vmlCanvasManager.initElement(this._canvas)}else{dhtmlx.error("Canvas is not supported in the current browser")}}return this._canvas},getCanvas:function(g){var e=(this._canvas||this._prepareCanvas()).getContext(g||"2d");if(!this._webixDevicePixelRatio){this._webixDevicePixelRatio=true;e.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)}return e},_resizeCanvas:function(){if(this._canvas){var e=this._canvas.parentNode.offsetWidth;var g=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",e*(window.devicePixelRatio||1));this._canvas.setAttribute("height",g*(window.devicePixelRatio||1));this._canvas.style.width=e+"px";this._canvas.style.height=g+"px";this._webixDevicePixelRatio=false}},renderText:function(n,m,o,r,u){if(!o){return}var s=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(r?(" "+r):""),style:"left:"+n+"px; top:"+m+"px;"},o);this._obj.appendChild(s);this._canvas_labels.push(s);if(u){s.style.width=u+"px"}return s},renderTextAt:function(u,x,s,y,v,c,w){var r=this.renderText.call(this,s,y,v,c,w);if(r){if(u){if(u=="middle"){r.style.top=parseInt(y-r.offsetHeight/2,10)+"px"}else{r.style.top=y-r.offsetHeight+"px"}}if(x){if(x=="left"){r.style.left=s-r.offsetWidth+"px"}else{r.style.left=parseInt(s-r.offsetWidth/2,10)+"px"}}}return r},clearCanvas:function(g){var l=[],h;for(h=0;h<this._canvas_labels.length;h++){this._obj.removeChild(this._canvas_labels[h])}this._canvas_labels=[];if(!g&&this._obj._htmlmap){l=this._getMapAreas();while(l.length){l[0].parentNode.removeChild(l[0]);l.splice(0,1)}l=null;if(!this._obj._htmlmap.getElementsByTagName("AREA").length){this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap);this._obj._htmlmap=null}}this.getCanvas().clearRect(0,0,this._obj.offsetWidth*(window.devicePixelRatio||1),this._obj.offsetHeight*(window.devicePixelRatio||1))},toggleCanvas:function(){this._toggleCanvas(this._canvas.style.display=="none")},showCanvas:function(){this._toggleCanvas(true)},hideCanvas:function(){this._toggleCanvas(false)},_toggleCanvas:function(g){var l,h;for(h=0;h<this._canvas_labels.length;h++){this._canvas_labels[h].style.display=(g?"":"none")}if(this._obj._htmlmap){l=this._getMapAreas();for(h=0;h<l.length;h++){if(g){l[h].removeAttribute("disabled")}else{l[h].setAttribute("disabled","true")}}}this._canvas.style.display=(g?"":"none")},_getMapAreas:function(){var h=[],g,l;g=this._obj._htmlmap.getElementsByTagName("AREA");for(l=0;l<g.length;l++){if(g[l].getAttribute("userdata")==this._canvas_name){h.push(g[l])}}return h}};dhtmlXChart=function(e){this.name="Chart";if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(e,"dhx_chart");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);this.data.provideApi(this,true);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.Destruction);dhtmlx.extend(this,dhtmlx.Group);dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var g in dhtmlx.chart){dhtmlx.extend(this,dhtmlx.chart[g])}if(e.preset){this.definePreset(e)}this._parseSettings(e,this.defaults);this._series=[this._settings];this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this));this.attachEvent("onLocateData",this._switchSerie)};dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(e,w,r){var s=r.getAttribute("series_id");if(this.callEvent("onLegendClick",[e,s,r])){var u=this._settings;var v=u.legend.values;var o=(v&&(typeof v[s].toggle!="undefined"))?v[s].toggle:u.legend.toggle;if((typeof s!="undefined")&&this._series.length>1){if(o){if(r.className.indexOf("hidden")!=-1){this.showSeries(s)}else{this.hideSeries(s)}}}}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var c in this.canvases){this.canvases[c]._resizeCanvas()}this.render()},view_setter:function(c){if(!dhtmlx.chart[c]){dhtmlx.error("Chart type extension is not loaded: "+c)}if(typeof this._settings.offset=="undefined"){this._settings.offset=!(c=="area"||c=="stackedArea")}if(c=="radar"&&!this._settings.yAxis){this.define("yAxis",{})}if(c=="scatter"){if(!this._settings.yAxis){this.define("yAxis",{})}if(!this._settings.xAxis){this.define("xAxis",{})}}return c},clearCanvas:function(){if(this.canvases&&typeof this.canvases=="object"){for(var c in this.canvases){this.canvases[c].clearCanvas()}}},render:function(){var o,r,n,m,l;if(!this.callEvent("onBeforeRender",[this.data])){return}if(this.canvases&&typeof this.canvases=="object"){for(r in this.canvases){this.canvases[r].clearCanvas()}}else{this.canvases={}}if(this._settings.legend){if(!this.canvases.legend){this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")}this._drawLegend(this.data.getRange(),this._obj.offsetWidth)}o=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight);this._map=m=new dhtmlx.ui.Map(this._id);l=this._settings;n=this._getChartData();for(r=0;r<this._series.length;r++){this._settings=this._series[r];if(!this.canvases[r]){this.canvases[r]=new dhtmlx.ui.Canvas(this._obj,r,"z-welcome:"+(2+r))}this["pvt_render_"+this._settings.view](this.canvases[r].getCanvas(),n,o.start,o.end,r,m)}m.render(this._obj);this._obj.lastChild.style.zIndex=1000;this._applyBounds(this._obj.lastChild,o);this.callEvent("onAfterRender",[]);this._settings=l},_applyBounds:function(m,n){var h={};h.left=n.start.x;h.top=n.start.y;h.width=n.end.x-n.start.x;h.height=n.end.y-n.start.y;for(var l in h){m.style[l]=h[l]+"px"}},_getChartData:function(){var A,w,C,y,x,s,E,v,u,D;y=this.data.getRange();A=(this._settings.view.toLowerCase().indexOf("barh")!=-1?"yAxis":"xAxis");w=this._settings[A];if(w&&w.units&&(typeof w.units=="object")){C=w.units;v=[];if(typeof C.start!="undefined"&&typeof C.end!="undefined"&&typeof C.next!="undefined"){E=C.start;while(E<=C.end){v.push(E);E=C.next.call(this,E)}}else{if(Object.prototype.toString.call(C)==="[object Array]"){v=C}}s=[];if(v.length){u=w.value;D={};for(x=0;x<y.length;x++){D[u(y[x])]=x}for(x=0;x<v.length;x++){if(typeof D[v[x]]!="undefined"){y[D[v[x]]].$unit=v[x];s.push(y[D[v[x]]])}else{s.push({$unit:v[x]})}}}return s}return y},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(c){this.define("value",c)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(c){if((typeof(c)!="function")&&c&&(c===true)){c="light"}return c},colormap:{RAINBOW:function(e){var g=Math.floor(this.indexById(e.id)/this.dataCount()*1536);if(g==1536){g-=1}return this._rainbow[Math.floor(g/256)](g%256)}},color_setter:function(c){return this.colormap[c]||dhtmlx.Template.obj_setter(c)},fill_setter:function(c){return((!c||c==0)?false:dhtmlx.Template.obj_setter(c))},definePreset:function(c){this.define("preset",c.preset);delete c.preset},preset_setter:function(a){var m,n,l;this.defaults=dhtmlx.extend({},this.defaults);if(typeof dhtmlx.presets.chart[a]=="object"){l=dhtmlx.presets.chart[a];for(m in l){if(typeof l[m]=="object"){if(!this.defaults[m]||typeof this.defaults[m]!="object"){this.defaults[m]=dhtmlx.extend({},l[m])}else{this.defaults[m]=dhtmlx.extend({},this.defaults[m]);for(n in l[m]){this.defaults[m][n]=l[m][n]}}}else{this.defaults[m]=l[m]}}return a}return false},legend_setter:function(c){if(!c){if(this.legendObj){this.legendObj.innerHTML="";this.legendObj=null}return false}if(typeof(c)!="object"){c={template:c}}this._mergeSettings(c,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:(this._settings.view.toLowerCase().indexOf("stacked")!=-1?"":"hide"),marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3});c.template=dhtmlx.Template.setter(c.template);return c},defaults:{color:"RAINBOW",alpha:"1",label:false,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:0.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},seriesMargin:1,seriesPadding:4,item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:false},shadow:true,gradient:false,border:true,labelOffset:20,origin:"auto"},item_setter:function(g){if(typeof(g)!="object"){g={color:g,borderColor:g}}this._mergeSettings(g,dhtmlx.extend({},this.defaults.item));var h=["alpha","borderColor","color","radius"];for(var l=0;l<h.length;l++){g[h[l]]=dhtmlx.Template.setter(g[h[l]])}return g},line_setter:function(c){if(typeof(c)!="object"){c={color:c}}dhtmlx.extend(this.defaults.line,c);c=dhtmlx.extend({},this.defaults.line);c.color=dhtmlx.Template.setter(c.color);return c},padding_setter:function(c){if(typeof(c)!="object"){c={left:c,right:c,top:c,bottom:c}}this._mergeSettings(c,{left:50,right:20,top:35,bottom:40});return c},xAxis_setter:function(e){if(!e){return false}if(typeof(e)!="object"){e={template:e}}if(!e.value){e.value=e.template}this._mergeSettings(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:true});var g=["lineColor","template","lines","value"];this._converToTemplate(g,e);this._configXAxis=dhtmlx.extend({},e);return e},yAxis_setter:function(e){this._mergeSettings(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:true,bg:"#ffffff"});var g=["lineColor","template","lines","bg"];this._converToTemplate(g,e);this._configYAxis=dhtmlx.extend({},e);return e},_converToTemplate:function(g,l){for(var h=0;h<g.length;h++){l[g[h]]=dhtmlx.Template.setter(l[g[h]])}},_drawScales:function(s,u,v,n,r,w){var o=0;if(this._settings.yAxis){if(!this.canvases.y){this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")}o=this._drawYAxis(this.canvases.y.getCanvas(),s,u,v,n,r)}if(this._settings.xAxis){if(!this.canvases.x){this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")}this._drawXAxis(this.canvases.x.getCanvas(),s,u,v,w,o)}return o},_drawXAxis:function(J,C,L,w,E,x){var F=L.x-0.5;var K=parseInt((x?x:w.y),10)+0.5;var H=w.x;var A;var I=true;for(var D=0;D<C.length;D++){if(this._settings.offset===true){A=F+E/2+D*E}else{A=(D==C.length-1)?w.x:F+D*E;I=!!D}A=Math.ceil(A)-0.5;var y=((this._settings.origin!="auto")&&(this._settings.view=="bar")&&(parseFloat(this._settings.value(C[D]))<this._settings.origin));this._drawXAxisLabel(A,K,C[D],I,y);if((this._settings.offset||D)&&this._settings.xAxis.lines.call(this,C[D])){this._drawXAxisLine(J,A,w.y,L.y,C[D])}}this.canvases.x.renderTextAt(true,false,F,w.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",w.x-L.x);this._drawLine(J,F,K,H,K,this._settings.xAxis.color,1);if(!this._settings.xAxis.lines.call(this,{})||!this._settings.offset){return}this._drawLine(J,H+0.5,w.y,H+0.5,L.y+0.5,this._settings.xAxis.color,0.2)},_drawYAxis:function(F,K,U,V,S,T){var Q;var I={};if(!this._settings.yAxis){return}var P=U.x-0.5;var W=V.y;var X=U.y;var H=V.y;if(this._settings.yAxis.step){Q=parseFloat(this._settings.yAxis.step)}if(typeof this._configYAxis.step=="undefined"||typeof this._configYAxis.start=="undefined"||typeof this._configYAxis.end=="undefined"){I=this._calculateScale(S,T);S=I.start;T=I.end;Q=I.step;this._settings.yAxis.end=T;this._settings.yAxis.start=S}this._setYAxisTitle(U,V);if(Q===0){T=S;Q=1}var Y=(T==S?W-X:(W-X)*Q/(T-S));var N=0;for(var c=S;c<=T;c+=Q){if(I.fixNum){c=parseFloat((new Number(c)).toFixed(I.fixNum))}var M=Math.floor(W-N*Y)+0.5;if(!(c==S&&this._settings.origin=="auto")&&this._settings.yAxis.lines.call(this,c)){this._drawLine(F,P,M,V.x,M,this._settings.yAxis.lineColor.call(this,c),1)}if(c==this._settings.origin){H=M}var O=c;if(Q<1){var L=Math.min(this._log10(Q),(S<=0?0:this._log10(S)));var J=Math.pow(10,-L);O=Math.round(c*J)/J;c=O}this.canvases.y.renderText(0,M-5,this._settings.yAxis.template(O.toString()),"dhx_axis_item_y",U.x-5);N++}this._drawLine(F,P,W+1,P,X,this._settings.yAxis.color,1);return H},_setYAxisTitle:function(m,n){var h="dhx_axis_title_y"+(dhtmlx._isIE&&dhtmlx._isIE!=9?" dhx_ie_filter":"");var l=this.canvases.y.renderTextAt("middle",false,0,parseInt((n.y-m.y)/2+m.y,10),this._settings.yAxis.title,h);if(l){l.style.left=(dhtmlx.env.transform?(l.offsetHeight-l.offsetWidth)/2:0)+"px"}},_calculateScale:function(u,E){if(this._settings.origin!="auto"&&this._settings.origin<u){u=this._settings.origin}var A,C,x;A=((E-u)/8)||1;var D=Math.floor(this._log10(A));var F=Math.pow(10,D);var y=A/F;y=(y>5?10:5);A=parseInt(y,10)*F;if(A>Math.abs(u)){C=(u<0?-A:0)}else{var H=Math.abs(u);var v=Math.floor(this._log10(H));var w=H/Math.pow(10,v);C=Math.ceil(w*10)/10*Math.pow(10,v)-A;if(H>1&&A>0.1){C=Math.ceil(C)}while(u<0?C<=u:C>=u){C-=A}if(u<0){C=-C-2*A}}x=C;while(x<E){x+=A;x=parseFloat((new Number(x)).toFixed(Math.abs(D)))}return{start:C,end:x,step:A,fixNum:Math.abs(D)}},_getLimits:function(y,o){var x,s;var u=((arguments.length&&y=="h")?this._configXAxis:this._configYAxis);o=o||"value";if(u&&(typeof u.end!="undefined")&&(typeof u.start!="undefined")&&u.step){x=parseFloat(u.end);s=parseFloat(u.start)}else{x=this.max(this._series[0][o]);s=(u&&(typeof u.start!="undefined"))?parseFloat(u.start):this.min(this._series[0][o]);if(this._series.length>1){for(var v=1;v<this._series.length;v++){var r=this.max(this._series[v][o]);var w=this.min(this._series[v][o]);if(r>x){x=r}if(w<s){s=w}}}}return{max:x,min:s}},_log10:function(g){var e="log";return Math.floor((Math[e](g)/Math.LN10))},_drawXAxisLabel:function(u,n,o,m,r){if(!this._settings.xAxis){return}var s=this.canvases.x.renderTextAt(r,m,u,n-(r?2:0),this._settings.xAxis.template(o));if(s){s.className+=" dhx_axis_item_x"}},_drawXAxisLine:function(r,l,n,o,m){if(!this._settings.xAxis||!this._settings.xAxis.lines){return}this._drawLine(r,l,n,l,o,this._settings.xAxis.lineColor.call(this,m),1)},_drawLine:function(r,u,n,v,s,w,o){r.strokeStyle=w;r.lineWidth=o;r.beginPath();r.moveTo(u,n);r.lineTo(v,s);r.stroke();r.lineWidth=1},_getRelativeValue:function(n,m){var o,l;var r=1;if(m!=n){o=m-n}else{o=n}return[o,r]},_rainbow:[function(c){return"#FF"+dhtmlx.math.toHex(c/2,2)+"00"},function(c){return"#FF"+dhtmlx.math.toHex(c/2+128,2)+"00"},function(c){return"#"+dhtmlx.math.toHex(255-c,2)+"FF00"},function(c){return"#00FF"+dhtmlx.math.toHex(c,2)},function(c){return"#00"+dhtmlx.math.toHex(255-c,2)+"FF"},function(c){return"#"+dhtmlx.math.toHex(c,2)+"00FF"}],addSeries:function(g){var e=this._settings;this._settings=dhtmlx.extend({},e);this._parseSettings(g,{});this._series.push(this._settings);this._settings=e},_switchSerie:function(m,e,n){var o;this._active_serie=(this._series.length==1?e.getAttribute("userdata"):this._getActiveSeries(n));if(!this._series[this._active_serie]){return}for(var r=0; r<this._series.length; r++){o=this._series[r].tooltip;if(o){o.disable()}}if(!e.getAttribute("disabled")){o=this._series[this._active_serie].tooltip;if(o){o.enable()}}},_getActiveSeries:function(w){var e,A,x,y,u,C,a,v;A=this._map._areas;y=dhtmlx.html.offset(this._obj._htmlmap);u=dhtmlx.html.pos(w);a=u.x-y.x;v=u.y-y.y;for(x=0; x<A.length; x++){e=A[x].points;if(a<=e[2]&&a>=e[0]&&v<=e[3]&&v>=e[1]){if(C){if(A[x].welcome>C.welcome){C=A[x]}}else{C=A[x]}}}return C?C.welcome:0},hideSeries:function(c){this.canvases[c].hideCanvas();if(this._settings.legend.values&&this._settings.legend.values[c]){this._settings.legend.values[c].$hidden=true}this._drawLegend()},showSeries:function(c){this.canvases[c].showCanvas();if(this._settings.legend.values&&this._settings.legend.values[c]){delete this._settings.legend.values[c].$hidden}this._drawLegend()},_changeColorSV:function(r, m, l){var n,o;o=dhtmlx.math.toRgb(r);n=dhtmlx.math.rgbToHsv(o[0],o[1],o[2]);n[1]*=m;n[2]*=l;return"rgb("+dhtmlx.math.hsvToRgb(n[0],n[1],n[2])+")"},_setBorderStyles:function(h,n){var l,m;m=dhtmlx.math.toRgb(n);l=dhtmlx.math.rgbToHsv(m[0],m[1],m[2]);l[2]/=2;n="rgb("+dhtmlx.math.hsvToRgb(l[0],l[1],l[2])+")";h.strokeStyle=n;if(h.globalAlpha==1){h.globalAlpha=0.9}},_drawLegend:function(J,M){var I,S,y,Q,H,P,N,E=0,F=0,D,x,K,O;J=J||[];M=M||this._obj.offsetWidth;D=this.canvases.legend.getCanvas();S=this._settings.legend;N=(this._settings.legend.layout!="x"?"width:"+S.width+"px":"");if(this.legendObj){this.legendObj.innerHTML="";this.legendObj.parentNode.removeChild(this.legendObj)}this.canvases.legend.clearCanvas(true);y=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+E+"px; top:"+F+"px;"+N},"");if(S.padding){y.style.padding=S.padding+"px"}this.legendObj=y;this._obj.appendChild(y);H=[];if(!S.values){for(I=0;I<J.length;I++){H.push(this._drawLegendText(y,S.template(J[I])))}}else{for(I=0; I<S.values.length; I++){H.push(this._drawLegendText(y,S.values[I].text,(typeof S.values[I].id!="undefined"?typeof S.values[I].id:I),S.values[I].$hidden))}}P=y.offsetWidth;Q=y.offsetHeight;if(P<this._obj.offsetWidth){if(S.layout=="x"&&S.align=="center"){E=(this._obj.offsetWidth-P)/2}if(S.align=="right"){E=this._obj.offsetWidth-P}if(S.margin&&S.align!="center"){E+=(S.align=="left"?1:-1)*S.margin}}if(Q<this._obj.offsetHeight){if(S.valign=="middle"&&S.align!="center"&&S.layout!="x"){F=(this._obj.offsetHeight-Q)/2}else{if(S.valign=="bottom"){F=this._obj.offsetHeight-Q}}if(S.margin&&S.valign!="middle"){F+=(S.valign=="header.html"?1:-1)*S.margin}}y.style.left=E+"px";y.style.top=F+"px";D.save();for(I=0; I<H.length; I++){O=H[I];if(S.values&&S.values[I].$hidden){K=true;x=(S.values[I].disableColor?S.values[I].disableColor:"#d9d9d9")}else{K=false;x=(S.values?S.values[I].color:this._settings.color.call(this,J[I]))}var L=(S.marker.position=="right"?O.offsetWidth-S.marker.width:0);this._drawLegendMarker(D,O.offsetLeft+E+L,O.offsetTop+F,x,O.offsetHeight,K,I)}D.restore();H=null},_drawLegendText:function(s, r, y, u){var v="";var w=this._settings.legend;if(w.layout=="x"){v="float:left;"}var x=w.marker.position;var o=dhtmlx.html.create("DIV",{style:v+"padding-"+(x&&x=="right"?"right":"left")+":"+(10+w.marker.width)+"px","class":"dhx_chart_legend_item"+(u?" hidden":"")},r);if(arguments.length>2){o.setAttribute("series_id",y)}s.appendChild(o);return o},_drawLegendMarker:function(y,Q,S,J,E,I,F){var M=[];var H=this._settings.legend.marker;var O=this._settings.legend.values;var x=(O&&O[F].markerType?O[F].markerType:H.type);if(J){y.fillStyle=J;y.strokeStyle=this._getDarkenColor(J,0.75)}y.beginPath();if(x=="round"||!H.radius){y.lineWidth=H.height;y.lineCap=x;Q+=y.lineWidth/2+5;S+=E/2;y.moveTo(Q,S);var N=Q+H.width-H.height+1;y.lineTo(N,S)}else{if(x=="item"){if(this._settings.line&&this._settings.view!="scatter"&&!this._settings.disableLines){y.beginPath();y.lineWidth=this._series[F].line.width;y.strokeStyle=I?J:this._series[F].line.color.call(this,{});var L=Q+5;var P=S+E/2;y.moveTo(L,P);var N=L+H.width;y.lineTo(N,P);y.stroke()}var K=this._series[F].item;var D=parseInt(K.radius.call(this,{}),10)||0;if(D){if(K.type=="image"&&K.src){this._drawImage(y,Q+5,S+H.height/2-5,K.src,D*2,D*2);return}else{y.beginPath();if(I){y.lineWidth=K.borderWidth;y.strokeStyle=J;y.fillStyle=J}else{y.lineWidth=K.borderWidth;y.fillStyle=K.color.call(this,{});y.strokeStyle=K.borderColor.call(this,{});y.globalAlpha=K.alpha.call(this,{})}y.beginPath();Q+=H.width/2+5;S+=E/2;this._strokeChartItem(y,Q,S,D+1,K.type);y.fill();y.stroke()}}y.globalAlpha=1}else{y.lineWidth=1;Q+=5;S+=parseInt(E/2-H.height/2,10);M=[[Q+H.radius,S+H.radius,H.radius,Math.PI,3*Math.PI/2,false],[Q+H.width-H.radius,S],[Q+H.width-H.radius,S+H.radius,H.radius,-Math.PI/2,0,false],[Q+H.width,S+H.height-H.radius],[Q+H.width-H.radius,S+H.height-H.radius,H.radius,0,Math.PI/2,false],[Q+H.radius,S+H.height],[Q+H.radius,S+H.height-H.radius,H.radius,Math.PI/2,Math.PI,false],[Q,S+H.radius]];this._path(y,M)}}y.stroke();y.fill()},_getDarkenColor:function(h, l){var m,n;n=dhtmlx.math.toRgb(h);m=dhtmlx.math.rgbToHsv(n[0],n[1],n[2]);m[2]=m[2]*l;return"rgb("+dhtmlx.math.hsvToRgb(m[0],m[1],m[2])+")"},_getChartBounds:function(C, u){var r,y,s,A;r=this._settings.padding.left;y=this._settings.padding.header;s=C-this._settings.padding.right;A=u-this._settings.padding.bottom;if(this._settings.legend){var w=this._settings.legend;var v=this._settings.legend.width;var x=this._settings.legend.height;if(w.layout=="x"){if(w.valign=="center"){if(w.align=="right"){s-=v}else{if(w.align=="left"){r+=v}}}else{if(w.valign=="bottom"){A-=x}else{y+=x}}}else{if(w.align=="right"){s-=v}else{if(w.align=="left"){r+=v}}}}return{start:{x:r,y:y},end:{x:s,y:A}}},_getStackedLimits:function(o){var u,n,m,r,s;if(this._settings.yAxis&&(typeof this._settings.yAxis.end!="undefined")&&(typeof this._settings.yAxis.start!="undefined")&&this._settings.yAxis.step){m=parseFloat(this._settings.yAxis.end);r=parseFloat(this._settings.yAxis.start)}else{for(u=0;u<o.length;u++){o[u].$sum=0;o[u].$min=Infinity;for(n=0;n<this._series.length;n++){s=parseFloat(this._series[n].value(o[u])||0);if(isNaN(s)){continue}if(this._series[n].view.toLowerCase().indexOf("stacked")!=-1){o[u].$sum+=s}if(s<o[u].$min){o[u].$min=s}}}m=-Infinity;r=Infinity;for(u=0;u<o.length;u++){if(o[u].$sum>m){m=o[u].$sum}if(o[u].$min<r){r=o[u].$min}}if(r>0){r=0}}return{max:m,min:r}},_setBarGradient:function(K,I,N,J,y,A,F,H){var x,E,C,D,L,M;if(A=="light"){if(H=="x"){x=K.createLinearGradient(I,N,J,N)}else{x=K.createLinearGradient(I,N,I,y)}M=[[0,"#FFFFFF"],[0.9,F],[1,F]];E=2}else{if(A=="falling"||A=="rising"){if(H=="x"){x=K.createLinearGradient(I,N,J,N)}else{x=K.createLinearGradient(I,N,I,y)}C=dhtmlx.math.toRgb(F);D=dhtmlx.math.rgbToHsv(C[0],C[1],C[2]);D[1]*=1/2;L="rgb("+dhtmlx.math.hsvToRgb(D[0],D[1],D[2])+")";if(A=="falling"){M=[[0,L],[0.7,F],[1,F]]}else{if(A=="rising"){M=[[0,F],[0.3,F],[1,L]]}}E=0}else{K.globalAlpha=0.37;E=0;if(H=="x"){x=K.createLinearGradient(I,y,I,N)}else{x=K.createLinearGradient(I,N,J,N)}M=[[0,"#9d9d9d"],[0.3,"#e8e8e8"],[0.45,"#ffffff"],[0.55,"#ffffff"],[0.7,"#e8e8e8"],[1,"#9d9d9d"]]}}this._gradient(x,M);return{gradient:x,offset:E}},_getPositionByAngle:function(m,n,a,l){m*=(-1);n=n+Math.cos(m)*l;a=a-Math.sin(m)*l;return{x:n,y:a}},_gradient:function(h,l){for(var g=0;g<l.length;g++){h.addColorStop(l[g][0],l[g][1])}},_path:function(h,m){var n,l;for(n=0;n<m.length;n++){l=(n?"lineTo":"moveTo");if(m[n].length>2){l="arc"}h[l].apply(h,m[n])}},_circle:function(n,h,l,m){n.arc(h,l,m,Math.PI*2,true)},_addMapRect:function(n,m,l,o,r){n.addRect(m,[l[0].x-o.x,l[0].y-o.y,l[1].x-o.x,l[1].y-o.y],r)}};dhtmlx.compat("layout");if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachChart=function(e){this.callEvent("_onBeforeContentAttach",["chart"]);var g=document.createElement("DIV");g.id="dhxChartObj_"+window.dhx4.newId();g.style.width="100%";g.style.height="100%";document.body.appendChild(g);this._attachObject(g);e.container=g.id;this.dataType="chart";this.dataObj=new dhtmlXChart(e);if(!this.dataObj.setSizes){this.dataObj.setSizes=function(){if(this.resize){this.resize()}else{this.render()}}}return this.dataObj}}dhtmlx.ui.pager=function(c){this.name="Pager";if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(c,"dhx_pager");dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this._parseSettings(c,{size:10,page:-1,group:5,count:0,type:"default"});this.data=this._settings;this.refresh()};dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(e,g){this.select(g)}},select:function(c){switch(c){case"next":c=this._settings.page+1;break;case"prev":c=this._settings.page-1;break;case"first":c=0;break;case"last":c=this._settings.limit-1;break;default:break}if(c<0){c=0}if(c>=this.data.limit){c=this.data.limit-1}if(this.callEvent("onBeforePageChange",[this._settings.page,c])){this.data.page=c*1;this.refresh();this.callEvent("onAfterPageChange",[c])}},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(h){var l="";if(h.page==-1){return""}h.min=h.page-Math.round((h.group-1)/2);h.max=h.min+h.group-1;if(h.min<0){h.max+=h.min*(-1);h.min=0}if(h.max>=h.limit){h.min-=Math.min(h.min,h.max-h.limit+1);h.max=h.limit-1}for(var g=(h.min||0);g<=h.max;g++){l+=this.button({id:g,index:(g+1),selected:(g==h.page?"_selected":"")})}return l},page:function(c){return c.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.welcome}</div>")}},refresh:function(){var e=this._settings;e.limit=Math.ceil(e.count/e.size);if(e.limit&&e.limit!=e.old_limit){e.page=Math.min(e.limit-1,e.page)}var g=e.page;if(g!=-1&&(g!=e.old_page)||(e.limit!=e.old_limit)){this.render();this.callEvent("onRefresh",[]);e.old_limit=e.limit;e.old_page=e.page}},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.DataProcessor={_dp_init:function(g){var e="_methods";g[e]=["setItemStyle","","changeId","remove"];this.attachEvent("onAfterAdd",function(a){g.setUpdated(a,true,"inserted")});this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(a,c){if(a.getUserData){a.getUserData(c,this._userdata)}},this));this.attachEvent("onBeforeDelete",function(a){if(g._silent_mode){return true}var c=g.getState(a);if(c=="inserted"){g.setUpdated(a,false);return true}if(c=="deleted"){return false}if(c=="true_deleted"){return true}g.setUpdated(a,true,"deleted");return false});this.attachEvent("onAfterEditStop",function(a){g.setUpdated(a,true,"updated")});this.attachEvent("onBindUpdate",function(a){window.setTimeout(function(){g.setUpdated(a.id,true,"updated")},1)});e="_getRowData";g[e]=function(a,r){var n=this.obj.data.get(a);var c={};for(var o in n){if(o.indexOf("_")===0){continue}c[o]=n[o]}return c};e="_clearUpdateFlag";g[e]=function(){};this._userdata={};g.attachEvent("insertCallback",this._dp_callback);g.attachEvent("updateCallback",this._dp_callback);g.attachEvent("deleteCallback",function(c,a){this.obj.setUserData(a,this.action_param,"true_deleted");this.obj.remove(a)});dhtmlx.compat("dataProcessor",g)},_dp_callback:function(e,g){this.obj.data.set(g,dhtmlx.DataDriver.xml.getDetails(e.firstChild));this.obj.data.refresh(g)},setItemStyle:function(h,g){var l=this._locateHTML(h);if(l){l.style.cssText+=";"+g}},changeId:function(g,e){this.data.changeId(g,e);this.refresh()},setUserData:function(h,g,l){if(h){this.data.get(h)[g]=l}else{this._userdata[g]=l}},getUserData:function(g,e){return g?this.data.get(g)[e]:this._userdata[e]}};(function(){var c="_dp_init";dhtmlx.DataProcessor[c]=dhtmlx.DataProcessor._dp_init})();dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var y="_dragged";var v=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(e,c,g){v.apply(this,arguments);if(!g){var a=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};if(!a.from){a.from=this.dragStartObject}dhtmlx.DragControl._checkLand(e,c,true)}};var x=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(a,e,c){if(!c){if(dhtmlx.DragControl._last){dhtmlx.DragControl._active=o.dragStartNode;dhtmlx.DragControl._stopDrag(a,true)}}x.apply(this,arguments)};var o=new dhtmlDragAndDropObject();var u=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){u.apply(this,arguments);var a=dhtmlx.DragControl._drag_context;if(!a){return}var c=[];var e=[];for(var g=0;g<a.source.length;g++){c[g]={idd:a.source[g]};e.push(a.source[g])}o.dragStartNode={parentNode:{},parentObject:{idd:c,id:(e.length==1?e[0]:e),treeNod:{object:a.from}}};o.dragStartNode.parentObject.treeNod[y]=c;o.dragStartObject=a.from};var s=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(c,a,e){s.apply(this,arguments);if(!this._last&&!e){c=o.checkLanding(c,a,true)}};var r=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(a,c){r.apply(this,arguments);if(o.lastLanding&&!c){o.stopDrag(a,false,true)}};var w=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(g){var e=null;if(g){e=w.apply(this,arguments)}if(!e){e=o.dragStartObject;var c=[];var a=e[y];for(var h=0;h<a.length;h++){c.push(a[h].idd||a[h].id)}dhtmlx.DragControl._drag_context.source=c}return e}}};dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(r,m,l,n){var o=this.get(r);if(!o){dhtmlx.log("Warning","Incorrect ID in DataMove::copy");return}if(l){dhtmlx.assert(l.externalData,"DataMove :: External object doesn't support operation");o=l.externalData(o)}l=l||this;return l.add(l.externalData(o,n),m)},move:function(v,n,w,r){if(v instanceof Array){for(var u=0;u<v.length;u++){var o=(w||this).indexById(this.move(v[u],n,w,v[u]));if(v[u+1]){n=o+(this.indexById(v[u+1])<o?0:1)}}return}nid=v;if(n<0){dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");return}var s=this.get(v);if(!s){dhtmlx.log("Warning","Incorrect ID in DataMove::move");return}if(!w||w==this){this.data.move(this.indexById(v),n)}else{dhtmlx.assert(w.externalData,"DataMove :: External object doesn't support operation");nid=w.add(w.externalData(s,r),n);this.remove(v)}return nid},moveUp:function(g,e){return this.move(g,this.indexById(g)-(e||1))},moveDown:function(g,e){return this.moveUp(g,(e||1)*-1)},moveTop:function(c){return this.move(c,0)},moveBottom:function(c){return this.move(c,this.data.dataCount()-1)},externalData:function(g,h){var l=dhtmlx.extend({},g);l.id=h||dhtmlx.uid();l.$selected=l.$template=null;return l}};dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(l,h,g){l=dhtmlx.toNode(l);l.dhx_drop=this._getCtrl(h);if(g){l.dhx_master=true}},_getCtrl:function(g){g=g||dhtmlx.DragControl;var e=this._drag_masters.find(g);if(e<0){e=this._drag_masters.length;this._drag_masters.push(g)}return e},addDrag:function(e,g){e=dhtmlx.toNode(e);e.dhx_drag=this._getCtrl(g);dhtmlx.event(e,"mousedown",this._preStart,e)},_preStart:function(c){if(dhtmlx.DragControl._active){dhtmlx.DragControl._preStartFalse();dhtmlx.DragControl.destroyDrag()}dhtmlx.DragControl._active=this;dhtmlx.DragControl._start_pos={x:c.pageX,y:c.pageY};dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse);c.cancelBubble=true;return false},_preStartFalse:function(c){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(e){var g={x:e.pageX,y:e.pageY};if(Math.abs(g.x-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(g.y-dhtmlx.DragControl._start_pos.y)<5){return}dhtmlx.DragControl._preStartFalse();if(!dhtmlx.DragControl.createDrag(e)){return}dhtmlx.DragControl.sendSignal("start");dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag);dhtmlx.DragControl._moveDrag(e)},_stopDrag:function(c){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);if(dhtmlx.DragControl._last){dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,c);dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,c)}dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(e){var g=dhtmlx.html.pos(e);dhtmlx.DragControl._html.style.top=g.y+dhtmlx.DragControl.top+"px";dhtmlx.DragControl._html.style.left=g.x+dhtmlx.DragControl.left+"px";if(dhtmlx.DragControl._skip){dhtmlx.DragControl._skip=false}else{dhtmlx.DragControl._checkLand((e.srcElement||e.target),e)}e.cancelBubble=true;return false},_checkLand:function(e,g){while(e&&e.tagName!="BODY"){if(e.dhx_drop){if(this._last&&(this._last!=e||e.dhx_master)){this.onDragOut(this._active,this._last,e,g)}if(!this._last||this._last!=e||e.dhx_master){this._last=null;this._landing=this.onDragIn(dhtmlx.DragControl._active,e,g);if(this._landing){this._last=e}return}return}e=e.parentNode}if(this._last){this._last=this._landing=this.onDragOut(this._active,this._last,null,g)}},sendSignal:function(c){dhtmlx.DragControl.active=(c=="start")},getMaster:function(c){return this._drag_masters[c.dhx_drag||c.dhx_drop]},getContext:function(c){return this._drag_context},createDrag:function(e){var o=dhtmlx.DragControl._active;var n=this._drag_masters[o.dhx_drag];var r;if(n.onDragCreate){r=n.onDragCreate(o,e);r.style.position="absolute";r.style.zIndex=dhtmlx.zIndex.drag;r.onmousemove=dhtmlx.DragControl._skip_mark}else{var a=dhtmlx.DragControl.onDrag(o,e);if(!a){return false}var r=document.createElement("DIV");r.innerHTML=a;r.className="dhx_drag_zone";r.onmousemove=dhtmlx.DragControl._skip_mark;document.body.appendChild(r)}dhtmlx.DragControl._html=r;return true},_skip_mark:function(){dhtmlx.DragControl._skip=true},destroyDrag:function(){var g=dhtmlx.DragControl._active;var a=this._drag_masters[g.dhx_drag];if(a&&a.onDragDestroy){a.onDragDestroy(g,dhtmlx.DragControl._html)}else{dhtmlx.html.remove(dhtmlx.DragControl._html)}dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(m,n,l){var e=this._drag_masters[n.dhx_drop];if(e.onDragIn&&e!=this){return e.onDragIn(m,n,l)}n.className=n.className+" dhx_drop_zone";return n},onDragOut:function(o,r,m,n){var e=this._drag_masters[r.dhx_drop];if(e.onDragOut&&e!=this){return e.onDragOut(o,r,m,n)}r.className=r.className.replace("dhx_drop_zone","");return null},onDrop:function(o,r,m,n){var e=this._drag_masters[r.dhx_drop];dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(o);if(e.onDrop&&e!=this){return e.onDrop(o,r,m,n)}r.appendChild(o)},onDrag:function(l,h){var e=this._drag_masters[l.dhx_drag];if(e.onDrag&&e!=this){return e.onDrag(l,h)}dhtmlx.DragControl._drag_context={source:l,from:l};return"<div style='"+l.style.cssText+"'>"+l.innerHTML+"</div>"}};dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface");dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface");dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included");if(!this._settings||this._settings.drag){dhtmlx.DragItem._initHandlers(this)}else{if(this._settings){this.drag_setter=function(c){if(c){this._initHandlers(this);delete this.drag_setter}return c}}}if(this.dragMarker){this.attachEvent("onBeforeDragIn",this.dragMarker);this.attachEvent("onDragOut",this.dragMarker)}},_initHandlers:function(c){dhtmlx.DragControl.addDrop(c._obj,c,true);dhtmlx.DragControl.addDrag(c._obj,c)},onDragIn:function(s,u,r){var w=this.locate(r)||null;var v=dhtmlx.DragControl._drag_context;var e=dhtmlx.DragControl.getMaster(s);var o=(this._locateHTML(w)||this._obj);if(o==dhtmlx.DragControl._landing){return o}v.target=w;v.to=e;if(!this.callEvent("onBeforeDragIn",[v,r])){v.id=null;return null}dhtmlx.html.addCss(o,"dhx_drag_over");return o},onDragOut:function(s,u,v,r){var e=this.locate(r)||null;if(v!=this._dataobj){e=null}var w=(this._locateHTML(e)||(v?dhtmlx.DragControl.getMaster(v)._obj:window.undefined));if(w==dhtmlx.DragControl._landing){return null}var n=dhtmlx.DragControl._drag_context;dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over");n.target=n.to=null;this.callEvent("onDragOut",[n,r]);return null},onDrop:function(o,r,m,n){var e=dhtmlx.DragControl._drag_context;e.to=this;e.index=e.target?this.indexById(e.target):this.dataCount();e.new_id=dhtmlx.uid();if(!this.callEvent("onBeforeDrop",[e,n])){return}if(e.from==e.to){this.move(e.source,e.index)}else{if(e.from){e.from.move(e.source,e.index,e.to,e.new_id)}else{dhtmlx.error("Unsopported d-n-d combination")}}this.callEvent("onAfterDrop",[e,n])},onDrag:function(s,o){var e=this.locate(o);var r=[e];if(e){if(this.getSelected){var u=this.getSelected();if(dhtmlx.PowerArray.find.call(u,e)!=-1){r=u}}var n=dhtmlx.DragControl._drag_context={source:r,start:e};n.from=this;if(this.callEvent("onBeforeDrag",[n,o])){return n.html||this._toHTML(this.get(e))}}return null}};dhtmlx.EditAbility={_init:function(c){this._edit_id=null;this._edit_bind=null;dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore");dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack");this.attachEvent("onEditKeyPress",function(h,a,l){if(h==13&&!l){this.stopEdit()}else{if(h==27){this.stopEdit(true)}}});this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(g){if(this.stopEdit(false,g)){if(!this.callEvent("onBeforeEditStart",[g])){return}var e=this.data.get(g);if(e.$template){return}e.$template="edit";this.data.refresh(g);this._edit_id=g;this._save_binding(g);this._edit_bind(true,e);this.callEvent("onAfterEditStart",[g])}},stopEdit:function(o,m){if(!this._edit_id){return true}if(this._edit_id==m){return false}var l={};if(!o){this._edit_bind(false,l)}else{l=null}if(!this.callEvent("onBeforeEditStop",[this._edit_id,l])){return false}var r=this.data.get(this._edit_id);r.$template=null;if(!o){this._edit_bind(false,r)}var n=this._edit_id;this._edit_bind=this._edit_id=null;this.data.refresh(n);this.callEvent("onAfterEditStop",[n,l]);return true},_save_binding:function(y){var s=this._locateHTML(y);var w="";var r="";var u=[];if(s){var v=s.getElementsByTagName("*");var o="";for(var x=0;x<v.length;x++){if(v[x].nodeType==1&&(o=v[x].getAttribute("bind"))){w+="els["+u.length+"].value="+o+";";r+=o+"=els["+u.length+"].value;";u.push(v[x]);v[x].className+=" dhx_allow_selection";v[x].onselectstart=this._block_native}}v=null}w=Function("obj","els",w);r=Function("obj","els",r);this._edit_bind=function(a,c){if(a){w(c,u);if(u.length&&u[0].select){u[0].select()}}else{r(c,u)}}},_block_native:function(c){(c||event).cancelBubble=true;return true}};dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray();dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore");this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this));this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this));this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this));this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(h,g){for(var l=this._selected.length-1;l>=0;l--){if(this._selected[l]==h){this._selected[l]=g}}},_data_filtered:function(){for(var g=this._selected.length-1;g>=0;g--){if(this.data.indexById(this._selected[g])<0){var h=this._selected[g];var l=this.item(h);if(l){delete l.$selected}this._selected.splice(g,1);this.callEvent("onSelectChange",[h])}}},_data_updated:function(h,l,g){if(g=="delete"){this._selected.remove(h)}else{if(!this.data.dataCount()&&!this.data._filter_order){this._selected=dhtmlx.toArray()}}},_data_loaded:function(){if(this._settings.select){this.data.each(function(c){if(c.$selected){this.select(c.id)}},this)}},_select_mark:function(h,l,g){if(!g&&!this.callEvent("onBeforeSelect",[h,l])){return false}this.data.item(h).$selected=l;if(g){g.push(h)}else{if(l){this._selected.push(h)}else{this._selected.remove(h)}this._refresh_selection(h)}return true},select:function(l,m,h){if(!l){return this.selectAll()}if(l instanceof Array){for(var n=0;n<l.length;n++){this.select(l[n],m,h)}return}if(!this.data.exists(l)){dhtmlx.error("Incorrect id in select command: "+l);return}if(h&&this._selected.length){return this.selectAll(this._selected[this._selected.length-1],l)}if(!m&&(this._selected.length!=1||this._selected[0]!=l)){this._silent_selection=true;this.unselectAll();this._silent_selection=false}if(this.isSelected(l)){if(m){this.unselect(l)}return}if(this._select_mark(l,true)){this.callEvent("onAfterSelect",[l])}},unselect:function(c){if(!c){return this.unselectAll()}if(!this.isSelected(c)){return}this._select_mark(c,false)},selectAll:function(l,m){var h;var n=[];if(l||m){h=this.data.getRange(l||null,m||null)}else{h=this.data.getRange()}h.each(function(c){var a=this.data.item(c.id);if(!a.$selected){this._selected.push(c.id);this._select_mark(c.id,true,n)}return c.id},this);this._refresh_selection(n)},unselectAll:function(){var c=[];this._selected.each(function(a){this._select_mark(a,false,c)},this);this._selected=dhtmlx.toArray();this._refresh_selection(c)},isSelected:function(c){return this._selected.find(c)!=-1},getSelected:function(c){switch(this._selected.length){case 0:return c?[]:"";case 1:return c?[this._selected[0]]:this._selected[0];default:return([].concat(this._selected))}},_is_mass_selection:function(c){return c.length>100||c.length>this.data.dataCount/2},_refresh_selection:function(g){if(typeof g!="object"){g=[g]}if(!g.length){return}if(this._is_mass_selection(g)){this.data.refresh()}else{for(var e=0;e<g.length;e++){this.render(g[e],this.data.item(g[e]),"update")}}if(!this._silent_selection){this.callEvent("onSelectChange",[g])}}};dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore");dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible");this._html=document.createElement("DIV")},_toHTML:function(c){dhtmlx.assert((!c.$template||this.type["template_"+c.$template]),"RenderStack :: Unknown template: "+c.$template);this.callEvent("onItemRender",[c]);return this.type._item_start(c,this.type)+(c.$template?this.type["template_"+c.$template]:this.type.template)(c,this.type)+this.type._item_end},_toHTMLObject:function(c){this._html.innerHTML=this._toHTML(c);return this._html.firstChild},_locateHTML:function(h){if(this._htmlmap){return this._htmlmap[h]}this._htmlmap={};var m=this._dataobj.childNodes;for(var n=0;n<m.length;n++){var l=m[n].getAttribute(this._id);if(l){this._htmlmap[l]=m[n]}}return this._locateHTML(h)},locate:function(c){return dhtmlx.html.locate(c,this._id)},show:function(g){var e=this._locateHTML(g);if(e){this._dataobj.scrollTop=e.offsetTop-this._dataobj.offsetTop}},render:function(n,r,s,o){if(n){var m=this._locateHTML(n);switch(s){case"update":if(!m){return}var u=this._htmlmap[n]=this._toHTMLObject(r);dhtmlx.html.insertBefore(u,m);dhtmlx.html.remove(m);break;case"delete":if(!m){return}dhtmlx.html.remove(m);delete this._htmlmap[n];break;case"add":var u=this._htmlmap[n]=this._toHTMLObject(r);dhtmlx.html.insertBefore(u,this._locateHTML(this.data.next(n)),this._dataobj);break;case"move":this.render(n,r,"delete");this.render(n,r,"add");break;default:dhtmlx.error("Unknown render command: "+s);break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join("");this._htmlmap=null}}this.callEvent("onAfterRender",[])},pager_setter:function(l){this.attachEvent("onBeforeRender",function(){var a=this._settings.pager._settings;if(a.page==-1){return false}this.data.min=a.page*a.size;this.data.max=(a.page+1)*a.size-1;return true});var g=new dhtmlx.ui.pager(l);var h=dhtmlx.bind(function(){this.data.refresh()},this);g.attachEvent("onRefresh",h);this.data.attachEvent("onStoreUpdated",function(a){var c=this.dataCount();if(c!=g._settings.count){g._settings.count=c;if(g._settings.page==-1){g._settings.page=0}g.refresh()}});return g},height_setter:function(c){if(c=="auto"){this.attachEvent("onAfterRender",this._correct_height);dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))}return c},_correct_height:function(){this._dataobj.style.overflow="hidden";this._dataobj.style.height="1px";var e=this._dataobj.scrollHeight;this._dataobj.style.height=e+"px";if(dhtmlx._isFF){var g=this._dataobj.scrollHeight;if(g!=e){this._dataobj.style.height=g+"px"}}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var e=this.type;var g=(e.border||0)+(e.padding||0)*2+(e.margin||0)*2;return{x:e.width+g,y:e.height+g}},x_count_setter:function(l){var h=this._getDimension();var g=dhtmlx.$customScroll?0:18;this._dataobj.style.width=h.x*l+(this._settings.height!="auto"?g:0)+"px";return l},y_count_setter:function(e){var g=this._getDimension();this._dataobj.style.height=g.y*e+"px";return e}};dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first");this._htmlmap={};this._dataobj.style.overflowY="scroll";dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this));dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this));this.data._unrendered_area=[];this.data.getIndexRange=this._getIndexRange},_locateHTML:function(c){return this._htmlmap[c]},show:function(h){range=this._getVisibleRange();var l=this.data.indexById(h);var g=Math.floor(l/range._dx)*range._y;this._dataobj.scrollTop=g},_getIndexRange:function(m,n){if(n!==0){n=Math.min((n||Infinity),this.dataCount()-1)}var l=dhtmlx.toArray();for(var r=(m||0);r<=n;r++){var o=this.item(this.order[r]);if(this.order.length>r){if(!o){this.order[r]=dhtmlx.uid();o={id:this.order[r],$template:"loading"};this._unrendered_area.push(this.order[r])}else{if(o.$template=="loading"){this._unrendered_area.push(this.order[r])}}l.push(o)}}return l},render:function(n,r,s,o){if(n){var m=this._locateHTML(n);switch(s){case"update":if(!m){return}var u=this._htmlmap[n]=this._toHTMLObject(r);dhtmlx.html.insertBefore(u,m);dhtmlx.html.remove(m);break;default:this._render_delayed();break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._htmlmap={};this._render_visible_rows(null,true);this._wait_for_render=false;this.callEvent("onAfterRender",[])}}},_render_delayed:function(){if(this._wait_for_render){return}this._wait_for_render=true;window.setTimeout(dhtmlx.bind(function(){this.render()},this),1)},_create_placeholder:function(e){var g=document.createElement("DIV");g.className="dhxdataview_placeholder";g.style.cssText="height:"+e+"px; width:100%; overflow:hidden;";return g},_render_visible_rows:function(O,J){this.data._unrendered_area=[];var Q=this._getVisibleRange();if(!this._dataobj.firstChild||J){this._dataobj.innerHTML="";this._dataobj.appendChild(this._create_placeholder(Q._max));this._htmlrows=[this._dataobj.firstChild]}var V=Math.max(Q._from,0);var e=(this.data.max||this.data.max===0)?this.data.max:Infinity;while(V<=Q._height){while(this._htmlrows[V]&&this._htmlrows[V]._filled&&V<=Q._height){V++}if(V>Q._height){break}var S=V;while(!this._htmlrows[S]){S--}var Y=this._htmlrows[S];var W=V*Q._dx+(this.data.min||0);if(W>e){break}var U=Math.min(W+Q._dx-1,e);var N=this._create_placeholder(Q._y);var T=this.data.getIndexRange(W,U);if(!T.length){break}N.innerHTML=T.map(this._toHTML,this).join("");for(var H=0;H<T.length;H++){this._htmlmap[this.data.idByIndex(W+H)]=N.childNodes[H]}var h=parseInt(Y.style.height,10);var L=(V-S)*Q._y;var I=(h-L-Q._y);dhtmlx.html.insertBefore(N,L?Y.nextSibling:Y,this._dataobj);this._htmlrows[V]=N;N._filled=true;if(L<=0&&I>0){Y.style.height=I+"px";this._htmlrows[V+1]=Y}else{if(L<0){dhtmlx.html.remove(Y)}else{Y.style.height=L+"px"}if(I>0){var P=this._htmlrows[V+1]=this._create_placeholder(I);dhtmlx.html.insertBefore(P,N.nextSibling,this._dataobj)}}V++}if(this.data._unrendered_area.length){var K=this.indexById(this.data._unrendered_area[0]);var X=this.indexById(this.data._unrendered_area.pop())+1;if(X>K){if(!this.callEvent("onDataRequest",[K,X-K])){return false}dhtmlx.assert(this.data.feed,"Data feed is missed");this.data.feed.call(this,K,X-K)}}if(dhtmlx._isIE){var M=this._getVisibleRange();if(M._from!=Q._from){this._render_visible_rows()}}},_getVisibleRange:function(){var E=dhtmlx.$customScroll?0:18;var x=this._dataobj.scrollTop;var F=this._dataobj.scrollWidth;var w=this._dataobj.offsetHeight;var u=this.type;var C=this._getDimension();var H=Math.floor(F/C.x)||1;var D=Math.floor(x/C.y);var v=Math.ceil((w+x)/C.y)-1;var A=this.data.max?(this.data.max-this.data.min):this.data.dataCount();var y=Math.ceil(A/H)*C.y;return{_from:D,_height:v,_top:x,_max:y,_y:C.y,_dx:H}}};dhtmlXDataView=function(c){this.name="DataView";if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(c,"dhx_dataview");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(c,{drag:false,edit:false,select:"multiselect",type:"default"});if(this._settings.height!="auto"&&!this._settings.renderAll){dhtmlx.extend(this,dhtmlx.VirtualRenderStack)}this.data.provideApi(this,true);if(this.config.autowidth){this.attachEvent("onBeforeRender",function(){this.type.width=Math.floor((this._dataobj.scrollWidth)/(this.config.autowidth*1||1))-this.type.padding*2-this.type.margin*2-this.type.border*2;this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type)});dhtmlx.event(window,"resize",function(){this.refresh()},this)}if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}};dhtmlXDataView.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(v,s){var u=this._locateHTML(v.target);if(this.type.drag_marker){if(this._drag_marker){this._drag_marker.style.backgroundImage="";this._drag_marker.style.backgroundRepeat=""}if(u){u.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")";u.style.backgroundRepeat="no-repeat";this._drag_marker=u}}if(u&&this._settings.auto_scroll){var r=u.offsetTop;var o=u.offsetHeight;var w=this._obj.scrollTop;var n=this._obj.offsetHeight;if(r-o>=0&&r-o*0.75<w){w=Math.max(r-o,0)}else{if(r+o/0.75>w+n){w=w+o}}this._obj.scrollTop=w}return true},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(e,g){if(this.stopEdit(false,g)){if(this._settings.select){if(this._settings.select=="multiselect"){this.select(g,e.ctrlKey,e.shiftKey)}else{this.select(g)}}}}},on_dblclick:{dhx_dataview_item:function(e,g){if(this._settings.nlcz){this.nlcz(g)}}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachDataView=function(e){this.callEvent("_onBeforeContentAttach",["dataview"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";this._attachObject(g);if(typeof(e)=="undefined"){e={}}g.id="DataViewObject_"+new Date().getTime();e.container=g.id;e.skin=this.conf.skin;this.dataType="dataview";this.dataObj=new dhtmlXDataView(e);this.dataObj.setSizes=function(){this.render()};g=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXList=function(c){this.name="List";dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(c,"dhx_list");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this._getDimension=function(){var g=this.type;var a=(g.margin||0)*2;return{x:g.width+a,y:g.height+a}};this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(c,{drag:false,edit:false,select:"multiselect",type:"default"});this.data.provideApi(this,true);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}};dhtmlXList.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(v,s){var u=this._locateHTML(v.target);if(u&&this._settings.auto_scroll){var r=u.offsetTop;var o=u.offsetHeight;var w=this._obj.scrollTop;var n=this._obj.offsetHeight;if(r-o>=0&&r-o*0.75<w){w=Math.max(r-o,0)}else{if(r+o/0.75>w+n){w=w+o}}this._obj.scrollTop=w}return true},_id:"dhx_f_id",on_click:{dhx_list_item:function(e, g){if(this.stopEdit(false,g)){if(this._settings.select){if(this._settings.select=="multiselect"){this.select(g,e.ctrlKey,e.shiftKey)}else{this.select(g)}}}}},on_dblclick:{dhx_list_item:function(e, g){if(this._settings.nlcz){this.nlcz(g)}}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),height:50,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_list_item dhx_list_{obj.css}_item{-obj.$selected?_selected:}' style='width:100%; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachList=function(e){this.callEvent("_onBeforeContentAttach",["list"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";this._attachObject(g);if(typeof(e)=="undefined"){e={}}g.id="ListObject_"+new Date().getTime();e.container=g.id;e.skin=this.conf.skin;this.dataType="list";this.dataObj=new dhtmlXList(e);this.dataObj.setSizes=function(){this.render()};g=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}function xmlPointer(c){this.d=c}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var c=new XMLSerializer();return c.serializeToString(this.d)},get:function(c){return this.d.getAttribute(c)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?(this.d.firstChild.wholeText||this.d.firstChild.data):""},each:function(r,a,c,o){var s=this.d.childNodes;var u=new xmlPointer();if(s.length){for(o=o||0;o<s.length;o++){if(s[o].tagName==r){u.d=s[o];if(a.apply(c,[u,o])==-1){return}}}}},get_all:function(){var h={};var l=this.d.attributes;for(var a=0;a<l.length;a++){h[l[a].name]=l[a].value}return h},sub:function(m){var n=this.d.childNodes;var a=new xmlPointer();if(n.length){for(var c=0;c<n.length;c++){if(n[c].tagName==m){a.d=n[c];return a}}}},up:function(c){return new xmlPointer(this.d.parentNode)},set:function(e,g){this.d.setAttribute(e,g)},clone:function(c){return new xmlPointer(this.d)},sub_exists:function(h){var l=this.d.childNodes;if(l.length){for(var a=0;a<l.length;a++){if(l[a].tagName==h){return true}}}return false},through:function(A,v,a,x,C){var u=this.d.childNodes;if(u.length){for(var y=0;y<u.length;y++){if(u[y].tagName==A&&u[y].getAttribute(v)!=null&&u[y].getAttribute(v)!=""&&(!a||u[y].getAttribute(v)==a)){var w=new xmlPointer(u[y]);x.apply(C,[w,y])}var c=this.d;this.d=u[y];this.through(A,v,a,x,C);this.d=c}}}};function dhtmlXTreeObject(e,r,u,o){if(dhtmlxEvent.initTouch){dhtmlxEvent.initTouch()}if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(n){}}if(typeof(e)!="object"){this.parentObject=document.getElementById(e)}else{this.parentObject=e}this.parentObject.style.overflow="hidden";this._itim_dg=true;this.dlmtr=",";this.dropLower=false;this.enableIEImageFix(true);this.xmlstate=0;this.mytype="tree";this.smcheck=true;this.width=r;this.height=u;this.rootId=o;this.childCalc=null;this.def_img_x="18px";this.def_img_y="18px";this.def_line_img_x="18px";this.def_line_img_y="24px";this._dragged=new Array();this._selected=new Array();this.style_pointer="pointer";this._aimgs=true;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL="";this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this._idpull={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._dynDeleteBranches={};this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif");this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif");this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif");this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif");this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif");this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif");this.cutImg=new Array(0,0,0);this.cutImage="but_cut.gif";dhx4._eventable(this);this.dragger=new dhtmlDragAndDropObject();this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}if(_isFF){this.allTree.childNodes[0].width="100%";this.allTree.childNodes[0].style.overflow="hidden"}var s=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(a){return s._doContClick(a||window.event,true)}}this.allTree.onmousedown=function(a){return s._doContClick(a||window.event)};this.XMLLoader=this._parseXMLTree;if(_isIE){this.preventIECashing(true)}this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML="&nbsp;";this.selectionBar.style.display="none";this.allTree.appendChild(this.selectionBar);if(window.addEventListener){window.addEventListener("unload",function(){try{s.destructor()}catch(a){}},false)}if(window.attachEvent){window.attachEvent("onunload",function(){try{s.destructor()}catch(a){}})}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}this.setSkin(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"dhx_skyblue");return this}dhtmlXTreeObject.prototype.setDataMode=function(c){this._datamode=c};dhtmlXTreeObject.prototype._doContClick=function(u,C){if(!C&&u.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu()}else{this.cMenu._contextEnd()}}return true}var A=(_isIE?u.srcElement:u.target);while((A)&&(A.tagName!="BODY")){if(A.parentObject){break}A=A.parentNode}if((!A)||(!A.parentObject)){return true}var w=A.parentObject;if(!this.callEvent("onRightClick",[w.id,u])){(u.srcElement||u.target).oncontextmenu=function(a){(a||event).cancelBubble=true;return false}}this._acMenu=(w.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent("onBeforeContextMenu",[w.id]))){return true}if(!_isMacOS){(u.srcElement||u.target).oncontextmenu=function(a){(a||event).cancelBubble=true;return false}}if(this._acMenu.showContextMenu){var x=window.document.documentElement;var y=window.document.body;var s=new Array((x.scrollLeft||y.scrollLeft),(x.scrollTop||y.scrollTop));if(_isIE){var r=u.clientX+s[0];var v=u.clientY+s[1]}else{var r=u.pageX;var v=u.pageY}this._acMenu.showContextMenu(r-1,v-1);this.contextID=w.id;u.cancelBubble=true;this._acMenu._skip_hide=true}else{A.contextMenuId=w.id;A.contextMenu=this._acMenu;A.a=this._acMenu._contextStart;A.a(A,u);A.a=null}return false}return true};dhtmlXTreeObject.prototype.enableIEImageFix=function(c){if(!c){this._getImg=function(a){return document.createElement((a==this.rootId)?"div":"img")};this._setSrc=function(a,g){a.src=g};this._getSrc=function(a){return a.src}}else{this._getImg=function(){var a=document.createElement("DIV");a.innerHTML="&nbsp;";a.className="dhx_bg_img_fix";return a};this._setSrc=function(a,g){a.style.backgroundImage="url("+g+")"};this._getSrc=function(g){var a=g.style.backgroundImage;return a.substr(4,a.length-5).replace(/(^")|("$)/g,"")}}};dhtmlXTreeObject.prototype.destructor=function(){for(var g in this._idpull){var a=this._idpull[g];if(!a){continue}a.parentObject=null;a.treeNod=null;a.childNodes=null;a.span=null;a.tr.nodem=null;a.tr=null;a.htmlNode.objBelong=null;a.htmlNode=null;this._idpull[g]=null}this.parentObject.innerHTML="";this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(var g in this){this[g]=null}};function cObject(){return this}cObject.prototype=new Object;cObject.prototype.clone=function(){function c(){}c.prototype=this;return new c()};function dhtmlXTreeItemObject(n,u,s,m,r,o){this.htmlNode="";this.acolor="";this.scolor="";this.tr=0;this.childsCount=0;this.tempDOMM=0;this.tempDOMU=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=m;this.label=u;this.parentObject=s;this.actionHandler=r;this.images=new Array(m.imageArray[0],m.imageArray[1],m.imageArray[2]);this.id=m._globalIdStorageAdd(n,this);if(this.treeNod.checkBoxOff){this.htmlNode=this.treeNod._createItem(1,this,o)}else{this.htmlNode=this.treeNod._createItem(0,this,o)}this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(g,e){if(this._globalIdStorageFind(g,1,1)){g=g+"_"+(new Date()).valueOf();return this._globalIdStorageAdd(g,e)}this._idpull[g]=e;this._pullSize++;return g};dhtmlXTreeObject.prototype._globalIdStorageSub=function(c){if(this._idpull[c]){this._unselectItem(this._idpull[c]);this._idpull[c]=null;this._pullSize--}if((this._locker)&&(this._locker[c])){this._locker[c]=false}};dhtmlXTreeObject.prototype._globalIdStorageFind=function(n,m,s,r){var o=this._idpull[n];if(o){if((o.unParsed)&&(!s)){this.reParse(o,0)}if(this._srnd&&!o.htmlNode){this._buildSRND(o,s)}if((r)&&(this._edsbpsA)){for(var u=0;u<this._edsbpsA.length;u++){if(this._edsbpsA[u][2]==n){dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",n]);return null}}}return o}if((this.slowParse)&&(n!=0)&&(!m)){return this.preParse(n)}else{return null}};dhtmlXTreeObject.prototype._getSubItemsXML=function(e){var g=[];e.each("item",function(a){g.push(a.get("id"))},this);return g.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(c){this.slowParse=dhx4.s2b(c)};dhtmlXTreeObject.prototype.findXML=function(l,g,h){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(n,h,l){var m=[];if(l==2){n.through("item","checked",-1,function(a){m.push(a.get("id"))},this)}if(l==1){n.through("item","id",null,function(a){if(a.get("checked")&&(a.get("checked")!=-1)){m.push(a.get("id"))}},this)}if(l==0){n.through("item","id",null,function(a){if(!a.get("checked")||a.get("checked")==0){m.push(a.get("id"))}},this)}if(m.length){return h+(h?this.dlmtr:"")+m.join(this.dlmtr)}if(h){return h}else{return""}};dhtmlXTreeObject.prototype._setSubCheckedXML=function(g,l){var h=g?"1":"";l.through("item","id",null,function(a){if(!a.get("disabled")||a.get("disabled")==0){a.set("checked",h)}},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(m,h){var l=[];var n=function(a){if(!a.sub_exists("item")){l.push(a.get("id"))}else{a.each("item",n,this)}};n(m);return l.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(m,h){var l=[];var n=function(a){if(!a.sub_exists("item")){return}l.push(a.get("id"));a.each("item",n,this)};n(m);return l.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(h,l,g){var l=[];g.through("item","id",null,function(a){l.push(a.get("id"))},this);return l.join(",")};dhtmlXTreeObject.prototype.reParse=function(y){var v=this;if(!this.parsCount){v.callEvent("onXLS",[v,y.id])}this.xmlstate=1;var x=y.unParsed;y.unParsed=0;this.XMLloadingWarning=1;var C=this.parsingOn;var u=this.waitUpdateXML;var s=this.parsedArray;this.parsedArray=new Array();this.waitUpdateXML=false;this.parsingOn=y.id;this.parsedArray=new Array();this.setCheckList="";this._parse(x,y.id,2);var n=this.setCheckList.split(this.dlmtr);for(var w=0;w<this.parsedArray.length;w++){y.htmlNode.childNodes[0].appendChild(this.parsedArray[w])}if(x.get("order")&&x.get("order")!="none"){this._reorderBranch(y,x.get("order"),true)}this.oldsmcheck=this.smcheck;this.smcheck=false;for(var A=0;A<n.length;A++){if(n[A]){this.setCheck(n[A],1)}}this.smcheck=this.oldsmcheck;this.parsingOn=C;this.waitUpdateXML=u;this.parsedArray=s;this.XMLloadingWarning=0;this._redrawFrom(this,y);if(this._srnd&&!y._sready){this.prepareSR(y.id)}this.xmlstate=0;return true};dhtmlXTreeObject.prototype.preParse=function(l){if(!l||!this._p){return null}var g=false;this._p.clone().through("item","id",l,function(a){this._globalIdStorageFind(a.up().get("id"));return g=true},this);if(g){var h=this._globalIdStorageFind(l,true,false);if(!h){dhx4.callEvent("ongetItemError",["The item "+l+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",l])}}return h};dhtmlXTreeObject.prototype._escape=function(c){switch(this.utfesc){case"none":return c;break;case"utf8":return encodeURIComponent(c);break;default:return escape(c);break}};dhtmlXTreeObject.prototype._drawNewTr=function(m,o){var n=document.createElement("tr");var r=document.createElement("td");var l=document.createElement("td");r.appendChild(document.createTextNode(" "));l.colSpan=3;l.appendChild(m);n.appendChild(r);n.appendChild(l);return n};dhtmlXTreeObject.prototype.parse=function(l,m,h){if(typeof m=="string"){h=m;m=null}if(h==="json"){return this._loadJSONObject(l,m)}else{if(h==="csv"){return this._loadCSVString(l,m)}else{if(h==="jsarray"){return this._loadJSArray(l,m)}}}var n=this;if(!this.parsCount){this.callEvent("onXLS",[n,null])}this.xmlstate=1;this.XMLLoader({responseXML:dhx4.ajax.parse(l)},m)};dhtmlXTreeObject.prototype.loadXMLString=function(){if(window.console&&window.console.info){window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this.parse.apply(this,arguments)};dhtmlXTreeObject.prototype.load=function(r,m,o){if(typeof m=="string"){o=m;m=null}o=o||this._datamode;if(o==="json"){return this._loadJSON(r,m)}else{if(o==="csv"){return this._loadCSV(r,m)}else{if(o==="jsarray"){return this._loadJSArrayFile(xmlString,m)}}}var n=this;if(!this.parsCount){this.callEvent("onXLS",[n,this._ld_id])}this._ld_id=null;this.xmlstate=1;this.XMLLoader=this._parseXMLTree;var l=this;dhx4.ajax.get(r,function(a){l.XMLLoader(a.xmlDoc,m);l=null})};dhtmlXTreeObject.prototype.loadXML=function(){if(window.console&&window.console.info){window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this.load.apply(this,arguments)};dhtmlXTreeObject.prototype._attachChildNode=function(U,V,X,T,M,O,P,Q,Y,J,I){if(J&&J.parentObject){U=J.parentObject}if(((U.XMLload==0)&&(this.XMLsource))&&(!this.XMLloadingWarning)){U.XMLload=1;this._loadDynXML(U.id)}var N=U.childsCount;var L=U.childNodes;if(I&&I.tr.previousSibling){if(I.tr.previousSibling.previousSibling){J=I.tr.previousSibling.nodem}else{Q=Q.replace("TOP","")+",TOP"}}if(J){var W,S;for(W=0;W<N;W++){if(L[W]==J){for(S=N;S!=W;S--){L[1+S]=L[S]}break}}W++;N=W}if(Q){var H=Q.split(",");for(var n=0;n<H.length;n++){switch(H[n]){case"TOP":if(U.childsCount>0){J=new Object;J.tr=U.childNodes[0].tr.previousSibling}U._has_top=true;for(W=N;W>0;W--){L[W]=L[W-1]}N=0;break}}}var K;if(!(K=this._idpull[V])||K.span!=-1){K=L[N]=new dhtmlXTreeItemObject(V,X,U,this,T,1);V=L[N].id;U.childsCount++}if(!K.htmlNode){K.label=X;K.htmlNode=this._createItem((this.checkBoxOff?1:0),K);K.htmlNode.objBelong=K}if(M){K.images[0]=M}if(O){K.images[1]=O}if(P){K.images[2]=P}var Z=this._drawNewTr(K.htmlNode);if((this.XMLloadingWarning)||(this._hAdI)){K.htmlNode.parentNode.parentNode.style.display="none"}if((J)&&J.tr&&(J.tr.nextSibling)){U.htmlNode.childNodes[0].insertBefore(Z,J.tr.nextSibling)}else{if(this.parsingOn==U.id){this.parsedArray[this.parsedArray.length]=Z}else{U.htmlNode.childNodes[0].appendChild(Z)}}if((J)&&(!J.span)){J=null}if(this.XMLsource){if((Y)&&(Y!=0)){K.XMLload=0}else{K.XMLload=1}}K.tr=Z;Z.nodem=K;if(U.itemId==0){Z.childNodes[0].className="hiddenRow"}if((U._r_logic)||(this._frbtr)){this._setSrc(K.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0])}if(Q){var H=Q.split(",");for(var n=0;n<H.length;n++){switch(H[n]){case"SELECT":this.selectItem(V,false);break;case"CALL":this.selectItem(V,true);break;case"CHILD":K.XMLload=0;break;case"CHECKED":if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+V}else{this.setCheck(V,1)}break;case"HCHECKED":this._setCheck(K,"unsure");break;case"OPEN":K.openMe=1;break}}}if(!this.XMLloadingWarning){if((this._getOpenState(U)<0)&&(!this._hAdI)){this.openItem(U.id)}if(J){this._correctPlus(J);this._correctLine(J)}this._correctPlus(U);this._correctLine(U);this._correctPlus(K);if(U.childsCount>=2){this._correctPlus(L[U.childsCount-2]);this._correctLine(L[U.childsCount-2])}if(U.childsCount!=2){this._correctPlus(L[0])}if(this.tscheck){this._correctCheckStates(U)}if(this._onradh){if(this.xmlstate==1){var aa=this.onXLE;this.onXLE=function(a){this._onradh(V);if(aa){aa(a)}}}else{this._onradh(V)}}}return K};dhtmlXTreeObject.prototype.enableContextMenu=function(c){if(c){this.cMenu=c}};dhtmlXTreeObject.prototype.setItemContextMenu=function(m,n){var l=m.toString().split(this.dlmtr);for(var o=0;o<l.length;o++){var r=this._globalIdStorageFind(l[o]);if(!r){continue}r.cMenu=n}};dhtmlXTreeObject.prototype.insertNewItem=function(C,w,u,D,x,y,A,E,F){var H=this._globalIdStorageFind(C);if(!H){return(-1)}var v=this._attachChildNode(H,w,u,D,x,y,A,E,F);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1}if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(H)}return v};dhtmlXTreeObject.prototype.insertNewChild=function(x,s,r,y,u,v,w,A,C){return this.insertNewItem(x,s,r,y,u,v,w,A,C)};dhtmlXTreeObject.prototype._parseXMLTree=function(g,h){var l=new xmlPointer(dhx4.ajax.xmltop("tree",g));this._parse(l);this._p=l;if(h){h.call(this,g)}};dhtmlXTreeObject.prototype._parseItem=function(x, a, y, v){var C;if(this._srnd&&(!this._idpull[C=x.get("id")]||!this._idpull[C].span)){this._addItemSRND(a.id,C,x);return}var w=x.get_all();if((typeof(this.waitUpdateXML)=="object")&&(!this.waitUpdateXML[w.id])){this._parse(x,w.id,1);return}if((w.text===null)||(typeof(w.text)=="undefined")){w.text=x.sub("itemtext");if(w.text){w.text=w.text.content()}}var D=[];if(w.select){D.push("SELECT")}if(w.header){D.push("TOP")}if(w.call){this.nodeAskingCall=w.id}if(w.checked==-1){D.push("HCHECKED")}else{if(w.checked){D.push("CHECKED")}}if(w.open){D.push("OPEN")}if(this.waitUpdateXML){if(this._globalIdStorageFind(w.id)){var c=this.updateItem(w.id,w.text,w.im0,w.im1,w.im2,w.checked,w.child)}else{if(this.npl==0){D.push("TOP")}else{y=a.childNodes[this.npl]}var c=this._attachChildNode(a,w.id,w.text,0,w.im0,w.im1,w.im2,D.join(","),w.child,0,y);w.id=c.id;y=null}}else{var c=this._attachChildNode(a,w.id,w.text,0,w.im0,w.im1,w.im2,D.join(","),w.child,(v||0),y)}if(w.tooltip){c.span.parentNode.parentNode.title=w.tooltip}if(w.style){if(c.span.style.cssText){c.span.style.cssText+=(";"+w.style)}else{c.span.setAttribute("style",c.span.getAttribute("style")+"; "+w.style)}}if(w.radio){c._r_logic=true}if(w.nocheckbox){var E=c.span.parentNode.previousSibling.previousSibling;E.style.display="none";c.nocheckbox=true}if(w.disabled){if(w.checked!=null){this._setCheck(c,w.checked)}this.disableCheckbox(c,1)}c._acc=w.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,x,w,(a?a.id:0))}this.setItemColor(c,w.aCol,w.sCol);if(w.locked=="1"){this.lockItem(c.id,true,true)}if((w.imwidth)||(w.imheight)){this.setIconSize(w.imwidth,w.imheight,c)}if((w.closeable=="0")||(w.closeable=="1")){this.setItemCloseable(c,w.closeable)}var A="";if(w.topoffset){this.setItemTopOffset(c,w.topoffset)}if((!this.slowParse)||(typeof(this.waitUpdateXML)=="object")){if(x.sub_exists("item")){A=this._parse(x,w.id,1)}}else{if((!c.childsCount)&&x.sub_exists("item")){c.unParsed=x.clone()}x.each("userdata",function(e){this.setUserData(w.id,e.get("name"),e.content())},this)}if(A!=""){this.nodeAskingCall=A}x.each("userdata",function(e){this.setUserData(x.get("id"),e.get("name"),e.content())},this)};dhtmlXTreeObject.prototype._parse=function(E,A,H,F){if(this._srnd&&!this.parentObject.offsetHeight){var I=this;return window.setTimeout(function(){I._parse(E,A,H,F)},100)}if(!E.exists()){return}this.skipLock=true;if(!A){A=E.get("id");if(this._dynDeleteBranches[A]){this.deleteChildItems(A);this._dynDeleteBranches[A]--;if(!this._dynDeleteBranches[A]){delete this._dynDeleteBranches[A]}}var K=E.get("dhx_security");if(K){dhtmlx.security_key=K}if(E.get("radio")){this.htmlNode._r_logic=true}this.parsingOn=A;this.parsedArray=new Array();this.setCheckList="";this.nodeAskingCall=""}var J=this._globalIdStorageFind(A);if(!J){return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"])}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((J.childsCount)&&(!F)&&(!this._edsbps)&&(!J._has_top)){var y=0}else{var y=0}this.npl=0;E.each("item",function(a,c){J.XMLload=1;this._parseItem(a,J,0,y);if((this._edsbps)&&(this.npl==this._edsbpsC)){this._distributedStart(E,c+1,A,H,J.childsCount);return -1}this.npl++},this,F);if(!H){E.each("userdata",function(a){this.setUserData(E.get("id"),a.get("name"),a.content())},this);J.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var C=J.childsCount-1;C>=0;C--){if(J.childNodes[C]._dmark){this.deleteItem(J.childNodes[C].id)}}}var n=this._globalIdStorageFind(this.parsingOn);for(var C=0;C<this.parsedArray.length;C++){J.htmlNode.childNodes[0].appendChild(this.parsedArray[C])}this.parsedArray=[];this.lastLoadedXMLId=A;this.XMLloadingWarning=0;var L=this.setCheckList.split(this.dlmtr);for(var D=0;D<L.length;D++){if(L[D]){this.setCheck(L[D],1)}}if((this.XMLsource)&&(this.tscheck)&&(this.smcheck)&&(J.id!=this.rootId)){if(J.checkstate===0){this._setSubChecked(0,J)}else{if(J.checkstate===1){this._setSubChecked(1,J)}}}this._redrawFrom(this,null,F);if(E.get("order")&&E.get("order")!="none"){this._reorderBranch(J,E.get("order"),true)}if(this.nodeAskingCall!=""){this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()])}if(this._branchUpdate){this._branchUpdateNext(E)}}if(this.parsCount==1){this.parsingOn=null;if(this._srnd&&J.id!=this.rootId){this.prepareSR(J.id);if(this.XMLsource){this.openItem(J.id)}}E.through("item","open",null,function(a){this.openItem(a.get("id"))},this);if((!this._edsbps)||(!this._edsbpsA.length)){var x=this;window.setTimeout(function(){x.callEvent("onXLE",[x,A])},1);this.xmlstate=0}this.skipLock=false}this.parsCount--;var x=this;if(this._edsbps){window.setTimeout(function(){x._distributedStep(A)},this._edsbpsD)}if(!H&&this.onXLE){this.onXLE(this,A)}return this.nodeAskingCall};dhtmlXTreeObject.prototype._branchUpdateNext=function(c){c.each("item",function(a){var h=a.get("id");if(this._idpull[h]&&(!this._idpull[h].XMLload)){return}this._branchUpdate++;this.smartRefreshItem(a.get("id"),a)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(l,h){if((l.nodeType==1)&&(l.tagName=="userdata")){var g=l.getAttribute("name");if((g)&&(l.childNodes[0])){this.setUserData(h,g,l.childNodes[0].data)}}};dhtmlXTreeObject.prototype._redrawFrom=function(y,x,o,w){if(!x){var u=y._globalIdStorageFind(y.lastLoadedXMLId);y.lastLoadedXMLId=-1;if(!u){return 0}}else{u=x}var s=0;for(var v=(o?o-1:0);v<u.childsCount;v++){if((!this._branchUpdate)||(this._getOpenState(u)==1)){if((!x)||(w==1)){u.childNodes[v].htmlNode.parentNode.parentNode.style.display=""}}if(u.childNodes[v].openMe==1){this._openItem(u.childNodes[v]);u.childNodes[v].openMe=0}y._redrawFrom(y,u.childNodes[v]);if(this.childCalc!=null){if((u.childNodes[v].unParsed)||((!u.childNodes[v].XMLload)&&(this.XMLsource))){if(u.childNodes[v]._acc){u.childNodes[v].span.innerHTML=u.childNodes[v].label+this.htmlcA+u.childNodes[v]._acc+this.htmlcB}else{u.childNodes[v].span.innerHTML=u.childNodes[v].label}}if((u.childNodes[v].childNodes.length)&&(this.childCalc)){if(this.childCalc==1){u.childNodes[v].span.innerHTML=u.childNodes[v].label+this.htmlcA+u.childNodes[v].childsCount+this.htmlcB}if(this.childCalc==2){var r=u.childNodes[v].childsCount-(u.childNodes[v].pureChilds||0);if(r){u.childNodes[v].span.innerHTML=u.childNodes[v].label+this.htmlcA+r+this.htmlcB}if(u.pureChilds){u.pureChilds++}else{u.pureChilds=1}}if(this.childCalc==3){u.childNodes[v].span.innerHTML=u.childNodes[v].label+this.htmlcA+u.childNodes[v]._acc+this.htmlcB}if(this.childCalc==4){var r=u.childNodes[v]._acc;if(r){u.childNodes[v].span.innerHTML=u.childNodes[v].label+this.htmlcA+r+this.htmlcB}}}else{if(this.childCalc==4){s++}}s+=u.childNodes[v]._acc;if(this.childCalc==3){s++}}}if((!u.unParsed)&&((u.XMLload)||(!this.XMLsource))){u._acc=s}y._correctLine(u);y._correctPlus(u);if((this.childCalc)&&(!x)){y._fixChildCountLabel(u)}};dhtmlXTreeObject.prototype._createSelf=function(){var c=document.createElement("div");c.className="containerTableStyle";c.style.width=this.width;c.style.height=this.height;this.parentObject.appendChild(c);return c};dhtmlXTreeObject.prototype._xcloseAll=function(n){if(n.unParsed){return}if(this.rootId!=n.id){if(!n.htmlNode){return}var l=n.htmlNode.childNodes[0].childNodes;var h=l.length;for(var m=1;m<h;m++){l[m].style.display="none"}this._correctPlus(n)}for(var m=0;m<n.childsCount;m++){if(n.childNodes[m].childsCount){this._xcloseAll(n.childNodes[m])}}};dhtmlXTreeObject.prototype._xopenAll=function(e){this._HideShow(e,2);for(var g=0;g<e.childsCount;g++){this._xopenAll(e.childNodes[g])}};dhtmlXTreeObject.prototype._correctPlus=function(r){if(!r.htmlNode){return}var o=r.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild;var m=r.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var l=this.lineArray;if((this.XMLsource)&&(!r.XMLload)){var l=this.plusArray;this._setSrc(m,this.iconURL+r.images[2]);if(this._txtimg){return(o.innerHTML="[+]")}}else{if((r.childsCount)||(r.unParsed)){if((r.htmlNode.childNodes[0].childNodes[1])&&(r.htmlNode.childNodes[0].childNodes[1].style.display!="none")){if(!r.wsign){var l=this.minusArray}this._setSrc(m,this.iconURL+r.images[1]);if(this._txtimg){return(o.innerHTML="[-]")}}else{if(!r.wsign){var l=this.plusArray}this._setSrc(m,this.iconURL+r.images[2]);if(this._txtimg){return(o.innerHTML="[+]")}}}else{this._setSrc(m,this.iconURL+r.images[0])}}var n=2;if(!r.treeNod.treeLinesOn){this._setSrc(o,this.imPath+l[3])}else{if(r.parentObject){n=this._getCountStatus(r.id,r.parentObject)}this._setSrc(o,this.imPath+l[n])}};dhtmlXTreeObject.prototype._correctLine=function(l){if(!l.htmlNode){return}var g=l.parentObject;if(g){if((this._getLineStatus(l.id,g)==0)||(!this.treeLinesOn)){for(var h=1;h<=l.childsCount;h++){if(!l.htmlNode.childNodes[0].childNodes[h]){break}l.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundImage="";l.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundRepeat=""}}else{for(var h=1;h<=l.childsCount;h++){if(!l.htmlNode.childNodes[0].childNodes[h]){break}l.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";l.htmlNode.childNodes[0].childNodes[h].childNodes[0].style.backgroundRepeat="repeat-y"}}}};dhtmlXTreeObject.prototype._getCountStatus=function(g,e){if(e.childsCount<=1){if(e.id==this.rootId){return 4}else{return 0}}if(e.childNodes[0].id==g){if(e.id==this.rootId){return 2}else{return 1}}if(e.childNodes[e.childsCount-1].id==g){return 0}return 1};dhtmlXTreeObject.prototype._getLineStatus=function(g,e){if(e.childNodes[e.childsCount-1].id==g){return 0}return 1};dhtmlXTreeObject.prototype._HideShow=function(r,m){if((this.XMLsource)&&(!r.XMLload)){if(m==1){return}r.XMLload=1;this._loadDynXML(r.id);return}if(r.unParsed){this.reParse(r)}var n=r.htmlNode.childNodes[0].childNodes;var l=n.length;if(l>1){if(((n[1].style.display!="none")||(m==1))&&(m!=2)){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";nodestyle="none"}else{nodestyle=""}for(var o=1;o<l;o++){n[o].style.display=nodestyle}}this._correctPlus(r)};dhtmlXTreeObject.prototype._getOpenState=function(e){if(!e.htmlNode){return 0}var g=e.htmlNode.childNodes[0].childNodes;if(g.length<=1){return 0}if(g[1].style.display!="none"){return 1}else{return -1}};dhtmlXTreeObject.prototype.onRowClick2=function(){var c=this.parentObject.treeNod;if(!c.callEvent("onDblClick",[this.parentObject.id,c])){return false}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){c._HideShow(this.parentObject)}else{c._HideShow(this.parentObject,2)}if(c.checkEvent("onOpenEnd")){if(!c.xmlstate){c.callEvent("onOpenEnd",[this.parentObject.id,c._getOpenState(this.parentObject)])}else{c._oie_onXLE.push(c.onXLE);c.onXLE=c._epnFHe}}return false};dhtmlXTreeObject.prototype.onRowClick=function(){var c=this.parentObject.treeNod;if(!c.callEvent("onOpenStart",[this.parentObject.id,c._getOpenState(this.parentObject)])){return 0}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){c._HideShow(this.parentObject)}else{c._HideShow(this.parentObject,2)}if(c.checkEvent("onOpenEnd")){if(!c.xmlstate){c.callEvent("onOpenEnd",[this.parentObject.id,c._getOpenState(this.parentObject)])}else{c._oie_onXLE.push(c.onXLE);c.onXLE=c._epnFHe}}};dhtmlXTreeObject.prototype._epnFHe=function(l,h,g){if(h!=this.rootId){this.callEvent("onOpenEnd",[h,l.getOpenState(h)])}l.onXLE=l._oie_onXLE.pop();if(!g&&!l._oie_onXLE.length){if(l.onXLE){l.onXLE(l,h)}}};dhtmlXTreeObject.prototype.onRowClickDown=function(g){g=g||window.event;var e=this.parentObject.treeNod;e._selectItem(this.parentObject,g)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){var g=new Array();for(var e=0;e<this._selected.length;e++){g[e]=this._selected[e].id}return(g.join(this.dlmtr))};dhtmlXTreeObject.prototype._selectItem=function(a,w){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}if((!this._amsel)||(!w)||((!w.ctrlKey)&&(!w.metaKey)&&(!w.shiftKey))){this._unselectItems()}if((a.i_sel)&&(this._amsel)&&(w)&&(w.ctrlKey||w.metaKey)){this._unselectItem(a)}else{if((!a.i_sel)&&((!this._amselS)||(this._selected.length==0)||(this._selected[0].parentObject==a.parentObject))){if((this._amsel)&&(w)&&(w.shiftKey)&&(this._selected.length!=0)&&(this._selected[this._selected.length-1].parentObject==a.parentObject)){var e=this._getIndex(this._selected[this._selected.length-1]);var u=this._getIndex(a);if(u<e){var s=e;e=u;u=s}for(var c=e;c<=u;c++){if(!a.parentObject.childNodes[c].i_sel){this._markItem(a.parentObject.childNodes[c])}}}else{this._markItem(a)}}}if(this.checkEvent("onSelect")){var v=this.getSelectedItemId();if(v!=this._onSSCFold){this.callEvent("onSelect",[v])}}};dhtmlXTreeObject.prototype._markItem=function(c){if(c.scolor){c.span.style.color=c.scolor}c.span.className="selectedTreeRow";c.i_sel=true;this._selected[this._selected.length]=c};dhtmlXTreeObject.prototype.getIndexById=function(g){var e=this._globalIdStorageFind(g);if(!e){return null}return this._getIndex(e)};dhtmlXTreeObject.prototype._getIndex=function(g){var h=g.parentObject;for(var l=0;l<h.childsCount;l++){if(h.childNodes[l]==g){return l}}};dhtmlXTreeObject.prototype._unselectItem=function(g){if((g)&&(g.i_sel)){g.span.className="standartTreeRow";if(g.acolor){g.span.style.color=g.acolor}g.i_sel=false;for(var e=0;e<this._selected.length;e++){if(!this._selected[e].i_sel){this._selected.splice(e,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var e=0;e<this._selected.length;e++){var g=this._selected[e];g.span.className="standartTreeRow";if(g.acolor){g.span.style.color=g.acolor}g.i_sel=false}this._selected=new Array()};dhtmlXTreeObject.prototype.onRowSelect=function(r,s,e){r=r||window.event;var u=this.parentObject;if(s){u=s.parentObject}var o=u.treeNod;var n=o.getSelectedItemId();if((!r)||(!r.skipUnSel)){o._selectItem(u,r)}if(!e){if(u.actionHandler){u.actionHandler(u.id,n)}else{o.callEvent("onClick",[u.id,n])}}};dhtmlXTreeObject.prototype._correctCheckStates=function(m){if(!this.tscheck){return}if(!m){return}if(m.id==this.rootId){return}var o=m.childNodes;var r=0;var l=0;if(m.childsCount==0){return}for(var n=0;n<m.childsCount;n++){if(o[n].dscheck){continue}if(o[n].checkstate==0){r=1}else{if(o[n].checkstate==1){l=1}else{r=1;l=1;break}}}if((r)&&(l)){this._setCheck(m,"unsure")}else{if(r){this._setCheck(m,false)}else{this._setCheck(m,true)}}this._correctCheckStates(m.parentObject)};dhtmlXTreeObject.prototype.onCheckBoxClick=function(c){if(!this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){return}if(this.parentObject.dscheck){return true}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject)}else{this.treeNod._setSubChecked(true,this.parentObject)}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false)}else{this.treeNod._setCheck(this.parentObject,true)}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])};dhtmlXTreeObject.prototype._createItem=function(K,L,y){var J=document.createElement("table");J.cellSpacing=0;J.cellPadding=0;J.border=0;if(this.hfMode){J.style.tableLayout="fixed"}J.style.margin=0;J.style.padding=0;var A=document.createElement("tbody");var w=document.createElement("tr");var E=document.createElement("td");E.className="standartTreeImage";if(this._txtimg){var D=document.createElement("div");E.appendChild(D);D.className="dhx_tree_textSign"}else{var D=this._getImg(L.id);D.border="0";if(D.tagName=="IMG"){D.align="absmiddle"}E.appendChild(D);D.style.padding=0;D.style.margin=0;D.style.width=this.def_line_img_x}var F=document.createElement("td");var x=this._getImg(this.cBROf?this.rootId:L.id);x.checked=0;this._setSrc(x,this.imPath+this.checkArray[0]);x.style.width="18px";x.style.height="18px";if(!K){F.style.display="none"}F.appendChild(x);if((!this.cBROf)&&(x.tagName=="IMG")){x.align="absmiddle"}x.onclick=this.onCheckBoxClick;x.treeNod=this;x.parentObject=L;if(!window._KHTMLrv){F.width="20px"}else{F.width="16px"}var H=document.createElement("td");H.className="standartTreeImage";var C=this._getImg(this.timgen?L.id:this.rootId);C.onmousedown=this._preventNsDrag;C.ondragstart=this._preventNsDrag;C.border="0";if(this._aimgs){C.parentObject=L;if(C.tagName=="IMG"){C.align="absmiddle"}C.onclick=this.onRowSelect}if(!y){this._setSrc(C,this.iconURL+this.imageArray[0])}H.appendChild(C);C.style.padding=0;C.style.margin=0;if(this.timgen){H.style.width=C.style.width=this.def_img_x;C.style.height=this.def_img_y}else{C.style.width="0px";C.style.height="0px";if(_isOpera||window._KHTMLrv){H.style.display="none"}}var I=document.createElement("td");I.className="standartTreeRow";L.span=document.createElement("span");L.span.className="standartTreeRow";if(this.mlitems){L.span.style.width=this.mlitems;L.span.style.display="block"}else{I.noWrap=true}if(dhx4.isIE8){I.style.width="99999px"}else{if(!window._KHTMLrv){I.style.width="100%"}}L.span.innerHTML=L.label;I.appendChild(L.span);I.parentObject=L;E.parentObject=L;I.onclick=this.onRowSelect;E.onclick=this.onRowClick;I.ondblclick=this.onRowClick2;if(this.ettip){w.title=L.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(H,this);H.parentObject=L}this.dragger.addDraggableItem(I,this)}L.span.style.paddingLeft="5px";L.span.style.paddingRight="5px";I.style.verticalAlign="";I.style.fontSize="10pt";I.style.cursor=this.style_pointer;w.appendChild(E);w.appendChild(F);w.appendChild(H);w.appendChild(I);A.appendChild(w);J.appendChild(A);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){w.onmousemove=this._itemMouseIn;w[(_isIE)?"onmouseleave":"onmouseout"]=this._itemMouseOut}return J};dhtmlXTreeObject.prototype.setImagePath=function(c){this.imPath=c;this.iconURL=c};dhtmlXTreeObject.prototype.setIconPath=function(c){this.iconURL=c};dhtmlXTreeObject.prototype._getLeafCount=function(a){var h=0;for(var l=0;l<a.childsCount;l++){if(a.childNodes[l].childsCount==0){h++}}return h};dhtmlXTreeObject.prototype._getChildCounterValue=function(g){var e=this._globalIdStorageFind(g);if(!e){return 0}if((e.unParsed)||((!e.XMLload)&&(this.XMLsource))){return e._acc}switch(this.childCalc){case 1:return e.childsCount;break;case 2:return this._getLeafCount(e);break;case 3:return e._acc;break;case 4:return e._acc;break}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(a,n){if(this.childCalc==null){return}if((a.unParsed)||((!a.XMLload)&&(this.XMLsource))){if(a._acc){a.span.innerHTML=a.label+this.htmlcA+a._acc+this.htmlcB}else{a.span.innerHTML=a.label}return}switch(this.childCalc){case 1:if(a.childsCount!=0){a.span.innerHTML=a.label+this.htmlcA+a.childsCount+this.htmlcB}else{a.span.innerHTML=a.label}break;case 2:var m=this._getLeafCount(a);if(m!=0){a.span.innerHTML=a.label+this.htmlcA+m+this.htmlcB}else{a.span.innerHTML=a.label}break;case 3:if(a.childsCount!=0){var o=0;for(var r=0;r<a.childsCount;r++){if(!a.childNodes[r]._acc){a.childNodes[r]._acc=0}o+=a.childNodes[r]._acc*1}o+=a.childsCount*1;a.span.innerHTML=a.label+this.htmlcA+o+this.htmlcB;a._acc=o}else{a.span.innerHTML=a.label;a._acc=0}if((a.parentObject)&&(a.parentObject!=this.htmlNode)){this._fixChildCountLabel(a.parentObject)}break;case 4:if(a.childsCount!=0){var o=0;for(var r=0;r<a.childsCount;r++){if(!a.childNodes[r]._acc){a.childNodes[r]._acc=1}o+=a.childNodes[r]._acc*1}a.span.innerHTML=a.label+this.htmlcA+o+this.htmlcB;a._acc=o}else{a.span.innerHTML=a.label;a._acc=1}if((a.parentObject)&&(a.parentObject!=this.htmlNode)){this._fixChildCountLabel(a.parentObject)}break}};dhtmlXTreeObject.prototype.setChildCalcMode=function(c){switch(c){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(g,e){this.htmlcA=g;this.htmlcB=e};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(c){this.attachEvent("onRightClick",c)};dhtmlXTreeObject.prototype.setOnClickHandler=function(c){this.attachEvent("onClick",c)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(c){this.attachEvent("onSelect",c)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(c){this.XMLsource=c};dhtmlXTreeObject.prototype.setOnCheckHandler=function(c){this.attachEvent("onCheck",c)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(c){this.attachEvent("onOpenStart",c)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(c){this.attachEvent("onOpenStart",c)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(c){this.attachEvent("onOpenEnd",c)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(c){this.attachEvent("onDblClick",c)};dhtmlXTreeObject.prototype.openAllItems=function(g){var e=this._globalIdStorageFind(g);if(!e){return 0}this._xopenAll(e)};dhtmlXTreeObject.prototype.getOpenState=function(g){var e=this._globalIdStorageFind(g);if(!e){return""}return this._getOpenState(e)};dhtmlXTreeObject.prototype.closeAllItems=function(g){if(g===window.undefined){g=this.rootId}var e=this._globalIdStorageFind(g);if(!e){return 0}this._xcloseAll(e);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(l,n,m){var h=this._globalIdStorageFind(l,0,true);if(!h){return}if(n=="hint"){h.htmlNode.childNodes[0].childNodes[0].title=m}if(typeof(h.userData["t_"+n])=="undefined"){if(!h._userdatalist){h._userdatalist=n}else{h._userdatalist+=","+n}}h.userData["t_"+n]=m};dhtmlXTreeObject.prototype.getUserData=function(h,l){var g=this._globalIdStorageFind(h,0,true);if(!g){return}return g.userData["t_"+l]};dhtmlXTreeObject.prototype.getItemColor=function(h){var g=this._globalIdStorageFind(h);if(!g){return 0}var l=new Object();if(g.acolor){l.acolor=g.acolor}if(g.scolor){l.scolor=g.scolor}return l};dhtmlXTreeObject.prototype.setItemColor=function(m,n,l){if((m)&&(m.span)){var h=m}else{var h=this._globalIdStorageFind(m)}if(!h){return 0}else{if(h.i_sel){if(l){h.span.style.color=l}}else{if(n){h.span.style.color=n}}if(l){h.scolor=l}if(n){h.acolor=n}}};dhtmlXTreeObject.prototype.getItemText=function(g){var e=this._globalIdStorageFind(g);if(!e){return 0}return(e.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML)};dhtmlXTreeObject.prototype.getParentId=function(g){var e=this._globalIdStorageFind(g);if((!e)||(!e.parentObject)){return""}return e.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(l,h){if(l==h){return}var g=this._globalIdStorageFind(l);if(!g){return 0}g.id=h;g.span.contextMenuId=h;this._idpull[h]=this._idpull[l];delete this._idpull[l]};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut()}this.nodeCut=(new Array()).concat(this._selected);for(var e=0;e<this.nodeCut.length;e++){var g=this.nodeCut[e];g._cimgs=new Array();g._cimgs[0]=g.images[0];g._cimgs[1]=g.images[1];g._cimgs[2]=g.images[2];g.images[0]=g.images[1]=g.images[2]=this.cutImage;this._correctPlus(g)}};dhtmlXTreeObject.prototype.doPaste=function(h){var g=this._globalIdStorageFind(h);if(!g){return 0}for(var l=0;l<this.nodeCut.length;l++){if(this._checkPNodes(g,this.nodeCut[l])){continue}this._moveNode(this.nodeCut[l],g)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var e=0;e<this.nodeCut.length;e++){var g=this.nodeCut[e];g.images[0]=g._cimgs[0];g.images[1]=g._cimgs[1];g.images[2]=g._cimgs[2];this._correctPlus(g)}this.nodeCut=new Array()};dhtmlXTreeObject.prototype._moveNode=function(n,u){var m=this.dadmodec;if(m==1){var o=u;if(this.dadmodefix<0){while(true){o=this._getPrevNode(o);if((o==-1)){o=this.htmlNode;break}if((o.tr==0)||(o.tr.style.display=="")||(!o.parentObject)){break}}var r=o;var s=u}else{if((o.tr)&&(o.tr.nextSibling)&&(o.tr.nextSibling.nodem)&&(this._getOpenState(o)<1)){o=o.tr.nextSibling.nodem}else{o=this._getNextNode(o);if((o==-1)){o=this.htmlNode}}var s=o;var r=u}if(this._getNodeLevel(r,0)>this._getNodeLevel(s,0)){if(!this.dropLower){return this._moveNodeTo(n,r.parentObject)}else{if(s.id!=this.rootId){return this._moveNodeTo(n,s.parentObject,s)}else{return this._moveNodeTo(n,this.htmlNode,null)}}}else{return this._moveNodeTo(n,s.parentObject,s)}}else{return this._moveNodeTo(n,u)}};dhtmlXTreeObject.prototype._fixNodesCollection=function(y,s){var x=0;var v=0;var o=y.childNodes;var r=y.childsCount-1;if(s==o[r]){return}for(var u=0;u<r;u++){if(o[u]==o[r]){o[u]=o[u+1];o[u+1]=o[r]}}for(var u=0;u<r+1;u++){if(x){var w=o[u];o[u]=x;x=w}else{if(o[u]==s){x=o[u];o[u]=o[r]}}}};dhtmlXTreeObject.prototype._recreateBranch=function(v,s,w,C){var A;var r="";if(w){for(A=0;A<s.childsCount;A++){if(s.childNodes[A]==w){break}}if(A!=0){w=s.childNodes[A-1]}else{r="TOP";w=""}}var y=this._onradh;this._onradh=null;var u=this._attachChildNode(s,v.id,v.label,0,v.images[0],v.images[1],v.images[2],r,0,w);u._userdatalist=v._userdatalist;u.userData=v.userData.clone();if(v._attrs){u._attrs={};for(var x in v._attrs){u._attrs[x]=v._attrs[x]}}u.XMLload=v.XMLload;if(y){this._onradh=y;this._onradh(u.id)}if(v.treeNod.dpcpy){v.treeNod._globalIdStorageFind(v.id)}else{u.unParsed=v.unParsed}this._correctPlus(u);for(var A=0;A<v.childsCount;A++){this._recreateBranch(v.childNodes[A],u,0,1)}if((!C)&&(this.childCalc)){this._redrawFrom(this,s)}return u};dhtmlXTreeObject.prototype._moveNodeTo=function(K,I,L){if(K.treeNod._nonTrivialNode){return K.treeNod._nonTrivialNode(this,I,L,K)}if(this._checkPNodes(I,K)){return false}if(I.mytype){var A=(K.treeNod.lWin!=I.lWin)}else{var A=(K.treeNod.lWin!=I.treeNod.lWin)}if(!this.callEvent("onDrag",[K.id,I.id,(L?L.id:null),K.treeNod,I.treeNod])){return false}if((I.XMLload==0)&&(this.XMLsource)){I.XMLload=1;this._loadDynXML(I.id)}this.openItem(I.id);var F=K.treeNod;var x=K.parentObject.childsCount;var c=K.parentObject;if((A)||(F.dpcpy)){var E=K.id;K=this._recreateBranch(K,I,L);if(!F.dpcpy){F.deleteItem(E)}}else{var D=I.childsCount;var J=I.childNodes;if(D==0){I._open=true}F._unselectItem(K);J[D]=K;K.treeNod=I.treeNod;I.childsCount++;var y=this._drawNewTr(J[D].htmlNode);if(!L){I.htmlNode.childNodes[0].appendChild(y);if(this.dadmode==1){this._fixNodesCollection(I,L)}}else{I.htmlNode.childNodes[0].insertBefore(y,L.tr);this._fixNodesCollection(I,L);J=I.childNodes}}if((!F.dpcpy)&&(!A)){var H=K.tr;if((document.all)&&(navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1)){window.setTimeout(function(){H.parentNode.removeChild(H)},250)}else{K.parentObject.htmlNode.childNodes[0].removeChild(K.tr)}if((!L)||(I!=K.parentObject)){for(var C=0;C<c.childsCount;C++){if(c.childNodes[C].id==K.id){c.childNodes[C]=0;break}}}else{c.childNodes[c.childsCount-1]=0}F._compressChildList(c.childsCount,c.childNodes);c.childsCount--}if((!A)&&(!F.dpcpy)){K.tr=y;y.nodem=K;K.parentObject=I;if(F!=I.treeNod){if(K.treeNod._registerBranch(K,F)){return}this._clearStyles(K);this._redrawFrom(this,K.parentObject);if(this._onradh){this._onradh(K.id)}}this._correctPlus(I);this._correctLine(I);this._correctLine(K);this._correctPlus(K);if(L){this._correctPlus(L)}else{if(I.childsCount>=2){this._correctPlus(J[I.childsCount-2]);this._correctLine(J[I.childsCount-2])}}this._correctPlus(J[I.childsCount-1]);if(this.tscheck){this._correctCheckStates(I)}if(F.tscheck){F._correctCheckStates(c)}}if(x>1){F._correctPlus(c.childNodes[x-2]);F._correctLine(c.childNodes[x-2])}F._correctPlus(c);F._correctLine(c);this._fixChildCountLabel(I);F._fixChildCountLabel(c);this.callEvent("onDrop",[K.id,I.id,(L?L.id:null),F,I.treeNod]);return K.id};dhtmlXTreeObject.prototype._clearStyles=function(h){if(!h.htmlNode){return}var l=h.htmlNode.childNodes[0].childNodes[0].childNodes[1];var n=l.nextSibling.nextSibling;h.span.innerHTML=h.label;h.i_sel=false;if(h._aimgs){this.dragger.removeDraggableItem(l.nextSibling)}if(this.checkBoxOff){l.childNodes[0].style.display="";l.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(l.childNodes[0],this.imPath+this.checkArray[h.checkstate])}else{l.style.display="none"}l.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(n);if(this.dragAndDropOff){this.dragger.addDraggableItem(n,this)}if(this._aimgs){this.dragger.addDraggableItem(l.nextSibling,this)}n.childNodes[0].className="standartTreeRow";n.onclick=this.onRowSelect;n.ondblclick=this.onRowClick2;l.previousSibling.onclick=this.onRowClick;this._correctLine(h);this._correctPlus(h);for(var m=0;m<h.childsCount;m++){this._clearStyles(h.childNodes[m])}};dhtmlXTreeObject.prototype._registerBranch=function(l,g){if(g){g._globalIdStorageSub(l.id)}l.id=this._globalIdStorageAdd(l.id,l);l.treeNod=this;for(var h=0;h<l.childsCount;h++){this._registerBranch(l.childNodes[h],g)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(c){this.tscheck=dhx4.s2b(c)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(c){this.ehlt=true;this.attachEvent("onMouseIn",c)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(c){this.ehlt=true;this.attachEvent("onMouseOut",c)};dhtmlXTreeObject.prototype.enableMercyDrag=function(c){this.dpcpy=dhx4.s2b(c)};dhtmlXTreeObject.prototype.enableTreeImages=function(c){this.timgen=dhx4.s2b(c)};dhtmlXTreeObject.prototype.enableFixedMode=function(c){this.hfMode=dhx4.s2b(c)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(g,e){this.checkBoxOff=dhx4.s2b(g);this.cBROf=(!(this.checkBoxOff||dhx4.s2b(e)))};dhtmlXTreeObject.prototype.setStdImages=function(g,h,l){this.imageArray[0]=g;this.imageArray[1]=h;this.imageArray[2]=l};dhtmlXTreeObject.prototype.enableTreeLines=function(c){this.treeLinesOn=dhx4.s2b(c)};dhtmlXTreeObject.prototype.setImageArrays=function(r,n,m,o,s,u){switch(r){case"plus":this.plusArray[0]=n;this.plusArray[1]=m;this.plusArray[2]=o;this.plusArray[3]=s;this.plusArray[4]=u;break;case"minus":this.minusArray[0]=n;this.minusArray[1]=m;this.minusArray[2]=o;this.minusArray[3]=s;this.minusArray[4]=u;break}};dhtmlXTreeObject.prototype.openItem=function(g){this.skipLock=true;var e=this._globalIdStorageFind(g);if(!e){return 0}else{return this._openItem(e)}this.skipLock=false};dhtmlXTreeObject.prototype._openItem=function(e){var g=this._getOpenState(e);if((g<0)||(((this.XMLsource)&&(!e.XMLload)))){if(!this.callEvent("onOpenStart",[e.id,g])){return 0}this._HideShow(e,2);if(this.checkEvent("onOpenEnd")){if(this.onXLE==this._epnFHe){this._epnFHe(this,e.id,true)}if(!this.xmlstate||!this.XMLsource){this.callEvent("onOpenEnd",[e.id,this._getOpenState(e)])}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe}}}else{if(this._srnd){this._HideShow(e,2)}}if(e.parentObject&&!this._skip_open_parent){this._openItem(e.parentObject)}};dhtmlXTreeObject.prototype.closeItem=function(g){if(this.rootId==g){return 0}this.skipLock=true;var e=this._globalIdStorageFind(g);if(!e){return 0}if(e.closeble){this._HideShow(e,1)}this.skipLock=false};dhtmlXTreeObject.prototype.getLevel=function(g){var e=this._globalIdStorageFind(g);if(!e){return 0}return this._getNodeLevel(e,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(h,g){g=dhx4.s2b(g);if((h)&&(h.span)){var l=h}else{var l=this._globalIdStorageFind(h)}if(!l){return 0}l.closeble=g};dhtmlXTreeObject.prototype._getNodeLevel=function(e,g){if(e.parentObject){return this._getNodeLevel(e.parentObject,g+1)}return(g)};dhtmlXTreeObject.prototype.hasChildren=function(g){var e=this._globalIdStorageFind(g);if(!e){return 0}else{if((this.XMLsource)&&(!e.XMLload)){return true}else{return e.childsCount}}};dhtmlXTreeObject.prototype._getLeafCount=function(a){var h=0;for(var l=0;l<a.childsCount;l++){if(a.childNodes[l].childsCount==0){h++}}return h};dhtmlXTreeObject.prototype.setItemText=function(l,m,n){var h=this._globalIdStorageFind(l);if(!h){return 0}h.label=m;h.span.innerHTML=m;if(this.childCalc){this._fixChildCountLabel(h)}h.span.parentNode.parentNode.title=n||""};dhtmlXTreeObject.prototype.getItemTooltip=function(g){var e=this._globalIdStorageFind(g);if(!e){return""}return(e.span.parentNode.parentNode._dhx_title||e.span.parentNode.parentNode.title||"")};dhtmlXTreeObject.prototype.refreshItem=function(g){if(!g){g=this.rootId}var e=this._globalIdStorageFind(g);this._dynDeleteBranches[g]=(this._dynDeleteBranches[g]||0)+1;this._loadDynXML(g)};dhtmlXTreeObject.prototype.setItemImage2=function(n,l,m,o){var r=this._globalIdStorageFind(n);if(!r){return 0}r.images[1]=m;r.images[2]=o;r.images[0]=l;this._correctPlus(r)};dhtmlXTreeObject.prototype.setItemImage=function(m,h,l){var n=this._globalIdStorageFind(m);if(!n){return 0}if(l){n.images[1]=h;n.images[2]=l}else{n.images[0]=h}this._correctPlus(n)};dhtmlXTreeObject.prototype.getSubItems=function(h){var g=this._globalIdStorageFind(h,0,1);if(!g){return 0}if(g.unParsed){return(this._getSubItemsXML(g.unParsed))}var l="";for(i=0;i<g.childsCount;i++){if(!l){l=""+g.childNodes[i].id}else{l+=this.dlmtr+g.childNodes[i].id}}return l};dhtmlXTreeObject.prototype._getAllScraggyItems=function(m){var l="";for(var n=0;n<m.childsCount;n++){if((m.childNodes[n].unParsed)||(m.childNodes[n].childsCount>0)){if(m.childNodes[n].unParsed){var h=this._getAllScraggyItemsXML(m.childNodes[n].unParsed,1)}else{var h=this._getAllScraggyItems(m.childNodes[n])}if(h){if(l){l+=this.dlmtr+h}else{l=h}}}else{if(!l){l=""+m.childNodes[n].id}else{l+=this.dlmtr+m.childNodes[n].id}}}return l};dhtmlXTreeObject.prototype._getAllFatItems=function(m){var l="";for(var n=0;n<m.childsCount;n++){if((m.childNodes[n].unParsed)||(m.childNodes[n].childsCount>0)){if(!l){l=""+m.childNodes[n].id}else{l+=this.dlmtr+m.childNodes[n].id}if(m.childNodes[n].unParsed){var h=this._getAllFatItemsXML(m.childNodes[n].unParsed,1)}else{var h=this._getAllFatItems(m.childNodes[n])}if(h){l+=this.dlmtr+h}}}return l};dhtmlXTreeObject.prototype._getAllSubItems=function(n,o,r){if(r){u=r}else{var u=this._globalIdStorageFind(n)}if(!u){return 0}o="";for(var s=0;s<u.childsCount;s++){if(!o){o=""+u.childNodes[s].id}else{o+=this.dlmtr+u.childNodes[s].id}var m=this._getAllSubItems(0,o,u.childNodes[s]);if(m){o+=this.dlmtr+m}}if(u.unParsed){o=this._getAllSubItemsXML(n,o,u.unParsed)}return o};dhtmlXTreeObject.prototype.selectItem=function(n,o,r){o=dhx4.s2b(o);var l=this._globalIdStorageFind(n);if((!l)||(!l.parentObject)){return 0}if(this.XMLloadingWarning){l.parentObject.openMe=1}else{this._openItem(l.parentObject)}var m=null;if(r){m=new Object;m.ctrlKey=true;if(l.i_sel){m.skipUnSel=true}}if(o){this.onRowSelect(m,l.htmlNode.childNodes[0].childNodes[0].childNodes[3],false)}else{this.onRowSelect(m,l.htmlNode.childNodes[0].childNodes[0].childNodes[3],true)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var g=new Array();for(var e=0;e<this._selected.length;e++){g[e]=this._selected[e].span.innerHTML}return(g.join(this.dlmtr))};dhtmlXTreeObject.prototype._compressChildList=function(g,h){g--;for(var l=0;l<g;l++){if(h[l]==0){h[l]=h[l+1];h[l+1]=0}}};dhtmlXTreeObject.prototype._deleteNode=function(u,w,r){if((!w)||(!w.parentObject)){return 0}var C=0;var A=0;if(w.tr.nextSibling){C=w.tr.nextSibling.nodem}if(w.tr.previousSibling){A=w.tr.previousSibling.nodem}var v=w.parentObject;var y=v.childsCount;var s=v.childNodes;for(var x=0;x<y;x++){if(s[x].id==u){if(!r){v.htmlNode.childNodes[0].removeChild(s[x].tr)}s[x]=0;break}}this._compressChildList(y,s);if(!r){v.childsCount--}if(C){this._correctPlus(C);this._correctLine(C)}if(A){this._correctPlus(A);this._correctLine(A)}if(this.tscheck){this._correctCheckStates(v)}if(!r){this._globalIdStorageRecSub(w)}};dhtmlXTreeObject.prototype.setCheck=function(h,l){var g=this._globalIdStorageFind(h,0,1);if(!g){return}if(l==="unsure"){this._setCheck(g,l)}else{l=dhx4.s2b(l);if((this.tscheck)&&(this.smcheck)){this._setSubChecked(l,g)}else{this._setCheck(g,l)}}if(this.smcheck){this._correctCheckStates(g.parentObject)}};dhtmlXTreeObject.prototype._setCheck=function(h,m){if(!h){return}if(((h.parentObject._r_logic)||(this._frbtr))&&(m)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0)}this._frbtrL=h}else{for(var n=0;n<h.parentObject.childsCount;n++){this._setCheck(h.parentObject.childNodes[n],0)}}}var l=h.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(m=="unsure"){h.checkstate=2}else{if(m){h.checkstate=1}else{h.checkstate=0}}if(h.dscheck){h.checkstate=h.dscheck}this._setSrc(l,this.imPath+((h.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[h.checkstate])};dhtmlXTreeObject.prototype.setSubChecked=function(h,l){var g=this._globalIdStorageFind(h);this._setSubChecked(l,g);this._correctCheckStates(g.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(m,h){m=dhx4.s2b(m);if(!h){return}if(((h.parentObject._r_logic)||(this._frbtr))&&(m)){for(var n=0;n<h.parentObject.childsCount;n++){this._setSubChecked(0,h.parentObject.childNodes[n])}}if(h.unParsed){this._setSubCheckedXML(m,h.unParsed)}if(h._r_logic||this._frbtr){this._setSubChecked(m,h.childNodes[0])}else{for(var n=0;n<h.childsCount;n++){this._setSubChecked(m,h.childNodes[n])}}var l=h.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(m){h.checkstate=1}else{h.checkstate=0}if(h.dscheck){h.checkstate=h.dscheck}this._setSrc(l,this.imPath+((h.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[h.checkstate])};dhtmlXTreeObject.prototype.isItemChecked=function(g){var e=this._globalIdStorageFind(g);if(!e){return}return e.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(l){var h=this._globalIdStorageFind(l);if(!h){return}var n=h.childsCount;for(var m=0;m<n;m++){this._deleteNode(h.childNodes[0].id,h.childNodes[0])}};dhtmlXTreeObject.prototype.deleteItem=function(h,g){if((!this._onrdlh)||(this._onrdlh(h))){var l=this._deleteItem(h,g);if(l){this._fixChildCountLabel(l)}}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(n,u,o){u=dhx4.s2b(u);var m=this._globalIdStorageFind(n);if(!m){return}var s=this.getParentId(n);var r=m.parentObject;this._deleteNode(n,m,o);if(this._editCell&&this._editCell.id==n){this._editCell=null}this._correctPlus(r);this._correctLine(r);if((u)&&(s!=this.rootId)){this.selectItem(s,1)}return r};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(g){for(var l=0;l<g.childsCount;l++){this._globalIdStorageRecSub(g.childNodes[l]);this._globalIdStorageSub(g.childNodes[l].id)}this._globalIdStorageSub(g.id);var h=g;h.span=null;h.tr.nodem=null;h.tr=null;h.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(w,H,u,D,y,A,C,E,F){var x=this._globalIdStorageFind(w);if((!x)||(!x.parentObject)){return(0)}var v=this._attachChildNode(0,H,u,D,y,A,C,E,F,x);if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(x.parentObject)}return v};dhtmlXTreeObject.prototype.getItemIdByIndex=function(h,g){var l=this._globalIdStorageFind(h);if((!l)||(g>=l.childsCount)){return null}return l.childNodes[g].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(h,g){var l=this._globalIdStorageFind(h);if((!l)||(g>=l.childsCount)){return null}return l.childNodes[g].id};dhtmlXTreeObject.prototype.setDragHandler=function(c){this.attachEvent("onDrag",c)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,"");this._lastMark=null}this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(g,e){if(g=="temporary_disabled"){this.dADTempOff=false;g=true}else{this.dADTempOff=true}this.dragAndDropOff=dhx4.s2b(g);if(this.dragAndDropOff){this.dragger.addDragLanding(this.allTree,this)}if(arguments.length>1){this._ddronr=(!dhx4.s2b(e))}};dhtmlXTreeObject.prototype._setMove=function(s,v,n){if(s.parentObject.span){var u=dhx4.absTop(s);var w=dhx4.absTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;if(this.dadmode==2){var r=n-u+(document.body.scrollTop||document.documentElement.scrollTop)-2-s.offsetHeight/2;if((Math.abs(r)-s.offsetHeight/6)>0){this.dadmodec=1;if(r<0){this.dadmodefix=0-s.offsetHeight}}else{this.dadmodec=0}}if(this.dadmodec==0){var o=s.parentObject.span;o.className+=" dragAndDropRow";this._lastMark=o}else{this._clearMove();this.selectionBar.style.top=(u-w+((parseInt(s.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix)+"px";this.selectionBar.style.left="5px";if(this.allTree.offsetWidth>20){this.selectionBar.style.width=(this.allTree.offsetWidth-(_isFF?30:25))+"px"}this.selectionBar.style.display=""}this._autoScroll(null,u,w)}};dhtmlXTreeObject.prototype._autoScroll=function(h,l,g){if(this.autoScroll){if(h){l=dhx4.absTop(h);g=dhx4.absTop(this.allTree)-this.allTree.scrollTop}if((l-g-parseInt(this.allTree.scrollTop))>(parseInt(this.allTree.offsetHeight)-50)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if((l-g)<(parseInt(this.allTree.scrollTop)+30)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(o,r){if(!this.dADTempOff){return null}var s=o.parentObject;if(!this.callEvent("onBeforeDrag",[s.id,r])){return null}if(!s.i_sel){this._selectItem(s,r)}this._checkMSelectionLogic();var u=document.createElement("div");var e=new Array();if(this._itim_dg){for(var n=0;n<this._selected.length;n++){e[n]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[n].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[n].span.innerHTML+"</td></tr></table>"}}else{e=this.getSelectedItemText().split(this.dlmtr)}u.innerHTML=e.join("");u.style.position="absolute";u.className="dragSpanDiv";this._dragged=(new Array()).concat(this._selected);return u};dhtmlXTreeObject.prototype._focusNode=function(e){var g=dhx4.absTop(e.htmlNode)-dhx4.absTop(this.allTree);if((g>(this.allTree.offsetHeight-30))||(g<0)){this.allTree.scrollTop=g+this.allTree.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(c){if((c)&&(c.preventDefault)){c.preventDefault();return false}return false};dhtmlXTreeObject.prototype._drag=function(o,y,s){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}if(!s.parentObject){s=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0}this._clearMove();var r=o.parentObject.treeNod;if((r)&&(r._clearMove)){r._clearMove("")}if((!this.dragMove)||(this.dragMove())){if((!r)||(!r._clearMove)||(!r._dragged)){var v=new Array(o.parentObject)}else{var v=r._dragged}var x=s.parentObject;for(var u=0;u<v.length;u++){var w=this._moveNode(v[u],x);if((this.dadmodec)&&(w!==false)){x=this._globalIdStorageFind(w,true,true)}if((w)&&(!this._sADnD)){this.selectItem(w,0,1)}}}if(r){r._dragged=new Array()}};dhtmlXTreeObject.prototype._dragIn=function(x,A,v,w){if(!this.dADTempOff){return 0}var u=A.parentObject;var C=x.parentObject;if((!C)&&(this._ddronr)){return}if(!this.callEvent("onDragIn",[u.id,C?C.id:null,u.treeNod,this])){if(C){this._autoScroll(x)}return 0}if(!C){this.allTree.className+=" selectionBox"}else{if(u.childNodes==null){this._setMove(x,v,w);return x}var r=u.treeNod;for(var y=0;y<r._dragged.length;y++){if(this._checkPNodes(C,r._dragged[y])){this._autoScroll(x);return 0}}this.selectionBar.parentNode.removeChild(this.selectionBar);C.span.parentNode.appendChild(this.selectionBar);this._setMove(x,v,w);if(this._getOpenState(C)<=0){var s=this;this._autoOpenId=C.id;this._autoOpenTimer=window.setTimeout(function(){s._autoOpenItem(null,s);s=null},1000)}}return x};dhtmlXTreeObject.prototype._autoOpenItem=function(g,e){e.openItem(e._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(c){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}};dhtmlXTreeObject.prototype._getNextNode=function(e,g){if((!g)&&(e.childsCount)){return e.childNodes[0]}if(e==this.htmlNode){return -1}if((e.tr)&&(e.tr.nextSibling)&&(e.tr.nextSibling.nodem)){return e.tr.nextSibling.nodem}return this._getNextNode(e.parentObject,true)};dhtmlXTreeObject.prototype._lastChild=function(c){if(c.childsCount){return this._lastChild(c.childNodes[c.childsCount-1])}else{return c}};dhtmlXTreeObject.prototype._getPrevNode=function(e,g){if((e.tr)&&(e.tr.previousSibling)&&(e.tr.previousSibling.nodem)){return this._lastChild(e.tr.previousSibling.nodem)}if(e.parentObject){return e.parentObject}else{return -1}};dhtmlXTreeObject.prototype.findItem=function(h,m,n){var l=this._findNodeByLabel(h,m,(n?this.htmlNode:null));if(l){this.selectItem(l.id,true);this._focusNode(l);return l.id}else{return null}};dhtmlXTreeObject.prototype.findItemIdByLabel=function(h,m,n){var l=this._findNodeByLabel(h,m,(n?this.htmlNode:null));if(l){return l.id}else{return null}};dhtmlXTreeObject.prototype.findStrInXML=function(r,o,m){if(!r.childNodes&&r.item){return this.findStrInJSON(r,o,m)}if(!r.childNodes){return false}for(var l=0;l<r.childNodes.length;l++){if(r.childNodes[l].nodeType==1){var n=r.childNodes[l].getAttribute(o);if(!n&&r.childNodes[l].tagName=="itemtext"){n=r.childNodes[l].firstChild.data}if((n)&&(n.toLowerCase().search(m)!=-1)){return true}if(this.findStrInXML(r.childNodes[l],o,m)){return true}}}return false};dhtmlXTreeObject.prototype.findStrInJSON=function(r,o,m){for(var l=0;l<r.item.length;l++){var n=r.item[l].text;if((n)&&(n.toLowerCase().search(m)!=-1)){return true}if(r.item[l].item&&this.findStrInJSON(r.item[l],o,m)){return true}}return false};dhtmlXTreeObject.prototype._findNodeByLabel=function(l,m,n){var l=l.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");l=new RegExp(l.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");if(!n){n=this._selected[0];if(!n){n=this.htmlNode}}var r=n;if(!m){if((n.unParsed)&&(this.findStrInXML(n.unParsed.d,"text",l))){this.reParse(n)}n=this._getNextNode(r);if(n==-1){n=this.htmlNode.childNodes[0]}}else{var o=this._getPrevNode(r);if(o==-1){o=this._lastChild(this.htmlNode)}if((o.unParsed)&&(this.findStrInXML(o.unParsed.d,"text",l))){this.reParse(o);n=this._getPrevNode(r)}else{n=o}if(n==-1){n=this._lastChild(this.htmlNode)}}while((n)&&(n!=r)){if((n.label)&&(n.label.search(l)!=-1)){return(n)}if(!m){if(n==-1){if(r==this.htmlNode){break}n=this.htmlNode.childNodes[0]}if((n.unParsed)&&(this.findStrInXML(n.unParsed.d,"text",l))){this.reParse(n)}n=this._getNextNode(n);if(n==-1){n=this.htmlNode}}else{var o=this._getPrevNode(n);if(o==-1){o=this._lastChild(this.htmlNode)}if((o.unParsed)&&(this.findStrInXML(o.unParsed.d,"text",l))){this.reParse(o);n=this._getPrevNode(n)}else{n=o}if(n==-1){n=this._lastChild(this.htmlNode)}}}return null};dhtmlXTreeObject.prototype.moveItem=function(s,A,r,C){var w=this._globalIdStorageFind(s);if(!w){return(0)}var v=null;switch(A){case"right":alert("Not supported yet");break;case"item_child":var y=(C||this)._globalIdStorageFind(r);if(!y){return(0)}v=(C||this)._moveNodeTo(w,y,0);break;case"item_sibling":var y=(C||this)._globalIdStorageFind(r);if(!y){return(0)}v=(C||this)._moveNodeTo(w,y.parentObject,y);break;case"item_sibling_next":var y=(C||this)._globalIdStorageFind(r);if(!y){return(0)}if((y.tr)&&(y.tr.nextSibling)&&(y.tr.nextSibling.nodem)){v=(C||this)._moveNodeTo(w,y.parentObject,y.tr.nextSibling.nodem)}else{v=(C||this)._moveNodeTo(w,y.parentObject)}break;case"left":if(w.parentObject.parentObject){v=this._moveNodeTo(w,w.parentObject.parentObject,w.parentObject)}break;case"up":var u=this._getPrevNode(w);if((u==-1)||(!u.parentObject)){return null}v=this._moveNodeTo(w,u.parentObject,u);break;case"up_strict":var u=this._getIndex(w);if(u!=0){v=this._moveNodeTo(w,w.parentObject,w.parentObject.childNodes[u-1])}break;case"down_strict":var u=this._getIndex(w);var x=w.parentObject.childsCount-2;if(u==x){v=this._moveNodeTo(w,w.parentObject)}else{if(u<x){v=this._moveNodeTo(w,w.parentObject,w.parentObject.childNodes[u+2])}}break;case"down":var u=this._getNextNode(this._lastChild(w));if((u==-1)||(!u.parentObject)){return}if(u.parentObject==w.parentObject){var u=this._getNextNode(u)}if(u==-1){v=this._moveNodeTo(w,w.parentObject)}else{if((u==-1)||(!u.parentObject)){return}v=this._moveNodeTo(w,u.parentObject,u)}break}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}return v};dhtmlXTreeObject.prototype.setDragBehavior=function(g,e){this._sADnD=(!dhx4.s2b(e));switch(g){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2;break}};dhtmlXTreeObject.prototype._loadDynXML=function(h,l){l=l||this.XMLsource;var g=(new Date()).valueOf();this._ld_id=h;if(this.xmlalb=="function"){if(l){l(this._escape(h))}}else{if(this.xmlalb=="name"){this.load(l+this._escape(h))}else{if(this.xmlalb=="xmlname"){this.load(l+this._escape(h)+".xml?uid="+g)}else{this.load(l+dhtmlx.url(l)+"uid="+g+"&id="+this._escape(h))}}}};dhtmlXTreeObject.prototype.enableMultiselection=function(g,e){this._amsel=dhx4.s2b(g);this._amselS=dhx4.s2b(e)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){var h=new Array();for(var l=0;l<this._selected.length;l++){for(var g=0;g<this._selected.length;g++){if((l!=g)&&(this._checkPNodes(this._selected[g],this._selected[l]))){h[h.length]=this._selected[g]}}}for(var l=0;l<h.length;l++){this._unselectItem(h[l])}};dhtmlXTreeObject.prototype._checkPNodes=function(g,e){if(this._dcheckf){return false}if(e==g){return 1}if(g.parentObject){return this._checkPNodes(g.parentObject,e)}else{return 0}};dhtmlXTreeObject.prototype.disableDropCheck=function(c){this._dcheckf=dhx4.s2b(c)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(h,l,g){this._edsbps=dhx4.s2b(h);this._edsbpsA=new Array();this._edsbpsC=l||10;this._edsbpsD=g||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return(!((!this._edsbpsA)||(!this._edsbpsA.length)))};dhtmlXTreeObject.prototype.getItemParsingState=function(h){var l=this._globalIdStorageFind(h,true,true);if(!l){return 0}if(this._edsbpsA){for(var g=0;g<this._edsbpsA.length;g++){if(this._edsbpsA[g][2]==h){return -1}}}return 1};dhtmlXTreeObject.prototype._distributedStart=function(r,m,n,o,l){if(!this._edsbpsA){this._edsbpsA=new Array()}this._edsbpsA[this._edsbpsA.length]=[r,m,n,o,l]};dhtmlXTreeObject.prototype._distributedStep=function(r){var u=this;if((!this._edsbpsA)||(!this._edsbpsA.length)){u.XMLloadingWarning=0;return}var o=this._edsbpsA[0];this.parsedArray=new Array();this._parse(o[0],o[2],o[3],o[1]);var n=this._globalIdStorageFind(o[2]);this._redrawFrom(this,n,o[4],this._getOpenState(n));var s=this.setCheckList.split(this.dlmtr);for(var m=0;m<s.length;m++){if(s[m]){this.setCheck(s[m],1)}}this._edsbpsA=(new Array()).concat(this._edsbpsA.slice(1));if((!this._edsbpsA.length)){window.setTimeout(function(){if(u.onXLE){u.onXLE(u,r)}u.callEvent("onXLE",[u,r])},1);u.xmlstate=0}};dhtmlXTreeObject.prototype.enableTextSigns=function(c){this._txtimg=dhx4.s2b(c)};dhtmlXTreeObject.prototype.preventIECaching=function(c){dhx4.ajax.cache=!c};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(h,l){if(typeof(h)!="object"){var g=this._globalIdStorageFind(h,0,1)}else{var g=h}if(!g){return}g.dscheck=dhx4.s2b(l)?(((g.checkstate||0)%3)+3):((g.checkstate>2)?(g.checkstate-3):g.checkstate);this._setCheck(g);if(g.dscheck<3){g.dscheck=false}};dhtmlXTreeObject.prototype.smartRefreshBranch=function(g,e){this._branchUpdate=1;this.smartRefreshItem(g,e)};dhtmlXTreeObject.prototype.smartRefreshItem=function(l,m){var h=this._globalIdStorageFind(l);for(var n=0;n<h.childsCount;n++){h.childNodes[n]._dmark=true}this.waitUpdateXML=true;if(m&&m.exists){this._parse(m,l)}else{this._loadDynXML(l,m)}};dhtmlXTreeObject.prototype.refreshItems=function(n,m){var l=n.toString().split(this.dlmtr);this.waitUpdateXML=new Array();for(var h=0;h<l.length;h++){this.waitUpdateXML[l[h]]=true}this.load((m||this.XMLsource)+dhtmlx.url(m||this.XMLsource)+"ids="+this._escape(n))};dhtmlXTreeObject.prototype.updateItem=function(o,s,v,w,y,u,x){var r=this._globalIdStorageFind(o);r.userData=new cObject();if(s){r.label=s}r.images=new Array(v||this.imageArray[0],w||this.imageArray[1],y||this.imageArray[2]);this.setItemText(o,s);if(u){this._setCheck(r,true)}if(x=="1"&&!this.hasChildren(o)){r.XMLload=0}this._correctPlus(r);r._dmark=false;return r};dhtmlXTreeObject.prototype.setDropHandler=function(c){this.attachEvent("onDrop",c)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(c){this.attachEvent("onXLS",c)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(c){this.attachEvent("onXLE",c)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(c){this.xmlalb=c};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(c){this.smcheck=dhx4.s2b(c)};dhtmlXTreeObject.prototype.getXMLState=function(){return(this.xmlstate==1)};dhtmlXTreeObject.prototype.setItemTopOffset=function(n,r){var s;if(typeof(n)!="object"){s=this._globalIdStorageFind(n)}else{s=n}var o=s.span.parentNode.parentNode;s.span.style.paddingBottom="1px";for(var u=0;u<o.childNodes.length;u++){if(u!=0){if(_isIE){o.childNodes[u].style.height="18px";o.childNodes[u].style.paddingTop=parseInt(r)+"px"}else{o.childNodes[u].style.height=18+parseInt(r)+"px"}}else{var m=o.childNodes[u].firstChild;if(o.childNodes[u].firstChild.tagName!="DIV"){m=document.createElement("DIV");o.childNodes[u].insertBefore(m,o.childNodes[u].firstChild)}if((s.parentObject.id!=this.rootId||s.parentObject.childNodes[0]!=s)&&this.treeLinesOn){o.childNodes[u].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"}m.innerHTML="&nbsp;";m.style.overflow="hidden"}m.style.verticalAlign=o.childNodes[u].style.verticalAlign="bottom";if(_isIE){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}}};dhtmlXTreeObject.prototype.setIconSize=function(n,r,m){if(m){if((m)&&(m.span)){var l=m}else{var l=this._globalIdStorageFind(m)}if(!l){return(0)}var o=l.span.parentNode.previousSibling.childNodes[0];if(n){o.style.width=n+"px";if(window._KHTMLrv){o.parentNode.style.width=n+"px"}}if(r){o.style.height=r+"px";if(window._KHTMLrv){o.parentNode.style.height=r+"px"}}}else{this.def_img_x=n;this.def_img_y=r}};dhtmlXTreeObject.prototype.getItemImage=function(m,n,r){var o=this._globalIdStorageFind(m);if(!o){return""}var l=o.images[n||0];if(r){l=this.iconURL+l}return l};dhtmlXTreeObject.prototype.enableRadioButtons=function(l,m){if(arguments.length==1){this._frbtr=dhx4.s2b(l);this.checkBoxOff=this.checkBoxOff||this._frbtr;return}var n=this._globalIdStorageFind(l);if(!n){return""}m=dhx4.s2b(m);if((m)&&(!n._r_logic)){n._r_logic=true;for(var h=0;h<n.childsCount;h++){this._setCheck(n.childNodes[h],n.childNodes[h].checkstate)}}if((!m)&&(n._r_logic)){n._r_logic=false;for(var h=0;h<n.childsCount;h++){this._setCheck(n.childNodes[h],n.childNodes[h].checkstate)}}};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(c){this._frbtrs=dhx4.s2b(c)};dhtmlXTreeObject.prototype.openOnItemAdded=function(c){this._hAdI=!dhx4.s2b(c)};dhtmlXTreeObject.prototype.openOnItemAdding=function(c){this._hAdI=!dhx4.s2b(c)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(c){if(c===true){this.mlitems="100%"}else{this.mlitems=c}};dhtmlXTreeObject.prototype.enableAutoTooltips=function(c){this.ettip=dhx4.s2b(c)};dhtmlXTreeObject.prototype.clearSelection=function(c){if(c){this._unselectItem(this._globalIdStorageFind(c))}else{this._unselectItems()}};dhtmlXTreeObject.prototype.showItemSign=function(l,n){var h=this._globalIdStorageFind(l);if(!h){return 0}var m=h.span.parentNode.previousSibling.previousSibling.previousSibling;if(!dhx4.s2b(n)){this._openItem(h);h.closeble=false;h.wsign=true}else{h.closeble=true;h.wsign=false}this._correctPlus(h)};dhtmlXTreeObject.prototype.showItemCheckbox=function(a,l){if(!a){for(var n in this._idpull){this.showItemCheckbox(this._idpull[n],l)}}if(typeof(a)!="object"){a=this._globalIdStorageFind(a,0,0)}if(!a){return 0}a.nocheckbox=!dhx4.s2b(l);var m=a.span.parentNode.previousSibling.previousSibling.childNodes[0];m.parentNode.style.display=(!a.nocheckbox)?"":"none"};dhtmlXTreeObject.prototype.setListDelimeter=function(c){this.dlmtr=c};dhtmlXTreeObject.prototype.setEscapingMode=function(c){this.utfesc=c};dhtmlXTreeObject.prototype.enableHighlighting=function(c){this.ehlt=true;this.ehlta=dhx4.s2b(c)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var g=this.childNodes[3].parentObject;var e=g.treeNod;e.callEvent("onMouseOut",[g.id]);if(g.id==e._l_onMSI){e._l_onMSI=null}if(!e.ehlta){return}g.span.className=g.span.className.replace("_lor","")};dhtmlXTreeObject.prototype._itemMouseIn=function(){var g=this.childNodes[3].parentObject;var e=g.treeNod;if(e._l_onMSI!=g.id){e.callEvent("onMouseIn",[g.id])}e._l_onMSI=g.id;if(!e.ehlta){return}g.span.className=g.span.className.replace("_lor","");g.span.className=g.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")};dhtmlXTreeObject.prototype.enableActiveImages=function(c){this._aimgs=dhx4.s2b(c)};dhtmlXTreeObject.prototype.focusItem=function(g){var e=this._globalIdStorageFind(g);if(!e){return(0)}this._focusNode(e)};dhtmlXTreeObject.prototype.getAllSubItems=function(c){return this._getAllSubItems(c)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(m){var l="";for(var n=0;n<m.childsCount;n++){if((m.childNodes[n].unParsed)||(m.childNodes[n].childsCount>0)){if(m.childNodes[n].unParsed){var h=this._getAllScraggyItemsXML(m.childNodes[n].unParsed,1)}else{var h=this._getAllScraggyItems(m.childNodes[n])}if(h){if(l){l+=this.dlmtr+h}else{l=h}}}else{if(!l){l=""+m.childNodes[n].id}else{l+=this.dlmtr+m.childNodes[n].id}}}return l};dhtmlXTreeObject.prototype._getAllFatItems=function(m){var l="";for(var n=0;n<m.childsCount;n++){if((m.childNodes[n].unParsed)||(m.childNodes[n].childsCount>0)){if(!l){l=""+m.childNodes[n].id}else{l+=this.dlmtr+m.childNodes[n].id}if(m.childNodes[n].unParsed){var h=this._getAllFatItemsXML(m.childNodes[n].unParsed,1)}else{var h=this._getAllFatItems(m.childNodes[n])}if(h){l+=this.dlmtr+h}}}return l};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(c){if(c){c=this._globalIdStorageFind(c)}return this._getAllChecked(c,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var e=[this._getAllChecked("","",1)];var g=this._getAllChecked("","",2);if(g){e.push(g)}return e.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(n,o,m){if(!n){n=this.htmlNode}if(n.checkstate==m){if(!n.nocheckbox){if(o){o+=this.dlmtr+n.id}else{o=""+n.id}}}var l=n.childsCount;for(var r=0;r<l;r++){o=this._getAllChecked(n.childNodes[r],o,m)}if(n.unParsed){o=this._getAllCheckedXML(n.unParsed,o,m)}if(o){return o}else{return""}};dhtmlXTreeObject.prototype.setItemStyle=function(l,m,n){var n=n||false;var h=this._globalIdStorageFind(l);if(!h){return 0}if(!h.span.style.cssText){h.span.setAttribute("style",h.span.getAttribute("style")+"; "+m)}else{h.span.style.cssText=n?m:h.span.style.cssText+";"+m}};dhtmlXTreeObject.prototype.enableImageDrag=function(c){this._itim_dg=dhx4.s2b(c)};dhtmlXTreeObject.prototype.setOnDragIn=function(c){this.attachEvent("onDragIn",c)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(c){this.autoScroll=dhx4.s2b(c)};dhtmlXTreeObject.prototype.setSkin=function(e){var g=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=g+" dhxtree_"+e;if(e=="dhx_terrace"||e=="dhx_web"){this.enableTreeLines(false)}};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(c){return[c.parent,(c.width||"100%"),(c.height||"100%"),(c.root_id||0)]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(c){c.attachEvent("insertCallback",function(n,a,r){var o=dhx4.ajax.xpath(".//item",n);var m=o[0].getAttribute("text");this.obj.insertNewItem(r,a,m,0,0,0,0,"CHILD")});c.attachEvent("updateCallback",function(n,a,r){var o=dhx4.ajax.xpath(".//item",n);var m=o[0].getAttribute("text");this.obj.setItemText(a,m);if(this.obj.getParentId(a)!=r){this.obj.moveItem(a,"item_child",r)}this.setUpdated(a,true,"updated")});c.attachEvent("deleteCallback",function(h,a,l){this.obj.setUserData(a,this.action_param,"true_deleted");this.obj.deleteItem(a,false)});c._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(g,a){if(g==3){c.setUpdated(a,true)}return true});this.attachEvent("onDrop",function(a,m,n,o,r){if(o==r){c.setUpdated(a,true)}});this._onrdlh=function(g){var a=c.getState(g);if(a=="inserted"){c.set_invalid(g,false);c.setUpdated(g,false);return true}if(a=="true_deleted"){c.setUpdated(g,false);return true}c.setUpdated(g,true,"deleted");return false};this._onradh=function(a){c.setUpdated(a,true,"inserted")};c._getRowData=function(m){var n={};var a=this.obj._globalIdStorageFind(m);var o=a.parentObject;var r=0;for(r=0;r<o.childsCount;r++){if(o.childNodes[r]==a){break}}n.tr_id=a.id;n.tr_pid=o.id;n.tr_order=r;n.tr_text=a.span.innerHTML;o=(a._userdatalist||"").split(",");for(r=0;r<o.length;r++){n[o[r]]=a.userData["t_"+o[r]]}return n}};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachTree=function(e){this.callEvent("_onBeforeContentAttach",["tree"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";this._attachObject(g);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(g,"100%","100%",(e||0));this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom="2px";g=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXTreeObject.prototype.makeDraggable=function(g,e){if(typeof(g)!="object"){g=document.getElementById(g)}dragger=new dhtmlDragAndDropObject();dropper=new dhx_dragSomethingInTree();dragger.addDraggableItem(g,dropper);g.dragLanding=null;g.ondragstart=dropper._preventNsDrag;g.onselectstart=new Function("return false;");g.parentObject=new Object;g.parentObject.img=g;g.parentObject.treeNod=dropper;dropper._customDrop=e};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(l){var h=document.getElementsByTagName("div");for(var g=0;g<h.length;g++){if(h[g].getAttribute("dragInDhtmlXTree")){this.makeDragable(h[g],l)}}};function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(g){var e=document.createElement("div");e.style.position="absolute";e.innerHTML=(g.innerHTML||g.value);e.className="dragSpanDiv";return e};this._preventNsDrag=function(c){(c||window.event).cancelBubble=true;if((c)&&(c.preventDefault)){c.preventDefault();return false}return false};this._nonTrivialNode=function(w,v,r,u){if(this._customDrop){return this._customDrop(w,u.img.id,v.id,r?r.id:null)}var s=(u.img.getAttribute("image")||"");var n=u.img.id||"new";var o=(u.img.getAttribute("text")||(_isIE?u.img.innerText:u.img.textContent));w[r?"insertNewNext":"insertNewItem"](r?r.id:v.id,n,o,"",s,s,s)}}dhtmlXTreeObject.prototype.enableItemEditor=function(c){this._eItEd=dhx4.s2b(c);if(!this._eItEdFlag){this._edn_click_IE=true;this._edn_dblclick=true;this._ie_aFunc=this.aFunc;this._ie_dblclickFuncHandler=this.dblclickFuncHandler;this.setOnDblClickHandler(function(a,g){if(this._edn_dblclick){this._editItem(a,g)}return true});this.setOnClickHandler(function(a,g){this._stopEditItem(a,g);if((this.ed_hist_clcik==a)&&(this._edn_click_IE)){this._editItem(a,g)}this.ed_hist_clcik=a;return true});this._eItEdFlag=true}};dhtmlXTreeObject.prototype.setOnEditHandler=function(c){this.attachEvent("onEdit",c)};dhtmlXTreeObject.prototype.setEditStartAction=function(e,g){this._edn_click_IE=dhx4.s2b(e);this._edn_dblclick=dhx4.s2b(g)};dhtmlXTreeObject.prototype._stopEdit=function(u,n){if(this._editCell){this.dADTempOff=this.dADTempOffEd;if(this._editCell.id!=u){var r=true;if(!n){r=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value])}else{r=false;this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])}if(r===true){r=this._editCell.span.childNodes[0].value}else{if(r===false){r=this._editCell._oldValue}}var o=(r!=this._editCell._oldValue);this._editCell.span.innerHTML=r;this._editCell.label=this._editCell.span.innerHTML;var s=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=s;this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var a=this._editCell.id;if(this.childCalc){this._fixChildCountLabel(this._editCell)}this._editCell=null;if(!n){this.callEvent("onEdit",[3,a,this,o])}if(this._enblkbrd){this.parentObject.lastChild.focus();this.parentObject.lastChild.focus()}}}};dhtmlXTreeObject.prototype._stopEditItem=function(g,e){this._stopEdit(g)};dhtmlXTreeObject.prototype.stopEdit=function(c){if(this._editCell){this._stopEdit(this._editCell.id+"_non",c)}};dhtmlXTreeObject.prototype.editItem=function(c){this._editItem(c,this)};dhtmlXTreeObject.prototype._editItem=function(m,l){if(this._eItEd){this._stopEdit();var o=this._globalIdStorageFind(m);if(!o){return}var n=this.callEvent("onEdit",[0,m,this,o.span.innerHTML]);if(n===true){n=(typeof o.span.innerText!="undefined"?o.span.innerText:o.span.textContent)}else{if(n===false){return}}this.dADTempOffEd=this.dADTempOff;this.dADTempOff=false;this._editCell=o;o._oldValue=n;o.span.innerHTML="<input type='text' class='intreeeditRow' />";o.span.style.paddingRight=o.span.style.paddingLeft="0px";o.span.onclick=o.span.ondblclick=function(a){(a||event).cancelBubble=true};o.span.childNodes[0].value=n;o.span.childNodes[0].onselectstart=function(a){(a||event).cancelBubble=true;return true};o.span.childNodes[0].onmousedown=function(a){(a||event).cancelBubble=true;return true};o.span.childNodes[0].focus();o.span.childNodes[0].focus();o.span.onclick=function(a){(a||event).cancelBubble=true;return false};o.span.className="";o.span.parentNode.className="";var r=this;o.span.childNodes[0].onkeydown=function(a){if(!a){a=window.event}if(a.keyCode==13){a.cancelBubble=true;r._stopEdit(window.undefined)}else{if(a.keyCode==27){r._stopEdit(window.undefined,true)}}(a||event).cancelBubble=true};this.callEvent("onEdit",[1,m,this])}};function jsonPointer(g,e){this.d=g;this.dp=e}jsonPointer.prototype={text:function(){var e=function(a){var c=[];for(var l=0;l<a.length;l++){c.push("{"+g(a[l])+"}")}return c.join(",")};var g=function(a){var c=[];for(var l in a){if(typeof(a[l])=="object"){if(l.length){c.push('"'+l+'":['+e(a[l])+"]")}else{c.push('"'+l+'":{'+g(a[l])+"}")}}else{c.push('"'+l+'":"'+a[l]+'"')}}return c.join(",")};return"{"+g(this.d)+"}"},get:function(c){return this.d[c]},exists:function(){return !!this.d},content:function(){return this.d.content},each:function(r,a,c){var s=this.d[r];var u=new jsonPointer();if(s){for(var o=0;o<s.length;o++){u.d=s[o];a.apply(c,[u,o])}}},get_all:function(){return this.d},sub:function(c){return new jsonPointer(this.d[c],this.d)},sub_exists:function(c){return !!this.d[c]},each_x:function(s,w,a,c,r){var u=this.d[s];var v=new jsonPointer(0,this.d);if(u){for(r=r||0;r<u.length;r++){if(u[r][w]){v.d=u[r];if(a.apply(c,[v,r])==-1){return}}}}},up:function(c){return new jsonPointer(this.dp,this.d)},set:function(e,g){this.d[e]=g},clone:function(c){return new jsonPointer(this.d,this.dp)},through:function(A,v,a,x,C){var u=this.d[A];if(u.length){for(var y=0;y<u.length;y++){if(u[y][v]!=null&&u[y][v]!=""&&(!a||u[y][v]==a)){var w=new jsonPointer(u[y],this.d);x.apply(C,[w,y])}var c=this.d;this.d=u[y];if(this.sub_exists(A)){this.through(A,v,a,x,C)}this.d=c}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(e,g){if(window.console&&window.console.info){window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSArrayFile(e,g)};dhtmlXTreeObject.prototype._loadJSArrayFile=function(file,callback){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){eval("var z="+xml.responseText);this._loadJSArray(z);if(callback){callback.call(this,xml)}};dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})};dhtmlXTreeObject.prototype.loadCSV=function(e,g){if(window.console&&window.console.info){window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadCSV(e,g)};dhtmlXTreeObject.prototype._loadCSV=function(g,h){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var l=this;this.XMLLoader=function(c,a){this._loadCSVString(c.responseText);if(a){a.call(this,c)}};dhx4.ajax.get(g,function(a){l.XMLLoader(a.xmlDoc,h)})};dhtmlXTreeObject.prototype.loadJSArray=function(e,g){if(window.console&&window.console.info){window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSArray(e,g)};dhtmlXTreeObject.prototype._loadJSArray=function(n,r){var m=[];for(var u=0;u<n.length;u++){if(!m[n[u][1]]){m[n[u][1]]=[]}m[n[u][1]].push({id:n[u][0],text:n[u][2]})}var o={id:this.rootId};var s=function(c,e){if(m[c.id]){c.item=m[c.id];for(var a=0;a<c.item.length;a++){e(c.item[a],e)}}};s(o,s);this._loadJSONObject(o,r)};dhtmlXTreeObject.prototype.loadCSVString=function(e,g){if(window.console&&window.console.info){window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadCSVString(e,g)};dhtmlXTreeObject.prototype._loadCSVString=function(s,r){var y=[];var x=s.split("\n");for(var v=0;v<x.length;v++){var w=x[v].split(",");if(!y[w[1]]){y[w[1]]=[]}y[w[1]].push({id:w[0],text:w[2]})}var o={id:this.rootId};var u=function(a,c){if(y[a.id]){a.item=y[a.id];for(var e=0;e<a.item.length;e++){c(a.item[e],c)}}};u(o,u);this._loadJSONObject(o,r)};dhtmlXTreeObject.prototype.loadJSONObject=function(e,g){if(window.console&&window.console.info){window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSONObject(e,g)};dhtmlXTreeObject.prototype._loadJSONObject=function(g,l){if(!this.parsCount){this.callEvent("onXLS",[this,null])}this.xmlstate=1;var h=new jsonPointer(g);this._parse(h);this._p=h;if(l){l()}};dhtmlXTreeObject.prototype.loadJSON=function(e,g){if(window.console&&window.console.info){window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSON(e,g)};dhtmlXTreeObject.prototype._loadJSON=function(file,callback){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){try{eval("var t="+xml.responseText)}catch(e){dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",(xml),this]);return}var p=new jsonPointer(t);this._parse(p);this._p=p;if(callback){callback.call(this,xml)}};dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){var g=['{"id":"'+this.rootId+'", "item":['];var h=[];for(var l=0;l<this.htmlNode.childsCount;l++){h.push(this._serializeItemJSON(this.htmlNode.childNodes[l]))}g.push(h.join(","));g.push("]}");return g.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(n){var r=[];if(n.unParsed){return(n.unParsed.text())}if(this._selected.length){var v=this._selected[0].id}else{v=""}var o=n.span.innerHTML;o=o.replace(/\"/g,'\\"',o);if(!this._xfullXML){r.push('{ "id":"'+n.id+'", '+(this._getOpenState(n)==1?' "open":"1", ':"")+(v==n.id?' "select":"1",':"")+' "text":"'+o+'"'+(((this.XMLsource)&&(n.XMLload==0))?', "child":"1" ':""))}else{r.push('{ "id":"'+n.id+'", '+(this._getOpenState(n)==1?' "open":"1", ':"")+(v==n.id?' "select":"1",':"")+' "text":"'+o+'", "im0":"'+n.images[0]+'", "im1":"'+n.images[1]+'", "im2":"'+n.images[2]+'" '+(n.acolor?(', "aCol":"'+n.acolor+'" '):"")+(n.scolor?(', "sCol":"'+n.scolor+'" '):"")+(n.checkstate==1?', "checked":"1" ':(n.checkstate==2?', "checked":"-1"':""))+(n.closeable?', "closeable":"1" ':"")+(((this.XMLsource)&&(n.XMLload==0))?', "child":"1" ':""))}if((this._xuserData)&&(n._userdatalist)){r.push(', "userdata":[');var s=n._userdatalist.split(",");var u=[];for(var w=0;w<s.length;w++){u.push('{ "name":"'+s[w]+'" , "content":"'+n.userData["t_"+s[w]]+'" }')}r.push(u.join(","));r.push("]")}if(n.childsCount){r.push(', "item":[');var u=[];for(var w=0;w<n.childsCount;w++){u.push(this._serializeItemJSON(n.childNodes[w]))}r.push(u.join(","));r.push("]\n")}r.push("}\n");return r.join("")};function dhtmlXTreeFromHTML(obj){if(typeof(obj)!="object"){obj=document.getElementById(obj)}var n=obj;var id=n.id;var cont="";for(var j=0;j<obj.childNodes.length;j++){if(obj.childNodes[j].nodeType=="1"){if(obj.childNodes[j].tagName=="XMP"){var cHead=obj.childNodes[j];for(var m=0;m<cHead.childNodes.length;m++){cont+=cHead.childNodes[m].data}}else{if(obj.childNodes[j].tagName.toLowerCase()=="ul"){cont=dhx_li2trees(obj.childNodes[j],new Array(),0)}}break}}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0);var z_all=new Array();for(b in t){z_all[b.toLowerCase()]=b}var atr=obj.attributes;for(var a=0;a<atr.length;a++){if((atr[a].name.indexOf("set")==0)||(atr[a].name.indexOf("enable")==0)){var an=atr[a].name;if(!t[an]){an=z_all[atr[a].name]}t[an].apply(t,atr[a].value.split(","))}}if(typeof(cont)=="object"){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);if(cont[i][2]){t._setCheck(n,cont[i][2])}}t.XMLloadingWarning=0;t.lastLoadedXMLId=0;t._redrawFrom(t)}else{t.parse("<tree id='0'>"+cont+"</tree>")}window[id]=t;var oninit=obj.getAttribute("oninit");if(oninit){eval(oninit)}return t}function dhx_init_trees(){var g=document.getElementsByTagName("div");for(var e=0;e<g.length;e++){if(g[e].className=="dhtmlxTree"){dhtmlXTreeFromHTML(g[e])}}}function dhx_li2trees(E,x,C){for(var w=0;w<E.childNodes.length;w++){var c=E.childNodes[w];if((c.nodeType==1)&&(c.tagName.toLowerCase()=="li")){var u="";var v=null;var D=c.getAttribute("checked");for(var y=0;y<c.childNodes.length;y++){var A=c.childNodes[y];if(A.nodeType==3){u+=A.data}else{if(A.tagName.toLowerCase()!="ul"){u+=dhx_outer_html(A)}else{v=A}}}x[x.length]=[C,u,D,(c.id||(x.length+1))];if(v){x=dhx_li2trees(v,x,(c.id||x.length))}}}return x}function dhx_outer_html(g){if(g.outerHTML){return g.outerHTML}var e=document.createElement("DIV");e.appendChild(g.cloneNode(true));e=e.innerHTML;return e}if(window.addEventListener){window.addEventListener("load",dhx_init_trees,false)}else{if(window.attachEvent){window.attachEvent("onload",dhx_init_trees)}}dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(a,l,h){this._idpull[l.id]._attrs=l}};dhtmlXTreeObject.prototype.getAttribute=function(h,g){this._globalIdStorageFind(h);var l=this._idpull[h]._attrs;return l?l[g]:window.undefined};dhtmlXTreeObject.prototype.setAttribute=function(l,h,m){this._globalIdStorageFind(l);var n=(this._idpull[l]._attrs)||{};n[h]=m;this._idpull[l]._attrs=n};dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(h){this._enblkbrd=dhx4.s2b(h);if(this._enblkbrd){if(_isFF){var l=window.getComputedStyle(this.parentObject,null)["position"];if((l!="absolute")&&(l!="relative")){this.parentObject.style.position="relative"}}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var g=this;var l=document.createElement("INPUT");l.className="a_dhx_hidden_input";l.autocomplete="off";if(window._KHTMLrv){l.style.color="white"}this.parentObject.appendChild(l);this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(a){if(g.callEvent("onKeyPress",[(a||window.event).keyCode,(a||window.event)])){return g._onKeyDown(a||window.event)}};this.parentObject.onclick=function(a){if(_isFF||_isIE){l.select()}if(window._KHTMLrv||_isOpera){l.focus()}}}else{this.parentObject.onkeydown=null}};dhtmlXTreeObject.prototype._onKeyDown=function(h){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive){return true}var e=this;for(var l=0;l<this._navKeys.length;l++){if(this._navKeys[l][1]==h.keyCode){this["_onkey_"+this._navKeys[l][0]].apply(this,[this.getSelectedItemId()]);if(h.preventDefault){h.preventDefault()}(h||event).cancelBubble=true;return false}}if(this._textSearch){return this._searchItemByKey(h)}return true};dhtmlXTreeObject.prototype._onkey_up=function(h){var g=this._globalIdStorageFind(h);if(!g){return}var l=this._getPrevVisibleNode(g);if(l.id==this.rootId){return}this.focusItem(l.id);this.selectItem(l.id,false)};dhtmlXTreeObject.prototype._onkey_down=function(h){var g=this._globalIdStorageFind(h);if(!g){return}var l=this._getNextVisibleNode(g);if(l.id==this.rootId){return}this.focusItem(l.id);this.selectItem(l.id,false)};dhtmlXTreeObject.prototype._onkey_open=function(c){this.openItem(c)};dhtmlXTreeObject.prototype._onkey_close=function(c){this.closeItem(c)};dhtmlXTreeObject.prototype._onkey_call=function(c){if(this.stopEdit){this.stopEdit();this.parentObject.lastChild.focus();this.parentObject.lastChild.focus();this.selectItem(c,true)}else{this.selectItem(this.getSelectedItemId(),true)}};dhtmlXTreeObject.prototype._onkey_edit=function(c){if(this.editItem){this.editItem(c)}};dhtmlXTreeObject.prototype._getNextVisibleNode=function(e,g){if((!g)&&(this._getOpenState(e)>0)){return e.childNodes[0]}if((e.tr)&&(e.tr.nextSibling)&&(e.tr.nextSibling.nodem)){return e.tr.nextSibling.nodem}if(e.parentObject){return this._getNextVisibleNode(e.parentObject,1)}return e};dhtmlXTreeObject.prototype._getPrevVisibleNode=function(c){if((c.tr)&&(c.tr.previousSibling)&&(c.tr.previousSibling.nodem)){return this._lastVisibleChild(c.tr.previousSibling.nodem)}if(c.parentObject){return c.parentObject}else{return c}};dhtmlXTreeObject.prototype._lastVisibleChild=function(c){if(this._getOpenState(c)>0){return this._lastVisibleChild(c.childNodes[c.childsCount-1])}else{return c}};dhtmlXTreeObject.prototype._searchItemByKey=function(g){if(g.keyCode==8){this._textSearchString="";return true}var e=String.fromCharCode(g.keyCode).toUpperCase();if(e.match(/[A-Z,a-z,0-9\ ]/)){this._textSearchString+=e;this._textSearchInProgress=true;if(!(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))){this.findItem(this._textSearchString,0)}this._textSearchInProgress=false;if(g.preventDefault){g.preventDefault()}(g||event).cancelBubble=true;return false}return true};dhtmlXTreeObject.prototype.assignKeys=function(c){this._navKeys=c};dhtmlXTreeObject.prototype.enableKeySearch=function(g){this._textSearch=dhx4.s2b(g);if(!this._textSearch){return}this._textSearchString="";var e=this;this._markItem2=this._markItem;this._markItem=function(a){if(!e._textSearchInProgress){e._textSearchString=""}e._markItem2(a)}};dhtmlXTreeObject.prototype.enableLoadingItem=function(c){this.attachEvent("onXLS",this._showFakeItem);this.attachEvent("onXLE",this._hideFakeItem);this._tfi_text=c||"Loading..."};dhtmlXTreeObject.prototype._showFakeItem=function(g,h){if((h===null)||(this._globalIdStorageFind("fake_load_xml_"+h))){return}var l=this.XMLsource;this.XMLsource=null;this.insertNewItem(h,"fake_load_xml_"+h,this._tfi_text);this.XMLsource=l};dhtmlXTreeObject.prototype._hideFakeItem=function(e,g){if(g===null){return}this.deleteItem("fake_load_xml_"+g)};dhtmlXTreeObject.prototype.isLocked=function(c){if(!this._locker){this._init_lock()}return(this._locker[c]==true)};dhtmlXTreeObject.prototype._lockItem=function(l,m,r){if(!this._locker){this._init_lock()}if(m){if(this._locker[l.id]==true){return}this._locker[l.id]=true;l.bIm0=l.images[0];l.bIm1=l.images[1];l.bIm2=l.images[2];l.images[0]=this.lico0;l.images[1]=this.lico1;l.images[2]=this.lico2;var n=l.span.parentNode;var o=n.previousSibling;this.dragger.removeDraggableItem(n);this.dragger.removeDraggableItem(o)}else{if(this._locker[l.id]!=true){return}this._locker[l.id]=false;l.images[0]=l.bIm0;l.images[1]=l.bIm1;l.images[2]=l.bIm2;var n=l.span.parentNode;var o=n.previousSibling;this.dragger.addDraggableItem(n,this);this.dragger.addDraggableItem(o,this)}if(!r){this._correctPlus(l)}};dhtmlXTreeObject.prototype.lockItem=function(h,l){if(!this._locker){this._init_lock()}this._lockOn=false;var g=this._globalIdStorageFind(h);this._lockOn=true;this._lockItem(g,dhx4.s2b(l))};dhtmlXTreeObject.prototype.setLockedIcons=function(h,l,g){if(!this._locker){this._init_lock()}this.lico0=h;this.lico1=l;this.lico2=g};dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array();this._locker_count="0";this._lockOn=true;this._globalIdStorageFindA=this._globalIdStorageFind;this._globalIdStorageFind=this._lockIdFind;if(this._serializeItem){this._serializeItemA=this._serializeItem;this._serializeItem=this._serializeLockItem;this._serializeTreeA=this.serializeTree;this.serializeTree=this._serializeLockTree}this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])};dhtmlXTreeObject.prototype._lockIdFind=function(h,g,l){if(!this.skipLock){if((!l)&&(this._lockOn==true)&&(this._locker[h]==true)){return null}}return this._globalIdStorageFindA(h,g,l)};dhtmlXTreeObject.prototype._serializeLockItem=function(c){if(this._locker[c.id]==true){return""}return this._serializeItemA(c)};dhtmlXTreeObject.prototype._serializeLockTree=function(){var c=this._serializeTreeA();return c.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")};dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo;dhtmlXTreeObject.prototype._moveNodeTo=function(g,h,l){if((h.treeNod.isLocked)&&(h.treeNod.isLocked(h.id))){return false}return this._moveNodeToA(g,h,l)};dhtmlXTreeObject.prototype.lockTree=function(c){if(dhx4.s2b(c)){this._initTreeLocker()}else{if(this._TreeLocker){this._TreeLocker.parentNode.removeChild(this._TreeLocker);this._TreeLocker=null}}};dhtmlXTreeObject.prototype._initTreeLocker=function(e){if(this._TreeLocker){return}this.parentObject.style.overflow="hidden";if(this.parentObject.style.position!="absolute"){this.parentObject.style.position="relative"}var g=document.createElement("div");g.style.position="absolute";g.style.left="0px";g.style.top="0px";g.className="dhx_tree_opacity";g.style.width=this.allTree.offsetWidth+"px";g.style.backgroundColor="#FFFFFF";g.style.height=this.allTree.offsetHeight+"px";this._TreeLocker=g;this.parentObject.appendChild(this._TreeLocker)};dhtmlXTreeObject.prototype.enableRTL=function(g){var e=dhx4.s2b(g);if(((e)&&(!this.rtlMode))||((!e)&&(this.rtlMode))){this.rtlMode=e;this._switchToRTL(this.rtlMode)}};dhtmlXTreeObject.prototype._switchToRTL=function(c){if(c){this.allTree.className=this._ltr_line=this.lineArray;this._ltr_min=this.minusArray;this._ltr_plus=this.plusArray;this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif");this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif");this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif");this.allTree.className="containerTableStyleRTL"}else{this.allTree.className="containerTableStyle";this.lineArray=this._ltr_line;this.minusArray=this._ltr_min;this.plusArray=this._ltr_plus}if(this.htmlNode.childsCount){this._redrawFrom(this,this.htmlNode)}};dhtmlXTreeObject.prototype.sortTree=function(l,n,m){var h=this._globalIdStorageFind(l);if(!h){return false}this._reorderBranch(h,(n.toString().toLowerCase()=="asc"),dhx4.s2b(m))};dhtmlXTreeObject.prototype.setCustomSortFunction=function(c){this._csfunca=c};dhtmlXTreeObject.prototype._reorderBranch=function(y,x,w){var r=[];var m=y.childsCount;if(!m){return}var s=y.childNodes[0].tr.parentNode;for(var u=0;u<m;u++){r[u]=y.childNodes[u];s.removeChild(r[u].tr)}var v=this;if(x==1){if(this._csfunca){r.sort(function(c,a){return v._csfunca(c.id,a.id)})}else{r.sort(function(c,a){return((c.span.innerHTML.toUpperCase()>a.span.innerHTML.toUpperCase())?1:((c.span.innerHTML.toUpperCase()==a.span.innerHTML.toUpperCase())?0:-1))})}}else{if(this._csfunca){r.sort(function(c,a){return v._csfunca(a.id,c.id)})}else{r.sort(function(c,a){return((c.span.innerHTML.toUpperCase()<a.span.innerHTML.toUpperCase())?1:((c.span.innerHTML.toUpperCase()==a.span.innerHTML.toUpperCase())?0:-1))})}}for(var u=0;u<m;u++){s.appendChild(r[u].tr);y.childNodes[u]=r[u];if((w)&&(r[u].unParsed)){r[u].unParsed.set("order",x?1:-1)}else{if((w)&&(r[u].childsCount)){this._reorderBranch(r[u],x,w)}}}for(var u=0;u<m;u++){this._correctPlus(r[u]);this._correctLine(r[u])}};dhtmlXTreeObject.prototype._reorderXMLBranch=function(o){var w=o.getAttribute("order");if(w=="none"){return}var v=(w==1);var r=o.childNodes.length;if(!r){return}var m=new Array();var u=0;for(var s=0;s<r;s++){if(o.childNodes[s].nodeType==1){m[u]=o.childNodes[s];u++}}for(var s=r-1;s!=0;s--){o.removeChild(o.childNodes[s])}if(v){m.sort(function(c,a){return((c.getAttribute("text")>a.getAttribute("text"))?1:((c.getAttribute("text")==a.getAttribute("text"))?0:-1))})}else{m.sort(function(c,a){return((c.getAttribute("text")<a.getAttribute("text"))?1:((c.getAttribute("text")==a.getAttribute("text"))?0:-1))})}for(var s=0;s<u;s++){m[s].setAttribute("order",w);o.appendChild(m[s])}o.setAttribute("order","none")};dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]];dhtmlXTreeObject.prototype.registerXMLEntity=function(e,g){this._serEnts[this._serEnts.length]=[e,g,new RegExp(e,"g")]};dhtmlXTreeObject.prototype.setSerializationLevel=function(n,u,o,m,s){this._xuserData=dhx4.s2b(n);this._xfullXML=dhx4.s2b(u);this._dtd=s;this._xescapeEntities=dhx4.s2b(o);if(dhx4.s2b(m)){this._apreUC="<![CDATA[";this._apstUC="]]>"}else{}for(var r=0;r<this._serEnts.length;r++){this._serEnts[r][2]=new RegExp(this._serEnts[r][0],"g")}};dhtmlXTreeObject.prototype.serializeTree=function(){if(this.stopEdit){this.stopEdit()}this._apreUC=this._apreUC||"";this._apstUC=this._apstUC||"";var g='<?xml version="1.0"?>';if(this._dtd){g+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'}g+='<tree id="'+this.rootId+'">';if((this._xuserData)&&(this._idpull[this.rootId]._userdatalist)){var h=this._idpull[this.rootId]._userdatalist.split(",");for(var l=0;l<h.length;l++){g+='<userdata name="'+h[l]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+h[l]]+this._apstUC+"</userdata>"}}for(var l=0;l<this.htmlNode.childsCount;l++){g+=this._serializeItem(this.htmlNode.childNodes[l])}g+="</tree>";return g};dhtmlXTreeObject.prototype._serializeItem=function(n){if(n.unParsed){if(document.all){return n.unParsed.d.xml}else{var r=new XMLSerializer();return r.serializeToString(n.unParsed.d)}}var w="";if(this._selected.length){var u=this._selected[0].id}else{u='"'}var o=n.span.innerHTML;if(this._xescapeEntities){for(var v=0;v<this._serEnts.length;v++){o=o.replace(this._serEnts[v][2],this._serEnts[v][1])}}if(!this._xfullXML){w='<item id="'+n.id+'" '+(this._getOpenState(n)==1?' open="1" ':"")+(u==n.id?' select="1"':"")+' text="'+o+'"'+(((this.XMLsource)&&(n.XMLload==0))?' child="1" ':"")+">"}else{w='<item id="'+n.id+'" '+(this._getOpenState(n)==1?' open="1" ':"")+(u==n.id?' select="1"':"")+' text="'+o+'" im0="'+n.images[0]+'" im1="'+n.images[1]+'" im2="'+n.images[2]+'" '+(n.acolor?('aCol="'+n.acolor+'" '):"")+(n.scolor?('sCol="'+n.scolor+'" '):"")+(n.checkstate==1?'checked="1" ':(n.checkstate==2?'checked="-1"':""))+(n.closeable?'closeable="1" ':"")+(((this.XMLsource)&&(n.XMLload==0))?' child="1" ':"")+">"}if((this._xuserData)&&(n._userdatalist)){var s=n._userdatalist.split(",");for(var v=0;v<s.length;v++){w+='<userdata name="'+s[v]+'">'+this._apreUC+n.userData["t_"+s[v]]+this._apstUC+"</userdata>"}}for(var v=0;v<n.childsCount;v++){w+=this._serializeItem(n.childNodes[v])}w+="</item>";return w};dhtmlXTreeObject.prototype.saveSelectedItem=function(g,e){g=g||"";this.setCookie("treeStateSelected"+g,this.getSelectedItemId(),e)};dhtmlXTreeObject.prototype.restoreSelectedItem=function(e){e=e||"";var g=this.getCookie("treeStateSelected"+e);this.selectItem(g,false)};dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(e,g){this.assMode=dhx4.s2b(e);if((this.assMode)&&(!this.oldOnSelect)){this.oldOnSelect=this.onRowSelect;this.onRowSelect=function(c,m,a){if(!m){m=this}m.parentObject.treeNod.oldOnSelect(c,m,a);if(m.parentObject.treeNod.assMode){m.parentObject.treeNod.saveSelectedItem(m.parentObject.treeNod.assCookieName)}}}this.assCookieName=g};dhtmlXTreeObject.prototype.saveState=function(o,r){var m=this._escape(this.serializeTree());var l=4000;if(m.length>l){if(navigator.appName.indexOf("Microsoft")!=-1){return false}this.setCookie("treeStatex"+o,Math.ceil(m.length/l));for(var n=0;n<Math.ceil(m.length/l);n++){this.setCookie("treeStatex"+o+"x"+n,m.substr(n*l,l),r)}}else{this.setCookie("treeStatex"+o,m,r)}var m=this.getCookie("treeStatex"+o);if(!m){this.setCookie("treeStatex"+o,"",r);return false}return true};dhtmlXTreeObject.prototype.loadState=function(h){var l=this.getCookie("treeStatex"+h);if(!l){return false}if(l.length){if(l.toString().length<4){var m="";for(var n=0;n<l;n++){m+=this.getCookie("treeStatex"+h+"x"+n)}l=m}this.parse((this.utfesc=="utf8")?decodeURI(l):unescape(l))}return true};dhtmlXTreeObject.prototype.setCookie=function(n,m,h){var l=n+"="+m+(h?("; "+h):"");document.cookie=l};dhtmlXTreeObject.prototype.getCookie=function(n){var m=n+"=";if(document.cookie.length>0){var l=document.cookie.indexOf(m);if(l!=-1){l+=m.length;var h=document.cookie.indexOf(";",l);if(h==-1){h=document.cookie.length}return document.cookie.substring(l,h)}}};dhtmlXTreeObject.prototype.saveOpenStates=function(n,h){var l=[];for(var m=0;m<this.htmlNode.childsCount;m++){l=l.concat(this._collectOpenStates(this.htmlNode.childNodes[m]))}l=l.join(this.dlmtr);this.setCookie("treeOpenStatex"+n,l,h)};dhtmlXTreeObject.prototype.loadOpenStates=function(r){for(var o=0;o<this.htmlNode.childsCount;o++){this._xcloseAll(this.htmlNode.childNodes[o])}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";var m=getCookie("treeOpenStatex"+r);if(m){var l=m.split(this.dlmtr);for(var o=0;o<l.length;o++){var n=this._globalIdStorageFind(l[o]);if(n){if((this.XMLsource)&&(!n.XMLload)&&(n.id!=this.rootId)){this._delayedLoad(n,"loadOpenStates('"+r+"')");return}else{this.openItem(l[o])}}}}this.callEvent("onAllOpenDynamic",[])};dhtmlXTreeObject.prototype._delayedLoad=function(g,e){this.afterLoadMethod=e;this.onLoadReserve=this.onXLE;this.onXLE=this._delayedLoadStep2;this._loadDynXML(g.id)};dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve;window.setTimeout(function(){dhtmlx.temp=tree;eval("dhtmlx.temp."+tree.afterLoadMethod)},100);if(tree.onXLE){tree.onXLE(tree)}tree.callEvent("onXLE",[tree])};dhtmlXTreeObject.prototype._collectOpenStates=function(l){var h=[];if(this._getOpenState(l)==1){h.push(l.id);for(var g=0;g<l.childsCount;g++){h=h.concat(this._collectOpenStates(l.childNodes[g]))}}return h};function setCookie(e,g){document.cookie=e+"="+g}function getCookie(n){var m=n+"=";if(document.cookie.length>0){var l=document.cookie.indexOf(m);if(l!=-1){l+=m.length;var h=document.cookie.indexOf(";",l);if(h==-1){h=document.cookie.length}return(document.cookie.substring(l,h))}}}dhtmlXTreeObject.prototype.openAllItemsDynamic=function(e){this.ClosedElem=new Array();this.G_node=null;var g=this._globalIdStorageFind(e||this.rootId);if(g.id!=this.rootId&&this.getOpenState(g.id)!=0){this.openItem(e)}this._openAllNodeChilds(g,0);if(this.ClosedElem.length>0){this.onLoadReserve=this.onXLE;this.onXLE=this._loadAndOpen;this._loadAndOpen(this)}};dhtmlXTreeObject.prototype._openAllNodeChilds=function(g){if((g.XMLload==0)||(g.unParsed)){this.ClosedElem.push(g)}for(var e=0;e<g.childsCount;e++){if(this._getOpenState(g.childNodes[e])<0){this._HideShow(g.childNodes[e],2)}if(g.childNodes[e].childsCount>0){this._openAllNodeChilds(g.childNodes[e])}if((g.childNodes[e].XMLload==0)||(g.childNodes[e].unParsed)){this.ClosedElem.push(g.childNodes[e])}}};dhtmlXTreeObject.prototype._loadAndOpen=function(c){if(c.G_node){c._openItem(c.G_node);c._openAllNodeChilds(c.G_node);c.G_node=null}if(c.ClosedElem.length>0){c.G_node=c.ClosedElem.shift()}if(c.G_node){if(c.G_node.unParsed){c.reParse(c.G_node)}else{window.setTimeout(function(){c._loadDynXML(c.G_node.id)},100)}}else{c.onXLE=c.onLoadReserve;if(c.onXLE){c.onXLE(c)}c.callEvent("onAllOpenDynamic",[c])}};dhtmlXTreeObject.prototype.openItemsDynamic=function(g,e){if(this.onXLE==this._stepOpen){return}this._opnItmsDnmcFlg=dhx4.s2b(e);this.onLoadReserve=this.onXLE;this.onXLE=this._stepOpen;this.ClosedElem=g.split(",").reverse();this._stepOpen(this)};dhtmlXTreeObject.prototype._stepOpen=function(g){if(!g.ClosedElem.length){g.onXLE=g.onLoadReserve;if(g._opnItmsDnmcFlg){g.selectItem(g.G_node,true)}if((g.onXLE)&&(arguments[1])){g.onXLE.apply(g,arguments)}g.callEvent("onOpenDynamicEnd",[]);return}g.G_node=g.ClosedElem.pop();g.skipLock=true;var e=g._globalIdStorageFind(g.G_node);if(e){if(e.XMLload===0){g.openItem(g.G_node)}else{g.openItem(g.G_node);g._stepOpen(g)}}g.skipLock=false};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};function dhtmlxArray(c){return dhtmlx.extend((c||new Array()),dhtmlxArray._master)}dhtmlxArray._master={_dhx_find:function(g){for(var e=0;e<this.length;e++){if(g==this[e]){return e}}return -1},_dhx_insertAt:function(h,l){this[this.length]=null;for(var g=this.length-1;g>=h;g--){this[g]=this[g-1]}this[h]=l},_dhx_removeAt:function(c){this.splice(c,1)},_dhx_swapItems:function(g,h){var l=this[g];this[g]=this[h];this[h]=l}};function dhtmlXGridObject(id){if(dhtmlxEvent.initTouch){dhtmlxEvent.initTouch()}if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}if(id){if(typeof(id)=="object"){this.entBox=id;if(!this.entBox.id){this.entBox.id="cgrid2_"+this.uid()}}else{this.entBox=document.getElementById(id)}}else{this.entBox=document.createElement("DIV");this.entBox.id="cgrid2_"+this.uid()}this.entBox.innerHTML="";dhx4._eventable(this);var self=this;this._wcorr=0;this.fontWidth=7;this.cell=null;this.row=null;this.iconURL="";this.editor=null;this._f2kE=true;this._dclE=true;this.combos=new Array(0);this.defVal=new Array(0);this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=true;this.xmlLoader=this.doLoadDetails;this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?(this.entBox.style.width||window.getComputedStyle(this.entBox,null)["width"]):(this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0))||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?(this.entBox.style.height||window.getComputedStyle(this.entBox,null)["height"]):(this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0))||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return false};var t_creator=function(name){var t=document.createElement("TABLE");t.cellSpacing=t.cellPadding=0;t.style.cssText="width:100%;table-layout:fixed;";t.className=name.substr(2);return t};this.obj=t_creator("c_obj");this.hdr=t_creator("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="25px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=new Array(0);this.sortImg=document.createElement("DIV");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=(_isIE&&(document.compatMode!="BackCompat")?22:20);this.imgURL=window.dhx_globalImgPath||"";this.isActive=false;this.isEditable=true;this.useImagesInHeader=false;this.pagingOn=false;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{if(self.destructor){self.destructor()}}catch(e){}});this.setSkin=function(name){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+name)+4;this.skin_name=name;if(this._imgURL){this.setImagePath(this._imgURL)}var classname=this.entBox.className.split(" gridbox")[0];this.entBox.className=classname+" gridbox gridbox_"+name+(_isIE?" isIE":" isModern");this.skin_h_correction=0;this.enableAlterCss("ev_"+name,"odd_"+name,this.isTreeGrid());this._fixAlterCss();switch(name){case"dhx_terrace":this._srdh=33;this.forceDivInHeader=true;break;case"dhx_web":this.forceDivInHeader=true;this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=true;break}if(_isIE&&this.hdr){var d=this.hdr.parentNode;d.removeChild(this.hdr);d.appendChild(this.hdr)}this.setSizes()};if(_isIE){this.preventIECaching(true)}if(window.dhtmlDragAndDropObject){this.dragger=new dhtmlDragAndDropObject()}this._doOnScroll=function(e,mode){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(e,mode)};this.doOnScroll=function(e,mode){this.hdrBox.scrollLeft=this.objBox.scrollLeft;if(this.ftr){this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft}if(mode){return}if(this._srnd){if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer)}this._dLoadTimer=window.setTimeout(function(){if(self._update_srnd_view){self._update_srnd_view()}},100)}};this.attachToObject=function(obj){obj.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(fl){if((this.isTreeGrid())&&(!this._h2)){this._h2=this._createHierarchy();if((this._fake)&&(!this._realfake)){this._fake._h2=this._h2}this._tgc={imgURL:null}}if(!this._hstyles){return}if(!this.skin_name){this.setSkin(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"dhx_skyblue")}this.editStop();this.lastClicked=null;this.resized=null;this.fldSorted=this.r_fldSorted=null;this.cellWidthPX=[];this.cellWidthPC=[];if(this.hdr.rows.length>0){var temp=this.xmlFileUrl;this.clearAll(true);this.xmlFileUrl=temp}var hdrRow=this.hdr.insertRow(0);for(var i=0;i<this.hdrLabels.length;i++){hdrRow.appendChild(document.createElement("TH"));hdrRow.childNodes[i]._cellIndex=i;hdrRow.childNodes[i].style.height="0px"}if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){hdrRow.style.position="absolute"}else{hdrRow.style.height="auto"}var hdrRow=this.hdr.insertRow(_isKHTML?2:1);hdrRow._childIndexes=new Array();var col_ex=0;for(var i=0;i<this.hdrLabels.length;i++){hdrRow._childIndexes[i]=i-col_ex;if((this.hdrLabels[i]==this.splitSign)&&(i!=0)){if(_isKHTML){hdrRow.insertCell(i-col_ex)}hdrRow.cells[i-col_ex-1].colSpan=(hdrRow.cells[i-col_ex-1].colSpan||1)+1;hdrRow.childNodes[i-col_ex-1]._cellIndex++;col_ex++;hdrRow._childIndexes[i]=i-col_ex;continue}hdrRow.insertCell(i-col_ex);hdrRow.childNodes[i-col_ex]._cellIndex=i;hdrRow.childNodes[i-col_ex]._cellIndexS=i;this.setColumnLabel(i,this.hdrLabels[i])}if(col_ex==0){hdrRow._childIndexes=null}this._cCount=this.hdrLabels.length;if(_isIE){window.setTimeout(function(){if(self.setSizes){self.setSizes()}},1)}if(!this.obj.firstChild){this.obj.appendChild(document.createElement("TBODY"))}var tar=this.obj.firstChild;if(!tar.firstChild){tar.appendChild(document.createElement("TR"));tar=tar.firstChild;if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){tar.style.position="absolute"}else{tar.style.height="auto"}for(var i=0;i<this.hdrLabels.length;i++){tar.appendChild(document.createElement("TH"));tar.childNodes[i].style.height="0px"}}this._c_order=null;if(this.multiLine!=true){this.obj.className+=" row20px"}this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.className="dhxgrid_sort_desc";this.sortImg.defLeft=0;if(this.noHeader){this.hdrBox.style.display="none"}else{this.noHeader=false}if(this._ivizcol){this.setColHidden()}this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();if(fl){this.parseXML()}this.obj.scrollTop=0;if(this.dragAndDropOff){this.dragger.addDragLanding(this.entBox,this)}if(this._initDrF){this._initD()}dhx4.callEvent("onGridCreated",[this])};this.setColumnSizes=function(gridWidth){var summ=0;var fcols=[];var fix=0;for(var i=0;i<this._cCount;i++){if((this.initCellWidth[i]=="*")&&!this._hrrar[i]){this._awdth=false;fcols.push(i);continue}if(this.cellWidthType=="%"){if(typeof this.cellWidthPC[i]=="undefined"){this.cellWidthPC[i]=this.initCellWidth[i]}var cwidth=(gridWidth*this.cellWidthPC[i]/100)||0;if(fix>0.5){cwidth++;fix--}var rwidth=this.cellWidthPX[i]=Math.floor(cwidth);var fix=fix+cwidth-rwidth}else{if(typeof this.cellWidthPX[i]=="undefined"){this.cellWidthPX[i]=this.initCellWidth[i]}}if(!this._hrrar[i]){summ+=this.cellWidthPX[i]*1}}if(fcols.length){var ms=Math.floor((gridWidth-summ)/fcols.length);if(ms<0){ms=1}for(var i=0;i<fcols.length;i++){var next=Math.max((this._drsclmW?(this._drsclmW[fcols[i]]||0):0),ms);this.cellWidthPX[fcols[i]]=next;summ+=next}if(gridWidth>summ){var last=fcols[fcols.length-1];this.cellWidthPX[last]=this.cellWidthPX[last]+(gridWidth-summ);summ=gridWidth}this._setAutoResize()}this.obj.style.width=summ+"px";this.hdr.style.width=summ+"px";if(this.ftr){this.ftr.style.width=summ+"px"}this.chngCellWidth();return summ};this.setSizes=function(){if((!this.hdr.rows[0])){return}var quirks=this.quirks=(_isIE&&document.compatMode=="BackCompat");var outerBorder=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes){if(this.globalBox){if(!this.globalBox.clientWidth){return}var ow=this.globalBox.clientWidth;var splitOuterBorder=(this.globalBox.offsetWidth-ow)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;var owu=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,(owu+(quirks?splitOuterBorder*2:0))-this._fake.entBox.clientWidth)+"px";if(owu!=this._lastTimeSplitWidth){this._fake._correctSplit(this._fake.entBox.clientWidth);this._lastTimeSplitWidth=owu}}if(this._delta_y&&!this._realfake){this.globalBox.style.height=this._delta_y;this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden";this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(quirks?splitOuterBorder*2:0)+"px"}}else{if(this._delta_x){if(this.entBox.parentNode&&this.entBox.parentNode.tagName=="TD"){this.entBox.style.width="1px";this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-outerBorder*2+"px"}else{this.entBox.style.width=this._delta_x}}if(this._delta_y){this.entBox.style.height=this._delta_y}}}window.clearTimeout(this._sizeTime);if(!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth)){this._sizeTime=window.setTimeout(function(){if(self.setSizes){self.setSizes()}},250);return}var border_x=((!this._wthB)&&((this.entBox.cmp||this._delta_x)&&(this.skin_name||"").indexOf("dhx")==0&&!quirks)?2:0);var border_y=((!this._wthB)&&((this.entBox.cmp||this._delta_y)&&(this.skin_name||"").indexOf("dhx")==0&&!quirks)?2:0);if(this._sizeFix){border_x-=this._sizeFix;border_y-=this._sizeFix}var isVScroll=this.parentGrid?false:(this.objBox.scrollHeight>this.objBox.offsetHeight);var scrfix=dhtmlx.$customScroll?0:18;var gridWidth=this.entBox.clientWidth-(this.skin_h_correction||0)*(quirks?0:1)-border_x;var gridWidthActive=this.entBox.clientWidth-(this.skin_h_correction||0)-border_x;var gridHeight=this.entBox.clientHeight-border_y;var summ=this.setColumnSizes(gridWidthActive-(isVScroll?scrfix:0)-(this._correction_x||0));var isHScroll=this.parentGrid?false:((this.objBox.scrollWidth>this.objBox.offsetWidth)||(this.objBox.style.overflowX=="scroll"));var headerHeight=this.hdr.clientHeight;var footerHeight=this.ftr?this.ftr.clientHeight:0;var newWidth=gridWidth;var newHeight=gridHeight-headerHeight-footerHeight;if(this._awdth&&this._awdth[0]&&this._awdth[1]==99999){isHScroll=0}if(this._ahgr){if(this._ahgrMA){newHeight=this.entBox.parentNode.clientHeight-headerHeight-footerHeight}else{newHeight=this.obj.offsetHeight+(isHScroll?scrfix:0)+(this._correction_y||0)}if(this._ahgrM){if(this._ahgrF){newHeight=Math.min(this._ahgrM,newHeight+headerHeight+footerHeight)-headerHeight-footerHeight}else{newHeight=Math.min(this._ahgrM,newHeight)}}if(isVScroll&&newHeight>=this.obj.scrollHeight+(isHScroll?scrfix:0)){isVScroll=false;this.setColumnSizes(gridWidthActive-(this._correction_x||0))}}if((this._awdth)&&(this._awdth[0])){if(this.cellWidthType=="%"){this.cellWidthType="px"}if(this._fake){summ+=this._fake.entBox.clientWidth}var newWidth=Math.min(Math.max(summ+(isVScroll?scrfix:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=(!isVScroll&&this.objBox.scrollWidth<=newWidth)?"hidden":"auto";if(this._fake){newWidth-=this._fake.entBox.clientWidth}}newHeight=Math.max(0,newHeight);this._ff_size_delta=(this._ff_size_delta==0.1)?0.2:0.1;if(!_isFF){this._ff_size_delta=0}if(!this.dontSetSizes){this.entBox.style.width=Math.max(0,newWidth+(quirks?2:0)*outerBorder+this._ff_size_delta)+"px";this.entBox.style.height=newHeight+(quirks?2:0)*outerBorder+headerHeight+footerHeight+"px"}this.objBox.style.height=newHeight+((quirks&&!isVScroll)?2:0)*outerBorder+"px";this.hdrBox.style.height=headerHeight+"px";if(newHeight!=gridHeight){this.doOnScroll(0,!this._srnd)}var ext=this["setSizes_"+this.skin_name];if(ext){ext.call(this)}this.setSortImgPos();if(headerHeight!=this.hdr.clientHeight&&this._ahgr){this.setSizes()}this.callEvent("onSetSizes",[])};this.chngCellWidth=function(){if((_isOpera)&&(this.ftr)){this.ftr.width=this.objBox.scrollWidth+"px"}var l=this._cCount;for(var i=0;i<l;i++){this.hdr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px";this.obj.rows[0].childNodes[i].style.width=this.cellWidthPX[i]+"px";if(this.ftr){this.ftr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px"}}};this.setDelimiter=function(delim){this.delim=delim};this.setInitWidthsP=function(wp){this.cellWidthType="%";this.initCellWidth=wp.split(this.delim.replace(/px/gi,""));if(!arguments[1]){this._setAutoResize()}};this._setAutoResize=function(){if(this._realfake){return}var el=window;var self=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(self._resize_timer);if(self._setAutoResize){self._resize_timer=window.setTimeout(function(){if(self.setSizes){self.setSizes()}if(self._fake){self._fake._correctSplit()}},100)}})};this.setInitWidths=function(wp){this.cellWidthType="px";this.initCellWidth=wp.split(this.delim);if(_isFF){for(var i=0;i<this.initCellWidth.length;i++){if(this.initCellWidth[i]!="*"){this.initCellWidth[i]=parseInt(this.initCellWidth[i])}}}};this.enableMultiline=function(state){this.multiLine=dhx4.s2b(state)};this.enableMultiselect=function(state){this.selMultiRows=dhx4.s2b(state)};this.setImagePath=function(path){path=path.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/");this._imgURL=path;this.imgURL=path+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/";this.iconTree=this.imgURL+"tree/"};this.setImagesPath=this.setImagePath;this.setIconPath=function(path){this.iconURL=path};this.setIconsPath=this.setIconPath;this.changeCursorState=function(ev){var el=ev.target||ev.srcElement;if(el.tagName!="TD"){el=this.getFirstParentOfType(el,"TD")}if(!el){return}if((el.tagName=="TD")&&(this._drsclmn)&&(!this._drsclmn[el._cellIndex])){return el.style.cursor="default"}var check=(ev.layerX||0)+(((!_isIE)&&(ev.target.tagName=="DIV"))?el.offsetLeft:0);if((el.offsetWidth-(ev.offsetX||(parseInt(this.getPosition(el,this.hdrBox))-check)*-1))<(_isOpera?20:10)){el.style.cursor="E-resize"}else{el.style.cursor="default"}if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft}};this.startColResize=function(ev){if(this.resized){this.stopColResize()}this.resized=null;var el=ev.target||ev.srcElement;if(el.tagName!="TD"){el=this.getFirstParentOfType(el,"TD")}var x=ev.clientX;var tabW=this.hdr.offsetWidth;var startW=parseInt(el.offsetWidth);if(el.tagName=="TD"&&el.style.cursor!="default"){if((this._drsclmn)&&(!this._drsclmn[el._cellIndex])){return}self._old_d_mm=document.body.onmousemove;self._old_d_mu=document.body.onmouseup;document.body.onmousemove=function(e){if(self){self.doColResize(e||window.event,el,startW,x,tabW)}};document.body.onmouseup=function(){if(self){self.stopColResize()}}}};this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"";document.body.onmouseup=self._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(ev,el,startW,x,tabW){el.style.cursor="E-resize";this.resized=el;var fcolW=startW+(ev.clientX-x);var wtabW=tabW+(ev.clientX-x);if(!(this.callEvent("onResize",[el._cellIndex,fcolW,this]))){return}if(_isIE){this.objBox.scrollLeft=this.hdrBox.scrollLeft}var result=false;if(el.colSpan>1){var a_sizes=new Array();for(var i=0;i<el.colSpan;i++){a_sizes[i]=Math.round(fcolW*this.hdr.rows[0].childNodes[el._cellIndexS+i].offsetWidth/el.offsetWidth)}for(var i=0;i<el.colSpan;i++){result=this._setColumnSizeR(el._cellIndexS+i*1,a_sizes[i])}}else{result=this._setColumnSizeR(el._cellIndex,fcolW)}this.doOnScroll(0,1);this.setSizes();if(this._fake&&this._awdth){this._fake._correctSplit()}return result};this._setColumnSizeR=function(ind,fcolW){if(fcolW>((this._drsclmW&&!this._notresize)?(this._drsclmW[ind]||10):10)){this.obj.rows[0].childNodes[ind].style.width=fcolW+"px";this.hdr.rows[0].childNodes[ind].style.width=fcolW+"px";if(this.ftr){this.ftr.rows[0].childNodes[ind].style.width=fcolW+"px"}if(this.cellWidthType=="px"){this.cellWidthPX[ind]=fcolW}else{var gridWidth=parseInt(this.entBox.offsetWidth);if(this.objBox.scrollHeight>this.objBox.offsetHeight){gridWidth-=17}var pcWidth=Math.round(fcolW/gridWidth*100);this.cellWidthPC[ind]=pcWidth}if(this.sortImg.style.display!="none"){this.setSortImgPos()}}else{return false}};this.setSortImgState=function(state,ind,order,row){order=(order||"asc").toLowerCase();if(!dhx4.s2b(state)){this.sortImg.style.display="none";this.fldSorted=this.r_fldSorted=null;return}if(order=="asc"){this.sortImg.className="dhxgrid_sort_asc"}else{this.sortImg.className="dhxgrid_sort_desc"}this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[ind];var r=this.hdr.rows[row||1];if(!r){return}for(var i=0;i<r.childNodes.length;i++){if(r.childNodes[i]._cellIndexS==ind){this.r_fldSorted=r.childNodes[i];return this.setSortImgPos()}}return this.setSortImgState(state,ind,order,(row||1)+1)};this.setSortImgPos=function(ind,mode,hRowInd,el){if(this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:ind]){return}if(!el){if(!ind){var el=this.r_fldSorted}else{var el=this.hdr.rows[hRowInd||0].cells[ind]}}if(el!=null){var pos=this.getPosition(el,this.hdrBox);var wdth=el.offsetWidth;this.sortImg.style.left=Number(pos[0]+wdth-13)+"px";this.sortImg.defLeft=parseInt(this.sortImg.style.left);this.sortImg.style.top=Number(pos[1]+5)+"px";if((!this.useImagesInHeader)&&(!mode)){this.sortImg.style.display="inline"}this.sortImg.style.left=this.sortImg.defLeft+"px"}};this.setActive=function(fl){if(arguments.length==0){var fl=true}if(fl==true){if(globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject!=this)){globalActiveDHTMLGridObject.editStop();globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])}globalActiveDHTMLGridObject=this;this.isActive=true}else{this.isActive=false;this.callEvent("onBlur",[this])}};this._doClick=function(ev){var selMethod=0;var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(!el||!el.parentNode||!el.parentNode.idd){return}var fl=true;if(this.markedCells){var markMethod=0;if(ev.shiftKey||ev.metaKey){markMethod=1}if(ev.ctrlKey){markMethod=2}this.doMark(el,markMethod);return true}if(this.selMultiRows!=false){if(ev.shiftKey&&this.row!=null&&this.selectedRows.length){selMethod=1}if(ev.ctrlKey||ev.metaKey){selMethod=2}}return this.doClick(el,fl,selMethod,false)};this._doContClick=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if((!el)||(typeof(el.parentNode.idd)=="undefined")){this.callEvent("onEmptyClick",[ev]);return true}if(ev.button==2||(_isMacOS&&ev.ctrlKey)){if(!this.callEvent("onRightClick",[el.parentNode.idd,el._cellIndex,ev])){var z=function(e){(e||event).cancelBubble=true;return false};(ev.srcElement||ev.target).oncontextmenu=z;return z(ev)}if(this._ctmndx){if(!(this.callEvent("onBeforeContextMenu",[el.parentNode.idd,el._cellIndex,this]))){return true}if(_isIE){ev.srcElement.oncontextmenu=function(){event.cancelBubble=true;return false}}if(this._ctmndx.showContextMenu){var dEl0=window.document.documentElement;var dEl1=window.document.body;var corrector=new Array((dEl0.scrollLeft||dEl1.scrollLeft),(dEl0.scrollTop||dEl1.scrollTop));if(_isIE){var x=ev.clientX+corrector[0];var y=ev.clientY+corrector[1]}else{var x=ev.pageX;var y=ev.pageY}this._ctmndx.showContextMenu(x-1,y-1);this.contextID=this._ctmndx.contextMenuZoneId=el.parentNode.idd+"_"+el._cellIndex;this._ctmndx._skip_hide=true}else{el.contextMenuId=el.parentNode.idd+"_"+el._cellIndex;el.contextMenu=this._ctmndx;el.a=this._ctmndx._contextStart;el.a(el,ev);el.a=null}ev.cancelBubble=true;return false}}else{if(this._ctmndx){if(this._ctmndx.hideContextMenu){this._ctmndx.hideContextMenu()}else{this._ctmndx._contextEnd()}}}return true};this.doClick=function(el,fl,selMethod,show){if(!this.selMultiRows){selMethod=0}var psid=this.row?this.row.idd:0;this.setActive(true);if(!selMethod){selMethod=0}if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,"")}if(el.tagName=="TD"){if(this.checkEvent("onSelectStateChanged")){var initial=this.getSelectedId()}var prow=this.row;if(selMethod==1){var elRowIndex=this.rowsCol._dhx_find(el.parentNode);var lcRowIndex=this.rowsCol._dhx_find(this.lastClicked);if(elRowIndex>lcRowIndex){var strt=lcRowIndex;var end=elRowIndex}else{var strt=elRowIndex;var end=lcRowIndex}for(var i=0;i<this.rowsCol.length;i++){if((i>=strt&&i<=end)){if(this.rowsCol[i]&&(!this.rowsCol[i]._sRow)){if(!this.rowsCol[i].idd){continue}if(this.rowsCol[i].className.indexOf("rowselected")==-1&&(this.callEvent("onBeforeSelect",[this.rowsCol[i].idd,psid,el._cellIndex]))){this.rowsCol[i].className+=" rowselected";this.selectedRows[this.selectedRows.length]=this.rowsCol[i]}}else{this.clearSelection();return this.doClick(el,fl,0,show)}}}}else{if(selMethod==2){if(el.parentNode.className.indexOf("rowselected")!=-1){el.parentNode.className=el.parentNode.className.replace(/rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(el.parentNode));var skipRowSelection=true;show=false}}}this.editStop();if(typeof(el.parentNode.idd)=="undefined"){return true}if((!skipRowSelection)&&(!el.parentNode._sRow)){if(this.callEvent("onBeforeSelect",[el.parentNode.idd,psid,el._cellIndex])){if(this.getSelectedRowId()!=el.parentNode.idd){if(selMethod==0){this.clearSelection()}this.cell=el;if((prow==el.parentNode)&&(this._chRRS)){fl=false}this.row=el.parentNode;this.row.className+=" rowselected";if(this.selectedRows._dhx_find(this.row)==-1){this.selectedRows[this.selectedRows.length]=this.row}}else{this.cell=el;this.row=el.parentNode}}else{fl=false}}if(this.cell&&this.cell.parentNode.className.indexOf("rowselected")!=-1){this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"}if(selMethod!=1){if(!this.row){return}}this.lastClicked=el.parentNode;var rid=this.row.idd;var cid=this.cell;if(fl&&typeof(rid)!="undefined"&&cid&&!skipRowSelection){self.onRowSelectTime=setTimeout(function(){if(self.callEvent){self.callEvent("onRowSelect",[rid,cid._cellIndex])}},100)}else{this.callEvent("onRowSelectRSOnly",[rid])}if(this.checkEvent("onSelectStateChanged")){var afinal=this.getSelectedId();if(initial!=afinal){this.callEvent("onSelectStateChanged",[afinal,initial])}}if(skipRowSelection){return false}}this.isActive=true;if(show!==false&&this.cell&&this.cell.parentNode.idd){this.moveToVisible(this.cell)}};this.selectAll=function(){this.clearSelection();var coll=this.rowsBuffer;if(this.pagingOn){coll=this.rowsCol}for(var i=0;i<coll.length;i++){this.render_row(i).className+=" rowselected"}this.selectedRows=dhtmlxArray([].concat(coll));if(this.selectedRows.length){this.row=this.selectedRows[0];this.cell=this.row.cells[0]}if((this._fake)&&(!this._realfake)){this._fake.selectAll()}};this.selectCell=function(r,cInd,fl,preserve,edit,show){if(!fl){fl=false}if(typeof(r)!="object"){r=this.render_row(r)}if(!r||r==-1){return null}if(r._childIndexes){var c=r.childNodes[r._childIndexes[cInd]]}else{var c=r.childNodes[cInd]}if(!c){c=r.childNodes[0]}if(!this.markedCells){if(preserve){this.doClick(c,fl,3,show)}else{this.doClick(c,fl,0,show)}}else{this.doMark(c,preserve?2:0)}if(edit){this.editCell()}};this.moveToVisible=function(cell_obj,onlyVScroll){if(this.pagingOn){var newPage=Math.floor(this.getRowIndex(cell_obj.parentNode.idd)/this.rowsBufferOutSize)+1;if(newPage!=this.currentPage){this.changePage(newPage)}}try{if(cell_obj.offsetHeight){var distance=cell_obj.offsetLeft+cell_obj.offsetWidth+20;var scrollLeft=0;if(distance>(this.objBox.offsetWidth+this.objBox.scrollLeft)){if(cell_obj.offsetLeft>this.objBox.scrollLeft){scrollLeft=cell_obj.offsetLeft-(this.objBox.offsetWidth-cell_obj.offsetWidth)+5}}else{if(cell_obj.offsetLeft<this.objBox.scrollLeft){distance-=cell_obj.offsetWidth*2/3;if(distance<this.objBox.scrollLeft){scrollLeft=cell_obj.offsetLeft-5}}}if((scrollLeft)&&(!onlyVScroll)){this.objBox.scrollLeft=scrollLeft}}if(!cell_obj.offsetHeight){var mask=this._realfake?this._fake.rowsAr[cell_obj.parentNode.idd]:cell_obj.parentNode;distance=this.rowsBuffer._dhx_find(mask)*this._srdh}else{distance=cell_obj.offsetTop}var distancemax=distance+cell_obj.offsetHeight+38;if(distancemax>(this.objBox.offsetHeight+this.objBox.scrollTop)){var scrollTop=distance}else{if(distance<this.objBox.scrollTop){var scrollTop=distance-5}}if(scrollTop){this.objBox.scrollTop=scrollTop}}catch(er){}};this.editCell=function(){if(this.editor&&this.cell==this.editor.cell){return}this.editStop();if((this.isEditable!=true)||(!this.cell)){return false}var c=this.cell;if(c.parentNode._locked){return false}this.editor=this.cells4(c);if(this.editor!=null){if(this.editor.isDisabled()){this.editor=null;return false}if(this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])!=false&&this.editor.nlcz){this._Opera_stop=(new Date).valueOf();this.editor.nlcz();c.className+=" editable";this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])}else{this.editor=null}}};this.editStop=function(mode){if(_isOpera){if(this._Opera_stop){if((this._Opera_stop*1+50)>(new Date).valueOf()){return}this._Opera_stop=null}}if(this.editor&&this.editor!=null){this.editor.cell.className=this.editor.cell.className.replace("editable","");if(mode){var t=this.editor.val;this.editor.detach();this.editor.setValue(t);this.editor=null;this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,t]);return}if(this.editor.detach()){this.cell.wasChanged=true}var g=this.editor;if(g==null){return}this.editor=null;var z=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,g.getValue(),g.val]);if((typeof(z)=="string")||(typeof(z)=="number")){g[g.setImage?"setLabel":"setValue"](z)}else{if(!z){g[g.setImage?"setLabel":"setValue"](g.val)}}if(this._ahgr&&this.multiLine){this.setSizes()}}};this._nextRowCell=function(row,dir,pos){row=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(row),dir);if(!row){return null}return row.childNodes[row._childIndexes?row._childIndexes[pos]:pos]};this._getNextCell=function(acell,dir,i){acell=acell||this.cell;var arow=acell.parentNode;if(this._tabOrder){i=this._tabOrder[acell._cellIndex];if(typeof i!="undefined"){if(i<0){acell=this._nextRowCell(arow,dir,Math.abs(i)-1)}else{acell=arow.childNodes[i]}}}else{var i=acell._cellIndex+dir;if(i>=0&&i<this._cCount){if(arow._childIndexes){i=arow._childIndexes[acell._cellIndex]+dir}acell=arow.childNodes[i]}else{acell=this._nextRowCell(arow,dir,(dir==1?0:(this._cCount-1)))}}if(!acell){if((dir==1)&&this.tabEnd){this.tabEnd.focus();this.tabEnd.focus();this.setActive(false)}if((dir==-1)&&this.tabStart){this.tabStart.focus();this.tabStart.focus();this.setActive(false)}return null}if(acell.style.display!="none"&&(!this.smartTabOrder||!this.cells(acell.parentNode.idd,acell._cellIndex).isDisabled())){return acell}return this._getNextCell(acell,dir)};this._nextRow=function(ind,dir){var r=this.render_row(ind+dir);if(!r||r==-1){return null}if(r&&r.style.display=="none"){return this._nextRow(ind+dir,dir)}return r};this.scrollPage=function(dir){if(!this.rowsBuffer.length){return}var master=this._realfake?this._fake:this;var new_ind=Math.floor((master._r_select||this.getRowIndex(this.row.idd)||0)+(dir)*this.objBox.offsetHeight/(this._srdh||20));if(new_ind<0){new_ind=0}if(new_ind>=this.rowsBuffer.length){new_ind=this.rowsBuffer.length-1}if(this._srnd&&!this.rowsBuffer[new_ind]){this.objBox.scrollTop+=Math.floor((dir)*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20);if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}master._r_select=new_ind}else{this.selectCell(new_ind,this.cell._cellIndex,true,false,false,(this.multiLine||this._srnd));if(!this.multiLine&&!this._srnd&&!this._realfake){this.objBox.scrollTop=this.getRowById(this.getRowId(new_ind)).offsetTop;if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}}master._r_select=null}};this.doKey=function(ev){if(!ev){return true}if((ev.target||ev.srcElement).value!==window.undefined){var zx=(ev.target||ev.srcElement);if(zx.className!="dhxcombo_input"&&((!zx.parentNode)||(zx.parentNode.className.indexOf("editable")==-1))){return true}}if((globalActiveDHTMLGridObject)&&(this!=globalActiveDHTMLGridObject)){return globalActiveDHTMLGridObject.doKey(ev)}if(this.isActive==false){return true}if(this._htkebl){return true}if(!this.callEvent("onKeyPress",[ev.keyCode,ev.ctrlKey,ev.shiftKey,ev])){return false}var code="k"+ev.keyCode+"_"+(ev.ctrlKey?1:0)+"_"+(ev.shiftKey?1:0);if(this.cell){if(this._key_events[code]){if(false===this._key_events[code].call(this)){return true}if(ev.preventDefault){ev.preventDefault()}ev.cancelBubble=true;return false}if(this._key_events.k_other){this._key_events.k_other.call(this,ev)}}return true};this.selectRow=function(r,fl,preserve,show){if(typeof(r)!="object"){r=this.render_row(r)}this.selectCell(r,0,fl,preserve,false,show)};this.wasDblClicked=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(el){var rowId=el.parentNode.idd;return this.callEvent("onRowDblClicked",[rowId,el._cellIndex,ev])}};this._onHeaderClick=function(e,el){var that=this.grid;el=el||that.getFirstParentOfType(_isIE?event.srcElement:e.target,"TD");if(this.grid.resized==null){if(!(this.grid.callEvent("onHeaderClick",[el._cellIndexS,(e||window.event)]))){return false}that.sortField(el._cellIndexS,false,el)}this.grid.resized=null};this.deleteSelectedRows=function(){var num=this.selectedRows.length;if(num==0){return}var tmpAr=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=num-1;i>=0;i--){var node=tmpAr[i];if(!this.deleteRow(node.idd,node)){this.selectedRows[this.selectedRows.length]=node}else{if(node==this.row){var ind=i}}}if(ind){try{if(ind+1>this.rowsCol.length){ind--}this.selectCell(ind,0,true)}catch(er){this.row=null;this.cell=null}}};this.getSelectedRowId=function(){var selAr=new Array(0);var uni={};for(var i=0;i<this.selectedRows.length;i++){var id=this.selectedRows[i].idd;if(uni[id]){continue}selAr[selAr.length]=id;uni[id]=true}if(selAr.length==0){return null}else{return selAr.join(this.delim)}};this.getSelectedCellIndex=function(){if(this.cell!=null){return this.cell._cellIndex}else{return -1}};this.getColWidth=function(ind){return parseInt(this.cellWidthPX[ind])};this.setColWidth=function(ind,value){if(value=="*"){this.initCellWidth[ind]="*"}else{if(this._hrrar[ind]){return}if(this.cellWidthType=="px"){this.cellWidthPX[ind]=parseInt(value)}else{this.cellWidthPC[ind]=parseInt(value)}}this.setSizes()};this.getRowIndex=function(row_id){for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==row_id){return i}}return -1};this.getRowId=function(ind){return this.rowsBuffer[ind]?this.rowsBuffer[ind].idd:this.undefined};this.setRowId=function(ind,row_id){this.changeRowId(this.getRowId(ind),row_id)};this.changeRowId=function(oldRowId,newRowId){if(oldRowId==newRowId){return}var row=this.rowsAr[oldRowId];row.idd=newRowId;if(this.UserData[oldRowId]){this.UserData[newRowId]=this.UserData[oldRowId];this.UserData[oldRowId]=null}if(this._h2&&this._h2.get[oldRowId]){this._h2.get[newRowId]=this._h2.get[oldRowId];this._h2.get[newRowId].id=newRowId;delete this._h2.get[oldRowId]}this.rowsAr[oldRowId]=null;this.rowsAr[newRowId]=row;for(var i=0;i<row.childNodes.length;i++){if(row.childNodes[i]._code){row.childNodes[i]._code=this._compileSCL(row.childNodes[i]._val,row.childNodes[i])}}if(this._mat_links&&this._mat_links[oldRowId]){var a=this._mat_links[oldRowId];delete this._mat_links[oldRowId];for(var c in a){for(var i=0;i<a[c].length;i++){this._compileSCL(a[c][i].original,a[c][i])}}}this.callEvent("onRowIdChange",[oldRowId,newRowId])};this.setColumnIds=function(ids){this.columnIds=ids.split(this.delim)};this.setColumnId=function(ind,id){this.columnIds[ind]=id};this.getColIndexById=function(id){for(var i=0;i<this.columnIds.length;i++){if(this.columnIds[i]==id){return i}}};this.getColumnId=function(cin){return this.columnIds[cin]};this.getColumnLabel=function(cin,ind,hdr){var z=(hdr||this.hdr).rows[(ind||0)+1];for(var i=0;i<z.cells.length;i++){if(z.cells[i]._cellIndexS==cin){return(_isIE?z.cells[i].innerText:z.cells[i].textContent)}}return""};this.getColLabel=this.getColumnLabel;this.getFooterLabel=function(cin,ind){return this.getColumnLabel(cin,ind,this.ftr)};this.setRowTextBold=function(row_id){var r=this.getRowById(row_id);if(r){r.style.fontWeight="bold"}};this.setRowTextStyle=function(row_id,styleString){var r=this.getRowById(row_id);if(!r){return}for(var i=0;i<r.childNodes.length;i++){var pfix=r.childNodes[i]._attrs.style||"";if((this._hrrar)&&(this._hrrar[i])){pfix="display:none;"}if(_isIE){r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}else{r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}}};this.setRowColor=function(row_id,color){var r=this.getRowById(row_id);for(var i=0;i<r.childNodes.length;i++){r.childNodes[i].bgColor=color}};this.setCellTextStyle=function(row_id,ind,styleString){var r=this.getRowById(row_id);if(!r){return}var cell=r.childNodes[r._childIndexes?r._childIndexes[ind]:ind];if(!cell){return}var pfix="";if((this._hrrar)&&(this._hrrar[ind])){pfix="display:none;"}if(_isIE){cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}else{cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}};this.setRowTextNormal=function(row_id){var r=this.getRowById(row_id);if(r){r.style.fontWeight="normal"}};this.doesRowExist=function(row_id){if(this.getRowById(row_id)!=null){return true}else{return false}};this.getColumnsNum=function(){return this._cCount};this.moveRowUp=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid()){return this.moveRowUDTG(row_id,-1)}var rInd=this.rowsCol._dhx_find(r);if((r.previousSibling)&&(rInd!=0)){r.parentNode.insertBefore(r,r.previousSibling);this.rowsCol._dhx_swapItems(rInd,rInd-1);this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd-1);if(this._cssEven){this._fixAlterCss(rInd-1)}}};this.moveRowDown=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid()){return this.moveRowUDTG(row_id,1)}var rInd=this.rowsCol._dhx_find(r);if(r.nextSibling){this.rowsCol._dhx_swapItems(rInd,rInd+1);if(r.nextSibling.nextSibling){r.parentNode.insertBefore(r,r.nextSibling.nextSibling)}else{r.parentNode.appendChild(r)}this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd+1);if(this._cssEven){this._fixAlterCss(rInd)}}};this.getCombo=function(col_ind){if(!this.combos[col_ind]){this.combos[col_ind]=new dhtmlXGridComboObject()}return this.combos[col_ind]};this.setUserData=function(row_id,name,value){if(!row_id){row_id="gridglobaluserdata"}if(!this.UserData[row_id]){this.UserData[row_id]=new Hashtable()}this.UserData[row_id].put(name,value)};this.getUserData=function(row_id,name){if(!row_id){row_id="gridglobaluserdata"}this.getRowById(row_id);var z=this.UserData[row_id];return(z?z.get(name):"")};this.setEditable=function(fl){this.isEditable=dhx4.s2b(fl)};this.selectRowById=function(row_id,multiFL,show,call){if(!call){call=false}this.selectCell(this.getRowById(row_id),0,call,multiFL,false,show)};this.clearSelection=function(){this.editStop();for(var i=0;i<this.selectedRows.length;i++){var r=this.rowsAr[this.selectedRows[i].idd];if(r){r.className=r.className.replace(/rowselected/g,"")}}this.selectedRows=dhtmlxArray();this.row=null;if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,"");this.cell=null}this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(from_row_id,to_row_id){var frRow=this.getRowById(from_row_id);if(!this.isTreeGrid()){for(var i=0;i<frRow.cells.length;i++){this.cells(to_row_id,i).setValue(this.cells(from_row_id,i).getValue())}}else{this._copyTreeGridRowContent(frRow,from_row_id,to_row_id)}if(!_isIE){this.getRowById(from_row_id).cells[0].height=frRow.cells[0].offsetHeight}};this.setFooterLabel=function(c,label,ind){return this.setColumnLabel(c,label,ind,this.ftr)};this.setColumnLabel=function(c,label,ind,hdr){var z=(hdr||this.hdr).rows[ind||1];var col=(z._childIndexes?z._childIndexes[c]:c);if(!z.cells[col]){return}if(!this.useImagesInHeader){var hdrHTML="<div class='hdrcell'>";if(label.indexOf("img:[")!=-1){var imUrl=label.replace(/.*\[([^>]+)\].*/,"$1");label=label.substr(label.indexOf("]")+1,label.length);hdrHTML+="<img width='18px' height='18px' align='absmiddle' src='"+imUrl+"' hspace='2'>"}hdrHTML+=label;hdrHTML+="</div>";z.cells[col].innerHTML=hdrHTML;if(this._hstyles[col]){z.cells[col].style.cssText=this._hstyles[c]}}else{z.cells[col].style.textAlign="left";z.cells[col].innerHTML="<img src='"+label+"'>";var a=new Image();a.src=""+label.replace(/(\.[a-z]+)/,".des$1");this.preloadImagesAr[this.preloadImagesAr.length]=a;var b=new Image();b.src=""+label.replace(/(\.[a-z]+)/,".asc$1");this.preloadImagesAr[this.preloadImagesAr.length]=b}if((label||"").indexOf("#")!=-1){var t=label.match(/(^|{)#([^}]+)(}|$)/);if(t){var tn="_in_header_"+t[2];if(this[tn]){this[tn]((this.forceDivInHeader?z.cells[col].firstChild:z.cells[col]),col,label.split(t[0]))}}}};this.setColLabel=function(a,b,ind,c){return this.setColumnLabel(a,b,(ind||0)+1,c)};this.clearAll=function(header){if(!this.obj.rows[0]){return}if(this._h2){this._h2=this._createHierarchy();if(this._fake){if(this._realfake){this._h2=this._fake._h2}else{this._fake._h2=this._h2}}}this.limit=this._limitC=0;this.editStop(true);if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer)}if(this._dload){this.objBox.scrollTop=0;this.limit=this._limitC||0;this._initDrF=true}var len=this.rowsCol.length;len=this.obj.rows.length;for(var i=len-1;i>0;i--){var t_r=this.obj.rows[i];t_r.parentNode.removeChild(t_r)}if(header){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var i=this.hdr.rows.length-1;i>=0;i--){var t_r=this.hdr.rows[i];t_r.parentNode.removeChild(t_r)}if(this.ftr){this.ftr.parentNode.removeChild(this.ftr);this.ftr=null}this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.row=null;this.cell=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd){this.xmlFileUrl=""}if(this.pagingOn){this.changePage(1)}if(this._contextCallTimer){window.clearTimeout(this._contextCallTimer)}if(this._sst){this.enableStableSorting(true)}this._fillers=this.undefined;this.setSortImgState(false);this.setSizes();this.callEvent("onClearAll",[])};this.sortField=function(ind,repeatFl,r_el){if(this.getRowsNum()==0){return false}var el=this.hdr.rows[0].cells[ind];if(!el){return}if(el.tagName=="TH"&&(this.fldSort.length-1)>=el._cellIndex&&this.fldSort[el._cellIndex]!="na"){var data=this.getSortingState();var sortType=(data[0]==ind&&data[1]=="asc")?"des":"asc";if(!this.callEvent("onBeforeSorting",[ind,this.fldSort[ind],sortType])){return}this.sortImg.className="dhxgrid_sort_"+(sortType=="asc"?"asc":"desc");if(this.useImagesInHeader){var cel=this.hdr.rows[1].cells[el._cellIndex].firstChild;if(this.fldSorted!=null){var celT=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;celT.src=celT.src.replace(/(\.asc\.)|(\.des\.)/,".")}cel.src=cel.src.replace(/(\.[a-z]+)$/,"."+sortType+"$1")}this.sortRows(el._cellIndex,this.fldSort[el._cellIndex],sortType);this.fldSorted=el;this.r_fldSorted=r_el;var c=this.hdr.rows[1];var c=r_el.parentNode;var real_el=c._childIndexes?c._childIndexes[el._cellIndex]:el._cellIndex;this.setSortImgPos(false,false,false,r_el)}};this.setCustomSorting=function(func,col){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[col]=(typeof(func)=="string")?eval(func):func;this.fldSort[col]="cus"};this.enableHeaderImages=function(fl){this.useImagesInHeader=fl};this.setHeader=function(hdrStr,splitSign,styles){if(typeof(hdrStr)!="object"){var arLab=this._eSplit(hdrStr)}else{arLab=[].concat(hdrStr)}var arWdth=new Array(0);var arTyp=new dhtmlxArray(0);var arAlg=new Array(0);var arVAlg=new Array(0);var arSrt=new Array(0);for(var i=0;i<arLab.length;i++){arWdth[arWdth.length]=Math.round(100/arLab.length);arTyp[arTyp.length]="ed";arAlg[arAlg.length]="left";arVAlg[arVAlg.length]="middle";arSrt[arSrt.length]="na"}this.splitSign=splitSign||"#cspan";this.hdrLabels=arLab;this.cellWidth=arWdth;if(!this.initCellWidth.length){this.setInitWidthsP(arWdth.join(this.delim),true)}this.cellType=arTyp;this.cellAlign=arAlg;this.cellVAlign=arVAlg;this.fldSort=arSrt;this._hstyles=styles||[]};this._eSplit=function(str){if(![].push){return str.split(this.delim)}var a="r"+(new Date()).valueOf();var z=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(str||"").replace(RegExp(z,"g"),a).replace(RegExp("\\\\"+a,"g"),this.delim).split(a)};this.getColType=function(cInd){return this.cellType[cInd]};this.getColTypeById=function(cID){return this.cellType[this.getColIndexById(cID)]};this.setColTypes=function(typeStr){this.cellType=dhtmlxArray(typeStr.split(this.delim));this._strangeParams=new Array();for(var i=0;i<this.cellType.length;i++){if((this.cellType[i].indexOf("[")!=-1)){var z=this.cellType[i].split(/[\[\]]+/g);this.cellType[i]=z[0];this.defVal[i]=z[1];if(z[1].indexOf("=")==0){this.cellType[i]="math";this._strangeParams[i]=z[0]}}if(!window["eXcell_"+this.cellType[i]]){dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[i],this,this.cellType[i]])}}};this.setColSorting=function(sortStr){this.fldSort=sortStr.split(this.delim);var check={str:1,"int":1,date:1};for(var i=0;i<this.fldSort.length;i++){if((!check[this.fldSort[i]])&&(typeof(window[this.fldSort[i]])=="function")){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[i]=window[this.fldSort[i]];this.fldSort[i]="cus"}}};this.setColAlign=function(alStr){this.cellAlign=alStr.split(this.delim);for(var i=0;i<this.cellAlign.length;i++){this.cellAlign[i]=this.cellAlign[i]._dhx_trim()}};this.setColVAlign=function(valStr){this.cellVAlign=valStr.split(this.delim)};this.setNoHeader=function(fl){this.noHeader=dhx4.s2b(fl)};this.showRow=function(rowID){this.getRowById(rowID);if(this._h2){this.openItem(this._h2.get[rowID].parent.id)}var c=this.getRowById(rowID).childNodes[0];while(c&&c.style.display=="none"){c=c.nextSibling}if(c){this.moveToVisible(c,true)}};this.setStyle=function(ss_header,ss_grid,ss_selCell,ss_selRow){this.ssModifier=[ss_header,ss_grid,ss_selCell,ss_selCell,ss_selRow];var prefs=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];var index=0;while(!_isIE){try{var temp=document.styleSheets[index].cssRules.length}catch(e){index++;continue}break}for(var i=0;i<prefs.length;i++){if(this.ssModifier[i]){if(_isIE){document.styleSheets[0].addRule(prefs[i],this.ssModifier[i])}else{document.styleSheets[index].insertRule(prefs[i]+(" { "+this.ssModifier[i]+" }"),document.styleSheets[index].cssRules.length)}}}};this.setColumnColor=function(clr){this.columnColor=clr.split(this.delim)};this.enableAlterCss=function(cssE,cssU,perLevel,levelUnique){if(cssE||cssU){this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();if(this._fake){this._fake._fixAlterCss()}})}this._cssSP=perLevel;this._cssSU=levelUnique;this._cssEven=cssE;this._cssUnEven=cssU};this._fixAlterCss=function(ind){if(this._h2&&(this._cssSP||this._cssSU)){return this._fixAlterCssTGR(ind)}if(!this._cssEven&&!this._cssUnEven){return}ind=ind||0;var j=ind;for(var i=ind;i<this.rowsCol.length;i++){if(!this.rowsCol[i]){continue}if(this.rowsCol[i].style.display!="none"){if(this.rowsCol[i]._cntr){j=1;continue}if(this.rowsCol[i].className.indexOf("rowselected")!=-1){if(j%2==1){this.rowsCol[i].className=this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||"")}else{this.rowsCol[i].className=this._cssEven+" rowselected "+(this.rowsCol[i]._css||"")}}else{if(j%2==1){this.rowsCol[i].className=this._cssUnEven+" "+(this.rowsCol[i]._css||"")}else{this.rowsCol[i].className=this._cssEven+" "+(this.rowsCol[i]._css||"")}}j++}}};this.clearChangedState=function(){for(var i=0;i<this.rowsCol.length;i++){var row=this.rowsCol[i];if(row&&row.childNodes){var cols=row.childNodes.length;for(var j=0;j<cols;j++){row.childNodes[j].wasChanged=false}}}};this.getChangedRows=function(and_added){var res=new Array();this.forEachRow(function(id){var row=this.rowsAr[id];if(row.tagName!="TR"){return}var cols=row.childNodes.length;if(and_added&&row._added){res[res.length]=row.idd}else{for(var j=0;j<cols;j++){if(row.childNodes[j].wasChanged){res[res.length]=row.idd;break}}}});return res.join(this.delim)};this._sUDa=false;this._sAll=false;this.setSerializationLevel=function(userData,fullXML,config,changedAttr,onlyChanged,asCDATA){this._sUDa=userData;this._sAll=fullXML;this._sConfig=config;this._chAttr=changedAttr;this._onlChAttr=onlyChanged;this._asCDATA=asCDATA};this.setSerializableColumns=function(list){if(!list){this._srClmn=null;return}this._srClmn=(list||"").split(",");for(var i=0;i<this._srClmn.length;i++){this._srClmn[i]=dhx4.s2b(this._srClmn[i])}};this._serialise=function(rCol,inner,closed){this.editStop();var out=[];var close="</"+this.xml.s_row+">";if(this.isTreeGrid()){this._h2.forEachChildF(0,function(el){var temp=this._serializeRow(this.render_row_tree(-1,el.id));out.push(temp);if(temp){return true}else{return false}},this,function(){out.push(close)})}else{for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]){if(this._chAttr&&this.rowsBuffer[i]._locator){continue}var temp=this._serializeRow(this.render_row(i));out.push(temp);if(temp){out.push(close)}}}}return[out.join("")]};this._serializeRow=function(r,i){var out=[];var ra=this.xml.row_attrs;var ca=this.xml.cell_attrs;out.push("<"+this.xml.s_row);out.push(" id='"+r.idd+"'");if((this._sAll)&&this.selectedRows._dhx_find(r)!=-1){out.push(" selected='1'")}if(this._h2&&this._h2.get[r.idd].state=="minus"){out.push(" open='1'")}if(ra.length){for(var i=0;i<ra.length;i++){out.push(" "+ra[i]+"='"+r._attrs[ra[i]]+"'")}}out.push(">");if(this._sUDa&&this.UserData[r.idd]){keysAr=this.UserData[r.idd].getKeys();for(var ii=0;ii<keysAr.length;ii++){out.push("<userdata name='"+keysAr[ii]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[r.idd].get(keysAr[ii])+(this._asCDATA?"]]>":"")+"</userdata>")}}var changeFl=false;for(var jj=0;jj<this._cCount;jj++){if((!this._srClmn)||(this._srClmn[jj])){var zx=this.cells3(r,jj);out.push("<cell");if(ca.length){for(var i=0;i<ca.length;i++){out.push(" "+ca[i]+"='"+zx.cell._attrs[ca[i]]+"'")}}zxVal=zx[this._agetm]();if(this._asCDATA){zxVal="<![CDATA["+zxVal+"]]>"}if((this._ecspn)&&(zx.cell.colSpan)&&zx.cell.colSpan>1){out.push(' colspan="'+zx.cell.colSpan+'" ')}if(this._chAttr){if(zx.wasChanged()){out.push(' changed="1"');changeFl=true}}else{if((this._onlChAttr)&&(zx.wasChanged())){changeFl=true}}if(this._sAll&&this.cellType[jj]=="tree"){out.push((this._h2?(" image='"+this._h2.get[r.idd].image+"'"):"")+">"+zxVal+"</cell>")}else{out.push(">"+zxVal+"</cell>")}if((this._ecspn)&&(zx.cell.colSpan)){for(var u=0;u<zx.cell.colSpan-1;u++){out.push("<cell/>");jj++}}}}if((this._onlChAttr)&&(!changeFl)&&(!r._added)){return""}return out.join("")};this._serialiseConfig=function(){var out="<head>";for(var i=0;i<this.hdr.rows[0].cells.length;i++){if(this._srClmn&&!this._srClmn[i]){continue}var sort=this.fldSort[i];if(sort=="cus"){sort=this._customSorts[i].toString();sort=sort.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")}out+="<column width='"+this.getColWidth(i)+"' align='"+this.cellAlign[i]+"' type='"+this.cellType[i]+"' sort='"+(sort||"na")+"' color='"+(this.columnColor[i]||"")+"'"+(this.columnIds[i]?(" id='"+this.columnIds[i]+"'"):"")+">";if(this._asCDATA){out+="<![CDATA["+this.getColumnLabel(i)+"]]>"}else{out+=this.getColumnLabel(i)}var z=this.getCombo(i);if(z){for(var j=0;j<z.keys.length;j++){out+="<option value='"+z.keys[j]+"'>"+z.values[j]+"</option>"}}out+="</column>"}return out+="</head>"};this.serialize=function(){var out='<?xml version="1.0"?><rows>';if(this._mathSerialization){this._agetm="getMathValue"}else{this._agetm="getValue"}if(this._sUDa&&this.UserData.gridglobaluserdata){var keysAr=this.UserData.gridglobaluserdata.getKeys();for(var i=0; i<keysAr.length; i++){out+="<userdata name='"+keysAr[i]+"'>"+this.UserData.gridglobaluserdata.get(keysAr[i])+"</userdata>"}}if(this._sConfig){out+=this._serialiseConfig()}out+=this._serialise();out+="</rows>";return out};this.getPosition=function(oNode, pNode){if(!pNode){var pos=dhx4.getOffset(oNode);return[pos.left,pos.header]}pNode=pNode||document.body;var oCurrentNode=oNode;var iLeft=0;var iTop=0;while((oCurrentNode)&&(oCurrentNode!=pNode)){iLeft+=oCurrentNode.offsetLeft-oCurrentNode.scrollLeft;iTop+=oCurrentNode.offsetTop-oCurrentNode.scrollTop;oCurrentNode=oCurrentNode.offsetParent}if(pNode==document.body){if(_isIE){iTop+=document.body.offsetTop||document.documentElement.offsetTop;iLeft+=document.body.offsetLeft||document.documentElement.offsetLeft}else{if(!_isFF){iLeft+=document.body.offsetLeft;iTop+=document.body.offsetTop}}}return[iLeft,iTop]};this.getFirstParentOfType=function(obj,tag){while(obj&&obj.tagName!=tag&&obj.tagName!="BODY"){obj=obj.parentNode}return obj};this.objBox.onscroll=function(){this.grid._doOnScroll()};this.hdrBox.onscroll=function(){if(this._try_header_sync){return}this._try_header_sync=true;if(Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1){this.grid.objBox.scrollLeft=this.scrollLeft}this._try_header_sync=false};if((!_isOpera)||(_OperaRv>8.5)){this.hdr.onmousemove=function(e){this.grid.changeCursorState(e||window.event)};this.hdr.onmousedown=function(e){return this.grid.startColResize(e||window.event)}}this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(e){e=e||event;e.cancelBubble=true;this.firstChild.grid.setActive(true);window.dhx4.callEvent("_onGridClick",[e,this.firstChild.grid])};this.obj.onclick=function(e){if(this.grid._doClick(e||window.event)!==false){if(this.grid._sclE){this.grid.editCell(e||window.event)}else{this.grid.editStop()}}e=e||event;e.cancelBubble=true;window.dhx4.callEvent("_onGridClick",[e,this.grid])};if(_isMacOS){this.entBox.oncontextmenu=function(e){e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var that=this.grid;if(that._realfake){that=that._fake}return that._doContClick(e||window.event)}}else{this.entBox.onmousedown=function(e){return this.grid._doContClick(e||window.event)};this.entBox.oncontextmenu=function(e){if(this.grid._ctmndx){(e||event).cancelBubble=true}return !this.grid._ctmndx}}this.obj.ondblclick=function(e){if(!this.grid.wasDblClicked(e||window.event)){return false}if(this.grid._dclE){var row=this.grid.getFirstParentOfType((_isIE?event.srcElement:e.target),"TR");if(row==this.grid.row){this.grid.editCell(e||window.event)}}(e||event).cancelBubble=true;if(_isOpera){return false}};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;if(!document.body._dhtmlxgrid_onkeydown){dhtmlxEvent(document,"keydown",function(e){if(globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.doKey(e||window.event)}});document.body._dhtmlxgrid_onkeydown=true}dhtmlxEvent(document.body,"click",function(){if(self.editStop){self.editStop()}if(self.isActive){self.setActive(false)}});if(this.entBox.style.height.toString().indexOf("%")!=-1){this._delta_y=this.entBox.style.height}if(this.entBox.style.width.toString().indexOf("%")!=-1){this._delta_x=this.entBox.style.width}if(this._delta_x||this._delta_y){this._setAutoResize()}this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXGridObject.prototype={getRowAttribute:function(g,e){return this.getRowById(g)._attrs[e]},setRowAttribute:function(h,g,l){this.getRowById(h)._attrs[g]=l},isTreeGrid:function(){return(this.cellType._dhx_find("tree")!=-1)},setRowHidden:function(n,s){var u=dhx4.s2b(s);var o=this.getRowById(n);if(!o){return}if(o.expand===""){this.collapseKids(o)}if((s)&&(o.style.display!="none")){o.style.display="none";var r=this.selectedRows._dhx_find(o);if(r!=-1){o.className=o.className.replace("rowselected","");for(var m=0;m<o.childNodes.length;m++){o.childNodes[m].className=o.childNodes[m].className.replace(/cellselected/g,"")}this.selectedRows._dhx_removeAt(r)}this.callEvent("onGridReconstructed",[])}if((!s)&&(o.style.display=="none")){o.style.display="";this.callEvent("onGridReconstructed",[])}this.callEvent("onRowHide",[n,s]);this.setSizes()},setColumnHidden:function(h,l){if(!this.hdr.rows.length){if(!this._ivizcol){this._ivizcol=[]}return this._ivizcol[h]=l}if((this.fldSorted)&&(this.fldSorted.cellIndex==h)&&(l)){this.sortImg.style.display="none"}var g=dhx4.s2b(l);if(g){if(!this._hrrar){this._hrrar=new Array()}else{if(this._hrrar[h]){return}}this._hrrar[h]="display:none;";this._hideShowColumn(h,"none")}else{if((!this._hrrar)||(!this._hrrar[h])){return}this._hrrar[h]="";this._hideShowColumn(h,"")}if((this.fldSorted)&&(this.fldSorted.cellIndex==h)&&(!l)){this.sortImg.style.display="inline"}this.setSortImgPos();this.callEvent("onColumnHidden",[h,l])},isColumnHidden:function(c){if((this._hrrar)&&(this._hrrar[c])){return true}return false},setColumnsVisibility:function(g){if(g){this._ivizcol=g.split(this.delim)}if(this.hdr.rows.length&&this._ivizcol){for(var e=0;e<this._ivizcol.length;e++){this.setColumnHidden(e,this._ivizcol[e])}}},_fixHiddenRowsAll:function(s,y,C,A,v){v=v||"_cellIndex";var u=s.rows.length;for(var w=0;w<u;w++){var r=s.rows[w].childNodes;if(r.length!=this._cCount){for(var x=0;x<r.length;x++){if(r[x][v]==y){r[x].style[C]=A;break}}}else{r[y].style[C]=A}}},_hideShowColumn:function(m,n){var l=m;if(this.hdr.rows[1]&&(this.hdr.rows[1]._childIndexes)&&(this.hdr.rows[1]._childIndexes[m]!=m)){l=this.hdr.rows[1]._childIndexes[m]}if(n=="none"){this.hdr.rows[0].cells[m]._oldWidth=this.hdr.rows[0].cells[m].style.width||(this.initCellWidth[m]+"px");this.hdr.rows[0].cells[m]._oldWidthP=this.cellWidthPC[m];this.obj.rows[0].cells[m].style.width="0px";var r={rows:[this.obj.rows[0]]};this.forEachRow(function(a){if(this.rowsAr[a].tagName=="TR"){r.rows.push(this.rowsAr[a])}});this._fixHiddenRowsAll(r,m,"display","none");if(this.isTreeGrid()){this._fixHiddenRowsAllTG(m,"none")}if((_isOpera&&_OperaRv<9)||_isKHTML||(_isFF)){this._fixHiddenRowsAll(this.hdr,m,"display","none","_cellIndexS")}if(this.ftr){this._fixHiddenRowsAll(this.ftr.childNodes[0],m,"display","none")}this._fixHiddenRowsAll(this.hdr,m,"whiteSpace","nowrap","_cellIndexS");if(!this.cellWidthPX.length&&!this.cellWidthPC.length){this.cellWidthPX=[].concat(this.initCellWidth)}if(this.cellWidthPX[m]){this.cellWidthPX[m]=0}if(this.cellWidthPC[m]){this.cellWidthPC[m]=0}}else{if(this.hdr.rows[0].cells[m]._oldWidth){var o=this.hdr.rows[0].cells[m];if(_isOpera||_isKHTML||(_isFF)){this._fixHiddenRowsAll(this.hdr,m,"display","","_cellIndexS")}if(this.ftr){this._fixHiddenRowsAll(this.ftr.childNodes[0],m,"display","")}var r={rows:[this.obj.rows[0]]};this.forEachRow(function(a){if(this.rowsAr[a].tagName=="TR"){r.rows.push(this.rowsAr[a])}});this._fixHiddenRowsAll(r,m,"display","");if(this.isTreeGrid()){this._fixHiddenRowsAllTG(m,"")}this._fixHiddenRowsAll(this.hdr,m,"whiteSpace","normal","_cellIndexS");if(o._oldWidthP){this.cellWidthPC[m]=o._oldWidthP}if(o._oldWidth){this.cellWidthPX[m]=parseInt(o._oldWidth)}}}this.setSizes();if((!_isIE)&&(!_isFF)){this.obj.border=1;this.obj.border=0}},enableColSpan:function(c){this._ecspn=dhx4.s2b(c)},enableRowsHover:function(g,e){this._unsetRowHover(false,true);this._hvrCss=e;if(dhx4.s2b(g)){if(!this._elmnh){this.obj._honmousemove=this.obj.onmousemove;this.obj.onmousemove=this._setRowHover;if(_isIE){this.obj.onmouseleave=this._unsetRowHover}else{this.obj.onmouseout=this._unsetRowHover}this._elmnh=true}}else{if(this._elmnh){this.obj.onmousemove=this.obj._honmousemove;if(_isIE){this.obj.onmouseleave=null}else{this.obj.onmouseout=null}this._elmnh=false}}},enableEditEvents:function(l,h,g){this._sclE=dhx4.s2b(l);this._dclE=dhx4.s2b(h);this._f2kE=dhx4.s2b(g)},enableLightMouseNavigation:function(c){if(dhx4.s2b(c)){if(!this._elmn){this.entBox._onclick=this.entBox.onclick;this.entBox.onclick=function(){return true};this.obj._onclick=this.obj.onclick;this.obj.onclick=function(e){var a=this.grid.getFirstParentOfType(e?e.target:event.srcElement,"TD");if(!a){return}this.grid.editStop();this.grid.doClick(a);this.grid.editCell();(e||event).cancelBubble=true};this.obj._onmousemove=this.obj.onmousemove;this.obj.onmousemove=this._autoMoveSelect;this._elmn=true}}else{if(this._elmn){this.entBox.onclick=this.entBox._onclick;this.obj.onclick=this.obj._onclick;this.obj.onmousemove=this.obj._onmousemove;this._elmn=false}}},_unsetRowHover:function(l,e){if(e){that=this}else{that=this.grid}if((that._lahRw)&&(that._lahRw!=e)){for(var c=0;c<that._lahRw.childNodes.length;c++){that._lahRw.childNodes[c].className=that._lahRw.childNodes[c].className.replace(that._hvrCss,"")}that._lahRw=null}},_setRowHover:function(l){var e=this.grid.getFirstParentOfType(l?l.target:event.srcElement,"TD");if(e&&e.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,e);e=e.parentNode;if(!e.idd||e.idd=="__filler__"){return}for(var c=0;c<e.childNodes.length;c++){e.childNodes[c].className+=" "+this.grid._hvrCss}this.grid._lahRw=e}this._honmousemove(l)},_autoMoveSelect:function(c){if(!this.grid.editor){var e=this.grid.getFirstParentOfType(c?c.target:event.srcElement,"TD");if(e.parentNode.idd){this.grid.doClick(e,true,0)}}this._onmousemove(c)},enableDistributedParsing:function(h,g,l){if(dhx4.s2b(h)){this._ads_count=g||10;this._ads_time=l||250}else{this._ads_count=0}},destructor:function(){this.editStop(true);if(this._sizeTime){this._sizeTime=window.clearTimeout(this._sizeTime)}this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs){for(var h=0;h<this.formInputs.length;h++){this.parentForm.removeChild(this.formInputs[h])}}var l;for(var h=0;h<this.rowsCol.length;h++){if(this.rowsCol[h]){this.rowsCol[h].grid=null}}for(h in this.rowsAr){if(this.rowsAr[h]){this.rowsAr[h]=null}}this.rowsCol=new dhtmlxArray();this.rowsAr={};this.entBox.innerHTML="";var a=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=a;this.setSizes=this._update_srnd_view=this.callEvent=a;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;if(this._fake){this.globalBox.innerHTML="";this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=a;this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=a}for(l in this){if((this[l])&&(this[l].m_obj)){this[l].m_obj=null}this[l]=null}if(this==globalActiveDHTMLGridObject){globalActiveDHTMLGridObject=null}return null},getSortingState:function(){var c=new Array();if(this.fldSorted){c[0]=this.fldSorted._cellIndex;c[1]=(this.sortImg.className=="dhxgrid_sort_desc"?"des":"asc")}return c},enableAutoHeight:function(h,l,g){this._ahgr=dhx4.s2b(h);this._ahgrF=dhx4.s2b(g);this._ahgrM=l||null;if(arguments.length==1){this.objBox.style.overflowY=h?"hidden":"auto"}if(l=="auto"){this._ahgrM=null;this._ahgrMA=true;this._setAutoResize()}},enableStableSorting:function(c){this._sst=dhx4.s2b(c);this.rowsCol.stablesort=function(a){var m=this.length-1;for(var n=0;n<this.length-1;n++){for(var o=0;o<m;o++){if(a(this[o],this[o+1])>0){var r=this[o];this[o]=this[o+1];this[o+1]=r}}m--}}},enableKeyboardSupport:function(c){this._htkebl=!dhx4.s2b(c)},enableContextMenu:function(c){this._ctmndx=c},setScrollbarWidthCorrection:function(c){},enableTooltips:function(g){this._enbTts=g.split(",");for(var e=0;e<this._enbTts.length;e++){this._enbTts[e]=dhx4.s2b(this._enbTts[e])}},enableResizing:function(g){this._drsclmn=g.split(",");for(var e=0;e<this._drsclmn.length;e++){this._drsclmn[e]=dhx4.s2b(this._drsclmn[e])}},setColumnMinWidth:function(e,g){if(arguments.length==2){if(!this._drsclmW){this._drsclmW=new Array()}this._drsclmW[g]=e}else{this._drsclmW=e.split(",")}},enableCellIds:function(c){this._enbCid=dhx4.s2b(c)},lockRow:function(g,h){var l=this.getRowById(g);if(l){l._locked=dhx4.s2b(h);if((this.cell)&&(this.cell.parentNode.idd==g)){this.editStop()}}},_getRowArray:function(a){var l=new Array();for(var m=0;m<a.childNodes.length;m++){var n=this.cells3(a,m);l[m]=n.getValue()}return l},setDateFormat:function(g,e){this._dtmask=g;this._dtmask_inc=e},setNumberFormat:function(s,y,w,u){var x=s.replace(/[^0\,\.]*/g,"");var C=x.indexOf(".");if(C>-1){C=x.length-C-1}var A=x.indexOf(",");if(A>-1){A=x.length-C-2-A}if(typeof w!="string"){w=this.i18n.decimal_separator}if(typeof u!="string"){u=this.i18n.group_separator}var r=s.split(x)[0];var v=s.split(x)[1];this._maskArr[y]=[C,A,r,v,w,u]},_aplNFb:function(a,l){var n=this._maskArr[l];if(!n){return a}var m=parseFloat(a.toString().replace(/[^0-9]*/g,""));if(a.toString().substr(0,1)=="-"){m=m*-1}if(n[0]>0){m=m/Math.pow(10,n[0])}return m},_aplNF:function(c,n){var r=this._maskArr[n];if(!r){return c}var a=(parseFloat(c)<0?"-":"")+r[2];c=Math.abs(Math.round(parseFloat(c)*Math.pow(10,r[0]>0?r[0]:0))).toString();c=(c.length<r[0]?Math.pow(10,r[0]+1-c.length).toString().substr(1,r[0]+1)+c.toString():c).split("").reverse();c[r[0]]=(c[r[0]]||"0")+r[4];if(r[1]>0){for(var o=(r[0]>0?0:1)+r[0]+r[1];o<c.length;o+=r[1]){c[o]+=r[5]}}return a+c.reverse().join("")+r[3]},_launchCommands:function(h){for(var l=0;l<h.length;l++){var m=new Array();for(var n=0;n<h[l].childNodes.length;n++){if(h[l].childNodes[n].nodeType==1){m[m.length]=h[l].childNodes[n].firstChild.data}}this[h[l].getAttribute("command")].apply(this,m)}},_parseHead:function(U){var V=dhx4.ajax.xpath("./head",U);if(V.length){var T=dhx4.ajax.xpath("./column",V[0]);var S=dhx4.ajax.xpath("./settings",V[0]);var N="setInitWidths";var H=false;if(S[0]){for(var Q=0;Q<S[0].childNodes.length;Q++){switch(S[0].childNodes[Q].tagName){case"colwidth":if(S[0].childNodes[Q].firstChild&&S[0].childNodes[Q].firstChild.data=="%"){N="setInitWidthsP"}break;case"splitat":H=(S[0].childNodes[Q].firstChild?S[0].childNodes[Q].firstChild.data:false);break}}}this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",V[0]));if(T.length>0){if(this.hdr.rows.length>0){this.clearAll(true)}var Y=[[],[],[],[],[],[],[],[],[]];var I=["","width","type","align","sort","color","format","hidden","id"];var J=["",N,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"];for(var O=0;O<T.length;O++){for(var s=1;s<I.length;s++){Y[s].push(T[O].getAttribute(I[s]))}Y[0].push((T[O].firstChild?T[O].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(Y[0]);for(var O=0;O<J.length;O++){if(J[O]){this[J[O]](Y[O].join(this.delim))}}for(var O=0;O<T.length;O++){if((this.cellType[O].indexOf("co")==0)||(this.cellType[O]=="clist")){var P=dhx4.ajax.xpath("./option",T[O]);if(P.length){var F=new Array();if(this.cellType[O]=="clist"){for(var s=0;s<P.length;s++){F[F.length]=P[s].firstChild?P[s].firstChild.data:""}this.registerCList(O,F)}else{var L=this.getCombo(O);for(var s=0;s<P.length;s++){L.put(P[s].getAttribute("value"),P[s].firstChild?P[s].firstChild.data:"")}}}}else{if(Y[6][O]){if((this.cellType[O].toLowerCase().indexOf("calendar")!=-1)||(this.fldSort[O]=="date")){this.setDateFormat(Y[6][O])}else{this.setNumberFormat(Y[6][O],O)}}}}this.init();var W=Y[7].join(this.delim);if(this.setColHidden&&W.replace(/,/g,"")!=""){this.setColHidden(W)}if((H)&&(this.splitAt)){this.splitAt(H)}}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",V[0]))}var X=dhx4.ajax.xpath("//rows/userdata",U);if(X.length>0){if(!this.UserData.gridglobaluserdata){this.UserData.gridglobaluserdata=new Hashtable()}for(var s=0;s<X.length;s++){var K="";for(var M=0;M<X[s].childNodes.length;M++){K+=X[s].childNodes[M].nodeValue}this.UserData.gridglobaluserdata.put(X[s].getAttribute("name"),K)}}},getCheckedRows:function(e){var g=new Array();this.forEachRowA(function(a){var c=this.cells(a,e);if(c.changeState&&c.getValue()!=0){g.push(a)}},true);return g.join(",")},checkAll:function(){var g=arguments.length?arguments[0]:1;for(var e=0;e<this.getColumnsNum();e++){if(this.getColType(e)=="ch"){this.setCheckedRows(e,g)}}},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(g,e){this.forEachRowA(function(a){if(this.cells(a,g).isCheckbox()){this.cells(a,g).setValue(e)}})},_drawTooltip:function(n){var c=this.grid.getFirstParentOfType(n?n.target:event.srcElement,"TD");if(!c||((this.grid.editor)&&(this.grid.editor.cell==c))){return true}var o=c.parentNode;if(!o.idd||o.idd=="__filler__"){return}var r=(n?n.target:event.srcElement);if(o.idd==window.unknown){return true}if(!this.grid.callEvent("onMouseOver",[o.idd,c._cellIndex,(n||window.event)])){return true}if((this.grid._enbTts)&&(!this.grid._enbTts[c._cellIndex])){if(r.title){r.title=""}return true}if(c._cellIndex>=this.grid._cCount){return}var e=this.grid.cells3(o,c._cellIndex);if(!e||!e.cell||!e.cell._attrs){return}if(r._title){e.cell.title=""}if(!e.cell._attrs.title){r._title=true}if(e){r.title=e.cell._attrs.title||(e.getTitle?e.getTitle():(e.getValue()||"").toString().replace(/<[^>]*>/gi,""))}return true},enableCellWidthCorrection:function(c){if(_isFF){this._wcorr=parseInt(c)}},getAllRowIds:function(h){var g=[];for(var l=0;l<this.rowsBuffer.length;l++){if(this.rowsBuffer[l]){g.push(this.rowsBuffer[l].idd)}}return g.join(h||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(y,C,r){if(!this._ecspn){return}var A=this.getRowById(y);if((A._childIndexes)&&(A.childNodes[A._childIndexes[C]])){var c=A._childIndexes[C];var n=A.childNodes[c];var m=n.colSpan;n.colSpan=1;if((m)&&(m!=1)){for(var F=1;F<m;F++){var D=document.createElement("TD");if(n.nextSibling){A.insertBefore(D,n.nextSibling)}else{A.appendChild(D)}A._childIndexes[C+F]=c+F;D._cellIndex=C+F;D.style.textAlign=this.cellAlign[F];D.style.verticalAlign=this.cellVAlign[F];n=D;this.cells3(A,C+F).setValue("")}}for(var E=C*1+1*m;E<A._childIndexes.length;E++){A._childIndexes[E]+=(m-1)*1}}if((r)&&(r>1)){if(A._childIndexes){var c=A._childIndexes[C]}else{var c=C;A._childIndexes=new Array();for(var E=0;E<A.childNodes.length;E++){A._childIndexes[E]=E}}A.childNodes[c].colSpan=r;for(var E=1;E<r;E++){A._childIndexes[A.childNodes[c+1]._cellIndex]=c;A.removeChild(A.childNodes[c+1])}var H=A.childNodes[A._childIndexes[C]]._cellIndex;for(var E=H*1+1*r;E<A._childIndexes.length;E++){A._childIndexes[E]-=(r-1)}}},preventIECaching:function(c){dhx4.ajax.cache=!c},enableColumnAutoSize:function(c){this._eCAS=dhx4.s2b(c)},_onHeaderDblClick:function(h){var l=this.grid;var e=l.getFirstParentOfType(_isIE?event.srcElement:h.target,"TD");if(!l._eCAS){return false}l.adjustColumnSize(e._cellIndexS)},adjustColumnSize:function(l,A){if(this._hrrar&&this._hrrar[l]){return}this._notresize=true;var y=0;this._setColumnSizeR(l,20);for(var w=1;w<this.hdr.rows.length;w++){var E=this.hdr.rows[w];E=E.childNodes[(E._childIndexes)?E._childIndexes[l]:l];if((E)&&((!E.colSpan)||(E.colSpan<2))&&E._cellIndex==l){if((E.childNodes[0])&&(E.childNodes[0].className=="hdrcell")){E=E.childNodes[0]}y=Math.max(y,E.scrollWidth)}}var x=this.obj.rows.length;var a=0;var C=this.cellType._dhx_find("tree");for(var m=1;m<x;m++){var D=this.obj.rows[m];if(!this.rowsAr[D.idd]){continue}if(D._childIndexes&&D._childIndexes[l]!=l||!D.childNodes[l]){continue}a=(D.childNodes[l].innerText||D.childNodes[l].textContent||"").length*this.fontWidth;if(this._h2&&l==C){a+=this._h2.get[D.idd].level*22}if(a>y){y=a}}y+=20+(A||0);this._setColumnSizeR(l,y);this._notresize=false;this.setSizes()},detachHeader:function(g,h){h=h||this.hdr;var l=h.rows[g+1];if(l){l.parentNode.removeChild(l)}this.setSizes()},detachFooter:function(c){this.detachHeader(c,this.ftr)},attachHeader:function(h,l,n){if(typeof(h)=="string"){h=this._eSplit(h)}if(typeof(l)=="string"){l=l.split(this.delim)}n=n||"_aHead";if(this.hdr.rows.length){if(h){this._createHRow([h,l],this[(n=="_aHead")?"hdr":"ftr"])}else{if(this[n]){for(var m=0;m<this[n].length;m++){this.attachHeader.apply(this,this[n][m])}}}}else{if(!this[n]){this[n]=new Array()}this[n][this[n].length]=[h,l,n]}},_createHRow:function(I,w){if(!w){if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative"}var D=document.createElement("DIV");D.className="c_ftr".substr(2);this.entBox.appendChild(D);var N=document.createElement("TABLE");N.cellPadding=N.cellSpacing=0;if(!_isIE||_isIE==8){N.width="100%";N.style.paddingRight="20px"}N.style.marginRight="20px";N.style.tableLayout="fixed";D.appendChild(N);N.appendChild(document.createElement("TBODY"));this.ftr=w=N;var E=N.insertRow(0);var M=((this.hdrLabels.length<=1)?I[0].length:this.hdrLabels.length);for(var H=0;H<M;H++){E.appendChild(document.createElement("TH"));E.childNodes[H]._cellIndex=H}if(_isIE&&_isIE<8){E.style.position="absolute"}else{E.style.height="auto"}}var F=I[1];var D=document.createElement("TR");w.rows[0].parentNode.appendChild(D);for(var H=0;H<I[0].length;H++){if(I[0][H]=="#cspan"){var C=D.cells[D.cells.length-1];C.colSpan=(C.colSpan||1)+1;continue}if((I[0][H]=="#rspan")&&(w.rows.length>1)){var K=w.rows.length-2;var L=false;var C=null;while(!L){var C=w.rows[K];for(var J=0;J<C.cells.length;J++){if(C.cells[J]._cellIndex==H){L=J+1;break}}K--}C=C.cells[L-1];C.rowSpan=(C.rowSpan||1)+1;continue}var A=document.createElement("TD");A._cellIndex=A._cellIndexS=H;if(this._hrrar&&this._hrrar[H]&&!_isIE){A.style.display="none"}if(typeof I[0][H]=="object"){A.appendChild(I[0][H])}else{if(this.forceDivInHeader){A.innerHTML="<div class='hdrcell'>"+(I[0][H]||"&nbsp;")+"</div>"}else{A.innerHTML=(I[0][H]||"&nbsp;")}if((I[0][H]||"").indexOf("#")!=-1){var N=I[0][H].match(/(^|{)#([^}]+)(}|$)/);if(N){var P="_in_header_"+N[2];if(this[P]){this[P]((this.forceDivInHeader?A.firstChild:A),H,I[0][H].split(N[0]))}}}}if(F){A.style.cssText=F[H]}D.appendChild(A)}var O=w;if(_isKHTML){if(w._kTimer){window.clearTimeout(w._kTimer)}w._kTimer=window.setTimeout(function(){w.rows[1].style.display="none";window.setTimeout(function(){w.rows[1].style.display=""},1)},500)}},attachFooter:function(e,g){this.attachHeader(e,g,"_aFoot")},setCellExcellType:function(h,g,l){this.changeCellType(this.getRowById(h),g,l)},changeCellType:function(o,n,r){r=r||this.cellType[n];var m=this.cells3(o,n);var l=m.getValue();m.cell._cellType=r;var m=this.cells3(o,n);m.setValue(l)},setRowExcellType:function(m,n){var l=this.rowsAr[m];for(var h=0;h<l.childNodes.length;h++){this.changeCellType(l,h,n)}},setColumnExcellType:function(g,h){for(var l=0;l<this.rowsBuffer.length;l++){if(this.rowsBuffer[l]&&this.rowsBuffer[l].tagName=="TR"){this.changeCellType(this.rowsBuffer[l],g,h)}}if(this.cellType[g]=="math"){this._strangeParams[l]=h}else{this.cellType[g]=h}},forEachRow:function(a){for(var g in this.rowsAr){if(this.rowsAr[g]&&this.rowsAr[g].idd){a.apply(this,[this.rowsAr[g].idd])}}},forEachRowA:function(a){for(var g=0;g<this.rowsBuffer.length;g++){if(this.rowsBuffer[g]){a.call(this,this.render_row(g).idd)}}},forEachCell:function(m,n){var l=this.getRowById(m);if(!l){return}for(var h=0;h<this._cCount;h++){n(this.cells3(l,h),h)}},enableAutoWidth:function(h,g,l){this._awdth=[dhx4.s2b(h),parseInt(g||99999),parseInt(l||0)];if(arguments.length==1){this.objBox.style.overflowX=h?"hidden":"auto"}},updateFromXML:function(h,l,n,m){if(typeof l=="undefined"){l=true}this._refresh_mode=[true,l,n];this.load(h,m)},_refreshFromXML:function(C){if(this._f_rowsBuffer){this.filterBy(0,"")}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(a){var c=this.grid._h2.get[this.cell.parentNode.idd];if(c&&this.cell.parentNode.valTag){this.setLabel(a)}else{this.setValueX(a)}}}var H=this.cellType._dhx_find("tree");var y=dhx4.ajax.xmltop("rows",C);var A=y.getAttribute("parent")||0;var w={};if(this._refresh_mode[2]){if(H!=-1){this._h2.forEachChild(A,function(a){w[a.id]=true},this)}else{this.forEachRow(function(a){w[a]=true})}}var u=dhx4.ajax.xpath("//row",y);for(var D=0; D<u.length; D++){var v=u[D];var F=v.getAttribute("id");w[F]=false;var A=v.parentNode.getAttribute("id")||A;if(this.rowsAr[F]&&this.rowsAr[F].tagName!="TR"){if(this._h2){this._h2.get[F].buff.data=v}else{this.rowsBuffer[this.getRowIndex(F)].data=v}this.rowsAr[F]=v}else{if(this.rowsAr[F]){this._process_xml_row(this.rowsAr[F],v,-1);this._postRowProcessing(this.rowsAr[F],true);if(this._fake&&this._fake.rowsAr[F]){this._fake._process_xml_row(this._fake.rowsAr[F],v,-1)}}else{if(this._refresh_mode[1]){var x={idd:F,data:v,_parser:this._process_xml_row,_locator:this._get_xml_data};var E=this.rowsBuffer.length;if(this._refresh_mode[1]=="header.html"){this.rowsBuffer.unshift(x);E=0}else{this.rowsBuffer.push(x)}if(this._h2){reset=true;(this._h2.add(F,(v.parentNode.getAttribute("id")||v.parentNode.getAttribute("parent")))).buff=this.rowsBuffer[this.rowsBuffer.length-1]}else{if(this._srnd){reset=true}}this.rowsAr[F]=v;v=this.render_row(E);this._insertRowAt(v,E?-1:0)}}}}if(this._refresh_mode[2]){for(F in w){if(w[F]&&this.rowsAr[F]){this.deleteRow(F)}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}if(reset){if(this._h2){this._renderSort()}else{this.render_dataset()}}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll()}},getCustomCombo:function(h,l){var g=this.cells(h,l).cell;if(!g._combo){g._combo=new dhtmlXGridComboObject()}return g._combo},setTabOrder:function(n){var l=n.split(this.delim);this._tabOrder=[];var h=this._cCount||n.length;for(var m=0;m<h;m++){l[m]={c:parseInt(l[m]),ind:m}}l.sort(function(a,c){return(a.c>c.c?1:-1)});for(var m=0;m<h;m++){if(!l[m+1]||(typeof l[m].c=="undefined")){this._tabOrder[l[m].ind]=(l[0].ind+1)*-1}else{this._tabOrder[l[m].ind]=l[m+1].ind}}},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var c=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[c+1],this.cell._cellIndex,true)},k13_0_1:function(){var c=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[c-1],this.cell._cellIndex,true)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[(this.row?this.row.idd:null),(this.cell?this.cell._cellIndex:null)]);this._still_active=true},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[true])){return true}var c=this._getNextCell(null,1);if(c){this.selectCell(c.parentNode,c._cellIndex,(this.row!=c.parentNode),false,true);this._still_active=true}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[false])){return false}var c=this._getNextCell(null,-1);if(c){this.selectCell(c.parentNode,c._cellIndex,(this.row!=c.parentNode),false,true);this._still_active=true}},k113_0_0:function(){if(this._f2kE){this.editCell()}},k32_0_0:function(){var c=this.cells4(this.cell);if(!c.changeState||(c.changeState()===false)){return false}},k27_0_0:function(){this.editStop(true)},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k37_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.collapseKids(this.row)}else{return false}},k39_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row)}else{return false}},k40_0_0:function(){var l=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{if(!this.row.idd){return}var g=Math.max((l._r_select||0),this.getRowIndex(this.row.idd));var h=this._nextRow(g,1);if(h){l._r_select=null;this.selectCell(h,this.cell._cellIndex,true);if(l.pagingOn){l.showRow(h.idd)}}else{if(!this.callEvent("onLastRow",[])){return false}this._key_events.k34_0_0.apply(this,[]);if(this.pagingOn&&this.rowsCol[g+1]){this.selectCell(g+1,0,true)}}}this._still_active=true},k38_0_0:function(){var l=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{if(!this.row.idd){return}var g=this.getRowIndex(this.row.idd)+1;if(g!=-1&&(!this.pagingOn||(g!=1))){var h=this._nextRow(g-1,-1);this.selectCell(h,this.cell._cellIndex,true);if(l.pagingOn&&h){l.showRow(h.idd)}}else{this._key_events.k33_0_0.apply(this,[])}}this._still_active=true}},_build_master_row:function(){var h=document.createElement("DIV");var l=["<table><tr>"];for(var g=0;g<this._cCount;g++){l.push("<td></td>")}l.push("</tr></table>");h.innerHTML=l.join("");this._master_row=h.firstChild.rows[0]},_prepareRow:function(g){if(!this._master_row){this._build_master_row()}var h=this._master_row.cloneNode(true);for(var l=0;l<h.childNodes.length;l++){h.childNodes[l]._cellIndex=l;if(this._enbCid){h.childNodes[l].id="c_"+g+"_"+l}if(this.dragAndDropOff){this.dragger.addDraggableItem(h.childNodes[l],this)}}h.idd=g;h.grid=this;return h},_process_jsarray_row:function(l,h){l._attrs={};for(var g=0;g<l.childNodes.length;g++){l.childNodes[g]._attrs={}}this._fillRow(l,(this._c_order?this._swapColumns(h):h));return l},_get_jsarray_data:function(g,e){return g[e]},_process_json_row:function(e,g){g=this._c_order?this._swapColumns(g.data):g.data;return this._process_some_row(e,g)},_process_some_row:function(l,h){l._attrs={};for(var g=0;g<l.childNodes.length;g++){l.childNodes[g]._attrs={}}this._fillRow(l,h);return l},_get_json_data:function(g,e){return g.data[e]},_process_js_row:function(m,l){var h=[];for(var n=0;n<this.columnIds.length;n++){h[n]=l[this.columnIds[n]];if(!h[n]&&h[n]!==0){h[n]=""}}this._process_some_row(m,h);m._attrs=l;return m},_get_js_data:function(g,e){return g[this.columnIds[e]]},_process_csv_row:function(l,h){l._attrs={};for(var g=0;g<l.childNodes.length;g++){l.childNodes[g]._attrs={}}this._fillRow(l,(this._c_order?this._swapColumns(h.split(this.csv.cell)):h.split(this.csv.cell)));return l},_get_csv_data:function(g,e){return g.split(this.csv.cell)[e]},_process_store_row:function(m,n){var l=[];for(var o=0;o<this.columnIds.length;o++){l[o]=n[this.columnIds[o]]}for(var r=0;r<m.childNodes.length;r++){m.childNodes[r]._attrs={}}m._attrs=n;this._fillRow(m,l)},_process_xml_row:function(E,x){var F=dhx4.ajax.xpath(this.xml.cell,x);var r=[];E._attrs=this._xml_attrs(x);if(this._ud_enabled){var H=dhx4.ajax.xpath("./userdata",x);for(var y=H.length-1;y>=0;y--){var v="";for(var C=0;C<H[y].childNodes.length;C++){v+=H[y].childNodes[C].nodeValue}this.setUserData(E.idd,H[y].getAttribute("name"),v)}}for(var C=0;C<F.length;C++){var A=F[this._c_order?this._c_order[C]:C];if(!A){continue}var D=E._childIndexes?E._childIndexes[C]:C;var w=A.getAttribute("type");if(E.childNodes[D]){if(w){E.childNodes[D]._cellType=w}E.childNodes[D]._attrs=this._xml_attrs(A)}if(!A.getAttribute("xmlcontent")){if(A.firstChild){A=A.firstChild.wholeText||A.firstChild.data}else{A=""}}r.push(A)}for(C<F.length;C<E.childNodes.length;C++){E.childNodes[C]._attrs={}}if(E.parentNode&&E.parentNode.tagName=="row"){E._attrs.parent=E.parentNode.getAttribute("idd")}this._fillRow(E,r);return E},_get_xml_data:function(g,e){g=g.firstChild;while(true){if(!g){return""}if(g.tagName=="cell"){e--}if(e<0){break}g=g.nextSibling}return(g.firstChild?g.firstChild.data:"")},_fillRow:function(r,n){if(this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==r.idd){this.editStop()}for(var u=0;u<r.childNodes.length;u++){if((u<n.length)||(this.defVal[u])){var s=r.childNodes[u]._cellIndex;var o=n[s];var m=this.cells4(r.childNodes[u]);if((this.defVal[s])&&((o=="")||(typeof(o)=="undefined"))){o=this.defVal[s]}if(m){m.setValue(o)}}else{r.childNodes[u].innerHTML="&nbsp;";r.childNodes[u]._clearCell=true}}return r},_postRowProcessing:function(s,y){if(s._attrs["class"]){s._css=s.className=s._attrs["class"]}if(s._attrs.locked){s._locked=true}if(s._attrs.bgColor){s.bgColor=s._attrs.bgColor}var c=0;for(var w=0;w<s.childNodes.length;w++){var x=s.childNodes[w];var u=x._cellIndex;var v=x._attrs.style||s._attrs.style;if(v){x.style.cssText+=";"+v}if(x._attrs["class"]){x.className=x._attrs["class"]}v=x._attrs.align||this.cellAlign[u];if(v){x.align=v}x.vAlign=x._attrs.valign||this.cellVAlign[u];var r=x._attrs.bgColor||this.columnColor[u];if(r){x.bgColor=r}if(x._attrs.colspan&&!y){this.setColspan(s.idd,w+c,x._attrs.colspan);c+=(x._attrs.colspan-1)}if(this._hrrar&&this._hrrar[u]&&!y){x.style.display="none"}}this.callEvent("onRowCreated",[s.idd,s,null])},load:function(h,m,n){this.callEvent("onXLS",[this]);if(arguments.length==2&&typeof m!="function"){n=m;m=null}n=n||"xml";if(!this.xmlFileUrl){this.xmlFileUrl=h}this._data_type=n;this.xmlLoader=this.doLoadDetails;var l=this;this.xmlLoader=function(a){if(!l.callEvent){return}l["_process_"+n](a.xmlDoc);if(!l._contextCallTimer){l.callEvent("onXLE",[l,0,0,a.xmlDoc])}if(m){m();m=null}};return dhx4.ajax.get(h,this.xmlLoader)},loadXMLString:function(g,e){if(window.console&&window.console.info){window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}this.parse({responseXML:dhx4.ajax.parse(g)},e,"xml")},loadXML:function(e,g){if(window.console&&window.console.info){window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}this.load(e,g,"xml")},parse:function(h,l,g){if(arguments.length==2&&typeof l!="function"){g=l;l=null}g=g||"xml";this._data_type=g;if(g=="xml"&&typeof h=="string"){h={responseXML:dhx4.ajax.parse(h)}}this["_process_"+g](h);if(!this._contextCallTimer){this.callEvent("onXLE",[this,0,0,h])}if(l){l()}},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(l){var h={};if(l.attributes.length){for(var g=0;g<l.attributes.length;g++){h[l.attributes[g].name]=l.attributes[g].value}}return h},_process_xml:function(h){if(this._refresh_mode){return this._refreshFromXML(h)}this._parsing=true;var w=dhx4.ajax.xmltop(this.xml.top,h);if(w.tagName!=this.xml.top){return}var u=w.getAttribute("dhx_security");if(u){dhtmlx.security_key=u}this._parseHead(w);var E=dhx4.ajax.xpath(this.xml.row,w);var x=parseInt(w.getAttribute("pos")||0);var v=parseInt(w.getAttribute("total_count")||0);if(!this.pagingOn){var v=Math.min(v,32000000/this._srdh)}var y=false;if(v&&v!=this.rowsBuffer.length){if(!this.rowsBuffer[v-1]){if(this.rowsBuffer.length){y=true}this.rowsBuffer[v-1]=null}if(v<this.rowsBuffer.length){this.rowsBuffer.splice(v,this.rowsBuffer.length-v);y=true}}if(this.isTreeGrid()){return this._process_tree_xml(w)}for(var C=0;C<E.length;C++){if(this.rowsBuffer[C+x]){continue}var D=E[C].getAttribute("id")||(C+x+1);this.rowsBuffer[C+x]={idd:D,data:E[C],_parser:this._process_xml_row,_locator:this._get_xml_data};this.rowsAr[D]=E[C]}this.callEvent("onDataReady",[]);if(y&&this._srnd){var A=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=A}else{this.render_dataset()}this._parsing=false},_process_jsarray:function(data){this._parsing=true;data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[id]=data[i]}this.render_dataset();this._parsing=false},_process_csv:function(n){this._parsing=true;n=n.responseText||n;n=n.replace(/\r/g,"");n=n.split(this.csv.row);if(this._csvHdr){this.clearAll();var o=n.splice(0,1)[0].split(this.csv.cell);if(!this._csvAID){o.splice(0,1)}this.setHeader(o.join(this.delim));this.init()}for(var r=0;r<n.length;r++){if(!n[r]&&r==n.length-1){continue}if(this._csvAID){var m=r+1;this.rowsBuffer.push({idd:m,data:n[r],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var l=n[r].split(this.csv.cell);var m=l.splice(0,1)[0];this.rowsBuffer.push({idd:m,data:l,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[m]=n[r]}this.render_dataset();this._parsing=false},_process_js:function(c){return this._process_json(c,"js")},_process_json:function(data,mode){this._parsing=true;var data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}if(mode=="js"){if(data.data){data=data.data}for(var i=0;i<data.length;i++){var row=data[i];var id=row.id||(i+1);this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[id]=data[i]}}else{if(data.rows){for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data});this.rowsAr[id]=data.rows[i]}}}if(data.dhx_security){dhtmlx.security_key=data.dhx_security}this.callEvent("onDataReady",[]);this.render_dataset();this._parsing=false},render_dataset:function(v,s){if(this._srnd){if(this._fillers){return this._update_srnd_view()}s=Math.min((this._get_view_size()+(this._srnd_pr||0)),this.rowsBuffer.length)}if(this.pagingOn){v=Math.max((v||0),(this.currentPage-1)*this.rowsBufferOutSize);s=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)}else{v=v||0;s=s||this.rowsBuffer.length}for(var w=v;w<s;w++){var r=this.render_row(w);if(r==-1){if(this.xmlFileUrl){if(this.callEvent("onDynXLS",[w,(this._dpref?this._dpref:(s-w))])){this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+w+"&count="+(this._dpref?this._dpref:(s-w)),this._data_type)}}s=w;break}if(!r.parentNode||!r.parentNode.tagName){this._insertRowAt(r,w);if(r._attrs.selected||r._attrs.select){this.selectRow(r,r._attrs.call?true:false,true);r._attrs.selected=r._attrs.select=null}}if(this._ads_count&&w-v==this._ads_count){var u=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){u._contextCallTimer=null;u.render_dataset(w,s);if(!u._contextCallTimer){if(u._context_parsing){u.callEvent("onXLE",[])}else{u._fixAlterCss()}u._context_parsing=false}},this._ads_time)}}if(this._ads_count&&w==s){this.callEvent("onDistributedEnd",[])}if(this._srnd&&!this._fillers){var y=this.rowsBuffer.length-s;this._fillers=[];if(this._fake&&!this._realfake){this._fake._fillers=[]}while(y>0){var x=(_isIE||window._FFrv)?Math.min(y,35000):y;var o=this._add_filler(s,x);if(o){this._fillers.push(o)}y-=x;s+=x}}this.setSizes()},render_row:function(l){if(!this.rowsBuffer[l]){return -1}if(this.rowsBuffer[l]._parser){var g=this.rowsBuffer[l];if(this.rowsAr[g.idd]&&this.rowsAr[g.idd].tagName=="TR"){return this.rowsBuffer[l]=this.rowsAr[g.idd]}var h=this._prepareRow(g.idd);this.rowsBuffer[l]=h;this.rowsAr[g.idd]=h;g._parser.call(this,h,g.data);this._postRowProcessing(h);return h}return this.rowsBuffer[l]},_get_cell_value:function(l,g,h){if(l._locator){if(this._c_order){g=this._c_order[g]}return l._locator.call(this,l.data,g)}return this.cells3(l,g)[h?h:"getValue"]()},sortRows:function(v,r,w){this.editStop();w=(w||"asc").toLowerCase();r=(r||this.fldSort[v]);v=v||0;if(this.isTreeGrid()){this.sortTreeRows(v,r,w)}else{var o={};var s=this.cellType[v];var n="getValue";if(s=="link"){n="getContent"}if(s=="dhxCalendar"||s=="dhxCalendarA"){n="getDate"}for(var u=0;u<this.rowsBuffer.length;u++){o[this.rowsBuffer[u].idd]=this._get_cell_value(this.rowsBuffer[u],v,n)}this._sortRows(v,r,w,o)}this.callEvent("onAfterSorting",[v,r,w])},_sortCore:function(v,r,w,o,s){var u="sort";if(this._sst){s.stablesort=this.rowsCol.stablesort;u="stablesort"}if(r.length>4){r=window[r]}if(r=="cus"){var n=this._customSorts[v];s[u](function(a,c){return n(o[a.idd],o[c.idd],w,a.idd,c.idd)})}else{if(typeof(r)=="function"){s[u](function(a,c){return r(o[a.idd],o[c.idd],w,a.idd,c.idd)})}else{if(r=="str"){s[u](function(a,c){if(w=="asc"){return o[a.idd]>o[c.idd]?1:(o[a.idd]<o[c.idd]?-1:0)}else{return o[a.idd]<o[c.idd]?1:(o[a.idd]>o[c.idd]?-1:0)}})}else{if(r=="int"){s[u](function(c,e){var g=parseFloat(o[c.idd]);g=isNaN(g)?-99999999999999:g;var a=parseFloat(o[e.idd]);a=isNaN(a)?-99999999999999:a;if(w=="asc"){return g-a}else{return a-g}})}else{if(r=="date"){s[u](function(c,e){var g=Date.parse(o[c.idd])||(Date.parse("01/01/1900"));var a=Date.parse(o[e.idd])||(Date.parse("01/01/1900"));if(w=="asc"){return g-a}else{return a-g}})}}}}}},_sortRows:function(m,l,n,h){this._sortCore(m,l,n,h,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(m){if(!this.obj.rows[0]){return}if(this._lahRw){this._unsetRowHover(0,true)}this.callEvent("onResetView",[]);var h=this.obj.rows[0].parentNode;var l=h.removeChild(h.childNodes[0],true);if(_isKHTML){for(var n=h.parentNode.childNodes.length-1;n>=0;n--){if(h.parentNode.childNodes[n].tagName=="TR"){h.parentNode.removeChild(h.parentNode.childNodes[n],true)}}}else{if(_isIE){for(var n=h.childNodes.length-1;n>=0;n--){h.childNodes[n].removeNode(true)}}else{h.innerHTML=""}}h.appendChild(l);this.rowsCol=dhtmlxArray();if(this._sst){this.enableStableSorting(true)}this._fillers=this.undefined;if(!m){if(_isIE&&this._srnd){this.render_dataset()}else{this.render_dataset()}}},deleteRow:function(u,r){if(!r){r=this.getRowById(u)}if(!r){return}this.editStop();if(!this._realfake){if(this.callEvent("onBeforeRowDeleted",[u])==false){return false}}var n=0;if(this.cellType._dhx_find("tree")!=-1&&!this._realfake){n=this._h2.get[u].parent.id;this._removeTrGrRow(r)}else{if(r.parentNode){r.parentNode.removeChild(r)}var m=this.rowsCol._dhx_find(r);if(m!=-1){this.rowsCol._dhx_removeAt(m)}for(var s=0;s<this.rowsBuffer.length;s++){if(this.rowsBuffer[s]&&this.rowsBuffer[s].idd==u){this.rowsBuffer._dhx_removeAt(s);m=s;break}}}this.rowsAr[u]=null;for(var s=0;s<this.selectedRows.length;s++){if(this.selectedRows[s].idd==u){this.selectedRows._dhx_removeAt(s)}}if(this._srnd){for(var s=0;s<this._fillers.length;s++){var o=this._fillers[s];if(!o){continue}if(o[0]>=m){this._update_fillers(s,0,-1)}else{if(o[0]+o[1]>m){this._update_fillers(s,-1,0)}}}this._update_srnd_view()}if(this.pagingOn){this.changePage()}if(!this._realfake){this.callEvent("onAfterRowDeleted",[u,n])}this.callEvent("onGridReconstructed",[]);if(this._ahgr){this.setSizes()}return true},_addRow:function(v,u,A){if(A==-1||typeof A=="undefined"){A=this.rowsBuffer.length}if(typeof u=="string"){u=u.split(this.delim)}var s=this._prepareRow(v);s._attrs={};for(var y=0;y<s.childNodes.length;y++){s.childNodes[y]._attrs={}}this.rowsAr[s.idd]=s;if(this._h2){this._h2.get[s.idd].buff=s}this._fillRow(s,u);this._postRowProcessing(s);if(this._skipInsert){this._skipInsert=false;return this.rowsAr[s.idd]=s}if(this.pagingOn){this.rowsBuffer._dhx_insertAt(A,s);this.rowsAr[s.idd]=s;return s}if(this._fillers){this.rowsCol._dhx_insertAt(A,null);this.rowsBuffer._dhx_insertAt(A,s);if(this._fake){this._fake.rowsCol._dhx_insertAt(A,null)}this.rowsAr[s.idd]=s;var r=false;for(var x=0;x<this._fillers.length;x++){var w=this._fillers[x];if(w&&w[0]<=A&&(w[0]+w[1])>=A){w[1]=w[1]+1;var C=w[2].firstChild.style.height=parseInt(w[2].firstChild.style.height)+this._srdh+"px";r=true;if(this._fake){this._fake._fillers[x][1]++;this._fake._fillers[x][2].firstChild.style.height=C}}if(w&&w[0]>A){w[0]=w[0]+1;if(this._fake){this._fake._fillers[x][0]++}}}if(!r){this._fillers.push(this._add_filler(A,1,(A==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:(this.rowsCol[1])}:this.rowsCol[A-1])))}return s}this.rowsBuffer._dhx_insertAt(A,s);return this._insertRowAt(s,A)},addRow:function(h,l,m){var n=this._addRow(h,l,m);if(!this.dragContext){this.callEvent("onRowAdded",[h])}if(this.pagingOn){this.changePage(this.currentPage)}if(this._srnd){this._update_srnd_view()}n._added=true;if(this._srnd&&!this._fillers){this._fillers=[]}if(this._ahgr){this.setSizes()}this.callEvent("onGridReconstructed",[]);return n},_insertRowAt:function(m,l,n){this.rowsAr[m.idd]=m;if(this._skipInsert){this._skipInsert=false;return m}if((l<0)||((!l)&&(parseInt(l)!==0))){l=this.rowsCol.length}else{if(l>this.rowsCol.length){l=this.rowsCol.length}}if(this._cssEven){var h=m.className.replace(this._cssUnEven,"");if((this._cssSP?this.getLevel(m.idd):l)%2==1){m.className=h+" "+this._cssUnEven+(this._cssSU?(" "+this._cssUnEven+"_"+this.getLevel(m.idd)):"")}else{m.className=h+" "+this._cssEven+(this._cssSU?(" "+this._cssEven+"_"+this.getLevel(m.idd)):"")}}if(!n){if((l==(this.obj.rows.length-1))||(!this.rowsCol[l])){if(_isKHTML){this.obj.appendChild(m)}else{this.obj.firstChild.appendChild(m)}}else{this.rowsCol[l].parentNode.insertBefore(m,this.rowsCol[l])}}this.rowsCol._dhx_insertAt(l,m);this.callEvent("onRowInserted",[m,l]);return m},getRowById:function(h){var l=this.rowsAr[h];if(l){if(l.tagName!="TR"){for(var g=0;g<this.rowsBuffer.length;g++){if(this.rowsBuffer[g]&&this.rowsBuffer[g].idd==h){return this.render_row(g)}}if(this._h2){return this.render_row(null,l.idd)}}return l}return null},cellById:function(g,e){return this.cells(g,e)},cells:function(m,n){if(arguments.length==0){return this.cells4(this.cell)}else{var l=this.getRowById(m)}var c=(l._childIndexes?l.childNodes[l._childIndexes[n]]:l.childNodes[n]);if(!c&&l._childIndexes){c=l.firstChild||{}}return this.cells4(c)},cellByIndex:function(g,e){return this.cells2(g,e)},cells2:function(m,n){var l=this.render_row(m);var c=(l._childIndexes?l.childNodes[l._childIndexes[n]]:l.childNodes[n]);if(!c&&l._childIndexes){c=l.firstChild||{}}return this.cells4(c)},cells3:function(h,l){var g=(h._childIndexes?h.childNodes[h._childIndexes[l]]:h.childNodes[l]);return this.cells4(g)},cells4:function(e){var g=window["eXcell_"+(e._cellType||this.cellType[e._cellIndex])];if(g){return new g(e)}},cells5:function(g,h){var h=h||(g._cellType||this.cellType[g._cellIndex]);if(!this._ecache[h]){if(!window["eXcell_"+h]){var l=eXcell_ro}else{var l=window["eXcell_"+h]}this._ecache[h]=new l(g)}this._ecache[h].cell=g;return this._ecache[h]},dma:function(c){if(!this._ecache){this._ecache={}}if(c&&!this._dma){this._dma=this.cells4;this.cells4=this.cells5}else{if(!c&&this._dma){this.cells4=this._dma;this._dma=null}}},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(c){if(arguments.length>0){this.smartTabOrder=dhx4.s2b(c)}else{this.smartTabOrder=true}},setExternalTabOrder:function(m,l){var r=this;this.tabStart=(typeof(m)=="object")?m:document.getElementById(m);var o=this.tabStart.onkeydown;this.tabStart.onkeydown=function(a){if(o){o.call(this,a)}var c=(a||window.event);if(c.keyCode==9&&!c.shiftKey){c.cancelBubble=true;r.selectCell(0,0,0,0,1);if(r.smartTabOrder&&r.cells2(0,0).isDisabled()){r._key_events.k9_0_0.call(r)}this.blur();return false}};if(_isOpera){this.tabStart.onkeypress=this.tabStart.onkeydown}this.tabEnd=(typeof(l)=="object")?l:document.getElementById(l);var n=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(a){if(n){n.call(this,a)}var c=(a||window.event);if(c.keyCode==9&&c.shiftKey){c.cancelBubble=true;r.selectCell((r.getRowsNum()-1),(r.getColumnCount()-1),0,0,1);if(r.smartTabOrder&&r.cells2((r.getRowsNum()-1),(r.getColumnCount()-1)).isDisabled()){r._key_events.k9_0_1.call(r)}this.blur();return false}};if(_isOpera){this.tabEnd.onkeypress=this.tabEnd.onkeydown}},uid:function(){if(!this._ui_seed){this._ui_seed=(new Date()).valueOf()}return this._ui_seed++},clearAndLoad:function(){if(this._last_load_request){var l=this._last_load_request.xmlDoc;if(l.readyState!=4){try{l.onreadystatechange=function(){};l.abort()}catch(h){}}}var e=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=e;this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var c=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,c,Math.min(c+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}};(function(){function r(a,c){this[a]=c}function n(a,c){this[a].call(this,c)}function s(a,c){this[a].call(this,c.join(this.delim))}function m(a,e){for(var g=0;g<e.length;g++){if(typeof e[g]=="object"){var c=this.getCombo(g);for(var h in e[g]){c.put(h,e[g][h])}}}}function o(g,A,a){var h=1;var C=[];function l(x,v,w){if(!C[v]){C[v]=[]}if(typeof w=="object"){w.toString=function(){return this.text}}C[v][x]=w}for(var E=0;E<A.length;E++){if(typeof(A[E])=="object"&&A[E].length){for(var c=0;c<A[E].length;c++){l(E,c,A[E][c])}}else{l(E,0,A[E])}}for(var E=0;E<C.length;E++){for(var c=0;c<C[0].length;c++){var D=C[E][c];C[E][c]=(D||"").toString()||"&nbsp;";if(D&&D.colspan){for(var e=1;e<D.colspan;e++){l(c+e,E,"#cspan")}}if(D&&D.rowspan){for(var e=1;e<D.rowspan;e++){l(c,E+e,"#rspan")}}}}this.setHeader(C[0]);for(var E=1;E<C.length;E++){this.attachHeader(C[E])}}var u=[{name:"label",def:"&nbsp;",operation:"setHeader",type:o},{name:"id",def:"",operation:"columnIds",type:r},{name:"width",def:"*",operation:"setInitWidths",type:s},{name:"align",def:"left",operation:"cellAlign",type:r},{name:"valign",def:"middle",operation:"cellVAlign",type:r},{name:"sort",def:"na",operation:"fldSort",type:r},{name:"type",def:"ro",operation:"setColTypes",type:s},{name:"options",def:"",operation:"",type:m}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(a){return[a.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(c){for(var a=0;a<u.length;a++){var e=[];for(var h=0;h<c.length;h++){e[h]=c[h][u[a].name]||u[a].def}var g=u[a].type||n;g.call(this,u[a].operation,e,c)}this.init()},rows:function(a){},headers:function(c){for(var a=0;a<c.length;a++){this.attachHeader(c[a])}}})})();dhtmlXGridObject.prototype._dp_init=function(c){c.attachEvent("insertCallback",function(l,a){if(this.obj._h2){this.obj.addRow(a,h,null,parent)}else{this.obj.addRow(a,[],0)}var h=this.obj.getRowById(a);if(h){this.obj._process_xml_row(h,l.firstChild);this.obj._postRowProcessing(h)}});c.attachEvent("updateCallback",function(l,a){var h=this.obj.getRowById(a);if(h){this.obj._process_xml_row(h,l.firstChild);this.obj._postRowProcessing(h)}});c.attachEvent("deleteCallback",function(g,a){this.obj.setUserData(a,this.action_param,"true_deleted");this.obj.deleteRow(a)});c._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(l,a,m){if(c._columns&&!c._columns[m]){return true}var n=this.cells(a,m);if(l==1){if(n.isCheckbox()){c.setUpdated(a,true)}}else{if(l==2){if(n.wasChanged()){c.setUpdated(a,true)}}}return true});this.attachEvent("onRowPaste",function(a){c.setUpdated(a,true)});this.attachEvent("onUndo",function(a){c.setUpdated(a,true)});this.attachEvent("onRowIdChange",function(a,l){var h=c.findRow(a);if(h<c.updatedRows.length){c.updatedRows[h]=l}});this.attachEvent("onSelectStateChanged",function(a){if(c.updateMode=="row"){c.sendData()}return true});this.attachEvent("onEnter",function(a,g){if(c.updateMode=="row"){c.sendData()}return true});this.attachEvent("onBeforeRowDeleted",function(g){if(c._silent_mode||(!this.rowsAr[g])){return true}if(this.dragContext&&c.dnd){window.setTimeout(function(){c.setUpdated(g,true)},1);return true}var a=c.getState(g);if(this._h2){this._h2.forEachChild(g,function(e){c.setUpdated(e.id,false);c.markRow(e.id,true,"deleted")},this)}if(a=="inserted"){c.set_invalid(g,false);c.setUpdated(g,false);return true}if(a=="deleted"){return false}if(a=="true_deleted"){c.setUpdated(g,false);return true}c.setUpdated(g,true,"deleted");return false});this.attachEvent("onBindUpdate",function(a){if(typeof a=="object"){a=a.id}c.setUpdated(a,true)});this.attachEvent("onRowAdded",function(a){if(this.dragContext&&c.dnd){return true}c.setUpdated(a,true,"inserted");return true});c._getRowData=function(y,C){var v=[];v.gr_id=y;if(this.obj.isTreeGrid()){v.gr_pid=this.obj.getParentId(y)}var A=this.obj.getRowById(y);for(var r=0;r<this.obj._cCount;r++){if(this.obj._c_order){var a=this.obj._c_order[r]}else{var a=r}var D=this.obj.cells(A.idd,r);if(this._changed&&!D.wasChanged()){continue}if(this._endnm){v[this.obj.getColumnId(r)]=D.getValue()}else{v["c"+a]=D.getValue()}}var x=this.obj.UserData[y];if(x){for(var w=0;w<x.keys.length;w++){if(x.keys[w]&&x.keys[w].indexOf("__")!=0){v[x.keys[w]]=x.values[w]}}}var x=this.obj.UserData.gridglobaluserdata;if(x){for(var w=0;w<x.keys.length;w++){v[x.keys[w]]=x.values[w]}}return v};c._clearUpdateFlag=function(h){var a=this.obj.getRowById(h);if(a){for(var l=0;l<this.obj._cCount;l++){this.obj.cells(h,l).cell.wasChanged=false}}};c.checkBeforeUpdate=function(a){var m=true;var r=[];for(var n=0;n<this.obj._cCount;n++){if(this.mandatoryFields[n]){var o=this.mandatoryFields[n].call(this.obj,this.obj.cells(a,n).getValue(),a,n);if(typeof o=="string"){this.messages.push(o);m=false}else{m&=o;r[n]=!o}}}if(!m){this.set_invalid(a,"invalid",r);this.setUpdated(a,false)}return m}};dhx4.attachEvent("onGridCreated",function(r){r._con_f_used=[].concat(r._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];var l=function(a){a=a.replace(/(\?|\&)connector[^\f]*/g,"");return a+(a.indexOf("?")!=-1?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")};var m=function(a){return l.call(this,a)+(this._connector_sorting||"")+(this._connector_filter||"")};var n=function(a,e,c){this._connector_sorting="&dhx_sort["+e+"]="+c;return m.call(this,a)};var o=function(a,c,g){var e=[];for(var h=0;h<c.length;h++){e[h]="dhx_filter["+c[h]+"]="+encodeURIComponent(g[h])}this._connector_filter="&"+e.join("&");return m.call(this,a)};r.attachEvent("onCollectValues",function(a){if(this._con_f_used[a]){if(typeof(this._con_f_used[a])=="object"){return this._con_f_used[a]}else{return false}}return true});r.attachEvent("onDynXLS",function(){if(this.xmlFileUrl){this.xmlFileUrl=m.call(this,this.xmlFileUrl)}return true});r.attachEvent("onBeforeSorting",function(e,g,a){if(g=="connector"){var c=this;this.clearAndLoad(n.call(this,this.xmlFileUrl,e,a),function(){c.setSortImgState(true,e,a)});return false}return true});r.attachEvent("onFilterStart",function(a,c){if(this._con_f_used.length){var e=this.getSortingState();var g=this;this.clearAndLoad(o.call(this,this.xmlFileUrl,a,c));if(e.length){g.setSortImgState(true,e[0],e[1])}return false}return true})});dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(g,e){if(!this._con_f_used[e]){this._con_f_used[e]=1}return this._in_header_text_filter(g,e)};dhtmlXGridObject.prototype._in_header_connector_select_filter=function(g,e){if(!this._con_f_used[e]){this._con_f_used[e]=2}return this._in_header_select_filter(g,e)};if(!dhtmlXGridObject.prototype.load_connector){dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load;dhtmlXGridObject.prototype.load=function(r,m,n){if(!this._colls_loaded&&this.cellType){var l=[];for(var o=0;o<this.cellType.length;o++){if(this.cellType[o].indexOf("co")==0||this.cellType[o].indexOf("clist")==0||this._con_f_used[o]==2){l.push(o)}}if(l.length){arguments[0]+=(arguments[0].indexOf("?")!=-1?"&":"?")+"connector=true&dhx_colls="+l.join(",")}}return this.load_connector.apply(this,arguments)};dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead;dhtmlXGridObject.prototype._parseHead=function(H,J,v){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){var L=dhx4.ajax.xpath("./coll_options",arguments[0]);for(var A=0;A<L.length;A++){var x=L[A].getAttribute("for");var K=[];var E=null;if(this.cellType[x]=="combo"){E=this.getColumnCombo(x)}else{if(this.cellType[x].indexOf("co")==0){E=this.getCombo(x)}}var C=dhx4.ajax.xpath("./item",L[A]);var I=[];for(var D=0;D<C.length;D++){var F=C[D].getAttribute("value");if(E){var y=C[D].getAttribute("label")||F;if(E.addOption){I.push([F,y])}else{E.put(F,y)}K[K.length]=y}else{K[K.length]=F}}if(I.length){if(E){E.addOption(I)}}else{if(K.length&&!E){if(this.registerCList){this.registerCList(x*1,K)}}}if(this._con_f_used[x*1]){this._con_f_used[x*1]=K}}this._colls_loaded=true}}}function dhtmlXGridCellObject(c){this.destructor=function(){this.cell.obj=null;this.cell=null;this.grid=null;this.base=null;return null};this.cell=c;this.getValue=function(){if((this.cell.textContent)&&(this.cell.textContent.tagName=="TEXTAREA")){return this.cell.textContent.value}else{return this.cell.innerHTML._dhx_trim()}};this.getMathValue=function(){if(this.cell.original){return this.cell.original}else{return this.getValue()}};this.getFont=function(){arOut=new Array(3);if(this.cell.style.fontFamily){arOut[0]=this.cell.style.fontFamily}if(this.cell.style.fontWeight=="bold"||this.cell.parentNode.style.fontWeight=="bold"){arOut[1]="bold"}if(this.cell.style.fontStyle=="italic"||this.cell.parentNode.style.fontWeight=="italic"){arOut[1]+="italic"}if(this.cell.style.fontSize){arOut[2]=this.cell.style.fontSize}else{arOut[2]=""}return arOut.join("-")};this.getTextColor=function(){if(this.cell.style.color){return this.cell.style.color}else{return"#000000"}};this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"};this.getHorAlign=function(){if(this.cell.style.textAlign){return this.cell.style.textAlign}else{if(this.cell.style.textAlign){return this.cell.style.textAlign}else{return"left"}}};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(a){fntAr=a.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];if(fntAr.length==3){if(/bold/.test(fntAr[1])){this.cell.style.fontWeight="bold"}if(/italic/.test(fntAr[1])){this.cell.style.fontStyle="italic"}if(/underline/.test(fntAr[1])){this.cell.style.textDecoration="underline"}}};this.setTextColor=function(a){this.cell.style.color=a};this.setBgColor=function(a){if(a==""){a=null}this.cell.style.background=a};this.setHorAlign=function(a){if(a.length==1){if(a=="c"){this.cell.style.textAlign="center"}else{if(a=="l"){this.cell.style.textAlign="left"}else{this.cell.style.textAlign="right"}}}else{this.cell.style.textAlign=a}};this.wasChanged=function(){if(this.cell.wasChanged){return true}else{return false}};this.isCheckbox=function(){var a=this.cell.firstChild;if(a&&a.tagName=="INPUT"){type=a.type;if(type=="radio"||type=="checkbox"){return true}else{return false}}else{return false}};this.isChecked=function(){if(this.isCheckbox()){return this.cell.firstChild.checked}};this.isDisabled=function(){return this.cell._disabled};this.setChecked=function(a){if(this.isCheckbox()){if(a!="true"&&a!=1){a=false}this.cell.firstChild.checked=a}};this.setDisabled=function(a){if(a!="true"&&a!=1){a=false}if(this.isCheckbox()){this.cell.firstChild.disabled=a;if(this.disabledF){this.disabledF(a)}}this.cell._disabled=a}}dhtmlXGridCellObject.prototype={getAttribute:function(c){return this.cell._attrs[c]},setAttribute:function(e,g){this.cell._attrs[e]=g},getInput:function(){if(this.obj&&(this.obj.tagName=="INPUT"||this.obj.tagName=="TEXTAREA")){return this.obj}var c=(this.obj||this.cell).getElementsByTagName("TEXTAREA");if(!c.length){c=(this.obj||this.cell).getElementsByTagName("INPUT")}return c[0]}};dhtmlXGridCellObject.prototype.setValue=function(c){if((typeof(c)!="number")&&(!c||c.toString()._dhx_trim()=="")){c="&nbsp;";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCValue(c)};dhtmlXGridCellObject.prototype.getTitle=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};dhtmlXGridCellObject.prototype.setCValue=function(g,e){this.cell.innerHTML=g;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,(arguments.length>1?e:g)])};dhtmlXGridCellObject.prototype.setCTxtValue=function(c){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(c));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,c])};dhtmlXGridCellObject.prototype.setLabel=function(c){this.cell.innerHTML=c};dhtmlXGridCellObject.prototype.getMath=function(){if(this._val){return this.val}else{return this.getValue()}};function eXcell(){this.obj=null;this.val=null;this.changeState=function(){return false};this.edit=function(){this.val=this.getValue()};this.detach=function(){return false};this.getPosition=function(l){var h=l;var m=0;var n=0;while(h.tagName!="BODY"){m+=h.offsetLeft;n+=h.offsetTop;h=h.offsetParent}return new Array(m,n)}}eXcell.prototype=new dhtmlXGridCellObject;function eXcell_ed(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.edit=function(){this.cell.atag=(!this.grid.multiLine)?"INPUT":"TEXTAREA";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=(this.cell.offsetHeight-(_isIE?4:4))+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(a){(a||event).cancelBubble=true};this.obj.onmousedown=function(a){(a||event).cancelBubble=true};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(a){if(!a){a=event}a.cancelBubble=true;return true};if(_isIE){this.obj.focus();this.obj.blur()}this.obj.focus()};this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(a){if(!a||a.toString()._dhx_trim()==""){a=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(a)}}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){var a=this.obj.value;this.setValue(a);return this.val!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(c){if(!c||c.toString()._dhx_trim()==""){this.cell._clearCell=true;return this.setCValue("&nbsp;",0)}else{this.cell._clearCell=false;this.cell._orig_value=c}this.setCValue(this.grid._aplNF(c,this.cell._cellIndex),c)};function eXcell_ch(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.disabledF=function(a){if((a==true)||(a==1)){this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis.")}else{this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")}};this.changeState=function(a){if(a===true&&!this.grid.isActive){if(window.globalActiveDHTMLGridObject!=null&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive){window.globalActiveDHTMLGridObject.setActive(false)}this.grid.setActive(true)}if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])){this.val=this.getValue();if(this.val=="1"){this.setValue("0")}else{this.setValue("1")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return true};this.isChecked=function(){if(this.getValue()=="1"){return true}else{return false}};this.setChecked=function(a){this.setValue(a.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(g){this.cell.style.verticalAlign="middle";if(g){g=g.toString()._dhx_trim();if((g=="false")||(g=="0")){g=""}}if(g){g="1";this.cell.chstate="1"}else{g="0";this.cell.chstate="0"}var e=this;this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+g+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};function eXcell_ra(c){this.base=eXcell_ch;this.base(c);this.grid=c.parentNode.grid;this.disabledF=function(a){if((a==true)||(a==1)){this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis.")}else{this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")}};this.changeState=function(a){if(a===false&&this.getValue()==1){return}if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("0")}else{this.setValue("1")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.edit=null}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(g){this.cell.style.verticalAlign="middle";if(g){g=g.toString()._dhx_trim();if((g=="false")||(g=="0")){g=""}}if(g){if(!this.grid._RaSeCol){this.grid._RaSeCol=[]}if(this.grid._RaSeCol[this.cell._cellIndex]){var e=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);e.setValue("0");if(this.grid.rowsAr[e.cell.parentNode.idd]){this.grid.callEvent("onEditCell",[1,e.cell.parentNode.idd,e.cell._cellIndex])}}this.grid._RaSeCol[this.cell._cellIndex]=this.cell;g="1";this.cell.chstate="1"}else{g="0";this.cell.chstate="0"}this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+g+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};function eXcell_txt(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(e){(e||event).cancelBubble=true};var g=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;document.body.appendChild(this.obj);if(_isOpera){this.obj.onkeypress=function(e){if(e.keyCode==9||e.keyCode==27){return false}}}this.obj.onkeydown=function(e){var l=(e||event);if(l.keyCode==9||l.keyCode==27){globalActiveDHTMLGridObject.entBox.focus();globalActiveDHTMLGridObject.doKey({keyCode:l.keyCode,shiftKey:l.shiftKey,srcElement:"0"});return false}};this.obj.style.left=g[0]+"px";this.obj.style.top=g[1]+this.cell.offsetHeight+"px";if(this.cell.offsetWidth<200){var a=200}else{var a=this.cell.offsetWidth}this.obj.style.width=a+16+"px";if(_isIE){this.obj.select();this.obj.value=this.obj.value}this.obj.focus()};this.detach=function(){var a="";a=this.obj.value;if(a==""){this.cell._clearCell=true}else{this.cell._clearCell=false}this.setValue(a);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){if(this.obj){return this.obj.value}if(this.cell._clearCell){return""}if(typeof this.cell._brval!="undefined"){return this.cell._brval}if((!this.grid.multiLine)){return this.cell._brval||this.cell.innerHTML}else{return this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim()}}}eXcell_txt.prototype=new eXcell;function eXcell_txttxt(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value}if(this.cell._clearCell){return""}if((!this.grid.multiLine)&&this.cell._brval){return this.cell._brval}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(a){this.cell._brval=a;if(!a||a.toString()._dhx_trim()==""){a=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(a)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(c){this.cell._brval=c;if(!c||c.toString()._dhx_trim()==""){c="&nbsp;";this.cell._clearCell=true}else{this.cell._clearCell=false}if((!this.grid.multiLine)||this.cell._clearCell){this.setCValue(c,this.cell._brval)}else{this.setCValue(c.replace(/\n/g,"<br/>"),c)}};function eXcell_co(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid;this.combo=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));this.editable=true}this.shiftNext=function(){var a=this.list.options[this.list.selectedIndex+1];if(a){a.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text;return true};this.shiftPrev=function(){if(this.list.selectedIndex!=0){var a=this.list.options[this.list.selectedIndex-1];if(a){a.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text}return true};this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var s=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=(this.cell.offsetHeight-(_isIE?4:4))+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(e){(e||event).cancelBubble=true};this.obj.onmousedown=function(e){(e||event).cancelBubble=true};this.obj.value=this.text;this.obj.onselectstart=function(e){if(!e){e=event}e.cancelBubble=true;return true};var o=this;this.obj.onkeyup=function(h){var l=(h||event).keyCode;if(l==38||l==40||l==9){return}var g=this.readonly?String.fromCharCode(l):this.value;var e=o.list.options;for(var m=0;m<e.length;m++){if(e[m].text.indexOf(g)==0){return e[m].selected=true}}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=s[0]+"px";this.list.style.top=s[1]+this.cell.offsetHeight+"px";this.list.onclick=function(e){var g=e||window.event;var h=g.target||g.srcElement;if(h.tagName=="OPTION"){h=h.parentNode}o.editable=false;o.grid.editStop();g.cancelBubble=true};var w=this.combo.getKeys();var r=false;var v=0;for(var u=0;u<w.length;u++){var a=this.combo.get(w[u]);this.list.options[this.list.options.length]=new Option(a,w[u]);if(w[u]==this.val){v=this.list.options.length-1;r=true}}if(r==false){this.list.options[this.list.options.length]=new Option(this.text,this.val===null?"":this.val);v=this.list.options.length-1}document.body.appendChild(this.list);this.list.size="6";this.cstate=1;if(this.editable){this.cell.innerHTML=""}else{this.obj.style.width="1px";this.obj.style.height="1px"}this.cell.appendChild(this.obj);this.list.options[v].selected=true;if(this.editable){this.obj.focus();this.obj.focus()}if(!this.editable){this.obj.style.visibility="hidden";this.list.focus();this.list.onkeydown=function(e){e=e||window.event;o.grid.setActive(true);if(e.keyCode<30){return o.grid.doKey({target:o.cell,keyCode:e.keyCode,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey})}}}};this.getValue=function(){return((this.cell.combo_value==window.undefined)?"":this.cell.combo_value)};this.detach=function(){if(this.val!=this.getValue()){this.cell.wasChanged=true}if(this.list.parentNode!=null){if(this.editable){var l=this.list.options[this.list.selectedIndex];if(l&&l.text==this.obj.value){this.setValue(this.list.value)}else{var h=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));var a=h.values._dhx_find(this.obj.value);if(a!=-1){this.setValue(h.keys[a])}else{this.setValue(this.cell.combo_value=this.obj.value)}}}else{this.setValue(this.list.value)}}if(this.list.parentNode){this.list.parentNode.removeChild(this.list)}if(this.obj.parentNode){this.obj.parentNode.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(l){if(typeof(l)=="object"){var m=dhx4.ajax.xpath("./option",l);if(m.length){this.cell._combo=new dhtmlXGridComboObject()}for(var n=0;n<m.length;n++){this.cell._combo.put(m[n].getAttribute("value"),m[n].firstChild?m[n].firstChild.data:"")}l=l.firstChild.data}if((l||"").toString()._dhx_trim()==""){l=null}this.cell.combo_value=l;if(l!==null){var h=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(l);this.setCValue(h===null?l:h,l)}else{this.setCValue("&nbsp;",l)}};function eXcell_coro(c){this.base=eXcell_co;this.base(c);this.editable=false}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(c){this.base=eXcell_co;this.base(c)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};eXcell_cotxt.prototype.setValue=function(h){if(typeof(h)=="object"){var l=dhx4.ajax.xpath("./option",h);if(l.length){this.cell._combo=new dhtmlXGridComboObject()}for(var g=0;g<l.length;g++){this.cell._combo.put(l[g].getAttribute("value"),l[g].firstChild?l[g].firstChild.data:"")}h=h.firstChild.data}if((h||"").toString()._dhx_trim()==""){h=null}if(h!==null){this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(h)||h,h)}else{this.setCTxtValue(" ",h)}this.cell.combo_value=h};function eXcell_corotxt(c){this.base=eXcell_co;this.base(c);this.editable=false}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(e){try{this.cell=e;this.grid=this.cell.parentNode.grid}catch(g){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var a=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=a[0]+"px";this.obj.style.zIndex=1000;this.obj.style.top=a[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(a){if(a.length==1){a="0"+a}return a};this.colorPanel=function(E,A){var c=document.createElement("TABLE");A.appendChild(c);c.cellSpacing=0;c.editor_obj=this;c.style.cursor="default";c.onclick=function(o){var h=o||window.event;var m=h.target||h.srcElement;var l=m.parentNode.parentNode.parentNode.editor_obj;if(l){l.setValue(m._bg);l.grid.editStop()}};var r=256/E;for(var n=0;n<=(256/r);n++){var y=c.insertRow(n);for(var a=0;a<=(256/r);a++){for(var x=0;x<=(256/r);x++){R=new Number(r*n)-(n==0?0:1);G=new Number(r*a)-(a==0?0:1);B=new Number(r*x)-(x==0?0:1);var C=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16));var D=y.insertCell(a);D.width="10px";D.innerHTML="&nbsp;";D.title=C.toUpperCase();D.style.backgroundColor="#"+C;D._bg="#"+C;if(this.val!=null&&"#"+C.toUpperCase()==this.val.toUpperCase()){D.style.border="2px solid white"}}}}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){if(this.obj.offsetParent!=null){document.body.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(c){this.setCValue("<div style='width:100%;height:"+((this.grid.multiLine?"100%":23))+";background-color:"+(c||"")+";border:0px;'>&nbsp;</div>",c);this.cell.firstChild._bg=c};function eXcell_img(e){try{this.cell=e;this.grid=this.cell.parentNode.grid}catch(g){}this.getValue=function(){if(this.cell.firstChild.tagName=="IMG"){return this.cell.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"")}else{if(this.cell.firstChild.tagName=="A"){var a=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"");a+="^"+this.cell.lnk;if(this.cell.trg){a+="^"+this.cell.trg}return a}}};this.isDisabled=function(){return true}}eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(h){var l=h;if((h||"").indexOf("^")!=-1){var g=h.split("^");h=g[0];l=this.cell._attrs.title||g[1];if(g.length>2){this.cell.lnk=g[2];if(g[3]){this.cell.trg=g[3]}}this.cell.titFl="1"}if(!this.grid.multiLine){this.setCValue("<img src='"+this.grid.iconURL+(h||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",h)}else{this.setCValue("<img src='"+this.grid.iconURL+(h||"")._dhx_trim()+"' border='0'>",h)}if(this.cell.lnk){this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"}this.cell._brval=l};function eXcell_price(c){this.base=eXcell_ed;this.base(c);this.getValue=function(){if(this.cell.childNodes.length>1){return this.cell.childNodes[1].innerHTML.toString()._dhx_trim()}else{return"0"}}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(g){if(isNaN(parseFloat(g))){g=this.val||0}var e="green";if(g<0){e="red"}this.setCValue("<span>$</span><span style='padding-right:2px;color:"+e+";'>"+g+"</span>",g)};function eXcell_dyn(c){this.base=eXcell_ed;this.base(c);this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.setValue=function(h){if(!h||isNaN(Number(h))){if(h!==""){h=0}}if(h>0){var l="green";var g="dyn_up.gif"}else{if(h==0){var l="black";var g="dyn_.gif"}else{var l="red";var g="dyn_down.gif"}}this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+""+g+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+l+";'>"+h+"</span></div>",h)};function eXcell_ro(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}eXcell_ro.prototype=new eXcell;window.eXcell_hidden=function(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell.val}};eXcell_hidden.prototype=new eXcell;eXcell_hidden.prototype.setValue=function(c){this.cell.val=c};function eXcell_ron(c){this.cell=c;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(c){if(c===0){}else{if(!c||c.toString()._dhx_trim()==""){this.setCValue("&nbsp;");return this.cell._clearCell=true}}this.cell._orig_value=c;this.cell._clearCell=false;this.setCValue(c?this.grid._aplNF(c,this.cell._cellIndex):"0")};function eXcell_rotxt(c){this.cell=c;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.setValue=function(a){if(!a){a=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(a)};this.getValue=function(){if(this.cell._clearCell){return""}return(_isIE?this.cell.innerText:this.cell.textContent)}}eXcell_rotxt.prototype=new eXcell;function dhtmlXGridComboObject(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();this.put=function(l,h){for(var g=0;g<this.keys.length;g++){if(this.keys[g]==l){this.values[g]=h;return true}}this.values[this.values.length]=h;this.keys[this.keys.length]=l};this.get=function(g){for(var e=0;e<this.keys.length;e++){if(this.keys[e]==g){return this.values[e]}}return null};this.clear=function(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray()};this.remove=function(g){for(var e=0;e<this.keys.length;e++){if(this.keys[e]==g){this.keys._dhx_removeAt(e);this.values._dhx_removeAt(e);return true}}};this.size=function(){var e=0;for(var g=0;g<this.keys.length;g++){if(this.keys[g]!=null){e++}}return e};this.getKeys=function(){var e=new Array(0);for(var g=0;g<this.keys.length;g++){if(this.keys[g]!=null){e[e.length]=this.keys[g]}}return e};this.save=function(){this._save=new Array();for(var c=0;c<this.keys.length;c++){this._save[c]=[this.keys[c],this.values[c]]}};this.restore=function(){if(this._save){this.keys[c]=new Array();this.values[c]=new Array();for(var c=0;c<this._save.length;c++){this.keys[c]=this._save[c][0];this.values[c]=this._save[c][1]}}};return this}function Hashtable(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();return this}Hashtable.prototype=new dhtmlXGridComboObject;if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachGrid=function(){this.callEvent("_onBeforeContentAttach",["grid"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);this.dataType="grid";this.dataObj=new dhtmlXGridObject(c);this.dataObj.setSkin(this.conf.skin);if(typeof(window.dhtmlXTabBarCell)!="undefined"&&this instanceof window.dhtmlXTabBarCell&&navigator.userAgent.match(/7[\.\d]* mobile/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null){this.dataObj.objBox.style.webkitOverflowScrolling="auto"}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}c=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXGridObject.prototype.enableDragAndDrop=function(c){if(c=="temporary_disabled"){this.dADTempOff=false;c=true}else{this.dADTempOff=true}this.dragAndDropOff=dhx4.s2b(c);this._drag_validate=true;if(c){this.objBox.ondragstart=function(a){(a||event).cancelBubble=true;return false}}};dhtmlXGridObject.prototype.setDragBehavior=function(c){this.dadmodec=this.dadmodefix=0;switch(c){case"child":this.dadmode=0;this._sbmod=false;break;case"sibling":this.dadmode=1;this._sbmod=false;break;case"sibling-next":this.dadmode=1;this._sbmod=true;break;case"complex":this.dadmode=2;this._sbmod=false;break;case"complex-next":this.dadmode=2;this._sbmod=true;break}};dhtmlXGridObject.prototype.enableDragOrder=function(c){this._dndorder=dhx4.s2b(c)};dhtmlXGridObject.prototype._checkParent=function(l,n){var m=this._h2.get[l.idd].parent;if(!m.parent){return}for(var h=0;h<n.length;h++){if(n[h]==m.id){return true}}return this._checkParent(this.rowsAr[m.id],n)};dhtmlXGridObject.prototype._createDragNode=function(y,x){this.editStop();if(window.dhtmlDragAndDrop.dragNode){return null}if(!this.dADTempOff){return null}y.parentObject=new Object();y.parentObject.treeNod=this;var s=this.callEvent("onBeforeDrag",[y.parentNode.idd,y._cellIndex,x]);if(!s){return null}var w=new Array();w=this.getSelectedId();w=(((w)&&(w!=""))?w.split(this.delim):[]);var v=false;for(var A=0;A<w.length;A++){if(w[A]==y.parentNode.idd){v=true}}if(!v){this.selectRow(this.rowsAr[y.parentNode.idd],false,x.ctrlKey,false);if(!x.ctrlKey){w=[]}w[this.selMultiRows?w.length:0]=y.parentNode.idd}if(this.isTreeGrid()){for(var A=w.length-1;A>=0;A--){if(this._checkParent(this.rowsAr[w[A]],w)){w.splice(A,1)}}}var e=this;if(w.length&&this._dndorder){w.sort(function(a,c){return(e.rowsAr[a].rowIndex>e.rowsAr[c].rowIndex?1:-1)})}var C=this.getFirstParentOfType(_isIE?x.srcElement:x.target,"TD");if(C){this._dndExtra=C._cellIndex}this._dragged=new Array();for(var A=0;A<w.length;A++){if(this.rowsAr[w[A]]){this._dragged[this._dragged.length]=this.rowsAr[w[A]];this.rowsAr[w[A]].treeNod=this}}y.parentObject.parentNode=y.parentNode;var u=document.createElement("div");u.innerHTML=(s!==true?s:this.rowToDragElement(y.parentNode.idd));u.style.position="absolute";u.className="dragSpanDiv";return u};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};function dragContext(y,A,C,D,E,a,e,c,h,l){this.source=y||"grid";this.target=A||"grid";this.mode=C||"move";this.dropmode=D||"child";this.sid=E||0;this.tid=a;this.sobj=e||null;this.tobj=c||null;this.sExtra=h||null;this.tExtra=l||null;return this}dragContext.prototype.valid=function(){if(this.sobj!=this.tobj){return true}if(this.sid==this.tid){return false}if(this.target=="treeGrid"){var c=this.tid;while(c=this.tobj.getParentId(c)){if(this.sid==c){return false}}}return true};dragContext.prototype.close=function(){this.sobj=null;this.tobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)};dragContext.prototype.set=function(a,g){this[a]=g;return this};dragContext.prototype.uid=function(a,g){this.nid=this.sid;while(this.tobj.rowsAr[this.nid]){this.nid=this.nid+((new Date()).valueOf())}return this};dragContext.prototype.data=function(){if(this.sobj==this.tobj){return this.sobj._getRowArray(this.sobj.rowsAr[this.sid])}if(this.source=="tree"){return this.tobj.treeToGridElement(this.sobj,this.sid,this.tid)}else{return this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)}};dragContext.prototype.attrs=function(){if(this.source=="tree"){return{}}else{return this.sobj.rowsAr[this.sid]._attrs}};dragContext.prototype.childs=function(){if(this.source=="treeGrid"){return this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null}return null};dragContext.prototype.pid=function(){if(!this.tid){return 0}if(!this.tobj._h2){return 0}if(this.target=="treeGrid"){if(this.dropmode=="child"){return this.tid}else{var l=this.tobj.rowsAr[this.tid];var g=this.tobj._h2.get[l.idd].parent.id;if((this.alfa)&&(this.tobj._sbmod)&&(l.nextSibling)){var h=this.tobj._h2.get[l.nextSibling.idd].parent.id;if(h==this.tid){return this.tid}if(h!=g){return h}}return g}}};dragContext.prototype.ind=function(){if(this.tid==window.unknown){return this.tobj.rowsBuffer.length}if(this.target=="treeGrid"){if(this.dropmode=="child"){this.tobj.openItem(this.tid)}else{this.tobj.openItem(this.tobj.getParentId(this.tid))}}var e=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if((this.alfa)&&(this.tobj._sbmod)&&(this.dropmode=="sibling")){var g=this.tobj.rowsAr[this.tid];if((g.nextSibling)&&(this._h2.get[g.nextSibling.idd].parent.id==this.tid)){return e+1}}return(e+1+((this.target=="treeGrid"&&e>=0&&this.tobj._h2.get[this.tobj.rowsBuffer[e].idd].state=="minus")?this.tobj._getOpenLenght(this.tobj.rowsBuffer[e].idd,0):0))};dragContext.prototype.img=function(){if((this.target!="grid")&&(this.sobj._h2)){return this.sobj.getItemImage(this.sid)}else{return null}};dragContext.prototype.slist=function(){var g=new Array();for(var e=0;e<this.sid.length;e++){g[g.length]=this.sid[e][(this.source=="tree")?"id":"idd"]}return g.join(",")};dhtmlXGridObject.prototype._drag=function(J,C,c,I){if(this._realfake){return this._fake._drag()}var w=(this.lastLanding);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}var D=c.parentNode;var E=J.parentObject;if(!D.idd){D.grid=this;this.dadmodefix=0}var x=new dragContext(0,0,0,((D.grid.dadmode==1||D.grid.dadmodec)?"sibling":"child"));if(E&&E.childNodes){x.set("source","tree").set("sobj",E.treeNod).set("sid",x.sobj._dragged)}else{if(!E){return true}if(E.treeNod.isTreeGrid&&E.treeNod.isTreeGrid()){x.set("source","treeGrid")}x.set("sobj",E.treeNod).set("sid",x.sobj._dragged)}if(D.grid.isTreeGrid()){x.set("target","treeGrid")}else{x.set("dropmode","sibling")}x.set("tobj",D.grid).set("tid",D.idd);if(((x.tobj.dadmode==2)&&(x.tobj.dadmodec==1))&&(x.tobj.dadmodefix<0)){if(x.tobj.obj.rows[1].idd!=x.tid){x.tid=D.previousSibling.idd}else{x.tid=0}}var F=this.getFirstParentOfType(I,"TD");if(F){x.set("tExtra",F._cellIndex)}if(F){x.set("sExtra",x.sobj._dndExtra)}if(x.sobj.dpcpy){x.set("mode","copy")}if(x.tobj._realfake){x.tobj=x.tobj._fake}if(x.sobj._realfake){x.sobj=x.sobj._fake}x.tobj._clearMove();if(E&&E.treeNod&&E.treeNod._nonTrivialRow){E.treeNod._nonTrivialRow(this,x.tid,x.dropmode,E)}else{x.tobj.dragContext=x;if(!x.tobj.callEvent("onDrag",[x.slist(),x.tid,x.sobj,x.tobj,x.sExtra,x.tExtra])){return x.tobj.dragContext=null}var H=new Array();if(typeof(x.sid)=="object"){var y=x.copy();for(var A=0;A<x.sid.length;A++){if(!y.set("alfa",(!A)).set("sid",x.sid[A][(x.source=="tree"?"id":"idd")]).valid()){continue}y.tobj._dragRoutine(y);if(y.target=="treeGrid"&&y.dropmode=="child"){y.tobj.openItem(y.tid)}H[H.length]=y.nid;y.set("dropmode","sibling").set("tid",y.nid)}y.close()}else{x.tobj._dragRoutine(x)}if(x.tobj.laterLink){x.tobj.laterLink()}x.tobj.callEvent("onDrop",[x.slist(),x.tid,H.join(","),x.sobj,x.tobj,x.sExtra,x.tExtra])}x.tobj.dragContext=null;x.close()};dhtmlXGridObject.prototype._dragRoutine=function(E){if((E.sobj==E.tobj)&&(E.source=="grid")&&(E.mode=="move")&&!this._fake){if(E.sobj._dndProblematic){return}var l=E.sobj.rowsAr[E.sid];var c=E.sobj.rowsCol._dhx_find(l);E.sobj.rowsCol._dhx_removeAt(E.sobj.rowsCol._dhx_find(l));E.sobj.rowsBuffer._dhx_removeAt(E.sobj.rowsBuffer._dhx_find(l));E.sobj.rowsBuffer._dhx_insertAt(E.ind(),l);if(E.tobj._fake){E.tobj._fake.rowsCol._dhx_removeAt(c);var D=E.tobj._fake.rowsAr[E.sid];D.parentNode.removeChild(D)}E.sobj._insertRowAt(l,E.ind());E.nid=E.sid;E.sobj.callEvent("onGridReconstructed",[]);return}var v;if(this._h2&&typeof E.tid!="undefined"&&E.dropmode=="sibling"&&(this._sbmod||E.tid)){if(E.alfa&&this._sbmod&&this._h2.get[E.tid].childs.length){this.openItem(E.tid);v=E.uid().tobj.addRowBefore(E.nid,E.data(),this._h2.get[E.tid].childs[0].id,E.img(),E.childs())}else{v=E.uid().tobj.addRowAfter(E.nid,E.data(),E.tid,E.img(),E.childs())}}else{v=E.uid().tobj.addRow(E.nid,E.data(),E.ind(),E.pid(),E.img(),E.childs())}v._attrs=E.attrs();if(E.source=="tree"){this.callEvent("onRowAdded",[E.nid]);var C=E.sobj._globalIdStorageFind(E.sid);if(C.childsCount){var w=E.copy().set("tid",E.nid).set("dropmode",E.target=="grid"?"sibling":"child");for(var y=0;y<C.childsCount;y++){E.tobj._dragRoutine(w.set("sid",C.childNodes[y].id));if(E.mode=="move"){y--}}w.close()}}else{E.tobj._copyUserData(E);this.callEvent("onRowAdded",[E.nid]);if((E.source=="treeGrid")){if(E.sobj==E.tobj){v._xml=E.sobj.rowsAr[E.sid]._xml}var x=E.sobj._h2.get[E.sid];if((x)&&(x.childs.length)){var w=E.copy().set("tid",E.nid);if(E.target=="grid"){w.set("dropmode","sibling")}else{if(!w.tobj.kidsXmlFile){w.tobj.openItem(E.tid)}w.set("dropmode","child")}var A=x.childs.length;if(!w.tobj.kidsXmlFile){for(var y=0;y<A;y++){E.sobj.render_row_tree(null,x.childs[y].id);E.tobj._dragRoutine(w.set("sid",x.childs[y].id));if(A!=x.childs.length){y--;A=x.childs.length}}}w.close()}}}if(E.mode=="move"){E.sobj[(E.source=="tree")?"deleteItem":"deleteRow"](E.sid);if((E.sobj==E.tobj)&&(!E.tobj.rowsAr[E.sid])){E.tobj.changeRowId(E.nid,E.sid);E.nid=E.sid}}};dhtmlXGridObject.prototype.gridToGrid=function(n,l,o){var m=new Array();for(var r=0;r<l.hdr.rows[0].cells.length;r++){m[r]=l.cells(n,r).getValue()}return m};dhtmlXGridObject.prototype.checkParentLine=function(e,g){if((!this._h2)||(!g)||(!e)){return false}if(e.id==g){return true}else{return this.checkParentLine(e.parent,g)}};dhtmlXGridObject.prototype._dragIn=function(r,u,w,n){if(!this.dADTempOff){return 0}var o=this.isTreeGrid();var s=u.parentNode.idd?u.parentNode:u.parentObject;if(this._drag_validate){if(r.parentNode==u.parentNode){return 0}if((o)&&(this==s.grid)&&((this.checkParentLine(this._h2.get[r.parentNode.idd],u.parentNode.idd)))){return 0}}if(!this.callEvent("onDragIn",[s.idd||s.id,r.parentNode.idd,s.grid||s.treeNod,(r.grid||r.parentNode.grid)])){return this._setMove(r,w,n,true)}this._setMove(r,w,n);if((o)&&(r.parentNode.expand!="")){var v=this;this._autoOpenTimer=window.setTimeout(function(){v._autoOpenItem(null,v);v=null},1000);this._autoOpenId=r.parentNode.idd}else{if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}}return r};dhtmlXGridObject.prototype._autoOpenItem=function(e,g){g.openItem(g._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(g){this._clearMove();var e=g.parentNode.parentObject?g.parentObject.id:g.parentNode.idd;this.callEvent("onDragOut",[e]);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}};dhtmlXGridObject.prototype._setMove=function(s,y,x,u){if(!s.parentNode.idd){return}var w=dhx4.absTop(s);var r=dhx4.absTop(this.objBox);if((w-r)>(parseInt(this.objBox.offsetHeight)-50)){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20}if((w-r+parseInt(this.objBox.scrollTop))<(parseInt(this.objBox.scrollTop)+30)){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20}if(u){return 0}if(this.dadmode==2){var o=x-w+(document.body.scrollTop||document.documentElement.scrollTop)-2-s.offsetHeight/2;if((Math.abs(o)-s.offsetHeight/6)>0){this.dadmodec=1;if(o<0){this.dadmodefix=-1}else{this.dadmodefix=1}}else{this.dadmodec=0}}else{this.dadmodec=this.dadmode}if(this.dadmodec){if(!this._sdrgc){this._createSdrgc()}this._sdrgc.style.display="block";this._sdrgc.style.top=w-r+parseInt(this.objBox.scrollTop)+((this.dadmodefix>=0)?s.offsetHeight:0)+"px"}else{this._llSelD=s;if(s.parentNode.tagName=="TR"){for(var v=0;v<s.parentNode.childNodes.length;v++){var o=s.parentNode.childNodes[v];o._bgCol=o.style.backgroundColor;o.style.backgroundColor="#FFCCCC"}}}};dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc){this._sdrgc.style.display="none"}if((this._llSelD)&&(this._llSelD.parentNode.tagName=="TR")){var g=this._llSelD.parentNode.childNodes;for(var e=0;e<g.length;e++){g[e].style.backgroundColor=g[e]._bgCol}}this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(e){var g=this.cells(e,0).getValue();return g};dhtmlXGridObject.prototype._copyUserData=function(h){if(!h.tobj.UserData[h.nid]||h.tobj!=h.sobj){h.tobj.UserData[h.nid]=new Hashtable()}else{return}var l=h.sobj.UserData[h.sid];var c=h.tobj.UserData[h.nid];if(l){c.keys=c.keys.concat(l.keys);c.values=c.values.concat(l.values)}};dhtmlXGridObject.prototype.moveRow=function(m,l,h,n){switch(l){case"row_sibling":this.moveRowTo(m,h,"move","sibling",this,n);break;case"up":this.moveRowUp(m);break;case"down":this.moveRowDown(m);break}};dhtmlXGridObject.prototype._nonTrivialNode=function(H,u,x,w,D){if((H.callEvent)&&(!D)){if(!H.callEvent("onDrag",[w.idd,u.id,(x?x.id:null),this,H])){return false}}var v=w.idd;var F=v;while(H._idpull[F]){F+=(new Date()).getMilliseconds().toString()}var A=(this.isTreeGrid()?this.getItemImage(v):"");if(x){for(C=0;C<u.childsCount;C++){if(u.childNodes[C]==x){break}}if(C!=0){x=u.childNodes[C-1]}else{st="TOP";x=""}}var E=H._attachChildNode(u,F,this.gridToTreeElement(H,F,v),"",A,A,A,"","",x);if(this._h2){var y=this._h2.get[v];if(y.childs.length){for(var C=0;C<y.childs.length;C++){this._nonTrivialNode(H,E,0,this.rowsAr[y.childs[C].id],1);if(!this.dpcpy){C--}}}}if(!this.dpcpy){this.deleteRow(v)}if((H.callEvent)&&(!D)){H.callEvent("onDrop",[F,u.id,(x?x.id:null),this,H])}};dhtmlXGridObject.prototype.gridToTreeElement=function(l,h,g){return this.cells(g,0).getValue()};dhtmlXGridObject.prototype.treeToGridElement=function(r,o,n){var u=new Array();var m=this.cellType._dhx_find("tree");if(m==-1){m=0}for(var s=0;s<this.getColumnCount();s++){u[u.length]=(s!=m)?(r.getUserData(o,this.getColumnId(s))||""):r.getItemText(o)}return u};dhtmlXGridObject.prototype.moveRowTo=function(u,v,c,r,o,s){var w=new dragContext((o||this).isTreeGrid()?"treeGrid":"grid",(s||this).isTreeGrid()?"treeGrid":"grid",c,r||"sibling",u,v,o||this,s||this);w.tobj._dragRoutine(w);w.close();return w.nid};dhtmlXGridObject.prototype.enableMercyDrag=function(c){this.dpcpy=dhx4.s2b(c)};dhtmlXGridObject.prototype.toPDF=function(V,N,H,J,Q,L){var U={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(U.row===null||U.col===-1){U=false}else{if(U.row){for(var F=0;F<U.row.length;F++){if(U.row[F]){var X=this.cells(U.row[F],U.col).cell;X.parentNode.className=X.parentNode.className.replace(" rowselected","");X.className=X.className.replace(" cellselected","");U.row[F]=X}}}else{U=false}}N=N||"color";var E=N=="full_color";var Y=this;Y._asCDATA=true;if(typeof(L)==="undefined"){this.target=' target="_blank"'}else{this.target=L}eXcell_ch.prototype.getContent=function(){return this.getValue()};eXcell_ra.prototype.getContent=function(){return this.getValue()};function M(u){var l=[];for(var n=1;n<Y.hdr.rows.length;n++){l[n]=[];for(var o=0;o<Y._cCount;o++){var g=Y.hdr.rows[n].childNodes[o];if(!l[n][o]){l[n][o]=[0,0]}if(g){l[n][g._cellIndexS]=[g.colSpan,g.rowSpan]}}}var m="<rows profile='"+u+"'";if(H){m+=" header='"+H+"'"}if(J){m+=" footer='"+J+"'"}m+="><head>"+Y._serialiseExportConfig(l).replace(/^<head/,"<columns").replace(/head>$/,"columns>");for(var n=2;n<Y.hdr.rows.length;n++){var w=0;var a=Y.hdr.rows[n];var h="";for(var o=0;o<Y._cCount;o++){if((Y._srClmn&&!Y._srClmn[o])||(Y._hrrar[o]&&(!Y._fake||o>=Y._fake.hdrLabels.length))){w++;continue}var c=l[n][o];var e=((c[0]&&c[0]>1)?' colspan="'+c[0]+'" ':"");if(c[1]&&c[1]>1){e+=' rowspan="'+c[1]+'" ';w=-1}var v="";var r=a;if(Y._fake&&o<Y._fake._cCount){r=Y._fake.hdr.rows[n]}for(var s=0;s<r.cells.length;s++){if(r.cells[s]._cellIndexS==o){if(r.cells[s].getElementsByTagName("SELECT").length){v=""}else{v=_isIE?r.cells[s].innerText:r.cells[s].textContent}v=v.replace(/[ \n\r\t\xA0]+/," ");break}}if(!v||v==" "){w++}h+="<column"+e+"><![CDATA["+v+"]]></column>"}if(w!=Y._cCount){m+="\n<columns>"+h+"</columns>"}}m+="</head>\n";m+=P();return m}function W(){var c=[];if(Q){for(var a=0;a<Q.length;a++){c.push(I(Y.getRowIndex(Q[a])))}}else{for(var a=0;a<Y.getRowsNum();a++){c.push(I(a))}}return c.join("\n")}function P(){var h=["<foot>"];if(!Y.ftr){return""}for(var g=1;g<Y.ftr.rows.length;g++){h.push("<columns>");var a=Y.ftr.rows[g];for(var l=0;l<Y._cCount;l++){if(Y._srClmn&&!Y._srClmn[l]){continue}if(Y._hrrar[l]&&(!Y._fake||l>=Y._fake.hdrLabels.length)){continue}for(var m=0;m<a.cells.length;m++){var c="";var e="";if(a.cells[m]._cellIndexS==l){c=_isIE?a.cells[m].innerText:a.cells[m].textContent;c=c.replace(/[ \n\r\t\xA0]+/," ");if(a.cells[m].colSpan&&a.cells[m].colSpan!=1){e=" colspan='"+a.cells[m].colSpan+"' "}if(a.cells[m].rowSpan&&a.cells[m].rowSpan!=1){e=" rowspan='"+a.cells[m].rowSpan+"' "}break}}h.push("<column"+e+"><![CDATA["+c+"]]></column>")}h.push("</columns>")}h.push("</foot>");return h.join("\n")}function S(a,c){return(window.getComputedStyle?(window.getComputedStyle(a,null)[c]):(a.currentStyle?a.currentStyle[c]:null))||""}function I(o){if(!Y.rowsBuffer[o]){return""}var u=Y.render_row(o);if(u.style.display=="none"){return""}var s=Y.isTreeGrid()?' level="'+Y.getLevel(u.idd)+'"':"";var h="<row"+s+">";for(var m=0;m<Y._cCount;m++){if(((!Y._srClmn)||(Y._srClmn[m]))&&(!Y._hrrar[m]||(Y._fake&&m<Y._fake.hdrLabels.length))){var a=Y.cells(u.idd,m);if(E){var n=S(a.cell,"color");var c=S(a.cell,"backgroundColor");var e=S(a.cell,"font-weight")||S(a.cell,"fontWeight");var l=S(a.cell,"font-style")||S(a.cell,"fontStyle");var g=S(a.cell,"text-align")||S(a.cell,"textAlign");var r=S(a.cell,"font-family")||S(a.cell,"fontFamily");if(c=="transparent"||c=="rgba(0, 0, 0, 0)"){c="rgb(255,255,255)"}h+="<cell bgColor='"+c+"' textColor='"+n+"' bold='"+e+"' italic='"+l+"' align='"+g+"' font='"+r+"'>"}else{h+="<cell>"}h+="<![CDATA["+(a.getContent?a.getContent():a.getTitle())+"]]></cell>"}}return h+"</row>"}function K(){var a="</rows>";return a}var O=document.createElement("div");O.style.display="none";document.body.appendChild(O);var T="form_"+Y.uid();O.innerHTML='<form id="'+T+'" method="post" action="'+V+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>';document.getElementById(T).firstChild.value=encodeURIComponent(M(N).replace("\u2013","-")+W()+K());document.getElementById(T).submit();O.parentNode.removeChild(O);Y=null;if(U&&U.row.length){for(var F=0;F<U.row.length;F++){U.row[F].parentNode.className+=" rowselected";if(U.row.length==1){U.row[F].className+=" cellselected"}}}U=null};dhtmlXGridObject.prototype._serialiseExportConfig=function(v){function w(a){if(typeof(a)!=="string"){return a}a=a.replace(/&/g,"&amp;");a=a.replace(/"/g,"&quot;");a=a.replace(/'/g,"&apos;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a}var A="<head>";for(var y=0;y<this.hdr.rows[0].cells.length;y++){if(this._srClmn&&!this._srClmn[y]){continue}if(this._hrrar[y]&&(!this._fake||y>=this._fake.hdrLabels.length)){continue}var x=this.fldSort[y];if(x=="cus"){x=this._customSorts[y].toString();x=x.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")}var r=v[1][y];var u=((r[1]&&r[1]>1)?' rowspan="'+r[1]+'" ':"")+((r[0]&&r[0]>1)?' colspan="'+r[0]+'" ':"");A+="<column "+u+" width='"+this.getColWidth(y)+"' align='"+this.cellAlign[y]+"' type='"+this.cellType[y]+"' hidden='"+((this.isColumnHidden&&this.isColumnHidden(y))?"true":"false")+"' sort='"+(x||"na")+"' color='"+(this.columnColor[y]||"")+"'"+(this.columnIds[y]?(" id='"+this.columnIds[y]+"'"):"")+">";if(this._asCDATA){A+="<![CDATA["+this.getColumnLabel(y)+"]]>"}else{A+=this.getColumnLabel(y)}var s=this.combos[y]?this.getCombo(y):null;if(s){for(var C=0;C<s.keys.length;C++){A+="<option value='"+w(s.keys[C])+"'><![CDATA["+s.values[C]+"]]></option>"}}A+="</column>"}return A+="</head>"};if(window.eXcell_sub_row_grid){window.eXcell_sub_row_grid.prototype.getContent=function(){return""}}dhtmlXGridObject.prototype.toExcel=function(r,u,n,o,w){if(!document.getElementById("ifr")){var s=document.createElement("iframe");s.style.display="none";s.setAttribute("name","dhx_export_iframe");s.setAttribute("src","");s.setAttribute("id","dhx_export_iframe");document.body.appendChild(s)}var v=' target="dhx_export_iframe"';this.toPDF(r,u,n,o,w,v)};dhtmlXGridObject.prototype.filterBy=function(o,n,r){if(this.isTreeGrid()){return this.filterTreeBy(o,n,r)}if(this._f_rowsBuffer){if(!r){this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer));if(this._fake){this._fake.rowsBuffer=this.rowsBuffer}}}else{this._f_rowsBuffer=[].concat(this.rowsBuffer)}if(!this.rowsBuffer.length){return}var m=true;this.dma(true);if(typeof(o)=="object"){for(var l=0;l<n.length;l++){this._filterA(o[l],n[l])}}else{this._filterA(o,n)}this.dma(false);if(this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<(this.currentPage-1)){this.changePage(0)}this._reset_view();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._filterA=function(n,m){if(m==""){return}var l=true;if(typeof(m)=="function"){l=false}else{m=(m||"").toString().toLowerCase()}if(!this.rowsBuffer.length){return}for(var h=this.rowsBuffer.length-1;h>=0;h--){if(l?(this._get_cell_value(this.rowsBuffer[h],n).toString().toLowerCase().indexOf(m)==-1):(!m.call(this,this._get_cell_value(this.rowsBuffer[h],n),this.rowsBuffer[h].idd))){this.rowsBuffer.splice(h,1)}}};dhtmlXGridObject.prototype.getFilterElement=function(e){if(!this.filters){return}for(var g=0;g<this.filters.length;g++){if(this.filters[g][1]==e){return(this.filters[g][0].combo||this.filters[g][0])}}return null};dhtmlXGridObject.prototype.collectValues=function(D){var I=this.dhxevs.data.oncollectvalues;if(I){var c=true;for(var J in I){var H=I[J].call(this,D);if(H!==true){c=H||c}}if(c!==true){return c}}if(this.isTreeGrid()){return this.collectTreeValues(D)}this.dma(true);this._build_m_order();D=this._m_order?this._m_order[D]:D;var x={};var A=[];var E=this._f_rowsBuffer||this.rowsBuffer;for(var C=0;C<E.length;C++){var F=this._get_cell_value(E[C],D);if(F&&(!E[C]._childIndexes||E[C]._childIndexes[D]!=E[C]._childIndexes[D-1])){x[F]=true}}this.dma(false);var w=(this.combos[D]||(this._col_combos?this._col_combos[D]:false));for(var y in x){if(x[y]===true){if(w){if(w.get&&w.get(y)){y=w.get(y)}else{if(w.getOption&&w.getOption(y)){y=w.getOption(y).text}}}A.push(y)}}return A.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var c=0;c<this._c_order.length;c++){this._m_order[this._c_order[c]]=c}}};dhtmlXGridObject.prototype.filterByAll=function(){var s=[];var u=[];this._build_m_order();for(var r=0;r<this.filters.length;r++){var n=this._m_order?this._m_order[this.filters[r][1]]:this.filters[r][1];if(n>=this._cCount){continue}u.push(n);var a=this.filters[r][0].old_value=this.filters[r][0].value;if(this.filters[r][0]._filter){a=this.filters[r][0]._filter()}var o;if(typeof a!="function"&&(o=(this.combos[n]||(this._col_combos?this._col_combos[n]:false)))){if(o.values){n=o.values._dhx_find(a);a=(n==-1)?a:o.keys[n]}else{if(o.getOptionByLabel){a=(o.getOptionByLabel(a)?o.getOptionByLabel(a).value:a)}}}s.push(a)}if(!this.callEvent("onFilterStart",[u,s])){return}this.filterBy(u,s);if(this._cssEven){this._fixAlterCss()}this.callEvent("onFilterEnd",[this.filters]);if(this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length){this._f_rowsBuffer=null}};dhtmlXGridObject.prototype.makeFilter=function(m,o,r){if(!this.filters){this.filters=[]}if(typeof(m)!="object"){m=document.getElementById(m)}if(!m){return}var l=this;if(!m.style.width){m.style.width="90%"}if(m.tagName=="SELECT"){this.filters.push([m,o]);this._loadSelectOptins(m,o);m.onchange=function(){l.filterByAll()};if(_isIE){m.style.marginTop="1px"}this.attachEvent("onEditCell",function(a,c,e){this._build_m_order();if(a==2&&this.filters&&(this._m_order?(e==this._m_order[o]):(e==o))){this._loadSelectOptins(m,o)}return true})}else{if(m.tagName=="INPUT"){this.filters.push([m,o]);m.old_value=m.value="";m.onkeydown=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(m.value!=m.old_value){l.filterByAll();m.old_value=m.value}},500)}}else{if(m.tagName=="DIV"){this.filters.push([m,o]);m.style.padding="0px";m.style.margin="0px";if(!window.dhx_globalImgPath){window.dhx_globalImgPath=this.imgURL}var n=new dhtmlXCombo(m,"_filter","90%");n.filterSelfA=n.filterSelf;n.filterSelf=function(){if(this.getSelectedIndex()==0){this.setComboText("")}this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(false)};n.enableFilteringMode(true);m.combo=n;m.value="";this._loadComboOptins(m,o);n.attachEvent("onChange",function(){m.value=n.getSelectedValue();if(m.value===null){m.value=""}l.filterByAll()})}}}if(m.parentNode){m.parentNode.className+=" filter"}this._filters_ready()};dhtmlXGridObject.prototype.findCell=function(r,n,u,s){var s=s||(function(a,c){return c.toString().toLowerCase().indexOf(a)!=-1});if(s===true){s=function(a,c){return c.toString().toLowerCase()==a}}var v=new Array();r=r.toString().toLowerCase();if(typeof u!="number"){u=u?1:0}if(!this.rowsBuffer.length){return v}for(var w=(n||0);w<this._cCount;w++){if(this._h2){this._h2.forEachChild(0,function(a){if(u&&v.length==u){return v}if(s(r,this._get_cell_value(a.buff,w))){v.push([a.id,w])}},this)}else{for(var o=0;o<this.rowsBuffer.length;o++){if(s(r,this._get_cell_value(this.rowsBuffer[o],w))){v.push([this.rowsBuffer[o].idd,w]);if(u&&v.length==u){return v}}}}if(typeof(n)!="undefined"){return v}}return v};dhtmlXGridObject.prototype.makeSearch=function(l,m,h){if(typeof(l)!="object"){l=document.getElementById(l)}if(!l){return}var n=this;if(l.tagName=="INPUT"){l.onkeypress=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(l.value==""){return}var a=n.findCell(l.value,m,true,h);if(a.length){if(n._h2){n.openItem(a[0][0])}n.selectCell(n.getRowIndex(a[0][0]),(m||0))}},500)}}if(l.parentNode){l.parentNode.className+=" filter"}};dhtmlXGridObject.prototype._loadSelectOptins=function(o,u){var l=this.collectValues(u);var s=o.value;o.innerHTML="";o.options[0]=new Option("","");var c=this._filter_tr?this._filter_tr[u]:null;for(var r=0;r<l.length;r++){o.options[o.options.length]=new Option(c?c(l[r]):l[r],l[r])}o.value=s};dhtmlXGridObject.prototype.setSelectFilterLabel=function(g,e){if(!this._filter_tr){this._filter_tr=[]}this._filter_tr[g]=e};dhtmlXGridObject.prototype._loadComboOptins=function(o,c){if(!o.combo){return}var l=this.collectValues(c);o.combo.clearAll();var n=[["",""]];for(var r=0;r<l.length;r++){n.push([l[r],l[r]])}o.combo.addOption(n)};dhtmlXGridObject.prototype.refreshFilters=function(){if(!this.filters){return}for(var c=0;c<this.filters.length;c++){switch(this.filters[c][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[c]);break;case"div":this._loadComboOptins.apply(this,this.filters[c]);break}}};dhtmlXGridObject.prototype._filters_ready=function(g,e){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onRowCreated",function(a,c){if(this._f_rowsBuffer){for(var l=0;l<this._f_rowsBuffer.length;l++){if(this._f_rowsBuffer[l].idd==a){return this._f_rowsBuffer[l]=c}}}});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;if(!this.hdr.rows.length){this.filters=[]}});this.attachEvent("onSetSizes",this._filters_resize_combo);this.attachEvent("onResize",this._filters_resize_combo);this._filters_ready=function(){}};dhtmlXGridObject.prototype._filters_resize_combo=function(){if(!this.filters){return}for(var c=0;c<this.filters.length;c++){if(this.filters[c][0].combo!=null){this.filters[c][0].combo.setSize(Math.round(this.filters[c][0].offsetWidth*90/100))}}return true};dhtmlXGridObject.prototype._in_header_text_filter=function(g,e){g.innerHTML="<input type='text'>";g.onclick=g.onmousedown=function(a){(a||event).cancelBubble=true;return true};g.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(g.firstChild,e)};dhtmlXGridObject.prototype._in_header_text_filter_inc=function(g,e){g.innerHTML="<input type='text'>";g.onclick=g.onmousedown=function(a){(a||event).cancelBubble=true;return true};g.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(g.firstChild,e);g.firstChild._filter=function(){if(g.firstChild.value==""){return""}return function(a){return(a.toString().toLowerCase().indexOf(g.firstChild.value.toLowerCase())==0)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_select_filter=function(g,e){g.innerHTML="<select></select>";g.onclick=function(a){(a||event).cancelBubble=true;return false};this.makeFilter(g.firstChild,e)};dhtmlXGridObject.prototype._in_header_select_filter_strict=function(h,l){h.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>";h.onclick=function(a){(a||event).cancelBubble=true;return false};this.makeFilter(h.firstChild,l);var g=this.combos;h.firstChild._filter=function(){var a=h.firstChild.value;if(!a){return""}if(g[l]){a=g[l].keys[g[l].values._dhx_find(a)]}a=a.toLowerCase();return function(c){return(c.toString().toLowerCase()==a)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_combo_filter=function(g,e){g.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>";g.onselectstart=function(){return(event.cancelBubble=true)};g.onclick=g.onmousedown=function(a){(a||event).cancelBubble=true;return true};this.makeFilter(g.firstChild,e)};dhtmlXGridObject.prototype._search_common=function(g,e){g.innerHTML="<input type='text' style='width:90%; '>";g.onclick=g.onmousedown=function(a){(a||event).cancelBubble=true;return true};g.onselectstart=function(){return(event.cancelBubble=true)}};dhtmlXGridObject.prototype._in_header_text_search=function(h,l,g){this._search_common(h,l);this.makeSearch(h.firstChild,l)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(g,e){this._search_common(g,e);this.makeSearch(g.firstChild,e,true)};dhtmlXGridObject.prototype._in_header_numeric_filter=function(g,e){this._in_header_text_filter.call(this,g,e);g.firstChild._filter=function(){var r=this.value;var n;var a="==";var o=parseFloat(r.replace("=",""));var c=null;if(r){if(r.indexOf("..")!=-1){r=r.split("..");o=parseFloat(r[0]);c=parseFloat(r[1]);return function(h){if(h>=o&&h<=c){return true}return false}}n=r.match(/>=|<=|>|</);if(n){a=n[0];o=parseFloat(r.replace(a,""))}return Function("v"," if (v "+a+" "+o+" ) return true; return false;")}return""}};dhtmlXGridObject.prototype._in_header_master_checkbox=function(m,n,l){m.innerHTML=l[0]+"<input type='checkbox' />"+l[1];var c=this;m.getElementsByTagName("input")[0].onclick=function(e){c._build_m_order();var g=c._m_order?c._m_order[n]:n;var a=this.checked?1:0;c.forEachRowA(function(h){var r=this.cells(h,g);if(r.isCheckbox()){r.setValue(a);r.cell.wasChanged=true}this.callEvent("onEditCell",[1,h,g,a]);this.callEvent("onCheckbox",[h,g,a])});(e||event).cancelBubble=true}};dhtmlXGridObject.prototype._in_header_stat_total=function(n,c,l){var m=function(){var h=0;this._build_m_order();var a=this._m_order?this._m_order[c]:c;for(var e=0;e<this.rowsBuffer.length;e++){var g=parseFloat(this._get_cell_value(this.rowsBuffer[e],a));h+=isNaN(g)?0:g}return this._maskArr[a]?this._aplNF(h,a):(Math.round(h*100)/100)};this._stat_in_header(n,m,c,l,l)};dhtmlXGridObject.prototype._in_header_stat_multi_total=function(u,v,x){var y=x[1].split(":");x[1]="";for(var w=0;w<y.length;w++){y[w]=parseInt(y[w])}var s=function(){var a=0;for(var e=0;e<this.rowsBuffer.length;e++){var g=1;for(var h=0;h<y.length;h++){g*=parseFloat(this._get_cell_value(this.rowsBuffer[e],y[h]))}a+=isNaN(g)?0:g}return this._maskArr[v]?this._aplNF(a,v):(Math.round(a*100)/100)};var r=[];for(var c=0;c<y.length;c++){r[y[c]]=true}this._stat_in_header(u,s,r,x,x)};dhtmlXGridObject.prototype._in_header_stat_max=function(n,c,l){var m=function(){this._build_m_order();var e=this._m_order?this._m_order[c]:c;var a=-999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var g=0;g<this.rowsBuffer.length;g++){a=Math.max(a,parseFloat(this._get_cell_value(this.rowsBuffer[g],e)))}return this._maskArr[c]?this._aplNF(a,c):a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_min=function(n,c,l){var m=function(){this._build_m_order();var e=this._m_order?this._m_order[c]:c;var a=999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var g=0;g<this.rowsBuffer.length;g++){a=Math.min(a,parseFloat(this._get_cell_value(this.rowsBuffer[g],e)))}return this._maskArr[c]?this._aplNF(a,c):a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_average=function(n,c,l){var m=function(){this._build_m_order();var a=this._m_order?this._m_order[c]:c;var g=0;var r=0;if(this.getRowsNum()==0){return"&nbsp;"}for(var e=0;e<this.rowsBuffer.length;e++){var h=parseFloat(this._get_cell_value(this.rowsBuffer[e],a));if(!isNaN(h)){g+=h;r++}}return this._maskArr[c]?this._aplNF(g/r,c):(Math.round(g/r*100)/100)};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_count=function(n,c,l){var m=function(){return this.getRowsNum()};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._stat_in_header=function(u,s,o,c){var r=this;var n=function(){this.dma(true);u.innerHTML=(c[0]?c[0]:"")+s.call(this)+(c[1]?c[1]:"");this.dma(false);this.callEvent("onStatReady",[])};if(!this._stat_events){this._stat_events=[];this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var e=0;e<this._stat_events.length;e++){for(var a=0;a<4;a++){this.detachEvent(this._stat_events[e][a])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent("onGridReconstructed",n),this.attachEvent("onXLE",n),this.attachEvent("onFilterEnd",n),this.attachEvent("onEditCell",function(g,a,e){if(g==2&&(e==o||(o&&o[e]))){n.call(this)}return true})]);u.innerHTML=""};dhtmlXGridObject.prototype.loadCSVFile=function(g,e){this.load(g,e,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(c){this._csvAID=dhx4.s2b(c)};dhtmlXGridObject.prototype.enableCSVHeader=function(c){this._csvHdr=dhx4.s2b(c)};dhtmlXGridObject.prototype.setCSVDelimiter=function(c){this.csv.cell=c};dhtmlXGridObject.prototype._csvAID=true;dhtmlXGridObject.prototype.loadCSVString=function(c){this.parse(c,"csv")};dhtmlXGridObject.prototype.serializeToCSV=function(w){this.editStop();if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText||w){this._agetm="getTitle"}else{this._agetm="getValue"}}var o=[];if(this._csvHdr){for(var r=1;r<this.hdr.rows.length;r++){var v=[];for(var a=0;a<this._cCount;a++){if((!this._srClmn)||(this._srClmn[a])){v.push(this.getColumnLabel(a,r-1))}}o.push(this.csvParser.str(v,this.csv.cell,this.csv.row))}}var a=0;var s=this.rowsBuffer.length;for(a;a<s;a++){var u=this._serializeRowToCVS(null,a);if(u!=""){o.push(u)}}return this.csvParser.block(o,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(F,r,D,x){var u=new Array();if(!F){F=this.render_row(r);if(this._fake&&!this._fake.rowsAr[F.idd]){this._fake.render_row(r)}}if(!this._csvAID){u[u.length]=F.idd}D=D||0;x=x||this._cCount;var I=false;var C=D;while(F.childNodes[D]._cellIndex>C&&D){D--}for(var J=D;C<x;J++){if(!F.childNodes[J]){break}var E=F.childNodes[J]._cellIndex;if(((!this._srClmn)||(this._srClmn[E]))&&(!this._serialize_visible||!this._hrrar[E])){var A=F.childNodes[J];var y=this.cells(F.idd,E);while(C!=E){C++;u.push("");if(C>=x){break}}if(C>=x){break}C++;if(y.cell){zxVal=y[this._agetm]()}else{zxVal=""}if((this._chAttr)&&(y.wasChanged())){I=true}u[u.length]=((zxVal===null)?"":zxVal);if(this._ecspn&&A.colSpan&&A.colSpan>1){A=A.colSpan-1;for(var H=0;H<A;H++){u[u.length]="";C++}}}else{C++}}if((this._onlChAttr)&&(!I)){return""}return this.csvParser.str(u,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(c){if(window.clipboardData){window.clipboardData.setData("Text",c)}else{(new Clipboard()).copy(c)}};dhtmlXGridObject.prototype.fromClipBoard=function(){if(window.clipboardData){return window.clipboardData.getData("Text")}else{return(new Clipboard()).paste()}};dhtmlXGridObject.prototype.cellToClipboard=function(h,l){if((!h)||(!l&&l!==0)){if(!this.selectedRows[0]){return}h=this.selectedRows[0].idd;l=this.cell._cellIndex}var g=this.cells(h,l);this.toClipBoard(((g.getLabel?g.getLabel():g.getValue())||"").toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(h,l){if((!h)||(!l)){if(!this.selectedRows[0]){return}h=this.selectedRows[0].idd;l=this.cell._cellIndex}var g=this.cells(h,l);g[g.setImage?"setLabel":"setValue"](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(l){var h="";if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText){this._agetm="getTitle"}else{this._agetm="getValue"}}this._serialize_visible=!this._fake;if(l){h=this._serializeRowToCVS(this.getRowById(l))}else{var m=[];for(var n=0;n<this.selectedRows.length;n++){m[m.length]=this._serializeRowToCVS(this.selectedRows[n]);h=this.csvParser.block(m,this.csv.row)}}this._serialize_visible=false;this.toClipBoard(h)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(o){var n=this.fromClipBoard();if(!n){return}if(o){var r=this.getRowById(o)}else{var r=this.selectedRows[0]}if(!r){return}var m=this.csvParser;n=m.unblock(n,this.csv.cell,this.csv.row)[0];if(!this._csvAID){n.splice(0,1)}for(var s=0;s<n.length;s++){var u=this.cells3(r,s);u[u.setImage?"setLabel":"setValue"](n[s])}};dhtmlXGridObject.prototype.csvParser={block:function(e,g){return e.join(g)},unblock:function(n,m,o){var r=(n||"").split(o);for(var u=0;u<r.length;u++){r[u]=(r[u]||"").split(m)}var s=r.length-1;if(r[s].length==1&&r[s][0]==""){r.splice(s,1)}return r},str:function(l,g,h){return l.join(g)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('\\\\"',"g"),block:function(e,g){return e.join(g)},unblock:function(y,L,J){var F=[[]];var H=0;if(!y){return F}var x=/^[ ]*"/;var A=/"[ ]*$/;var I=new RegExp(".*"+J+".*$");var D=y.split(L);for(var E=0;E<D.length;E++){if(D[E].match(x)){var K=D[E].replace(x,"");while(!D[E].match(A)){E++;K+=D[E]}F[H].push(K.replace(A,"").replace(this._quote_esc,'"'))}else{if(D[E].match(I)){var C=D[E].indexOf(J);F[H].push(D[E].substr(0,C));H++;F[H]=[];D[E]=D[E].substr(C+1);E--}else{if(D[E]||E!=D.length-1){F[H].push(D[E])}}}}var w=F.length-1;if(w>0&&!F[w].length){F.splice(w,1)}return F},str:function(m,h,l){for(var n=0;n<m.length;n++){m[n]='"'+m[n].replace(this._quote,'\\"')+'"'}return m.join(h)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var g=this.fromClipBoard();if(!g){return}var h=this.csvParser.unblock(g,this.csv.cell,this.csv.row);for(var l=0;l<h.length;l++){if(h[l]){g=h[l];if(!g.length){continue}if(this._csvAID){this.addRow(this.getRowsNum()+2,g)}else{if(this.rowsAr[g[0]]){g[0]=this.uid()}this.addRow(g[0],g.slice(1))}}}};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var c=this.fromClipBoard();if(!c){return}this.loadCSVString(c)};dhtmlXGridObject.prototype.getXLS=function(l){if(!this.xslform){this.xslform=document.createElement("FORM");this.xslform.action=(l||"")+"xls.php";this.xslform.method="post";this.xslform.target=(_isIE?"_blank":"");document.body.appendChild(this.xslform);var r=document.createElement("INPUT");r.type="hidden";r.name="csv";this.xslform.appendChild(r);var s=document.createElement("INPUT");s.type="hidden";s.name="csv_header";this.xslform.appendChild(s)}var w=this.serializeToCSV();this.xslform.childNodes[0].value=w;var u=[];var o=this._cCount;for(var v=0;v<o;v++){u.push(this.getHeaderCol(v))}u=u.join(",");this.xslform.childNodes[1].value=u;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(Q,ab){var V="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }	\n  </style>";var S=null;if(this._fake){S=[].concat(this._hrrar);for(var U=0;U<this._fake._cCount;U++){this._hrrar[U]=null}}V+="<base  href='"+(document.location.protocol+"//"+document.location.hostname+document.location.pathname)+"'></base>";if(!this.parentGrid){V+=(Q||"")}V+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var T=Math.max(this.rowsBuffer.length,this.rowsCol.length);var W=this._cCount;var N=this._printWidth();V+='<tr class="header_row_1">';for(var U=0;U<W;U++){if(this._hrrar&&this._hrrar[U]){continue}var Z=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(U)]:U];var ac=(Z.colSpan||1);var J=(Z.rowSpan||1);for(var c=1;c<ac;c++){N[U]+=N[c]}V+='<td rowspan="'+J+'" width="'+N[U]+'%" style="background-color:lightgrey;" colspan="'+ac+'">'+this.getHeaderCol(U)+"</td>";U+=ac-1}V+="</tr>";for(var U=2;U<this.hdr.rows.length;U++){if(_isIE){V+="<tr style='background-color:lightgrey' class='header_row_"+U+"'>";var aa=this.hdr.rows[U].childNodes;for(var c=0;c<aa.length;c++){if(!this._hrrar||!this._hrrar[aa[c]._cellIndex]){V+=aa[c].outerHTML}}V+="</tr>"}else{V+="<tr class='header_row_"+U+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[U].innerHTML:"")+this.hdr.rows[U].innerHTML+"</tr>"}}for(var U=0;U<T;U++){V+="<tr>";if(this.rowsCol[U]&&this.rowsCol[U]._cntr){V+=this.rowsCol[U].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";continue}if(this.rowsCol[U]&&this.rowsCol[U].style.display=="none"){continue}var X;if(this.rowsCol[U]){X=this.rowsCol[U].idd}else{if(this.rowsBuffer[U]){X=this.rowsBuffer[U].idd}else{continue}}for(var c=0;c<W;c++){if(this._hrrar&&this._hrrar[c]){continue}if(this.rowsAr[X]&&this.rowsAr[X].tagName=="TR"){var M=this.cells(X,c);if(M._setState){var L=""}else{if(M.getContent){L=M.getContent()}else{if(M.getImage||M.combo){var L=M.cell.innerHTML}else{var L=M.getValue()}}}}else{var L=this._get_cell_value(this.rowsBuffer[U],c)}var K=this.columnColor[c]?"background-color:"+this.columnColor[c]+";":"";var I=this.cellAlign[c]?"text-align:"+this.cellAlign[c]+";":"";var P=M.getAttribute("colspan");V+='<td style="'+K+I+'" '+(P?'colSpan="'+P+'"':"")+">"+(L===""?"&nbsp;":L)+"</td>";if(P){c+=P-1}}V+="</tr>";if(this.rowsCol[U]&&this.rowsCol[U]._expanded){var Y=this.cells4(this.rowsCol[U]._expanded.ctrl);if(Y.getSubGrid){V+='<tr><td colspan="'+W+'">'+Y.getSubGrid().printView()+"</td></tr>"}else{V+='<tr><td colspan="'+W+'">'+this.rowsCol[U]._expanded.innerHTML+"</td></tr>"}}}if(this.ftr){for(var U=1;U<this.ftr.childNodes[0].rows.length;U++){V+="<tr style='background-color:lightgrey'>"+((this._fake)?this._fake.ftr.childNodes[0].rows[U].innerHTML:"")+this.ftr.childNodes[0].rows[U].innerHTML+"</tr>"}}V+="</table>";if(this.parentGrid){return V}V+=(ab||"");var O=window.open("","_blank");O.document.write(V);O.document.write("<script>window.onerror=function(){return true;}<\/script>");O.document.close();if(this._fake){this._hrrar=S}};dhtmlXGridObject.prototype._printWidth=function(){var s=[];var u=0;for(var v=0;v<this._cCount;v++){var r=this.getColWidth(v);s.push(r);u+=r}var n=[];var w=0;for(var v=0;v<s.length;v++){var o=Math.floor((s[v]/u)*100);w+=o;n.push(o)}n[n.length-1]+=100-w;return n};dhtmlXGridObject.prototype.enableBlockSelection=function(h){if(typeof this._bs_mode=="undefined"){var g=this;this.obj.onmousedown=function(a){if(g._bs_mode){g._OnSelectionStart((a||event),this)}return true};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){g._HideSelection();return true});this.attachEvent("onGridReconstructed",function(){g._HideSelection();return true});this.attachEvent("onFilterEnd",this._HideSelection)}if(h===false){this._bs_mode=false;return this._HideSelection()}else{this._bs_mode=true}if(!window.dhx4.isIPad){var l=this._clip_area=document.createElement("textarea");l.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;";l.onkeydown=function(a){a=a||event;if(a.keyCode==86&&(a.ctrlKey||a.metaKey)){g.pasteBlockFromClipboard()}};document.body.insertBefore(this._clip_area,document.body.firstChild);dhtmlxEvent(this.entBox,"click",function(){if(!g.editor&&g._clip_area){g._clip_area.select()}})}};dhtmlXGridObject.prototype.forceLabelSelection=function(c){this._strictText=dhx4.s2b(c)};dhtmlXGridObject.prototype._OnSelectionStart=function(v,u){var w=this;if(v.button==2){return}var s=v.srcElement||v.target;if(this.editor){if(s.tagName&&(s.tagName=="INPUT"||s.tagName=="TEXTAREA")){return}this.editStop()}w.setActive(true);var n=this.getPosition(this.obj);var r=v.clientX-n[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var o=v.clientY-n[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(r-4,o-4);if(s==this._selectionObj){this._HideSelection();this._startSelectionCell=null}else{while(s&&(!s.tagName||s.tagName.toLowerCase()!="td")){s=s.parentNode}this._startSelectionCell=s}if(this._startSelectionCell){if(!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex])){return this._startSelectionCell=null}}this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(a){if(w._blsTimer){window.clearTimeout(w._blsTimer)}};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[r,o];this._selectionObj.onmousemove=this.obj.onmousemove=function(a){a=a||v;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}w._OnSelectionMove(a)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(a){a=a||v;w._OnSelectionStop(a,this);return true};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return false}};dhtmlXGridObject.prototype._getCellByPos=function(h,l){h=h;if(this._fake){h+=this._fake.objBox.scrollWidth}l=l;var n=0;for(var m=0;m<this.obj.rows.length;m++){l-=this.obj.rows[m].offsetHeight;if(l<=0){n=this.obj.rows[m];break}}if(!n||!n.idd){return null}for(var m=0;m<this._cCount;m++){h-=this.getColWidth(m);if(h<=0){while(true){if(n._childIndexes&&n._childIndexes[m+1]==n._childIndexes[m]){n=n.previousSibling}else{return this.cells(n.idd,m).cell}}}}return null};dhtmlXGridObject.prototype._OnSelectionMove=function(F){var J=this;this._ShowSelection();var N=this.getPosition(this.obj);var C=F.clientX-N[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var D=F.clientY-N[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if((Math.abs(this._init_pos[0]-C)<5)&&(Math.abs(this._init_pos[1]-D)<5)){return this._HideSelection()}var L=this._endSelectionCell;if(this._startSelectionCell==null){this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(F.srcElement||F.target,"TD")}else{if(F.srcElement||F.target){if((F.srcElement||F.target).className=="dhtmlxGrid_selection"){this._endSelectionCell=(this._getCellByPos(C,D)||this._endSelectionCell)}else{var K=this.getFirstParentOfType(F.srcElement||F.target,"TD");if(K.parentNode.idd){this._endSelectionCell=K}}}}if(this._endSelectionCell){if(!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])){this._endSelectionCell=L}}var E=this.objBox.scrollLeft+this.objBox.clientWidth;var I=this.objBox.scrollTop+this.objBox.clientHeight;var y=this.objBox.scrollLeft;var A=this.objBox.scrollTop;var H=false;if(this._blsTimer){window.clearTimeout(this._blsTimer)}if(C+20>=E){this.objBox.scrollLeft=this.objBox.scrollLeft+20;H=true}else{if(C-20<y){this.objBox.scrollLeft=this.objBox.scrollLeft-20;H=true}}if(D+20>=I&&!this._realfake){this.objBox.scrollTop=this.objBox.scrollTop+20;H=true}else{if(D-20<A&&!this._realfake){this.objBox.scrollTop=this.objBox.scrollTop-20;H=true}}this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);if(H){var M=F.clientX;var a=F.clientY;this._blsTimer=window.setTimeout(function(){J._OnSelectionMove({clientX:M,clientY:a})},100)}};dhtmlXGridObject.prototype._OnSelectionStop=function(l){var g=this;if(this._blsTimer){window.clearTimeout(this._blsTimer)}this.obj.onmousedown=function(a){if(g._bs_mode){g._OnSelectionStart((a||l),this)}return true};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2){this._HideSelection()}else{var h=this.getFirstParentOfType(l.srcElement||l.target,"TD");if((!h)||(!h.parentNode.idd)){h=this._endSelectionCell}while(h&&(!h.tagName||h.tagName.toLowerCase()!="td")){h=h.parentNode}if(!h){return this._HideSelection()}this._stopSelectionCell=h;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(M,C){if(M.parentNode.grid!=C.parentNode.grid){return this._selectionArea}var x={};x.LeftTopCol=M._cellIndex;x.LeftTopRow=this.getRowIndex(M.parentNode.idd);x.RightBottomCol=C._cellIndex;x.RightBottomRow=this.getRowIndex(C.parentNode.idd);var F=M.offsetWidth;var H=M.offsetHeight;M=this.getPosition(M,this.obj);var L=C.offsetWidth;var A=C.offsetHeight;C=this.getPosition(C,this.obj);if(M[0]<C[0]){var E=M[0];var D=C[0]+L}else{var y=x.RightBottomCol;x.RightBottomCol=x.LeftTopCol;x.LeftTopCol=y;var E=C[0];var D=M[0]+F}if(M[1]<C[1]){var N=M[1];var J=C[1]+A}else{var y=x.RightBottomRow;x.RightBottomRow=x.LeftTopRow;x.LeftTopRow=y;var N=C[1];var J=M[1]+H}var K=D-E;var I=J-N;this._selectionObj.style.left=E+"px";this._selectionObj.style.top=N+"px";this._selectionObj.style.width=K+"px";this._selectionObj.style.height=I+"px";return x};dhtmlXGridObject.prototype._CreateSelection=function(g,h){if(this._selectionObj==null){var l=document.createElement("div");l.style.position="absolute";l.style.display="none";l.className="dhtmlxGrid_selection";this._selectionObj=l;this._selectionObj.onmousedown=function(a){a=a||event;if(a.button==2||(_isMacOS&&a.ctrlKey)){return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",a])}};this._selectionObj.oncontextmenu=function(a){(a||event).cancelBubble=true;return false};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=g+"px";this._selectionObj.style.top=h+"px";this._selectionObj.startX=g;this._selectionObj.startY=h};dhtmlXGridObject.prototype._ShowSelection=function(){if(this._selectionObj){this._selectionObj.style.display=""}};dhtmlXGridObject.prototype._HideSelection=function(){if(this._selectionObj){this._selectionObj.style.display="none"}this._selectionArea=null;if(this._clip_area){this._clip_area.value="";this._clip_area.blur()}};dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(!this._clip_area){return}if(this._selectionArea!=null){var h=new Array();if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText){this._agetm="getTitle"}else{this._agetm="getValue"}}this._serialize_visible=true;for(var g=this._selectionArea.LeftTopRow;g<=this._selectionArea.RightBottomRow;g++){var l=this._serializeRowToCVS(this.rowsBuffer[g],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);if(!this._csvAID){h[h.length]=l.substr(l.indexOf(this.csv.cell)+1)}else{h[h.length]=l}}h=h.join(this._CSVRowDelimiter);this._clip_area.value=h;this._clip_area.select();this._serialize_visible=false}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(!this._clip_area){return}this._clip_area.select();var c=this;window.setTimeout(function(){c._pasteBlockFromClipboard();c=null},1)};dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var y=this._clip_area.value;if(!y){return}if(this._selectionArea!=null){var I=this._selectionArea.LeftTopRow;var F=this._selectionArea.LeftTopCol}else{if(this.cell!=null&&!this.editor){var I=this.getRowIndex(this.cell.parentNode.idd);var F=this.cell._cellIndex}else{return false}}y=this.csvParser.unblock(y,this.csv.cell,this.csv.row);var n=I+y.length;var K=F+y[0].length;if(K>this._cCount){K=this._cCount}var C=0;for(var l=I;l<n;l++){var H=this.render_row(l);if(H==-1){continue}var D=0;for(var A=F;A<K;A++){if(this._hrrar[A]&&!this._fake){K=Math.min(K+1,this._cCount);continue}var L=this.cells3(H,A);if(L.isDisabled()){D++;continue}if(this._onEditUndoRedo){this._onEditUndoRedo(2,H.idd,A,y[C][D],L.getValue())}if(L.combo){var J=L.combo.values;for(var E=0;E<J.length;E++){if(y[C][D]==J[E]){L.setValue(L.combo.keys[E]);J=null;break}}if(J!=null&&L.editable){L.setValue(y[C][D++])}else{D++}}else{L[L.setImage?"setLabel":"setValue"](y[C][D++])}L.cell.wasChanged=true}this.callEvent("onRowPaste",[H.idd]);C++}};dhtmlXGridObject.prototype.getSelectedBlock=function(){if(this._selectionArea){return this._selectionArea}else{if(this.getSelectedRowId()!==null){return{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}}else{return null}}};dhtmlXGridObject.prototype.enableSmartRendering=function(h,l,g){if(arguments.length>2){if(l&&!this.rowsBuffer[l-1]){this.rowsBuffer[l-1]=0}l=g}this._srnd=dhx4.s2b(h);this._srdh=this._srdh||20;this._dpref=l||0};dhtmlXGridObject.prototype.enablePreRendering=function(c){this._srnd_pr=parseInt(c||50)};dhtmlXGridObject.prototype.forceFullLoading=function(l,m){for(var o=0;o<this.rowsBuffer.length;o++){if(!this.rowsBuffer[o]){var n=l||(this.rowsBuffer.length-o);if(this.callEvent("onDynXLS",[o,n])){var r=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+o+"&count="+n,function(){window.setTimeout(function(){r.forceFullLoading(l,m)},100)},this._data_type)}return}}if(m){m.call(this)}};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(c){this._srdh=parseInt(c)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};dhtmlXGridObject.prototype._add_filler=function(n,r,w,u){if(!r){return null}var o="__filler__";var s=this._prepareRow(o);s.firstChild.style.width="1px";s.firstChild.style.borderWidth=s.firstChild.style.padding=s.firstChild.style.margin="0px";for(var v=1;v<s.childNodes.length;v++){s.childNodes[v].style.display="none"}s.firstChild.style.height=r*this._srdh+"px";w=w||this.rowsCol[n];if(w&&w.nextSibling){w.parentNode.insertBefore(s,w.nextSibling)}else{if(_isKHTML){this.obj.appendChild(s)}else{this.obj.rows[0].parentNode.appendChild(s)}}this.callEvent("onAddFiller",[n,r,s,w,u]);return[n,r,s]};dhtmlXGridObject.prototype._update_srnd_view=function(){var r=Math.floor(this.objBox.scrollTop/this._srdh);var w=r+this._get_view_size();if(this.multiLine){var n=this.objBox.scrollTop;r=0;while(n>0){n-=this.rowsCol[r]?this.rowsCol[r].offsetHeight:this._srdh;r++}w=r+this._get_view_size();if(r>0){r--}}w+=(this._srnd_pr||0);if(w>this.rowsBuffer.length){w=this.rowsBuffer.length}for(var u=r;u<w;u++){if(!this.rowsCol[u]){var s=this._add_from_buffer(u);if(s==-1){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[w-1]){var v=this._dpref?this._dpref:(w-u);var o=Math.max(0,Math.min(u,w-this._dpref));this._current_load=[o,w-o]}else{this._current_load=[u,(this._dpref?this._dpref:(w-u))]}if(this.callEvent("onDynXLS",this._current_load)){this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}}return}else{if(this._tgle){this._updateLine(this._h2.get[this.rowsBuffer[u].idd],this.rowsBuffer[u]);this._updateParentLine(this._h2.get[this.rowsBuffer[u].idd],this.rowsBuffer[u])}if(u&&u==(this._realfake?this._fake:this)["_r_select"]){this.selectCell(u,this.cell?this.cell._cellIndex:0,true)}}}}if(this._fake&&!this._realfake&&this.multiLine){this._fake.objBox.scrollTop=this.objBox.scrollTop}};dhtmlXGridObject.prototype._add_from_buffer=function(r){var o=this.render_row(r);if(o==-1){return -1}if(o._attrs.selected||o._attrs.select){this.selectRow(o,false,true);o._attrs.selected=o._attrs.select=null}if(!this._cssSP){if(this._cssEven&&r%2==0){o.className=this._cssEven+((o.className.indexOf("rowselected")!=-1)?" rowselected ":" ")+(o._css||"")}else{if(this._cssUnEven&&r%2==1){o.className=this._cssUnEven+((o.className.indexOf("rowselected")!=-1)?" rowselected ":" ")+(o._css||"")}}}else{if(this._h2){var n=this._h2.get[o.idd];o.className+=" "+((n.level%2)?(this._cssUnEven+" "+this._cssUnEven):(this._cssEven+" "+this._cssEven))+"_"+n.level+(this.rowsAr[n.id]._css||"")}}for(var u=0;u<this._fillers.length;u++){var s=this._fillers[u];if(s&&s[0]<=r&&(s[0]+s[1])>r){var m=r-s[0];if(m==0){this._insert_before(r,o,s[2]);this._update_fillers(u,-1,1)}else{if(m==s[1]-1){this._insert_after(r,o,s[2]);this._update_fillers(u,-1,0)}else{this._fillers.push(this._add_filler(r+1,s[1]-m-1,s[2],1));this._insert_after(r,o,s[2]);this._update_fillers(u,-s[1]+m,0)}}return}}};dhtmlXGridObject.prototype._update_fillers=function(m,h,l){var n=this._fillers[m];n[1]=n[1]+h;n[0]=n[0]+l;if(!n[1]){this.callEvent("onRemoveFiller",[n[2]]);n[2].parentNode.removeChild(n[2]);this._fillers.splice(m,1)}else{n[2].firstChild.style.height=parseFloat(n[2].firstChild.style.height)+h*this._srdh+"px";this.callEvent("onUpdateFiller",[n[2]])}};dhtmlXGridObject.prototype._insert_before=function(l,h,g){g.parentNode.insertBefore(h,g);this.rowsCol[l]=h;this.callEvent("onRowInserted",[h,null,g,"before"])};dhtmlXGridObject.prototype._insert_after=function(l,h,g){if(g.nextSibling){g.parentNode.insertBefore(h,g.nextSibling)}else{g.parentNode.appendChild(h)}this.rowsCol[l]=h;this.callEvent("onRowInserted",[h,null,g,"after"])};if(typeof(window.dhtmlxValidation)!="undefined"){dhtmlxValidation.trackInput=function(m,l,n,h){dhtmlxEvent(m,"keyup",function(a){if(dhtmlxValidation._timer){window.clearTimeout(dhtmlxValidation._timer);dhtmlxValidation._timer=null}dhtmlxValidation._timer=window.setTimeout(function(){if(!dhtmlxValidation.checkInput(m,l)){if(!n||n(m,m.value,l)){m.className+=" dhtmlx_live_validation_error"}}else{m.className=m.className.replace(/[ ]*dhtmlx_live_validation_error/g,"");if(h){h(m,m.value,l)}}},250)})};dhtmlxValidation.checkInput=function(e,g){return dhtmlxValidation.checkValue(e.value,g)};dhtmlxValidation.checkValue=function(m,l){if(typeof l=="string"){l=l.split(",")}var h=true;for(var n=0;n<l.length;n++){if(!this["is"+l[n]]){alert("Incorrect validation rule: "+l[n])}else{h=h&&this["is"+l[n]](m)}}return h}}dhtmlXGridObject.prototype.enableValidation=function(g,e){g=dhx4.s2b(g);if(g){this._validators={data:[]}}else{this._validators=false}if(arguments.length>1){this._validators._live=e}if(!this._validators._event){this._validators._event=this.attachEvent("onEditCell",this.validationEvent)}};dhtmlXGridObject.prototype.setColValidators=function(c){if(!this._validators){this.enableValidation(true)}if(typeof c=="string"){c=c.split(this.delim)}this._validators.data=c};dhtmlXGridObject.prototype.validationEvent=function(v,A,x,y,s){var r=this._validators;if(!r){return true}var u=(r.data[x]||this.cells(A,x).getAttribute("validate"))||"";if(v==1&&u){var w=this.editor||(this._fake||{}).editor;if(!w){return true}w.cell.className=w.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(r._live){var C=this;dhtmlxValidation.trackInput(w.getInput(),u,function(e,c,a){return C.callEvent("onLiveValidationError",[A,x,c,e,a])},function(e,c,a){return C.callEvent("onLiveValidationCorrect",[A,x,c,e,a])})}}if(v==2){this.validateCell(A,x,u,y)}return true};dhtmlXGridObject.prototype.validateCell=function(n,s,r,u){r=r||(this._validators.data[s]||this.cells(n,s).getAttribute("validate"));u=u||this.cells(n,s).getValue();if(!r){return}var w=this.cells(n,s).cell;var o=true;if(typeof r=="string"){r=r.split(this.delim)}for(var v=0;v<r.length;v++){if(!dhtmlxValidation.checkValue(u,r[v])){if(this.callEvent("onValidationError",[n,s,u,r[v]])){w.className+=" dhtmlx_validation_error"}o=false}}if(o){this.callEvent("onValidationCorrect",[n,s,u,r]);w.className=w.className.replace(/[ ]*dhtmlx_validation_error/g,"")}return o};function eXcell_stree(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_trees){return}this._sub=this.grid._sub_trees[c._cellIndex];if(!this._sub){return}this._sub=this._sub[0]}this.getValue=function(){return this.cell._val};this.setValue=function(a){this.cell._val=a;a=this._sub.getItemText(this.cell._val);this.setCValue((a||"&nbsp;"),a)};this.edit=function(){this._sub.parentObject.style.display="block";var a=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=a[1]+"px";this._sub.parentObject.style.left=a[0]+"px";this._sub.parentObject.style.position="absolute";var g=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=g};this.detach=function(){this._sub.parentObject.style.display="none";if(this.grid._sub_id!=null){var a=this.cell._val;this.setValue(this._sub.getSelectedItemId());this.grid._sub_id=null;return this.cell._val!=a}}}eXcell_stree.prototype=new eXcell;dhtmlXGridObject.prototype.setSubTree=function(g,l){if(!this._sub_trees){this._sub_trees=[]}this._sub_trees[l]=[g];g.parentObject.style.display="none";var h=this;g.parentObject.onclick=function(a){(a||window.event).cancelBubble=true;return false};g.ev_onDblClick=null;g.attachEvent("onDblClick",function(a){h._sub_id=a;h.editStop();return true});g._chRRS=true};function eXcell_link(c){this.cell=c;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return true};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var a=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(a?("^"+a):"")}else{return""}};this.setValue=function(a){if((typeof(a)!="number")&&(!a||a.toString()._dhx_trim()=="")){this.setCValue("&nbsp;",g);return(this.cell._clearCell=true)}var g=a.split("^");if(g.length==1){g[1]=""}else{if(g.length>1){g[1]="href='"+g[1]+"'";if(g.length==3){g[1]+=" target='"+g[2]+"'"}else{g[1]+=" target='_blank'"}}}this.setCValue("<a "+g[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+g[0]+"</a>",g)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var c=this.cell.firstChild;return((c&&c.tagName)?c.getAttribute("href"):"")};eXcell_link.prototype.getContent=function(){var c=this.cell.firstChild;return((c&&c.tagName)?c.innerHTML:"")};function eXcell_grid(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_grids){return}this._sub=this.grid._sub_grids[c._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return this.cell.val};this.setValue=function(a){this.cell.val=a;if(this._sub.getRowById(a)){a=this._sub.cells(a,this._sindex);if(a){a=a.getValue()}else{a=""}}this.setCValue((a||"&nbsp;"),a)};this.edit=function(){this.val=this.cell.val;this._sub.entBox.style.display="block";var a=this.grid.getPosition(this.cell);this._sub.entBox.style.top=a[1]+"px";this._sub.entBox.style.left=a[0]+"px";this._sub.entBox.style.position="absolute";this._sub.setSizes();var g=this.grid.editStop;this.grid.editStop=function(){};if(this._sub.getRowById(this.cell.val)){this._sub.setSelectedRow(this.cell.val)}this._sub.setActive(true);this.grid.editStop=g};this.detach=function(){var a=this.cell.val;this._sub.entBox.style.display="none";if(this._sub.getSelectedId()===null){return false}this.setValue(this._sub.getSelectedId());this.grid.setActive(true);return this.cell.val!=a}}eXcell_grid.prototype=new eXcell;dhtmlXGridObject.prototype.setSubGrid=function(n,h,l){if(!this._sub_grids){this._sub_grids=[]}this._sub_grids[h]=[n,l];n.entBox.style.display="none";var m=this;n.entBox.onclick=function(a){(a||window.event).cancelBubble=true;return false};n.attachEvent("onRowSelect",function(a){m.editStop();return true});n._chRRS=false};function eXcell_dhxCalendar(h){if(h){this.cell=h;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var m=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent("onDhxCalendarCreated",[m]);var n=this.grid;m.attachEvent("onClick",function(){this._last_operation_calendar=true;window.setTimeout(function(){n.editStop()},1);return true});var l=function(a){(a||event).cancelBubble=true};dhtmlxEvent(m.base,"click",l);m=null}}}eXcell_dhxCalendar.prototype=new eXcell;eXcell_dhxCalendar.prototype.edit=function(){var g=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(false,false);this.grid._grid_calendarA.setPosition(g[0],g[1]+this.cell.offsetHeight);this.grid._grid_calendarA._last_operation_calendar=false;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=true;this.val=this.cell.val;this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat((this.grid._dtmask||"%d/%m/%Y"));this.grid._grid_calendarA.setDate(this.val||(new Date()));this.grid._grid_calendarA.draw=e};eXcell_dhxCalendar.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendar.prototype.getValue=function(){if(this.cell._clearCell){return""}if(this.grid._dtmask_inc&&this.cell.val){return this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendar.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){var h=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"));var l=this.grid._grid_calendarA.getDate();this.cell.val=new Date(l);this.setCValue(h,l);this.cell._clearCell=!h;var g=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(g||"").valueOf())}return false};eXcell_dhxCalendar.prototype.setValue=function(c){if(c&&typeof c=="object"){this.cell.val=c;this.cell._clearCell=false;this.setCValue(this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),c).toString(),this.cell.val);return}if(!c||c.toString()._dhx_trim()==""){c="&nbsp";this.cell._clearCell=true;this.cell.val=""}else{this.cell._clearCell=false;this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate((this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y"),c.toString(),null,true));if(this.grid._dtmask_inc){c=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),this.cell.val)}}if((this.cell.val=="NaN")||(this.cell.val=="Invalid Date")){this.cell._clearCell=true;this.cell.val=new Date();this.setCValue("&nbsp;",0)}else{this.setCValue((c||"").toString(),this.cell.val)}};function eXcell_dhxCalendarA(h){if(h){this.cell=h;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var m=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent("onDhxCalendarCreated",[m]);var n=this.grid;m.attachEvent("onClick",function(){this._last_operation_calendar=true;window.setTimeout(function(){n.editStop()},1);return true});var l=function(a){(a||event).cancelBubble=true};dhtmlxEvent(m.base,"click",l)}}}eXcell_dhxCalendarA.prototype=new eXcell;eXcell_dhxCalendarA.prototype.edit=function(){var g=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(false,false);this.grid._grid_calendarA.setPosition(g[0]*1+this.cell.offsetWidth,g[1]*1);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=false;this.cell._cediton=true;this.val=this.cell.val;this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat((this.grid._dtmask||"%d/%m/%Y"));this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=e;this.cell.atag=((!this.grid.multiLine)&&(_isKHTML||_isMacOS||_isFF))?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=(this.cell.offsetHeight-4)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(a){(a||event).cancelBubble=true};this.obj.onmousedown=function(a){(a||event).cancelBubble=true};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);if(window.dhx4.isIE){this.obj.style.overflow="visible";if((this.grid.multiLine)&&(this.obj.offsetHeight>=18)&&(this.obj.offsetHeight<40)){this.obj.style.height="36px";this.obj.style.overflow="scroll"}}this.obj.onselectstart=function(a){if(!a){a=event}a.cancelBubble=true;return true};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendarA.prototype.getValue=function(){if(this.cell._clearCell){return""}if(this.grid._dtmask_inc&&this.cell.val){return this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendarA.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=false;var h=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y");var l=this.grid._grid_calendarA.getDate();this.cell.val=new Date(l);this.setCValue(h,l);this.cell._clearCell=!h;var g=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(g||"").valueOf())}this.setValue(this.obj.value);var g=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(g||"").valueOf())};eXcell_dhxCalendarA.prototype.setValue=function(c){if(c&&typeof c=="object"){this.cell.val=c;this.cell._clearCell=false;this.setCValue(this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),c).toString(),this.cell.val);return}if(!c||c.toString()._dhx_trim()==""){c="&nbsp";this.cell._clearCell=true;this.cell.val=""}else{this.cell._clearCell=false;this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate((this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y"),c.toString(),null,true));if(this.grid._dtmask_inc){c=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),this.cell.val)}}if((this.cell.val=="NaN")||(this.cell.val=="Invalid Date")){this.cell.val=new Date();this.cell._clearCell=true;this.setCValue("&nbsp;",0)}else{this.setCValue((c||"").toString(),this.cell.val)}};function eXcell_cntr(e){this.cell=e;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=true;if(this.grid._h2){this.grid.attachEvent("onOpenEn",function(a){this.resetCounter(e._cellIndex)})}var g=function(){var a=this;window.setTimeout(function(){if(!a.resetCounter){return}if(a._fake&&!a._realfake&&e._cellIndex<a._fake._cCount){a._fake.resetCounter(e._cellIndex)}else{a.resetCounter(e._cellIndex)}},1);return true};this.grid.attachEvent("onBeforeSorting",g);this.grid.attachEvent("onFilterEnd",g)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(a){this.cell.style.paddingRight="2px";var c=this.cell;window.setTimeout(function(){if(!c.parentNode){return}var l=c.parentNode.rowIndex;if(c.parentNode.grid.currentPage||l<0||c.parentNode.grid._srnd){l=c.parentNode.grid.rowsBuffer._dhx_find(c.parentNode)+1}if(l<=0){return}c.innerHTML=l;if(c.parentNode.grid._fake&&c._cellIndex<c.parentNode.grid._fake._cCount&&c.parentNode.grid._fake.rowsAr[c.parentNode.idd]){c.parentNode.grid._fake.cells(c.parentNode.idd,c._cellIndex).setCValue(l)}c=null},100)}}dhtmlXGridObject.prototype.resetCounter=function(g){if(this._fake&&!this._realfake&&g<this._fake._cCount){this._fake.resetCounter(g,this.currentPage)}var e=arguments[0]||0;if(this.currentPage){e=(this.currentPage-1)*this.rowsBufferOutSize}for(e=0;e<this.rowsBuffer.length;e++){if(this.rowsBuffer[e]&&this.rowsBuffer[e].tagName=="TR"&&this.rowsAr[this.rowsBuffer[e].idd]){this.rowsAr[this.rowsBuffer[e].idd].childNodes[g].innerHTML=e+1}}};eXcell_cntr.prototype=new eXcell;function eXcell_acheck(e){try{this.cell=e;this.grid=this.cell.parentNode.grid;this.cell.obj=this}catch(g){}this.changeState=function(){if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("<checkbox state='false'>")}else{this.setValue("<checkbox state='true'>")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.getValue=function(){try{return this.cell.chstate.toString()}catch(a){return null}};this.isCheckbox=function(){return true};this.isChecked=function(){if(this.getValue()=="1"){return true}else{return false}};this.setChecked=function(a){this.setValue(a.toString())};this.detach=function(){return this.val!=this.getValue()};this.drawCurrentState=function(){if(this.cell.chstate==1){return"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>"}else{return"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}}eXcell_acheck.prototype=new eXcell;eXcell_acheck.prototype.setValue=function(g){g=(g||"").toString();if(g.indexOf("1")!=-1||g.indexOf("true")!=-1){g="1";this.cell.chstate="1"}else{g="0";this.cell.chstate="0"}var e=this;this.setCValue(this.drawCurrentState(),this.cell.chstate)};function eXcell_context(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_context){return}this._sub=this.grid._sub_context[c._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(a){this.cell._val=a;var g=this._sub.itemPull[this._sub.idPrefix+this.cell._val];a=g?g.title:a;this.setCValue((a||"&nbsp;"),a)};this.edit=function(){var a=this.grid.getPosition(this.cell);this._sub.showContextMenu(a[0]+this.cell.offsetWidth,a[1]);var g=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=g};this.detach=function(){if(this.grid._sub_id!=null){var a=this.cell._val;this.setValue(this.grid._sub_id);this.grid._sub_id=null;return this.cell._val!=a}this._sub.hideContextMenu()}}eXcell_context.prototype=new eXcell;dhtmlXGridObject.prototype.setSubContext=function(h,n,l){var m=this;h.attachEvent("onClick",function(a,c){m._sub_id=a;m.editStop();h.hideContextMenu();return true});if(!this._sub_context){this._sub_context=[]}this._sub_context[n]=[h,l];h.hideContextMenu()};function dhtmlXGridFromTable(obj,init){if(typeof(obj)!="object"){obj=document.getElementById(obj)}var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?(obj.offsetWidth+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["width"]:(obj.currentStyle?obj.currentStyle.width:0)));w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?(obj.offsetHeight+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["height"]:(obj.currentStyle?obj.currentStyle.height:0)));w.className=obj.className;obj.className="";if(obj.id){w.id=obj.id}var mr=obj;var drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||("name_"+(new Date()).valueOf());var windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit");var acs2=mr.getAttribute("oninit");if(acs){eval(acs)}windowf.setImagePath(windowf.imgURL||(mr.getAttribute("imgpath")||mr.getAttribute("image_path")||""));var skin=mr.getAttribute("skin");if(skin){windowf.setSkin(skin)}if(init){init(windowf)}var hrow=mr.rows[0];var za="";var zb="";var zc="";var zd="";var ze="";for(var i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null)["width"]:(hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0));zb+=(zb?",":"")+(width=="*"?width:parseInt(width));zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left");zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed");ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");if(f_a){if(hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")!=-1){windowf._dtmask=f_a}else{windowf.setNumberFormat(f_a,i)}}}windowf.setHeader(za);windowf.setInitWidths(zb);windowf.setColAlign(zc);windowf.setColTypes(zd);windowf.setColSorting(ze);if(obj.getAttribute("gridHeight")=="auto"){windowf.enableAutoHeigth(true)}if(obj.getAttribute("multiline")){windowf.enableMultiline(true)}var lmn=mr.getAttribute("lightnavigation");if(lmn){windowf.enableLightMouseNavigation(lmn)}var evr=mr.getAttribute("evenrow");var uevr=mr.getAttribute("unevenrow");if(evr||uevr){windowf.enableAlterCss(evr,uevr)}if(drag){windowf.enableDragAndDrop(true)}windowf.init();if(obj.getAttribute("split")){windowf.splitAt(obj.getAttribute("split"))}windowf._process_inner_html(mr,1);if(acs2){eval(acs2)}if(obj.parentNode&&obj.parentNode.removeChild){obj.parentNode.removeChild(obj)}return windowf}dhtmlXGridObject.prototype._process_html=function(l){if(l.tagName&&l.tagName=="TABLE"){return this._process_inner_html(l,0)}var g=document.createElement("DIV");g.innerHTML=l.xmlDoc.responseText;var h=g.getElementsByTagName("TABLE")[0];this._process_inner_html(h,0)};dhtmlXGridObject.prototype._process_inner_html=function(o,m){var r=o.rows.length;for(var l=m;l<r;l++){var n=o.rows[l].getAttribute("id")||l;this.rowsBuffer.push({idd:n,data:o.rows[l],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};dhtmlXGridObject.prototype._process_html_row=function(y,u){var o=u.getElementsByTagName("TD");var x=[];y._attrs=this._xml_attrs(u);for(var v=0;v<o.length;v++){var s=o[v];var r=s.getAttribute("type");if(y.childNodes[v]){if(r){y.childNodes[v]._cellType=r}y.childNodes[v]._attrs=this._xml_attrs(o[v])}if(s.firstChild){x.push(s.innerHTML)}else{x.push("")}if(s.colSpan>1){y.childNodes[v]._attrs.colspan=s.colSpan;for(var w=1;w<s.colSpan;w++){x.push("")}}}for(v<o.length;v<y.childNodes.length;v++){y.childNodes[v]._attrs={}}this._fillRow(y,(this._c_order?this._swapColumns(x):x));return y};dhtmlXGridObject.prototype._get_html_data=function(g,e){g=g.firstChild;while(true){if(!g){return""}if(g.tagName=="TD"){e--}if(e<0){break}g=g.nextSibling}return(g.firstChild?g.firstChild.data:"")};dhtmlxEvent(window,"load",function(){var a=document.getElementsByTagName("table");for(var g=0;g<a.length;g++){if(a[g].className=="dhtmlxGrid"){dhtmlXGridFromTable(a[g])}}});dhtmlXGridObject.prototype._process_xmlA=function(r){this._parsing=true;var o=dhx4.ajax.xmltop(this.xml.top,r);this._parseHead(o);var s=dhx4.ajax.xpath(this.xml.row,o);var u=parseInt(o.getAttribute("pos")||0);var v=parseInt(o.getAttribute("total_count")||0);if(v&&!this.rowsBuffer[v-1]){this.rowsBuffer[v-1]=null}if(this.isTreeGrid()){this._get_xml_data=this._get_xml_dataA;this._process_xml_row=this._process_xml_rowA;return this._process_tree_xml(r)}for(var w=0;w<s.length;w++){if(this.rowsBuffer[w+u]){continue}var n=s[w].getAttribute("id")||this.uid();this.rowsBuffer[w+u]={idd:n,data:s[w],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA};this.rowsAr[n]=s[w]}this.render_dataset();this._parsing=false};dhtmlXGridObject.prototype._process_xmlB=function(r){this._parsing=true;var o=dhx4.ajax.xmltop(this.xml.top,r);this._parseHead(o);var s=dhx4.ajax.xpath(this.xml.row,o);var u=parseInt(o.getAttribute("pos")||0);var v=parseInt(o.getAttribute("total_count")||0);if(v&&!this.rowsBuffer[v-1]){this.rowsBuffer[v-1]=null}if(this.isTreeGrid()){this._get_xml_data=this._get_xml_dataB;this._process_xml_row=this._process_xml_rowB;return this._process_tree_xml(r)}for(var w=0;w<s.length;w++){if(this.rowsBuffer[w+u]){continue}var n=s[w].getAttribute("id")||this.uid();this.rowsBuffer[w+u]={idd:n,data:s[w],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB};this.rowsAr[n]=s[w]}this.render_dataset();this._parsing=false};dhtmlXGridObject.prototype._process_xml_rowA=function(o,s){var n=[];o._attrs=this._xml_attrs(s);for(var u=0;u<this.columnIds.length;u++){var m=this.columnIds[u];var r=o._attrs[m]||"";if(o.childNodes[u]){o.childNodes[u]._attrs={}}n.push(r)}this._fillRow(o,(this._c_order?this._swapColumns(n):n));return o};dhtmlXGridObject.prototype._get_xml_dataA=function(g,e){return g.getAttribute(this.getColumnId(e))};dhtmlXGridObject.prototype._process_xml_rowB=function(C,w){var s=[];C._attrs=this._xml_attrs(w);if(this._ud_enabled){var r=dhx4.ajax.xpath("./userdata",w);for(var y=r.length-1;y>=0;y--){this.setUserData(r[y].getAttribute("name"),r[y].firstChild?r[y].firstChild.data:"")}}for(var u=0;u<w.childNodes.length;u++){var x=w.childNodes[u];if(!x.tagName){continue}var A=this.getColIndexById(x.tagName);if(isNaN(A)){continue}var v=x.getAttribute("type");if(v){C.childNodes[A]._cellType=v}C.childNodes[A]._attrs=this._xml_attrs(x);if(x.getAttribute("xmlcontent")){}else{if(x.firstChild){x=x.firstChild.data}else{x=""}}s[A]=x}for(var y=0;y<C.childNodes.length;y++){if(!C.childNodes[y]._attrs){C.childNodes[y]._attrs={}}}this._fillRow(C,s);return C};dhtmlXGridObject.prototype._get_xml_dataB=function(l,g){var h=this.getColumnId(g);l=l.firstChild;while(true){if(!l){return""}if(l.tagName==h){return(l.firstChild?l.firstChild.data:"")}l=l.nextSibling}return""};dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"];this._disA=[];for(var c=this._disF.length-1;c>=0;c--){this._disA[c]=this[this._disF[c]];this[this._disF[c]]=function(){return true}}this._cellCache=[];this.cells4=function(h){var a=this._cellCache[h._cellIndex];if(!a){a=this._cellCache[h._cellIndex]=this._disA[3].apply(this,[h]);a.destructor=function(){return true};a.setCValue=function(e){a.cell.innerHTML=e}}a.cell=h;a.combo=h._combo||this.combos[h._cellIndex];return a}};dhtmlXGridObject.prototype.stopFastOperations=function(){if(!this._disF){return}for(var c=this._disF.length-1;c>=0;c--){this[this._disF[c]]=this._disA[c]}if(this._correctMonolite){this._correctMonolite()}this.setSizes();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._in_header_number_filter=function(h,l){this._in_header_text_filter.call(this,h,l);var g=this;h.firstChild._filter=function(){var a=g._get_filters(this.value,"num");return function(c){var n=a.length>0?false:true;for(var e=0;e<a.length;e++){n=n||a[e](c)}return n}}};dhtmlXGridObject.prototype._in_header_string_filter=function(h,l){this._in_header_text_filter.call(this,h,l);var g=this;h.firstChild._filter=function(){var a=g._get_filters(this.value,"str");return function(c){var n=a.length>0?false:true;for(var e=0;e<a.length;e++){n=n||a[e](c)}return n}}};dhtmlXGridObject.prototype._get_filters=function(n,s){var m=n.split(",");var r=[];for(var u=0;u<m.length;u++){if(m[u]==""){continue}var o=this["_get_"+s+"_filter"](m[u]);r.push(o)}return r};dhtmlXGridObject.prototype._get_str_filter=function(g){if(g=="null"||g=="empty"){return new Function("value",'if (value == null || value == "") return true; return false;')}if(g=="!null"||g=="!empty"){return new Function("value",'if (value == null || value == "") return false; return true;')}if(g.substr(0,1)==="!"){var e=g.substr(1);return new Function("value",'if (value !== "'+e+'") return true; return false;')}if(g.substr(0,1)==="~"){var e=g.substr(1);return new Function("value",'if (value.indexOf("'+e+'") !== -1) return true; return false;')}if(g.substr(0,1)==="^"&&g.substr(g.length-1,1)==="&"){g="="+g.substr(1,g.length-2)}if(g.substr(0,1)==="^"){var e=g.substr(1);return new Function("value","if (value.substr(0, "+e.length+') === "'+e+'") return true; return false;')}if(g.substr(g.length-1,1)==="&"){var e=g.substr(0,g.length-1);return new Function("value","if (value.substr(value.length - "+e.length+') === "'+e+'") return true; return false;')}if(g.substr(0,1)==="="){var e=g.substr(1)}else{var e=g}return new Function("value",'if (value === "'+e+'") return true; return false;')};dhtmlXGridObject.prototype._get_num_filter=function(s){if(s=="null"||s=="empty"){return new Function("value",'if (value == null || value == "") return true; return false;')}if(s=="!null"||s=="!empty"){return new Function("value",'if (value == null || value == "") return false; return true;')}var r=s.split("..");if(r.length==2){var o=parseFloat(r[0]);var u=parseFloat(r[1]);return new Function("value","if (value >= "+o+" && value <= "+u+") return true; return false;")}var v=s.match(/<>|>=|<=|>|<|=/);if(v){var n=v[0];var w=parseFloat(s.replace(n,""))}else{var n="==";w=parseFloat(s)}if(n=="<>"){n="!="}if(n=="="){n="=="}return new Function("value"," if (value "+n+" "+w+" ) return true; return false;")};dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader;dhtmlXGridObject.prototype.attachHeader=function(){this.attachHeaderA.apply(this,arguments);if(this._realfake){return true}this.formAutoSubmit();if(typeof(this.FormSubmitOnlyChanged)=="undefined"){this.submitOnlyChanged(true)}if(typeof(this._submitAR)=="undefined"){this.submitAddedRows(true)}var c=this;this._added_rows=[];this._deleted_rows=[];this.attachEvent("onRowAdded",function(a){c._added_rows.push(a);c.forEachCell(a,function(g){g.cell.wasChanged=true});return true});this.attachEvent("onBeforeRowDeleted",function(a){c._deleted_rows.push(a);return true});this.attachHeader=this.attachHeaderA};dhtmlXGridObject.prototype.formAutoSubmit=function(){this.parentForm=this.detectParentFormPresent();if(this.parentForm===false){return false}if(this.formEventAttached){return}this.formInputs=new Array();var c=this;dhtmlxEvent(this.parentForm,"submit",function(){if(c.entBox){c.parentFormOnSubmit()}});this.formEventAttached=true};dhtmlXGridObject.prototype.parentFormOnSubmit=function(){this.formCreateInputCollection();if(!this.callEvent("onBeforeFormSubmit",[])){return false}};dhtmlXGridObject.prototype.submitOnlyChanged=function(c){this.FormSubmitOnlyChanged=dhx4.s2b(c)};dhtmlXGridObject.prototype.submitColumns=function(c){if(typeof c=="string"){c=c.split(this.delim)}this._submit_cols=c};dhtmlXGridObject.prototype.setFieldName=function(c){c=c.replace(/\{GRID_ID\}/g,"'+a1+'");c=c.replace(/\{ROW_ID\}/g,"'+a2+'");c=c.replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'");c=c.replace(/\{COLUMN_INDEX\}/g,"'+a3+'");c=c.replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'");this._input_mask=Function("a1","a2","a3","return '"+c+"';")};dhtmlXGridObject.prototype.submitSerialization=function(c){this.FormSubmitSerialization=dhx4.s2b(c)};dhtmlXGridObject.prototype.submitAddedRows=function(c){this._submitAR=dhx4.s2b(c)};dhtmlXGridObject.prototype.submitOnlySelected=function(c){this.FormSubmitOnlySelected=dhx4.s2b(c)};dhtmlXGridObject.prototype.submitOnlyRowID=function(c){this.FormSubmitOnlyRowID=dhx4.s2b(c)};dhtmlXGridObject.prototype.createFormInput=function(l,h){var g=document.createElement("input");g.type="hidden";if(this._input_mask&&(typeof l!="string")){g.name=this._input_mask.apply(this,l)}else{g.name=((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+l}g.value=h;this.parentForm.appendChild(g);this.formInputs.push(g)};dhtmlXGridObject.prototype.createFormInputRow=function(m){var l=(this.globalBox||this.entBox).id;for(var n=0;n<this._cCount;n++){var h=this.cells3(m,n);if(((!this.FormSubmitOnlyChanged)||h.wasChanged())&&(!this._submit_cols||this._submit_cols[n])){this.createFormInput(this._input_mask?[l,m.idd,n]:(m.idd+"_"+n),h.getValue())}}};dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(this.parentForm==false){return false}for(var c=0;c<this.formInputs.length;c++){this.parentForm.removeChild(this.formInputs[c])}this.formInputs=new Array();if(this.FormSubmitSerialization){this.createFormInput("serialized",this.serialize())}else{if(this.FormSubmitOnlySelected){if(this.FormSubmitOnlyRowID){this.createFormInput("selected",this.getSelectedId())}else{for(var c=0;c<this.selectedRows.length;c++){this.createFormInputRow(this.selectedRows[c])}}}else{if(this._submitAR){if(this._added_rows.length){this.createFormInput("rowsadded",this._added_rows.join(","))}if(this._deleted_rows.length){this.createFormInput("rowsdeleted",this._deleted_rows.join(","))}}this.forEachRow(function(a){if(this.getRowById(a)!==-1){this.createFormInputRow(this.rowsAr[a])}})}}};dhtmlXGridObject.prototype.detectParentFormPresent=function(){var e=false;var g=this.entBox;while(g&&g.tagName&&g!=document.body){if(g.tagName.toLowerCase()=="form"){e=g;break}else{g=g.parentNode}}return e};dhtmlXGridObject.prototype.unGroup=function(){if(!this._groups){return}this._dndProblematic=false;delete this._groups;delete this._gIndex;if(this._fake){this._mirror_rowsCol()}this.forEachRow(function(c){this.rowsAr[c].style.display=""});this._reset_view();this.callEvent("onGridReconstructed",[]);this.callEvent("onUnGroup",[])};dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups;this._fake._gIndex=this._gIndex;this.rowsBuffer=dhtmlxArray();for(var c=0;c<this.rowsCol.length;c++){if(!this.rowsCol[c]._cntr){this.rowsBuffer.push(this.rowsCol[c])}}this._fake.rowsBuffer=dhtmlxArray();for(var c=0;c<this._fake.rowsCol.length;c++){if(!this._fake.rowsCol[c]._cntr){this._fake.rowsBuffer.push(this._fake.rowsCol[c])}}};dhtmlXGridObject.prototype.groupBy=function(a,r){if(this._groups){this.unGroup()}this._dndProblematic=true;this._groups={};if(!r){r=["#title"];for(var o=1;o<this._cCount;o++){r.push("#cspan")}}this._gmask=document.createElement("TR");this._gmask.origin=r;var n,s=0;for(var o=0;o<r.length;o++){if(r[o]=="#cspan"){n.colSpan=(parseInt(n.colSpan)||1)+1}else{n=document.createElement("TD");n._cellIndex=o;if(this._hrrar[o]){n.style.display="none"}n.className="group_row";n.innerHTML="&nbsp;";if(r[o]=="#title"){this._gmask._title=s}else{n.align=this.cellAlign[o]||"left"}this._gmask.appendChild(n);if(r[o].indexOf("#stat")==0){this._gmask._math=true;n._counter=[this["_g_"+r[o].replace("#","")],o,s]}s++}}for(var u in this._groups){this._groups[u]=this.undefined}this._gIndex=a;if(this._fake&&!this._realfake){this._fake._groups=[];this._fake._gIndex=this._gIndex}this._nextRow=function(e,c){var g=this.rowsCol[e+c];if(g&&(g.style.display=="none"||g._cntr)){return this._nextRow(e+c,c)}return g};if(!this.__sortRowsBG){this._key_events=dhtmlx.extend({},this._key_events);this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{var c=this.row.rowIndex;if(!c){return}var e=this._nextRow(c-1,-1);if(e){this.selectCell(e,this.cell._cellIndex,true)}}};this._key_events.k13_1_0=this._key_events.k13_0_1=function(){};this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{var c=this.row.rowIndex;if(!c){return}var e=this._nextRow(c-1,1);if(e){this.selectCell(e,this.cell._cellIndex,true)}}};this.attachEvent("onFilterStart",function(){if(this._groups){this._groups=this.undefined}return true});this.attachEvent("onFilterEnd",function(){if(typeof this._gIndex!="undefined"){this.groupBy(this._gIndex,this._gmask.origin)}});this.sortRows_bg=this.sortRows;this.sortRows=function(e,g,c){if(typeof(this._groups)=="undefined"){return this.sortRows_bg.apply(this,arguments)}g=g||"str";c=c||"asc";if(this.callEvent("onBeforeSorting",[e,g,c])){if(typeof(this._groups)=="undefined"){return true}if(e==this._gIndex){this._sortByGroup(e,g,c)}else{this._sortInGroup(e,g,c)}this.setSortImgState(true,e,c);if(this._fake){this._mirror_rowsCol();this._fake._groups=[];this._fake._reset_view()}this.setSortImgState(true,e,c);this.callEvent("onAfterSorting",[e,g,c])}return false};this.attachEvent("onClearAll",function(){this.unGroup()});this.attachEvent("onBeforeRowDeleted",function(e){if(!this._groups){return true}if(!this.rowsAr[e]){return true}var g=this.cells(e,this._gIndex).getValue();if(g===""){g=" "}var c=this._groups[g];this._dec_group(c);return true});this.attachEvent("onAfterRowDeleted",function(c){this.updateGroups()});this.attachEvent("onCheckbox",function(e,c,g){this.callEvent("onEditCell",[2,e,c,(g?1:0),(g?0:1)])});this.attachEvent("onXLE",this.updateGroups);this.attachEvent("onColumnHidden",this.hideGroupColumn);this.attachEvent("onEditCell",function(c,I,g,h,K){if(!this._groups){return true}if(c==2&&h!=K&&g==this._gIndex){if(K===""){K=" "}this._dec_group(this._groups[K]);var m=this.rowsAr[I];var e=this.rowsCol._dhx_find(m);var F=this._inc_group(h);var l=this.rowsCol[F];if(m==l){l=l.nextSibling}var J=m.parentNode;var H=m.rowIndex;J.removeChild(m);if(l){J.insertBefore(m,l)}else{J.appendChild(m)}this.rowsCol._dhx_insertAt(F,m);if(F<e){e++}this.rowsCol._dhx_removeAt(e,m);this._fixAlterCss()}else{if(c==2&&h!=K){this.updateGroups();this._updateGroupView(this._groups[this.cells(I,this._gIndex).getValue()||" "])}}return true});this.__sortRowsBG=true}this._groupExisting();if(this._hrrar){for(var o=0;o<this._hrrar.length;o++){if(this._hrrar[o]){this.hideGroupColumn(o,true)}}}this.callEvent("onGroup",[]);if(this._ahgr||this._awdth){this.setSizes()}};dhtmlXGridObject.prototype._sortInGroup=function(A,u,y){var c=this._groups_get();c.reverse();for(var w=0;w<c.length;w++){var v=c[w]._cntr._childs;var a={};for(var x=0;x<v.length;x++){var C=this.cells3(v[x],A);a[v[x].idd]=C.getDate?C.getDate():C.getValue()}this._sortCore(A,u,y,a,v)}this._groups_put(c);this.setSizes();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._sortByGroup=function(o,a,s){var u=this._groups_get();var r=[];for(var n=0;n<u.length;n++){u[n].idd="_sort_"+n;r["_sort_"+n]=u[n]._cntr.text}this._sortCore(o,a,s,r,u);this._groups_put(u);this.callEvent("onGridReconstructed",[]);this.setSizes()};dhtmlXGridObject.prototype._inc_group=function(m,o,l){if(m===""){m=" "}if(!this._groups[m]){this._groups[m]={text:m,row:this._addPseudoRow(),count:0,state:o?"plus":"minus"}}var n=this._groups[m];n.row._cntr=n;var r=this.rowsCol._dhx_find(n.row)+n.count+1;n.count++;if(!l){this._updateGroupView(n);this.updateGroups()}return r};dhtmlXGridObject.prototype._dec_group=function(c){if(!c){return}c.count--;if(c.count==0){c.row.parentNode.removeChild(c.row);this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(c.row));delete this._groups[c.text]}else{this._updateGroupView(c)}if(this._fake&&!this._realfake){this._fake._dec_group(this._fake._groups[c.text])}this.updateGroups();return true};dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt;dhtmlXGridObject.prototype._insertRowAt=function(o,n,r){if(typeof(this._groups)!="undefined"){if(this._realfake){var m=this._fake._bfs_cells(o.idd,this._gIndex).getValue()}else{if(this._bfs_cells3){var m=this._bfs_cells3(o,this._gIndex).getValue()}else{var m=this.cells3(o,this._gIndex).getValue()}}if(!m){m=" "}n=this._inc_group(m,o.style.display=="none")}var l=this._insertRowAt_gA(o,n,r);if(typeof(this._groups)!="undefined"){this.expandGroup(m);this._updateGroupView(this._groups[m]);this.updateGroups()}return l};dhtmlXGridObject.prototype._updateGroupView=function(h){if(this._fake&&!this._realfake){return h.row.firstChild.innerHTML="&nbsp;"}var g=this._gmask||this._fake._gmask;var l="<img style='margin-bottom:-4px' src='"+this.imgURL+h.state+".gif'> ";if(this.customGroupFormat){l+=this.customGroupFormat(h.text,h.count)}else{l+=h.text+" ( "+h.count+" ) "}h.row.childNodes[g._title].innerHTML=l};dhtmlXGridObject.prototype._addPseudoRow=function(m){var l=this._gmask||this._fake._gmask;var n=l.cloneNode(true);for(var r=0;r<n.childNodes.length;r++){n.childNodes[r]._cellIndex=l.childNodes[r]._cellIndex;if(this._realfake){n.childNodes[r].style.display=""}}var o=this;n.onclick=function(a){if(!o.callEvent("onGroupClick",[this._cntr.text])){return}if(o._fake&&o._realfake){o._fake._switchGroupState(o._fake._groups[this._cntr.text].row)}else{o._switchGroupState(this)}(a||event).cancelBubble="true"};n.ondblclick=function(a){(a||event).cancelBubble="true"};if(!m){if(_isKHTML){this.obj.appendChild(n)}else{this.obj.firstChild.appendChild(n)}this.rowsCol.push(n)}return n};dhtmlXGridObject.prototype._groups_get=function(){var l=[];this._temp_par=this.obj.parentNode;this._temp_par.removeChild(this.obj);var h=[];for(var a=this.rowsCol.length-1;a>=0;a--){if(this.rowsCol[a]._cntr){this.rowsCol[a]._cntr._childs=h;h=[];l.push(this.rowsCol[a])}else{h.push(this.rowsCol[a])}this.rowsCol[a].parentNode.removeChild(this.rowsCol[a])}return l};dhtmlXGridObject.prototype._groups_put=function(l){var m=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0);this.rowsCol.stablesort=m;for(var n=0;n<l.length;n++){var o=l[n]._cntr;this.obj.firstChild.appendChild(o.row);this.rowsCol.push(o.row);o.row.idd=null;for(var r=0;r<o._childs.length;r++){this.obj.firstChild.appendChild(o._childs[r]);this.rowsCol.push(o._childs[r])}delete o._childs}this._temp_par.appendChild(this.obj)};dhtmlXGridObject.prototype._groupExisting=function(u){if(!this.getRowsNum()){return}var u=[];this._temp_par=this.obj.parentNode;this._temp_par.removeChild(this.obj);var s=[];var r=this.rowsCol.length;for(var o=0;o<r;o++){var a=this.cells4(this.rowsCol[o].childNodes[this._gIndex]).getValue();this.rowsCol[o].style.display="";if(!a){a=" "}if(!this._groups[a]){this._groups[a]={text:a,row:this._addPseudoRow(true),count:0,state:"minus"};var n=this._groups[a];n.row._cntr=n;this._groups[a]._childs=[];u.push(n.row)}this._groups[a].count++;this._groups[a]._childs.push(this.rowsCol[o]);this.rowsCol[o].parentNode.removeChild(this.rowsCol[o])}for(var o=0;o<u.length;o++){this._updateGroupView(u[o]._cntr)}this._groups_put(u);if(this._fake&&!this._realfake){this._mirror_rowsCol();this._fake._groups=[];this._fake._reset_view()}this.callEvent("onGridReconstructed",[]);this.updateGroups()};dhtmlXGridObject.prototype._switchGroupState=function(l){var m=l._cntr;if(this._fake&&!this._realfake){m.state=this._fake._groups[l._cntr.text].row._cntr.state;this._fake._switchGroupState(this._fake._groups[l._cntr.text].row)}var n=this.rowsCol._dhx_find(m.row)+1;m.state=m.state=="minus"?"plus":"minus";var h=m.state=="plus"?"none":"";while(this.rowsCol[n]&&!this.rowsCol[n]._cntr){this.rowsCol[n].style.display=h;n++}this._updateGroupView(m);this.callEvent("onGroupStateChanged",[m.text,(m.state=="minus")]);this.setSizes()};dhtmlXGridObject.prototype.expandGroup=function(c){if(this._groups[c].state=="plus"){this._switchGroupState(this._groups[c].row)}};dhtmlXGridObject.prototype.collapseGroup=function(c){if(this._groups[c].state=="minus"){this._switchGroupState(this._groups[c].row)}};dhtmlXGridObject.prototype.expandAllGroups=function(){for(var c in this._groups){if(this._groups[c]&&this._groups[c].state=="plus"){this._switchGroupState(this._groups[c].row)}}};dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var c in this._groups){if(this._groups[c]&&this._groups[c].state=="minus"){this._switchGroupState(this._groups[c].row)}}};dhtmlXGridObject.prototype.hideGroupColumn=function(n,o){if(this._fake){return}var r=-1;var a=this._gmask.childNodes;for(var s=0;s<a.length;s++){if(a[s]._cellIndex==n){r=s;break}}if(r==-1){return}for(var u in this._groups){this._groups[u].row.childNodes[r].style.display=o?"none":""}};dhtmlXGridObject.prototype.groupStat=function(r,n,o){o=this["_g_"+(o||"stat_total")];var m=0;var l=0;this.forEachRowInGroup(r,function(a){m=o(m,this.cells(a,n).getValue()*1,l);l++});return m};dhtmlXGridObject.prototype.forEachRowInGroup=function(l,n){var m=this._groups[l].row.nextSibling;if(m){while(m&&!m._cntr){n.call(this,m.idd);m=m.nextSibling}}else{var o=this._groups[l]._childs;if(o){for(var r=0;r<o.length;r++){n.call(this,o[r].idd)}}}};dhtmlXGridObject.prototype.updateGroups=function(){if(!this._gmask||!this._gmask._math||this._parsing){return}var g=this._gmask.childNodes;for(var e=0;e<g.length;e++){if(g[e]._counter){this._b_processing.apply(this,g[e]._counter)}}};dhtmlXGridObject.prototype._b_processing=function(s,a,c){var u=0,r=0;if(!this._ecache[this.cellType[a]]){this.cells5({parentNode:{grid:this}},this.cellType[a])}for(var o=this.rowsCol.length-1;o>=0;o--){if(!this.rowsCol[o]._cntr){u=s(u,this.cells3(this.rowsCol[o],a).getValue()*1,r);r++}else{this.cells5(this.rowsCol[o].childNodes[c],this.cellType[a]).setValue(u);r=u=0}}};dhtmlXGridObject.prototype._g_stat_total=function(h,l,c){return h+l};dhtmlXGridObject.prototype._g_stat_min=function(h,l,c){if(!c){h=Infinity}return Math.min(h,l)};dhtmlXGridObject.prototype._g_stat_max=function(h,l,c){if(!c){h=-Infinity}return Math.max(h,l)};dhtmlXGridObject.prototype._g_stat_average=function(h,l,c){return(h*c+l)/(c+1)};dhtmlXGridObject.prototype._g_stat_count=function(h,l,c){return h++};dhtmlXGridObject.prototype._in_header_collapse=function(s,u,w){var r=s.tagName=="TD"?s:s.parentNode;u=r._cellIndexS;if(!this._column_groups){this._column_groups=[]}var c=w[1].split(":");var c=w[1].split(":");c=[c.shift(),c.join(":")];var o=parseInt(c[0]);s.innerHTML=w[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(c[1]||"")+"<span>";s.style.paddingBottom="0px";var v=this;this._column_groups[u]=s.getElementsByTagName("IMG")[0];this._column_groups[u].onclick=function(h){(h||event).cancelBubble=true;this._cstate=!this._cstate;for(var l=u+1;l<(u+o);l++){v.setColumnHidden(l,this._cstate)}if(this._cstate){if(r.colSpan&&r.colSpan>0){r._exp_colspan=r.colSpan;var a=Math.max(1,r.colSpan-o);if(!_isFF){for(var g=0;g<r.colSpan-a;g++){var e=document.createElement("TD");if(r.nextSibling){r.parentNode.insertBefore(e,r.nextSibling)}else{r.parentNode.appendChild(e)}}}r.colSpan=a}v.callEvent("onColumnCollapse",[u,this._cstate])}else{if(r._exp_colspan){r.colSpan=r._exp_colspan;if(!_isFF){for(var g=1;g<r._exp_colspan;g++){r.parentNode.removeChild(r.nextSibling)}}v.callEvent("onColumnCollapse",[u,this._cstate])}}this.src=v.imgURL+(this._cstate?"plus.gif":"minus.gif");if(v.sortImg.style.display!="none"){v.setSortImgPos()}}};dhtmlXGridObject.prototype.collapseColumns=function(c){if(!this._column_groups[c]||this._column_groups[c]._cstate){return}this._column_groups[c].onclick({})};dhtmlXGridObject.prototype.expandColumns=function(c){if(!this._column_groups[c]||!this._column_groups[c]._cstate){return}this._column_groups[c].onclick({})};dhtmlXGridObject.prototype.enableHeaderMenu=function(g){if(!window.dhtmlXMenuObject){return dhtmlx.message("You need to include DHTMLX Menu")}if(!this._header_menu){var h=this._header_menu=new dhtmlXMenuObject();h.renderAsContextMenu();var l=this;h.attachEvent("onBeforeContextMenu",function(){l._showHContext(g);return true});h.attachEvent("onClick",function(u){var a=this.getCheckboxState(u);var w=l.hdr.rows[1];for(var e=0;e<w.cells.length;e++){var v=w.cells[e];if(v._cellIndexS==u){var s=v.colSpan||1;for(var c=0;c<s;c++){l.setColumnHidden(u*1+c,!a)}}}});this.attachEvent("onInit",function(){h.addContextZone(this.hdr)});if(this.hdr.rows.length){this.callEvent("onInit",[])}}};dhtmlXGridObject.prototype.getHeaderMenu=function(c){return this._header_menu};dhtmlXGridObject.prototype._hideHContext=function(){if(this._header_menu){this._header_menu.hide()}};dhtmlXGridObject.prototype._showHContext=function(u){if(typeof u=="string"){u=u.split(this.delim)}var s=0;var r=0;this._header_menu.clearAll();for(var v=0;v<this.hdr.rows[1].cells.length;v++){var w=this.hdr.rows[1].cells[v];if(!u||(u[s]&&u[s]!="false")){if(w.firstChild&&w.firstChild.tagName=="DIV"){var c=w.firstChild.innerHTML}else{var c=w.innerHTML}c=c.replace(/<[^>]*>/gi,"");var o=!(this.isColumnHidden(s)||(this.getColWidth(s)==0));this._header_menu.addCheckbox("child",this._header_menu.topId,r,s,c,o);r++}s+=(w.colSpan||1)}};dhtmlXGridObject.prototype._process_json_row=function(m,a){m._attrs=a;for(var o=0;o<m.childNodes.length;o++){m.childNodes[o]._attrs={}}if(a.userdata){for(var r in a.userdata){this.setUserData(m.idd,r,a.userdata[r])}}a=this._c_order?this._swapColumns(a.data):a.data;for(var n=0;n<a.length;n++){if(typeof a[n]=="object"&&a[n]!=null){m.childNodes[n]._attrs=a[n];if(a[n].type){m.childNodes[n]._cellType=a[n].type}a[n]=a[n].value}}this._fillRow(m,a);return m};dhtmlXGridObject.prototype._process_js_row=function(n,a){n._attrs=a;for(var r=0;r<n.childNodes.length;r++){n.childNodes[r]._attrs={}}if(a.userdata){for(var s in a.userdata){this.setUserData(n.idd,s,a.userdata[s])}}var u=[];for(var o=0;o<this.columnIds.length;o++){u[o]=a[this.columnIds[o]];if(typeof u[o]=="object"&&u[o]!=null){n.childNodes[o]._attrs=u[o];if(u[o].type){n.childNodes[o]._cellType=u[o].type}u[o]=u[o].value}if(!u[o]&&u[o]!==0){u[o]=""}}this._fillRow(n,u);return n};dhtmlXGridObject.prototype.updateFromJSON=function(h,l,n,m){if(typeof l=="undefined"){l=true}this._refresh_mode=[true,l,n];this.load(h,m,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(C){if(this._f_rowsBuffer){this.filterBy(0,"")}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(a){var c=this.grid._h2.get[this.cell.parentNode.idd];if(c&&this.cell.parentNode.valTag){this.setLabel(a)}else{this.setValueX(a)}}}var s=this.cellType._dhx_find("tree");var y=C.parent||0;var w={};if(this._refresh_mode[2]){if(s!=-1){this._h2.forEachChild(y,function(a){w[a.id]=true},this)}else{this.forEachRow(function(a){w[a]=true})}}var u=C.rows;for(var A=0; A<u.length; A++){var v=u[A];var E=v.id;w[E]=false;if(this.rowsAr[E]&&this.rowsAr[E].tagName!="TR"){if(this._h2){this._h2.get[E].buff.data=v}else{this.rowsBuffer[this.getRowIndex(E)].data=v}this.rowsAr[E]=v}else{if(this.rowsAr[E]){this._process_json_row(this.rowsAr[E],v,-1);this._postRowProcessing(this.rowsAr[E],true)}else{if(this._refresh_mode[1]){var x={idd:E,data:v,_parser:this._process_json_row,_locator:this._get_json_data};var D=this.rowsBuffer.length;if(this._refresh_mode[1]=="header.html"){this.rowsBuffer.unshift(x);D=0}else{this.rowsBuffer.push(x)}if(this._h2){reset=true;(this._h2.add(E,y)).buff=this.rowsBuffer[this.rowsBuffer.length-1]}this.rowsAr[E]=v;v=this.render_row(D);this._insertRowAt(v,D?-1:0)}}}}if(this._refresh_mode[2]){for(E in w){if(w[E]&&this.rowsAr[E]){this.deleteRow(E)}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}if(reset){this._renderSort()}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll()}},dhtmlXGridObject.prototype._process_js=function(c){return this._process_json(c,"js")},dhtmlXGridObject.prototype._parseHeadJson=function(L){if(!L.head||!L.head.length){return}var I=L.head;var E=L.settings;var A="setInitWidths";var x=false;if(E&&E.colwidth=="%"){A="setInitWidthsP"}if(E&&E.splitat=="%"){x=E.splitat}if(this.hdr.rows.length>0){this.clearAll(true)}var y=[[],[],[],[],[],[],[]];var w=["value","width","type","align","sort","hidden","id"];var J=["",A,"setColTypes","setColAlign","setColSorting","","setColumnIds"];for(var C=0;C<I.length;C++){for(var D=0;D<w.length;D++){y[D].push(I[C][w[D]])}}this.setHeader(y[0]);for(var C=0;C<J.length;C++){if(J[C]){this[J[C]](y[C].join(this.delim))}}for(var C=0;C<I.length;C++){var K=I[C].options;if(I[C].options){if(this.cellType[C]=="clist"){this.registerCList(C,K)}else{var H=this.getCombo(C);for(var D=0;D<K.length;D++){H.put(K[D].id,K[D].value)}}}}this.init();var F=y[5].join(this.delim);if(this.setColHidden&&F.replace(/,/g,"")!=""){this.setColHidden(F)}if((x)&&(this.splitAt)){this.splitAt(x)}};dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=true;try{var data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}}catch(e){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",(data.xmlDoc||data),this]);data={rows:[]}}if(this._refresh_mode){return this._refreshFromJSON(data)}if(data.head){this._parseHeadJson(data)}var cr=parseInt(data.pos||0);var total=parseInt(data.total_count||0);var reset=false;if(total){if(!this.rowsBuffer[total-1]){if(this.rowsBuffer.length){reset=true}this.rowsBuffer[total-1]=null}if(total<this.rowsBuffer.length){this.rowsBuffer.splice(total,this.rowsBuffer.length-total);reset=true}}var userdata=mode==="js"?data.userdata:data;for(var key in userdata){if(mode==="js"||key!="rows"){this.setUserData("",key,userdata[key])}}if(mode=="js"&&data.collections){for(var colkey in data.collections){var index=this.getColIndexById(colkey);var colrecs=data.collections[colkey];if(index!==window.undefined){if(this.cellType[index]=="clist"){colplaindata=[];for(var j=0;j<colrecs.length;j++){colplaindata.push(colrecs[j].label)}this.registerCList(index,colplaindata)}else{var combo=this.getCombo(index);for(var j=0;j<colrecs.length;j++){combo.put(colrecs[j].value,colrecs[j].label)}}}}}if(this.isTreeGrid()){return this._process_tree_json(data,null,null,mode)}if(mode=="js"){if(data.data){data=data.data}for(var i=0;i<data.length;i++){if(this.rowsBuffer[i+cr]){continue}var row=data[i];var id=row.id||(i+1);this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data};this.rowsAr[id]=data[i]}}else{for(var i=0;i<data.rows.length;i++){if(this.rowsBuffer[i+cr]){continue}var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data};this.rowsAr[id]=data.rows[i]}}this.callEvent("onDataReady",[]);if(reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=h}else{this.render_dataset()}this._parsing=false};dhtmlXGridObject.prototype._get_json_data=function(g,e){if(typeof g.data[e]=="object"){return g.data[e].value}else{return g.data[e]}};dhtmlXGridObject.prototype._process_tree_json=function(v,u,y,o){this._parsing=true;var s=false;if(!u){this.render_row=this.render_row_tree;s=true;u=v;y=u.parent||0;if(y=="0"){y=0}if(!this._h2){this._h2=this._createHierarchy()}if(this._fake){this._fake._h2=this._h2}}if(o=="js"){if(u.data&&!y){v=u.data}if(u.rows){u=u.rows}for(var w=0;w<u.length;w++){var x=u[w].id;var r=this._h2.add(x,y);r.buff={idd:x,data:u[w],_parser:this._process_js_row,_locator:this._get_js_data};if(u[w].open){r.state="minus"}this.rowsAr[x]=r.buff;this._process_tree_json(u[w],u[w],x,o)}}else{if(u.rows){for(var w=0;w<u.rows.length;w++){var x=u.rows[w].id;var r=this._h2.add(x,y);r.buff={idd:x,data:u.rows[w],_parser:this._process_json_row,_locator:this._get_json_data};if(u.rows[w].open){r.state="minus"}this.rowsAr[x]=r.buff;this._process_tree_json(u.rows[w],u.rows[w],x,o)}}}if(s){if(y!=0){this._h2.change(y,"state","minus")}this._updateTGRState(this._h2.get[y]);this._h2_to_buff();this.callEvent("onDataReady",[]);if(y!=0&&(this._srnd||this.pagingOn)){this._renderSort()}else{this.render_dataset()}if(this._slowParse===false){this.forEachRow(function(a){this.render_row_tree(0,a)})}this._parsing=false;if(y!=0&&!this._srnd){this.callEvent("onOpenEnd",[y,1])}}};dhtmlXGridObject.prototype.enableMarkedCells=function(c){this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=new Array(0);this.lastMarkedRow=null;this.lastMarkedColumn=null;this.markedCells=true;this.lastMarkMethod=0;if(arguments.length>0){if(!dhx4.s2b(c)){this.markedCells=false}}};dhtmlXGridObject.prototype.doMark=function(D,x){var y=D.parentNode.idd;this.setActive(true);if(!y){return}this.editStop();this.cell=D;this.row=D.parentNode;var v=D._cellIndex;if(!x){x=0}if(x==0){this.unmarkAll()}else{if(x==1){if(this.lastMarkedRow){var E=Math.min(this.getRowIndex(y),this.getRowIndex(this.lastMarkedRow));var w=Math.max(this.getRowIndex(y),this.getRowIndex(this.lastMarkedRow));var F=Math.min(v,this.lastMarkedColumn);var u=Math.max(v,this.lastMarkedColumn);for(var A=E;A<w+1;A++){for(var C=F;C<u+1;C++){this.mark(this.getRowId(A),C,true)}}}}else{if(x==2){if(this.markedRowsArr._dhx_find(y)!=-1){for(var H=0;H<this.markedCellsArr[y].length;H++){if(this.markedCellsArr[y][H]==v){this.mark(y,v,false);return true}}}}}}if(!this.markedCellsArr[y]){this.markedCellsArr[y]=new dhtmlxArray(0)}if(x!=1){this.mark(y,v)}this.moveToVisible(this.cells(y,v).cell);this.lastMarkedRow=y;this.lastMarkedColumn=v;this.lastMarkMethod=x};dhtmlXGridObject.prototype.mark=function(m,n,l){if(arguments.length>2){if(!dhx4.s2b(l)){this.cells(m,n).cell.className=this.cells(m,n).cell.className.replace(/cellselected/g,"");if(this.markedRowsArr._dhx_find(m)!=-1){var h=this.markedCellsArr[m]._dhx_find(n);if(h!=-1){this.markedCellsArr[m]._dhx_removeAt(h);if(this.markedCellsArr[m].length==0){this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(m))}this.callEvent("onCellUnMarked",[m,n])}}return true}}this.cells(m,n).cell.className+=" cellselected";if(this.markedRowsArr._dhx_find(m)==-1){this.markedRowsArr[this.markedRowsArr.length]=m}if(!this.markedCellsArr[m]){this.markedCellsArr[m]=new dhtmlxArray(0)}if(this.markedCellsArr[m]._dhx_find(n)==-1){this.markedCellsArr[m][this.markedCellsArr[m].length]=n;this.callEvent("onCellMarked",[m,n])}};dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var g=0;g<this.markedRowsArr.length;g++){var h=this.markedRowsArr[g];if(this.rowsAr[h]){for(var l=0;l<this.markedCellsArr[h].length;l++){this.callEvent("onCellUnMarked",[h,this.markedCellsArr[h][l]]);this.cells(h,this.markedCellsArr[h][l]).cell.className=this.cells(h,this.markedCellsArr[h][l]).cell.className.replace(/cellselected/g,"")}}}this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=new Array(0)}return true};dhtmlXGridObject.prototype.getMarked=function(){var m=new Array();if(this.markedRowsArr){for(var h=0; h<this.markedRowsArr.length; h++){var l=this.markedRowsArr[h];for(var n=0; n<this.markedCellsArr[l].length; n++){m[m.length]=[l,this.markedCellsArr[l][n]]}}}return m};function eXcell_math(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.edit=function(){this.grid.editor=new eXcell_ed(this.cell);this.grid.editor.fix_self=true;this.grid.editor.getValue=this.cell.original?(function(){return this.cell.original}):this.getValue;this.grid.editor.setValue=this.setValue;this.grid.editor.nlcz()};this.isDisabled=function(){return !this.grid._mathEdit};this.setValue=function(a){a=this.grid._compileSCL(a,this.cell,this.fix_self);if(this.grid._strangeParams[this.cell._cellIndex]){this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(a)}else{this.setCValue(a);this.cell._clearCell=false}};this.getValue=function(){if(this.grid._strangeParams[this.cell._cellIndex]){return this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue()}return this.cell.innerHTML}}eXcell_math.prototype=new eXcell;dhx4.attachEvent("onGridCreated",function(c){c._mat_links={};c._aggregators=[];c.attachEvent("onClearAll",function(){this._mat_links={};this._aggregators=[]});c.attachEvent("onCellChanged",function(a,n){if(this._mat_links[a]){var u=this._mat_links[a][n];if(u){for(var o=0;o<u.length;o++){if(u[o].parentNode){this.cells5(u[o]).setValue(this._calcSCL(u[o]))}}}}if(!this._parsing&&this._aggregators[n]){var r=this._h2.get[a].parent.id;if(r!=0){var s=this.cells(r,n);s.setValue(this._calcSCL(s.cell))}}});c.attachEvent("onAfterRowDeleted",function(a,m){if(m!=0){if(!this._parsing&&this._aggregators.length){for(var l=0;l<this._aggregators.length;l++){if(this._aggregators[l]){var n=this.cells(m,l);n.setValue(this._calcSCL(n.cell))}}}}return true});c.attachEvent("onXLE",function(){for(var a=0;a<this._aggregators.length;a++){if(this._aggregators[a]){this._h2.forEachChild(0,function(h){if(h.childs.length!=0){var l=this.cells(h.id,a);l.setValue(this._calcSCL(l.cell))}},this)}}})});dhtmlXGridObject.prototype.enableMathSerialization=function(c){this._mathSerialization=dhx4.s2b(c)};dhtmlXGridObject.prototype.setMathRound=function(c){this._roundDl=c;this._roundD=Math.pow(10,c)};dhtmlXGridObject.prototype.enableMathEditing=function(c){this._mathEdit=dhx4.s2b(c)};dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code){return this.cells5(cell).getValue()}try{dhtmlx.agrid=this;var z=eval(cell._code)}catch(e){return("#SCL")}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(z<0){pre="-"+pre}z=Math.round(Math.abs(z)*this._roundD).toString();if(z==0){return 0}if(this._roundDl>0){var n=z.length-this._roundDl;if(n<0){z=("000000000"+z).substring(9+n);n=0}return(pre+z.substring(0,n)+"."+z.substring(n,z.length))}return pre+z}return z};dhtmlXGridObject.prototype._countTotal=function(n,u){var m=0;var o=this._h2.get[n];for(var s=0;s<o.childs.length;s++){if(!o.childs[s].buff){return m}if(o.childs[s].buff._parser){this._h2.forEachChild(n,function(a){if(a.childs.length==0){var c=parseFloat(this._get_cell_value(a.buff,u),10);if(c){m+=c}}},this);return m}var r=parseFloat(this._get_cell_value(o.childs[s].buff,u),10);if(r){m+=r}}return m};dhtmlXGridObject.prototype._compileSCL=function(s,u,n){if(s===null||s===window.undefined){return s}s=s.toString();if(s.indexOf("=")!=0||!u.parentNode){this._reLink([],u);if(n){u._code=u.original=null}return s}u.original=s;var m=null;s=s.replace("=","");if(s.indexOf("sum")!=-1){s=s.replace("sum","(dhtmlx.agrid._countTotal('"+u.parentNode.idd+"',"+u._cellIndex+"))");if(!this._aggregators){this._aggregators=[]}this._aggregators[u._cellIndex]="sum";u._code=s;return this._parsing?"":this._calcSCL(u)}if(s.indexOf("[[")!=-1){var o=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this;m=m||(new Array());s=s.replace(o,function(g,a,c,e){if(c=="-"){c=u.parentNode.idd}if(c.indexOf("#")==0){c=dhtmlx.agrid.getRowId(c.replace("#",""))}m[m.length]=[c,e];return'(parseFloat(dhtmlx.agrid.cells("'+c+'",'+e+").getValue(),10))"})}if(s.indexOf(":")!=-1){var o=/:(\w+)/g;dhtmlx.agrid=this;var r=u.parentNode.idd;m=m||(new Array());s=s.replace(o,function(g,a,c,e){m[m.length]=[r,dhtmlx.agrid.getColIndexById(a)];return'(parseFloat(dhtmlx.agrid.cells("'+r+'",dhtmlx.agrid.getColIndexById("'+a+'")).getValue(),10))'})}else{var o=/c([0-9]+)/g;dhtmlx.agrid=this;var r=u.parentNode.idd;m=m||(new Array());s=s.replace(o,function(g,a,c,e){m[m.length]=[r,a];return'(parseFloat(dhtmlx.agrid.cells("'+r+'",'+a+").getValue(),10))"})}this._reLink(m,u);u._code=s;return this._calcSCL(u)};dhtmlXGridObject.prototype._reLink=function(n,h){if(!n.length){return}for(var l=0;l<n.length;l++){if(!this._mat_links[n[l][0]]){this._mat_links[n[l][0]]={}}var m=this._mat_links[n[l][0]];if(!m[n[l][1]]){m[n[l][1]]=[]}m[n[l][1]].push(h)}};if(_isKHTML){(function(){var c=String.prototype.replace;String.prototype.replace=function(a,C){if(typeof C!="function"){return c.apply(this,arguments)}var y=""+this;var v=C;if(!(a instanceof RegExp)){var w=y.indexOf(a);return(w==-1?y:c.apply(y,[a,v(a,w,y)]))}var D=a;var E=[];var x=D.lastIndex;var u;while((u=D.exec(y))!=null){var w=u.index;var A=u.concat(w,y);E.push(y.slice(x,w),v.apply(null,A).toString());if(!D.global){x+=RegExp.lastMatch.length;break}else{x=D.lastIndex}}E.push(y.slice(x));return E.join("")}})()}dhtmlXGridObject.prototype.insertColumn=function(H,A,x,J,C,y,M,I,E){H=parseInt(H);if(H>this._cCount){H=this._cCount}if(!this._cMod){this._cMod=this._cCount}this._processAllArrays(this._cCount,H-1,[(A||"&nbsp;"),(J||100),(x||"ed"),(y||"left"),(M||""),(C||"na"),(E||""),"",this._cMod,(J||100)]);this._processAllRows("_addColInRow",H);if(typeof(A)=="object"){for(var D=1;D<this.hdr.rows.length;D++){if(A[D-1]=="#rspan"){var K=D-1;var L=false;var N=null;while(!L){var N=this.hdr.rows[K];for(var F=0;F<N.cells.length;F++){if(N.cells[F]._cellIndex==H){L=F;break}}K--}this.hdr.rows[K+1].cells[F].rowSpan=(this.hdr.rows[K].cells[F].rowSpan||1)+1}else{this.setHeaderCol(H,(A[D-1]||"&nbsp;"),D)}}}else{this.setHeaderCol(H,(A||"&nbsp;"))}this.hdr.rows[0].cells[H];this._cCount++;this._cMod++;this._master_row=null;this.setSizes()};dhtmlXGridObject.prototype.deleteColumn=function(c){c=parseInt(c);if(this._cCount==0){return}if(!this._cMod){this._cMod=this._cCount}if(c>=this._cCount){return}this._processAllArrays(c,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]);this._processAllRows("_deleteColInRow",c);this._cCount--;this._master_row=null;this.setSizes()};dhtmlXGridObject.prototype._processAllRows=function(m,l,r){this[m](this.obj.rows[0],l,r,0);var n=this.hdr.rows.length;for(var o=0;o<n;o++){this[m](this.hdr.rows[o],l,r,o)}if(this.ftr){var n=this.ftr.firstChild.rows.length;for(var o=0;o<n;o++){this[m](this.ftr.firstChild.rows[o],l,r,o)}}this.forEachRow(function(a){if(this.rowsAr[a]&&this.rowsAr[a].tagName=="TR"){this[m](this.rowsAr[a],l,r,-1)}})};dhtmlXGridObject.prototype._processAllArrays=function(l,D,u){var x=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];if(this.cellWidthPX.length){x.push("cellWidthPX")}if(this.cellWidthPC.length){x.push("cellWidthPC")}if(this._col_combos){x.push("_col_combos")}if(this._mCols){x[x.length]="_mCols"}if(this.columnIds){x[x.length]="columnIds"}if(this._maskArr){x.push("_maskArr")}if(this._drsclmW){x.push("_drsclmW")}if(this._RaSeCol){x.push("_RaSeCol")}if(this._hm_config){x.push("_hm_config")}if(this._drsclmn){x.push("_drsclmn")}if(this.clists){x.push("clists")}if(this._validators&&this._validators.data){x.push(this._validators.data)}x.push("combos");if(this._customSorts){x.push("_customSorts")}if(this._aggregators){x.push("_aggregators")}var v=(l<=D);if(!this._c_order){this._c_order=new Array();var A=this._cCount;for(var w=0;w<A;w++){this._c_order[w]=w}}for(var w=0;w<x.length;w++){var E=this[x[w]]||x[w];if(E){if(v){var C=E[l];for(var y=l;y<D;y++){E[y]=E[y+1]}E[D]=C}else{var C=E[l];for(var y=l;y>(D+1);y--){E[y]=E[y-1]}E[D+1]=C}if(u){E[D+(v?0:1)]=u[w]}}}};dhtmlXGridObject.prototype.moveColumn=function(g,l){l--;g=parseInt(g);l=parseInt(l);if(l<g){var h=l+1}else{var h=l}if(!this.callEvent("onBeforeCMove",[g,h])){return false}if(g==h){return}this.editStop();this._processAllRows("_moveColInRow",g,l);this._processAllArrays(g,l);if(this.fldSorted){this.setSortImgPos(this.fldSorted._cellIndex)}this.callEvent("onAfterCMove",[g,h])};dhtmlXGridObject.prototype._swapColumns=function(n){var m=new Array();for(var h=0;h<this._cCount;h++){var l=n[this._c_order[h]];if(typeof(l)=="undefined"){l=""}m[h]=l}return m};dhtmlXGridObject.prototype._moveColInRow=function(o,n,u){var c=o.childNodes[n];var r=o.childNodes[u+1];if(!c){return}if(r){o.insertBefore(c,r)}else{o.appendChild(c)}for(var s=0;s<o.childNodes.length;s++){o.childNodes[s]._cellIndex=o.childNodes[s]._cellIndexS=s}};dhtmlXGridObject.prototype._addColInRow=function(y,s,r,v){var u=s;if(y._childIndexes){if(y._childIndexes[s-1]==y._childIndexes[s]||!y.childNodes[y._childIndexes[s-1]]){for(var w=y._childIndexes.length;w>=s;w--){y._childIndexes[w]=w?(y._childIndexes[w-1]+1):0}y._childIndexes[s]--}else{for(var w=y._childIndexes.length;w>=s;w--){y._childIndexes[w]=w?(y._childIndexes[w-1]+1):0}}var u=y._childIndexes[s]}var x=y.childNodes[u];var c=document.createElement((v)?"TD":"TH");if(v){c._attrs={}}else{c.style.width=(parseInt(this.cellWidthPX[s])||"100")+"px"}if(x){y.insertBefore(c,x)}else{y.appendChild(c)}if(this.dragAndDropOff&&y.idd){this.dragger.addDraggableItem(y.childNodes[u],this)}for(var w=u+1;w<y.childNodes.length;w++){y.childNodes[w]._cellIndex=y.childNodes[w]._cellIndexS=y.childNodes[w]._cellIndex+1}if(y.childNodes[u]){y.childNodes[u]._cellIndex=y.childNodes[u]._cellIndexS=s}if(y.idd||typeof(y.idd)!="undefined"){this.cells3(y,s).setValue("");c.align=this.cellAlign[s];c.style.verticalAlign=this.cellVAlign[s];c.bgColor=this.columnColor[s]}else{if(c.tagName=="TD"){if(!y.idd&&this.forceDivInHeader){c.innerHTML="<div class='hdrcell'>&nbsp;</div>"}else{c.innerHTML="&nbsp;"}}}};dhtmlXGridObject.prototype._deleteColInRow=function(y,c){var w=c;if(y._childIndexes){c=y._childIndexes[c]}var x=y.childNodes[c];if(!x){return}if(x.colSpan&&x.colSpan>1&&x.parentNode.idd){var u=x.colSpan-1;var s=this.cells4(x).getValue();this.setColspan(x.parentNode.idd,x._cellIndex,1);if(u>1){var r=x._cellIndex*1;this.setColspan(x.parentNode.idd,r+1,u);this.cells(x.parentNode.idd,x._cellIndex*1+1).setValue(s);y._childIndexes.splice(r,1);for(var v=r;v<y._childIndexes.length;v++){y._childIndexes[v]-=1}}}else{if(y._childIndexes){y._childIndexes.splice(w,1);for(var v=w;v<y._childIndexes.length;v++){y._childIndexes[v]--}}}if(x){y.removeChild(x)}for(var v=c;v<y.childNodes.length;v++){y.childNodes[v]._cellIndex=y.childNodes[v]._cellIndexS=y.childNodes[v]._cellIndex-1}};dhtmlXGridObject.prototype.enableColumnMove=function(g,e){this._mCol=dhx4.s2b(g);if(typeof(e)!="undefined"){this._mCols=e.split(",")}if(!this._mmevTrue){dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove);dhtmlxEvent(document.body,"mousemove",this._onColumnMove);dhtmlxEvent(document.body,"mouseup",this._stopColumnMove);this._mmevTrue=true}};dhtmlXGridObject.prototype._startColumnMove=function(l){l=l||event;var m=l.target||l.srcElement;var e=m;while(e.tagName!="TABLE"){e=e.parentNode}var n=e.grid;if(!n){return}n.setActive();if(!n._mCol||l.button==2){return}m=n.getFirstParentOfType(m,"TD");if(m.style.cursor!="default"){return true}if((n)&&(!n._colInMove)){n.resized=null;if((!n._mCols)||(n._mCols[m._cellIndex]=="true")){n._colInMove=m._cellIndex+1}}n._colInMovePos={x:l.clientX,y:l.clientY};return true};dhtmlXGridObject.prototype._onColumnMove=function(e){e=e||event;var r=window.globalActiveDHTMLGridObject;if((r)&&(r._colInMove)){var o=Math.max(Math.abs(e.clientX-r._colInMovePos.x),Math.abs(e.clientY-r._colInMovePos.y));if(o<20){return}if(r._hideHContext){r._hideHContext()}if(typeof(r._colInMove)!="object"){var w=document.createElement("DIV");w._aIndex=(r._colInMove-1);w._bIndex=null;w.innerHTML=r.getHeaderCol(w._aIndex);w.className="dhx_dragColDiv";w.style.position="absolute";document.body.appendChild(w);r._colInMove=w}var s=[];s[0]=(document.body.scrollLeft||document.documentElement.scrollLeft);s[1]=(document.body.scrollTop||document.documentElement.scrollTop);r._colInMove.style.left=e.clientX+s[0]+8+"px";r._colInMove.style.top=e.clientY+s[1]+8+"px";var v=e.target||e.srcElement;while((v)&&(typeof(v._cellIndexS)=="undefined")){v=v.parentNode}if(r._colInMove._oldHe){r._colInMove._oldHe.className=r._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"");r._colInMove._oldHe=null;r._colInMove._bIndex=null}if(v){if(r.hdr.rows[1]._childIndexes){var u=r.hdr.rows[1].cells[r.hdr.rows[1]._childIndexes[v._cellIndexS]]}else{var u=r.hdr.rows[1].cells[v._cellIndexS]}var w=e.clientX-(dhx4.absLeft(u)-r.hdrBox.scrollLeft);if(w/u.offsetWidth>0.5){u.className+=" columnTargetR";r._colInMove._bIndex=v._cellIndexS}else{u.className+=" columnTargetL";r._colInMove._bIndex=v._cellIndexS-1}if(u.offsetLeft<(r.objBox.scrollLeft+20)){r.objBox.scrollLeft=Math.max(0,u.offsetLeft-20)}if((u.offsetLeft+u.offsetWidth-r.objBox.scrollLeft)>(r.objBox.offsetWidth-20)){r.objBox.scrollLeft=Math.min(r.objBox.scrollLeft+u.offsetWidth+20,r.objBox.scrollWidth-r.objBox.offsetWidth)}r._colInMove._oldHe=u}e.cancelBubble=true;return false}return true};dhtmlXGridObject.prototype._stopColumnMove=function(g){g=g||event;var e=window.globalActiveDHTMLGridObject;if((e)&&(e._colInMove)){if(typeof(e._colInMove)=="object"){e._colInMove.parentNode.removeChild(e._colInMove);if(e._colInMove._bIndex!=null){e.moveColumn(e._colInMove._aIndex,e._colInMove._bIndex+1)}if(e._colInMove._oldHe){e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")}e._colInMove._oldHe=null;e._colInMove.grid=null;e.resized=true}e._colInMove=0}return true};dhtmlXGridObject.prototype.mouseOverHeader=function(g){var e=this;dhtmlxEvent(this.hdr,"mousemove",function(a){a=a||window.event;var c=a.target||a.srcElement;if(c.tagName!="TD"){c=e.getFirstParentOfType(c,"TD")}if(c&&(typeof(c._cellIndex)!="undefined")){g(c.parentNode.rowIndex,c._cellIndex)}})};dhtmlXGridObject.prototype.mouseOver=function(g){var e=this;dhtmlxEvent(this.obj,"mousemove",function(a){a=a||window.event;var c=a.target||a.srcElement;if(c.tagName!="TD"){c=e.getFirstParentOfType(c,"TD")}if(c&&(typeof(c._cellIndex)!="undefined")){g(c.parentNode.rowIndex,c._cellIndex)}})};dhtmlXGridObject.prototype.enablePaging=function(n,r,u,o,m,s){this._pgn_parentObj=typeof(o)=="string"?document.getElementById(o):o;this._pgn_recInfoParentObj=typeof(s)=="string"?document.getElementById(s):s;this.pagingOn=n;this.showRecInfo=m;this.rowsBufferOutSize=parseInt(r);this.currentPage=1;this.pagesInGroup=parseInt(u);this._init_pgn_events();this.setPagingSkin("default")};dhtmlXGridObject.prototype.setXMLAutoLoading=function(e,g){this.xmlFileUrl=e;this._dpref=g};dhtmlXGridObject.prototype.changePageRelative=function(c){this.changePage(this.currentPage+c)};dhtmlXGridObject.prototype.changePage=function(c){if(arguments.length==0){c=this.currentPage||0}c=parseInt(c);c=Math.max(1,Math.min(c,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)));if(!this.callEvent("onBeforePageChanged",[this.currentPage,c])){return}this.currentPage=parseInt(c);this._reset_view();this._fixAlterCss();this.callEvent("onPageChanged",this.getStateOfView())};dhtmlXGridObject.prototype.setPagingSkin=function(c){this._pgn_skin=this["_pgn_"+c];if(c=="toolbar"){this._pgn_skin_tlb=arguments[1]}};dhtmlXGridObject.prototype.setPagingTemplates=function(a,g){this._pgn_templateA=this._pgn_template_compile(a);this._pgn_templateB=this._pgn_template_compile(g);this._page_skin_update()};dhtmlXGridObject.prototype._page_skin_update=function(e){if(!this.pagesInGroup){this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize))}var g=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(g&&g<this.currentPage){return this.changePage(g)}if(this.pagingOn&&this._pgn_skin){this._pgn_skin.apply(this,this.getStateOfView())}};dhtmlXGridObject.prototype._init_pgn_events=function(c){this.attachEvent("onXLE",this._page_skin_update);this.attachEvent("onClearAll",this._page_skin_update);this.attachEvent("onPageChanged",this._page_skin_update);this.attachEvent("onGridReconstructed",this._page_skin_update);this._init_pgn_events=function(){}};dhtmlXGridObject.prototype._pgn_default=function(m,l,h){if(!this.pagingBlock){this.pagingBlock=document.createElement("DIV");this.pagingBlock.className="pagingBlock";this.recordInfoBlock=document.createElement("SPAN");this.recordInfoBlock.className="recordsInfoBlock";if(!this._pgn_parentObj){return}this._pgn_parentObj.appendChild(this.pagingBlock);if(this._pgn_recInfoParentObj&&this.showRecInfo){this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock)}if(!this._pgn_templateA){this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]");this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>")}}var n=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,n);this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,n);this._pgn_template_active(this.pagingBlock);this._pgn_template_active(this.recordInfoBlock);this.callEvent("onPaging",[])};dhtmlXGridObject.prototype._pgn_block=function(r){var m=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup;var l=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),m+this.pagesInGroup);var n=[];for(var o=m+1;o<=l;o++){if(o==this.currentPage){n.push("<a class='dhx_not_active'><b>"+o+"</b></a>")}else{n.push("<a onclick='this.grid.changePage("+o+"); return false;'>"+o+"</a>")}}return n.join(r)};dhtmlXGridObject.prototype._pgn_link=function(l,n,m){if(l=="prevpages"||l=="prev"){if(this.currentPage==1){return m}return"<a onclick='this.grid.changePageRelative(-1*"+(l=="prev"?"1":"this.grid.pagesInGroup")+"); return false;'>"+n+"</a>"}if(l=="nextpages"||l=="next"){if(this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage){return m}if(this.rowsBuffer.length/(this.rowsBufferOutSize*(l=="next"?"1":this.pagesInGroup))<=1){return m}return"<a onclick='this.grid.changePageRelative("+(l=="next"?"1":"this.grid.pagesInGroup")+"); return false;'>"+n+"</a>"}if(l=="current"){var h=this.currentPage+(n?parseInt(n):0);if(h<1||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<h){return m}return"<a "+(h==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+h+"); return false;'>"+h+"</a>"}return n};dhtmlXGridObject.prototype._pgn_template_active=function(h){var g=h.getElementsByTagName("A");if(g){for(var l=0;l<g.length;l++){g[l].grid=this}}};dhtmlXGridObject.prototype._pgn_template_compile=function(c){c=c.replace(/\[([^\]]*)\]/g,function(a,g){g=g.split(":");switch(g[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+g[0]+"','"+g[1]+"','"+g[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+g[1]+"')+\""}});return new Function('return "'+c+'";')};dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"};dhtmlXGridObject.prototype.setPagingWTMode=function(h,n,m,l){this._WTDef=[h,n,m,l]};dhtmlXGridObject.prototype._pgn_bricks=function(x,H,E){var C=(this.skin_name||"").split("_")[1];var F="";if(C=="light"||C=="modern"||C=="skyblue"){F="_"+C}this.pagerElAr=new Array();this.pagerElAr.pagerCont=document.createElement("DIV");this.pagerElAr.pagerBord=document.createElement("DIV");this.pagerElAr.pagerLine=document.createElement("DIV");this.pagerElAr.pagerBox=document.createElement("DIV");this.pagerElAr.pagerInfo=document.createElement("DIV");this.pagerElAr.pagerInfoBox=document.createElement("DIV");var y=(this.globalBox||this.objBox);this.pagerElAr.pagerCont.style.width=y.clientWidth+"px";this.pagerElAr.pagerCont.style.overflow="hidden";this.pagerElAr.pagerCont.style.clear="both";this.pagerElAr.pagerBord.className="dhx_pbox"+F;this.pagerElAr.pagerLine.className="dhx_pline"+F;this.pagerElAr.pagerBox.style.clear="both";this.pagerElAr.pagerInfo.className="dhx_pager_info"+F;this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo);this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox);this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox);this._pgn_parentObj.innerHTML="";this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont);if(this.rowsBuffer.length>0){var A=20;var I=22;if(x>this.pagesInGroup){var v=document.createElement("DIV");var w=document.createElement("DIV");v.className="dhx_page"+F;w.innerHTML="&larr;";v.appendChild(w);this.pagerElAr.pagerBox.appendChild(v);var J=this;v.pgnum=(Math.ceil(x/this.pagesInGroup)-1)*this.pagesInGroup;v.onclick=function(){J.changePage(this.pgnum)};A+=I}for(var D=1;D<=this.pagesInGroup;D++){var v=document.createElement("DIV");var w=document.createElement("DIV");v.className="dhx_page"+F;pageNumber=((Math.ceil(x/this.pagesInGroup)-1)*this.pagesInGroup)+D;if(pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){break}w.innerHTML=pageNumber;v.appendChild(w);if(x==pageNumber){v.className+=" dhx_page_active"+F;w.className="dhx_page_active"+F}else{var J=this;v.pgnum=pageNumber;v.onclick=function(){J.changePage(this.pgnum)}}A+=(parseInt(I/3)*pageNumber.toString().length)+15;w.style.width=(parseInt(I/3)*pageNumber.toString().length)+8+"px";this.pagerElAr.pagerBox.appendChild(v)}if(Math.ceil(x/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){var v=document.createElement("DIV");var w=document.createElement("DIV");v.className="dhx_page"+F;w.innerHTML="&rarr;";v.appendChild(w);this.pagerElAr.pagerBox.appendChild(v);var J=this;v.pgnum=(Math.ceil(x/this.pagesInGroup)*this.pagesInGroup)+1;v.onclick=function(){J.changePage(this.pgnum)};A+=I}this.pagerElAr.pagerLine.style.width=A+"px"}if(this.rowsBuffer.length>0&&this.showRecInfo){this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(H+1)+this.i18n.paging.to+E+this.i18n.paging.of+this.rowsBuffer.length}else{if(this.rowsBuffer.length==0){this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine);this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound}}this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.callEvent("onPaging",[])};dhtmlXGridObject.prototype._pgn_toolbar=function(r,n,w){if(!this.aToolBar){this.aToolBar=this._pgn_createToolBar()}var s=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[0]){this.aToolBar.enableItem("right");this.aToolBar.enableItem("rightabs");this.aToolBar.enableItem("left");this.aToolBar.enableItem("leftabs");if(this.currentPage>=s){this.aToolBar.disableItem("right");this.aToolBar.disableItem("rightabs")}if(this.currentPage==1){this.aToolBar.disableItem("left");this.aToolBar.disableItem("leftabs")}}if(this._WTDef[2]){var u=this;this.aToolBar.forEachListOption("pages",function(a){u.aToolBar.removeListOption("pages",a)});var o={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin];for(var v=0;v<s;v++){this.aToolBar.addListOption("pages","pages_"+(v+1),NaN,"button","<span style='padding: 0px "+o+"px 0px 0px;'>"+this.i18n.paging.page+(v+1)+"</span>","paging_page.gif")}this.aToolBar.setItemText("pages",this.i18n.paging.page+r)}if(this._WTDef[1]){if(!this.getRowsNum()){this.aToolBar.setItemText("results",this.i18n.paging.notfound)}else{this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(n+1)+this.i18n.paging.to+w+"</div>")}}if(this._WTDef[3]){this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage)}this.callEvent("onPaging",[])};dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:(this._pgn_skin_tlb||this.skin_name),icons_path:this.imgURL});if(!this._WTDef){this.setPagingWTMode(true,true,true,true)}var l=this;this.aToolBar.attachEvent("onClick",function(a){a=a.split("_");switch(a[0]){case"leftabs":l.changePage(1);break;case"left":l.changePage(l.currentPage-1);break;case"rightabs":l.changePage(99999);break;case"right":l.changePage(l.currentPage+1);break;case"perpagenum":if(a[1]===this.undefined){return}l.rowsBufferOutSize=parseInt(a[1]);l.changePage();l.aToolBar.setItemText("perpagenum",a[1]+" "+l.i18n.paging.perpage);break;case"pages":if(a[1]===this.undefined){return}l.changePage(a[1]);l.aToolBar.setItemText("pages",l.i18n.paging.page+a[1]);break}});if(this._WTDef[0]){this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif");this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif")}if(this._WTDef[1]){this.aToolBar.addText("results",NaN,this.i18n.paging.results);this.aToolBar.setWidth("results","150");this.aToolBar.disableItem("results")}if(this._WTDef[0]){this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif");this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif")}if(this._WTDef[2]){if(this.aToolBar.conf.skin=="dhx_terrace"){this.aToolBar.addSeparator()}this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,false,true)}var h;if(h=this._WTDef[3]){if(this.aToolBar.conf.skin=="dhx_terrace"){this.aToolBar.addSeparator()}this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,false,true);if(typeof h!="object"){h=[5,10,15,20,25,30]}var n={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin];for(var m=0;m<h.length;m++){this.aToolBar.addListOption("perpagenum","perpagenum_"+h[m],NaN,"button","<span style='padding: 0px "+n+"px 0px 0px;'>"+h[m]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}}return this.aToolBar};dhtmlXGridObject.prototype.post=function(l,r,n,o){this.callEvent("onXLS",[this]);if(arguments.length==2&&typeof n!="function"){o=n;n=null}o=o||"xml";if(!this.xmlFileUrl){this.xmlFileUrl=l}this._data_type=o;this.xmlLoader=this.doLoadDetails;var m=this;this.xmlLoader=function(a){if(!m.callEvent){return}m["_process_"+o](a.xmlDoc);if(!m._contextCallTimer){m.callEvent("onXLE",[m,0,0,a.xmlDoc])}if(n){n();n=null}};dhx4.ajax.post(l,(r||""),this.xmlLoader)};dhtmlXGridObject.prototype.setRowspan=function(H,E,y){var F=this[this._bfs_cells?"_bfs_cells":"cells"](H,E).cell;var D=this.rowsAr[H];if(F.rowSpan&&F.rowSpan!=1){var x=D.nextSibling;for(var r=1; r<F.rowSpan; r++){var w=x.childNodes[x._childIndexes[F._cellIndex+1]];var C=document.createElement("TD");C.innerHTML="&nbsp;";C._cellIndex=F._cellIndex;C._clearCell=true;if(w){w.parentNode.insertBefore(C,w)}else{x.parentNode.appendChild(C)}this._shiftIndexes(x,F._cellIndex,-1);x=x.nextSibling}}F.rowSpan=y;if(!this._h2){D=D.nextSibling||this.rowsCol[this.rowsCol._dhx_find(D)+1]}else{D=this.rowsAr[this._h2.get[D.idd].parent.childs[this._h2.get[D.idd].welcome+1].id]}var A=[];for(var r=1; r<y; r++){var c=null;if(this._fake&&!this._realfake){c=this._bfs_cells3(D,E).cell}else{c=this.cells3(D,E).cell}this._shiftIndexes(D,F._cellIndex,1);if(c){c.parentNode.removeChild(c)}A.push(D);if(!this._h2){D=D.nextSibling||this.rowsCol[this.rowsCol._dhx_find(D)+1]}else{var D=this._h2.get[D.idd].parent.childs[this._h2.get[D.idd].welcome+1];if(D){D=this.rowsAr[D.id]}}}this.rowsAr[H]._rowSpan=this.rowsAr[H]._rowSpan||{};this.rowsAr[H]._rowSpan[E]=A;if(this._fake&&!this._realfake&&E<this._fake._cCount){this._fake.setRowspan(H,E,y)}};dhtmlXGridObject.prototype._shiftIndexes=function(h, l, n){if(!h._childIndexes){h._childIndexes=new Array();for(var m=0; m<h.childNodes.length; m++){h._childIndexes[m]=m}}for(var m=0; m<h._childIndexes.length; m++){if(m>l){h._childIndexes[m]=h._childIndexes[m]-n}}};dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=true;this.enableRowspan=function(){};this.attachEvent("onAfterSorting",function(){if(this._dload){return}for(var w=1;w<this.obj.rows.length;w++){if(this.obj.rows[w]._rowSpan){var C=this.obj.rows[w];for(var v in C._rowSpan){var r=C;var A=r._rowSpan[v];for(var y=0;y<A.length;y++){if(r.nextSibling){r.parentNode.insertBefore(A[y],r.nextSibling)}else{r.parentNode.appendChild(A[y])}if(this._fake){var x=this._fake.rowsAr[r.idd];var u=this._fake.rowsAr[A[y].idd];if(x.nextSibling){x.parentNode.insertBefore(u,x.nextSibling)}else{x.parentNode.appendChild(u)}this._correctRowHeight(r.idd)}r=r.nextSibling}}}}var s=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray();this.rowsCol.stablesort=s;for(var w=1;w<this.obj.rows.length;w++){this.rowsCol.push(this.obj.rows[w])}});this.attachEvent("onXLE",function(v,w,u,c){for(var a=0;a<this.rowsBuffer.length;a++){var x=this.render_row(a);var y=x.childNodes;for(var s=0;s<y.length;s++){if(y[s]._attrs.rowspan){this.setRowspan(x.idd,y[s]._cellIndex,y[s]._attrs.rowspan)}}}})};dhx4.attachEvent("onGridCreated",function(c){if(c._split_later){c.splitAt(c._split_later)}});dhtmlXGridObject.prototype.splitAt=function(P){if(!this.obj.rows[0]){return this._split_later=P}P=parseInt(P);var E=document.createElement("DIV");this.entBox.appendChild(E);var D=document.createElement("DIV");this.entBox.appendChild(D);for(var H=this.entBox.childNodes.length-3;H>=0;H--){D.insertBefore(this.entBox.childNodes[H],D.firstChild)}this.entBox.style.position="relative";this.globalBox=this.entBox;this.entBox=D;D.grid=this;E.style.cssText+="border:0px solid red !important;";D.style.cssText+="border:0px solid red !important;";D.style.top="0px";D.style.position="absolute";E.style.position="absolute";E.style.top="0px";E.style.left="0px";E.style.zIndex=11;D.style.height=E.style.height=this.globalBox.clientHeight;this._fake=new dhtmlXGridObject(E);this.globalBox=this._fake.globalBox=this.globalBox;this._fake._fake=this;this._fake._realfake=true;this._treeC=this.cellType._dhx_find("tree");this._fake.delim=this.delim;this._fake.customGroupFormat=this.customGroupFormat;this._fake.setImagesPath(this._imgURL);this._fake.iconURL=this.iconURL;this._fake._customSorts=this._customSorts;this._fake.noHeader=this.noHeader;this._fake._enbTts=this._enbTts;this._fake._drsclmW=this._drsclmW;this._fake._htkebl=this._htkebl;this._fake.clists=this.clists;this._fake.fldSort=new Array();this._fake.selMultiRows=this.selMultiRows;this._fake.multiLine=this.multiLine;this._fake._key_events=this._key_events;this._fake.smartTabOrder=this.smartTabOrder;if(this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight);this.attachEvent("onRowAdded",this._correctRowHeight);var V=function(){this.forEachRow(function(a){this._correctRowHeight(a)})};this.attachEvent("onPageChanged",V);this.attachEvent("onXLE",V);this.attachEvent("onResizeEnd",V);if(!this._ads_count){this.attachEvent("onAfterSorting",V)}if(this._srnd){this.attachEvent("onFilterEnd",V)}this.attachEvent("onDistributedEnd",V)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop});this._fake.loadedKidsHash=this.loadedKidsHash;if(this._h2){this._fake._h2=this._h2}this._fake._dInc=this._dInc;var O=[[],[],[],[],[],[],[]];var J=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"];var S=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){var c=true;this._fake._split_event=true;var a=(arguments[0]=="onScroll");if(arguments[0]=="onGridReconstructed"||a){this._fake.callEvent.apply(this,arguments)}if(!a){c=this._fake.callEvent.apply(this._fake,arguments)}this._fake._split_event=false;return c};if(this._elmn){this._fake.enableLightMouseNavigation(true)}if(this.__cssEven||this._cssUnEven){this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()})}this._fake._cssEven=this._cssEven;this._fake._cssUnEven=this._cssUnEven;this._fake._cssSP=this._cssSP;this._fake.isEditable=this.isEditable;this._fake._edtc=this._edtc;if(this._sst){this._fake.enableStableSorting(true)}this._fake._sclE=this._sclE;this._fake._dclE=this._dclE;this._fake._f2kE=this._f2kE;this._fake._maskArr=this._maskArr;this._fake._dtmask=this._dtmask;this._fake.combos=this.combos;var N=0;var W=this.globalBox.offsetWidth;for(var H=0;H<P;H++){for(var I=0;I<J.length;I++){if(this[J[I]]){O[I][H]=this[J[I]][H]}if(typeof O[I][H]=="string"){O[I][H]=O[I][H].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim)}}if(_isFF){O[1][H]=O[1][H]*1}if(this.cellWidthType=="%"){O[1][H]=Math.round(parseInt(this[J[1]][H])*W/100);N+=O[1][H]}else{N+=parseInt(this[J[1]][H])}this.setColumnHidden(H,true)}for(var I=0;I<J.length;I++){var L=O[I].join(this.delim);if(S[I]!="setHeader"){if(L!=""){this._fake[S[I]](L)}}else{this._fake[S[I]](L,null,this._hstyles)}}this._fake._strangeParams=this._strangeParams;this._fake._drsclmn=this._drsclmn;N=Math.min(this.globalBox.offsetWidth,N);D.style.left=N+"px";E.style.width=N+"px";D.style.width=Math.max(this.globalBox.offsetWidth-N,0);if(this._ecspn){this._fake._ecspn=true}this._fake.init();if(this.dragAndDropOff){this.dragger.addDragLanding(this._fake.entBox,this)}this._fake.objBox.style.overflow="hidden";if(!dhtmlx.$customScroll){this._fake.objBox.style.overflowX="scroll"}else{this._fake.objBox._custom_scroll_mode=""}this._fake._srdh=this._srdh||20;this._fake._srnd=this._srnd;var M=this;function K(a){var c=a.wheelDelta/-40;if(a.wheelDelta===window.undefined){c=a.detail}var e=M.objBox;e.scrollTop+=c*40;if(a.preventDefault){a.preventDefault()}}dhtmlxEvent(this._fake.objBox,"mousewheel",K);dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",K);function T(g,h){h.style.whiteSpace="";var a=h.nextSibling;var e=h.parentNode;g.parentNode.insertBefore(h,g);if(!a){e.appendChild(g)}else{e.insertBefore(g,a)}var c=g.style.display;g.style.display=h.style.display;h.style.display=c}function F(o,c,n,x){var w=(new Array(P)).join(this.delim);var m=[];if(o==2){for(var s=0;s<P;s++){var a=c[o-1].cells[c[o-1]._childIndexes?c[o-1]._childIndexes[s]:s];if(a.rowSpan&&a.rowSpan>1){m[a._cellIndex]=a.rowSpan-1;x[o-1].cells[x[o-1]._childIndexes?x[o-1]._childIndexes[s]:s].rowSpan=a.rowSpan;a.rowSpan=1}}}for(o;o<c.length;o++){this._fake.attachHeader(w,null,n);x=x||this._fake.ftr.childNodes[0].rows;var g=P;var v=0;for(var r=0;r<g;r++){if(m[r]){m[r]=m[r]-1;if(_isIE||_isOpera){var u=document.createElement("TD");if(_isFF){u.style.display="none"}c[o].insertBefore(u,c[o].cells[0])}v++;continue}var h=x[o].cells[r-v];var l=c[o].cells[r-(_isIE?0:v)];var e=l.rowSpan;T(h,l);if(e>1){m[r]=e-1;l.rowSpan=e}if(x[o].cells[r].colSpan>1){c[o].cells[r].colSpan=x[o].cells[r].colSpan;g-=x[o].cells[r].colSpan-1;for(var s=1;s<x[o].cells[r].colSpan;s++){x[o].removeChild(x[o].cells[r+1])}}}}}if(this.hdr.rows.length>2){F.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows)}if(this.ftr){F.call(this,1,this.ftr.childNodes[0].rows,"_aFoot");this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"}if(this.saveSizeToCookie){this.saveSizeToCookie=function(g,h){if(this._realfake){return this._fake.saveSizeToCookie.apply(this._fake,arguments)}if(!g){g=this.entBox.id}var c=new Array();var a="cellWidthPX";for(var e=0;e<this[a].length;e++){if(e<P){c[e]=this._fake[a][e]}else{c[e]=this[a][e]}}c=c.join(",");this.setCookie(g,h,0,c);var c=(this.initCellWidth||(new Array)).join(",");this.setCookie(g,h,1,c);return true};this.loadSizeFromCookie=function(l){if(!l){l=this.entBox.id}var c=this._getCookie(l,1);if(!c){return}this.initCellWidth=c.split(",");var c=this._getCookie(l,0);var a="cellWidthPX";this.cellWidthType="px";var g=0;if((c)&&(c.length)){c=c.split(",");for(var h=0;h<c.length;h++){if(h<P){this._fake[a][h]=c[h];g+=c[h]*1}else{this[a][h]=c[h]}}}this._fake.entBox.style.width=g+"px";this._fake.objBox.style.width=g+"px";var e=this.globalBox.childNodes[1];e.style.left=g-(_isFF?0:0)+"px";if(this.ftr){this.ftr.style.left=g-(_isFF?0:0)+"px"}e.style.width=this.globalBox.offsetWidth-g+"px";this.setSizes();return true};this._fake.onRSE=this.onRSE}this.setCellTextStyleA=this.setCellTextStyle;this.setCellTextStyle=function(c,a,e){if(a<P){this._fake.setCellTextStyle(c,a,e)}this.setCellTextStyleA(c,a,e)};this.setRowTextBoldA=this.setRowTextBold;this.setRowTextBold=function(a){this.setRowTextBoldA(a);this._fake.setRowTextBold(a)};this.setRowColorA=this.setRowColor;this.setRowColor=function(a,c){this.setRowColorA(a,c);this._fake.setRowColor(a,c)};this.setRowHiddenA=this.setRowHidden;this.setRowHidden=function(a,c){this.setRowHiddenA(a,c);this._fake.setRowHidden(a,c)};this.setRowTextNormalA=this.setRowTextNormal;this.setRowTextNormal=function(a){this.setRowTextNormalA(a);this._fake.setRowTextNormal(a)};this.getChangedRows=function(a){var e=new Array();function c(g){for(var h=0;h<g.childNodes.length;h++){if(g.childNodes[h].wasChanged){return e[e.length]=g.idd}}}this.forEachRow(function(g){var h=this.rowsAr[g];var l=this._fake.rowsAr[g];if(h.tagName!="TR"||!l||l.tagName!="TR"){return}if(a&&h._added){e[e.length]=h.idd}else{if(!c(h)){c(l)}}});return e.join(this.delim)};this.setRowTextStyleA=this.setRowTextStyle;this.setRowTextStyle=function(a,c){this.setRowTextStyleA(a,c);if(this._fake.rowsAr[a]){this._fake.setRowTextStyle(a,c)}};this.lockRowA=this.lockRow;this.lockRow=function(a,c){this.lockRowA(a,c);this._fake.lockRow(a,c)};this.getColWidth=function(a){if(a<P){return parseInt(this._fake.cellWidthPX[a])}else{return parseInt(this.cellWidthPX[a])}};this.getColumnLabel=function(a){return this._fake.getColumnLabel.apply(((a<P)?this._fake:this),arguments)};this.setColWidthA=this._fake.setColWidthA=this.setColWidth;this.setColWidth=function(c,a){c=c*1;if(c<P){this._fake.setColWidthA(c,a)}else{this.setColWidthA(c,a)}if((c+1)<=P){this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))}};this.adjustColumnSizeA=this.adjustColumnSize;this.setColumnLabelA=this.setColumnLabel;this.setColumnLabel=function(g,h,a,c){var e=this;if(g<P){e=this._fake}return this.setColumnLabelA.apply(e,[g,h,a,c])};this.adjustColumnSize=function(c,a){if(c<P){if(_isIE){this._fake.obj.style.tableLayout=""}this._fake.adjustColumnSize(c,a);if(_isIE){this._fake.obj.style.tableLayout="fixed"}this._fake._correctSplit()}else{return this.adjustColumnSizeA(c,a)}};var U="cells";this._bfs_cells=this[U];this[U]=function(){if(arguments[1]<P){return this._fake.cells.apply(this._fake,arguments)}else{return this._bfs_cells.apply(this,arguments)}};this._bfs_isColumnHidden=this.isColumnHidden;this.isColumnHidden=function(){if(parseInt(arguments[0])<P){return this._fake.isColumnHidden.apply(this._fake,arguments)}else{return this._bfs_isColumnHidden.apply(this,arguments)}};this._bfs_setColumnHidden=this.setColumnHidden;this.setColumnHidden=function(){if(parseInt(arguments[0])<P){this._fake.setColumnHidden.apply(this._fake,arguments);return this._fake._correctSplit()}else{return this._bfs_setColumnHidden.apply(this,arguments)}};var U="cells2";this._bfs_cells2=this[U];this[U]=function(){if(arguments[1]<P){return this._fake.cells2.apply(this._fake,arguments)}else{return this._bfs_cells2.apply(this,arguments)}};var U="cells3";this._bfs_cells3=this[U];this[U]=function(a,c){if(arguments[1]<P&&this._fake.rowsAr[arguments[0].idd]){if(this._fake.rowsAr[a.idd]&&this._fake.rowsAr[a.idd].childNodes.length==0){return this._bfs_cells3.apply(this,arguments)}arguments[0]=arguments[0].idd;return this._fake.cells.apply(this._fake,arguments)}else{return this._bfs_cells3.apply(this,arguments)}};var U="changeRowId";this._bfs_changeRowId=this[U];this[U]=function(){this._bfs_changeRowId.apply(this,arguments);if(this._fake.rowsAr[arguments[0]]){this._fake.changeRowId.apply(this._fake,arguments)}};this._fake.getRowById=function(a){var c=this.rowsAr[a];if(!c&&this._fake.rowsAr[a]){c=this._fake.getRowById(a)}if(c){if(c.tagName!="TR"){for(var e=0;e<this.rowsBuffer.length;e++){if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==a){return this.render_row(e)}}if(this._h2){return this.render_row(null,c.idd)}}return c}return null};if(this.collapseKids){this._fake._bfs_collapseKids=this.collapseKids;this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])};this["_bfs_collapseKids"]=this.collapseKids;this["collapseKids"]=function(){var a=this["_bfs_collapseKids"].apply(this,arguments);this._fake._h2syncModel();if(!this._cssSP){this._fake._fixAlterCss()}};this._fake._bfs_expandKids=this.expandKids;this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]);if(!this._cssSP){this._fake._fixAlterCss()}};this["_bfs_expandAll"]=this.expandAll;this["expandAll"]=function(){this._bfs_expandAll();this._fake._h2syncModel();if(!this._cssSP){this._fake._fixAlterCss()}};this["_bfs_collapseAll"]=this.collapseAll;this["collapseAll"]=function(){this._bfs_collapseAll();this._fake._h2syncModel();if(!this._cssSP){this._fake._fixAlterCss()}};this["_bfs_expandKids"]=this.expandKids;this["expandKids"]=function(){var a=this["_bfs_expandKids"].apply(this,arguments);this._fake._h2syncModel();if(!this._cssSP){this._fake._fixAlterCss()}};this._fake._h2syncModel=function(){if(this._fake.pagingOn){this._fake._renderSort()}else{this._renderSort()}};this._updateTGRState=function(a){return this._fake._updateTGRState(a)}}if(this._elmnh){this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover;this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover;this._setRowHover=this._fake._setRowHover=function(){var c=this.grid;c._setRowHoverA.apply(this,arguments);var a=(_isIE?event.srcElement:arguments[0].target);a=c._fake.rowsAr[c.getFirstParentOfType(a,"TD").parentNode.idd];if(a){c._fake._setRowHoverA.apply(c._fake.obj,[{target:a.childNodes[0]},arguments[1]])}};this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1]){var a=this}else{var a=this.grid}a._unsetRowHoverA.apply(this,arguments);a._fake._unsetRowHoverA.apply(a._fake.obj,arguments)};this._fake.enableRowsHover(true,this._hvrCss);this.enableRowsHover(false);this.enableRowsHover(true,this._fake._hvrCss)}this._updateTGRState=function(a){if(!a.update||a.id==0){return}if(this.rowsAr[a.id].imgTag){this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"}if(this._fake.rowsAr[a.id]&&this._fake.rowsAr[a.id].imgTag){this._fake.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"}a.update=false};this.copy_row=function(c){var l=c.cloneNode(true);l._skipInsert=c._skipInsert;var a=P;l._attrs={};l._css=c._css;if(this._ecspn){a=0;for(var e=0;(a<l.childNodes.length&&e<P);e+=(l.childNodes[a].colSpan||1)){a++}}while(l.childNodes.length>a){l.removeChild(l.childNodes[l.childNodes.length-1])}var g=a;for(var e=0;e<g;e++){if(this.dragAndDropOff){this.dragger.addDraggableItem(l.childNodes[e],this)}l.childNodes[e].style.display=(this._fake._hrrar?(this._fake._hrrar[e]?"none":""):"");l.childNodes[e]._cellIndex=e;l.childNodes[e].combo_value=arguments[0].childNodes[e].combo_value;l.childNodes[e]._clearCell=arguments[0].childNodes[e]._clearCell;l.childNodes[e]._cellType=arguments[0].childNodes[e]._cellType;l.childNodes[e]._brval=arguments[0].childNodes[e]._brval;l.childNodes[e].val=arguments[0].childNodes[e].val;l.childNodes[e]._combo=arguments[0].childNodes[e]._combo;l.childNodes[e]._attrs=arguments[0].childNodes[e]._attrs;l.childNodes[e].chstate=arguments[0].childNodes[e].chstate;if(c._attrs.style){l.childNodes[e].style.cssText+=";"+c._attrs.style}if(l.childNodes[e].colSpan>1){l._childIndexes=arguments[0]._childIndexes}}if(this._h2&&this._treeC<P){var h=this._h2.get[arguments[0].idd];l.imgTag=l.childNodes[this._treeC].childNodes[0].childNodes[h.level];l.valTag=l.childNodes[this._treeC].childNodes[0].childNodes[h.level+2]}l.idd=c.idd;l.grid=this._fake;return l};var U="_insertRowAt";this._bfs_insertRowAt=this[U];this[U]=function(){var a=this["_bfs_insertRowAt"].apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var c=this._fake._insertRowAt.apply(this._fake,arguments);if(a._fhd){c.parentNode.removeChild(c);this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(c));a._fhd=false}return a};this._bfs_setSizes=this.setSizes;this.setSizes=function(){if(this._notresize){return}this._bfs_setSizes(this,arguments);this.sync_headers();if(this.sync_scroll()&&this._ahgr){this.setSizes()}var a=this.dontSetSizes?(this.entBox.offsetHeight+"px"):this.entBox.style.height;this._fake.entBox.style.height=a;this._fake.objBox.style.height=this.objBox.style.height;this._fake.hdrBox.style.height=this.hdrBox.style.height;this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake.setColumnSizes(this._fake.entBox.clientWidth);this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width);if(!this.dontSetSizes){this.globalBox.style.height=a}};this.sync_scroll=this._fake.sync_scroll=function(a){var c=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!a){return this._fake.sync_scroll(true)}this.objBox.style.overflowX="hidden";this._fake.objBox.style.overflowX="hidden"}else{if(!dhtmlx.$customScroll){this.objBox.style.overflowX="scroll";this._fake.objBox.style.overflowX="scroll"}}return c!=this.objBox.style.overflowX};this.sync_headers=this._fake.sync_headers=function(){if(this.noHeader||(this._fake.hdr.scrollHeight==this.hdr.offsetHeight)||this.noHeaderResize){return}for(var g=1;g<this.hdr.rows.length;g++){var a=P;while(!this.hdr.rows[g].childNodes[a]){a--}var h=Math.min(this.hdr.rows[g].childNodes[a].scrollHeight+2,this.hdr.rows[g].scrollHeight);var c=this._fake.hdr.rows[g].scrollHeight;if(h!=c){this._fake.hdr.rows[g].style.height=this.hdr.rows[g].style.height=Math.max(h,c)+"px"}if(window._KHTMLrv){var e=0;while(this._fake._hrrar[e]){e++}this._fake.hdr.rows[g].childNodes[e].style.height=this.hdr.rows[g].childNodes[a].style.height=Math.max(h,c)+"px"}}this._fake.sync_headers};this._fake._bfs_setSizes=this._fake.setSizes;this._fake.setSizes=function(){if(this._fake._notresize){return}this._fake.setSizes()};var U="_doOnScroll";this._bfs__doOnScroll=this[U];this[U]=function(){this._bfs__doOnScroll.apply(this,arguments);this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake._doOnScroll.apply(this._fake,arguments)};var U="selectAll";this._bfs__selectAll=this[U];this[U]=function(){this._bfs__selectAll.apply(this,arguments);this._bfs__selectAll.apply(this._fake,arguments)};var U="doClick";this._bfs_doClick=this[U];this[U]=function(){this["_bfs_doClick"].apply(this,arguments);if(arguments[0].tagName=="TD"){var a=(arguments[0]._cellIndex>=P);if(!arguments[0].parentNode.idd){return}if(!a){arguments[0].className=arguments[0].className.replace(/cellselected/g,"")}if(!this._fake.rowsAr[arguments[0].parentNode.idd]){this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd))}arguments[0]=this._fake.cells(arguments[0].parentNode.idd,(a?0:arguments[0]._cellIndex)).cell;if(a){this._fake.cell=null}this._fake._bfs_doClick.apply(this._fake,arguments);if(a){this._fake.cell=this.cell}else{this.cell=this._fake.cell}if(this._fake.onRowSelectTime){clearTimeout(this._fake.onRowSelectTime)}if(a){arguments[0].className=arguments[0].className.replace(/cellselected/g,"");globalActiveDHTMLGridObject=this;this._fake.cell=this.cell}else{this.objBox.scrollTop=this._fake.objBox.scrollTop}}};this._fake._bfs_doClick=this._fake[U];this._fake[U]=function(){this["_bfs_doClick"].apply(this,arguments);if(arguments[0].tagName=="TD"){var a=(arguments[0]._cellIndex<P);if(!arguments[0].parentNode.idd){return}arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,(a?P:arguments[0]._cellIndex)).cell;this._fake.cell=null;this._fake._bfs_doClick.apply(this._fake,arguments);this._fake.cell=this.cell;if(this._fake.onRowSelectTime){clearTimeout(this._fake.onRowSelectTime)}if(a){arguments[0].className=arguments[0].className.replace(/cellselected/g,"");globalActiveDHTMLGridObject=this;this._fake.cell=this.cell;this._fake.objBox.scrollTop=this.objBox.scrollTop}}};this.clearSelectionA=this.clearSelection;this.clearSelection=function(a){if(a){this._fake.clearSelection()}this.clearSelectionA()};this.moveRowUpA=this.moveRowUp;this.moveRowUp=function(a){if(!this._h2){this._fake.moveRowUp(a)}this.moveRowUpA(a);if(this._h2){this._fake._h2syncModel()}};this.moveRowDownA=this.moveRowDown;this.moveRowDown=function(a){if(!this._h2){this._fake.moveRowDown(a)}this.moveRowDownA(a);if(this._h2){this._fake._h2syncModel()}};this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)};this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)};this.getSortingStateA=this.getSortingState;this.getSortingState=function(){var a=this.getSortingStateA();if(a.length!=0){return a}return this._fake.getSortingState()};this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState;this.setSortImgState=function(e,g,a,c){this.setSortImgStateA(e,g,a,c);if(g*1<P){this._fake.setSortImgStateA(e,g,a,c);this.setSortImgStateA(false)}else{this._fake.setSortImgStateA(false)}};this._fake.doColResizeA=this._fake.doColResize;this._fake.doColResize=function(e,g,h,m,a){var l=-1;var c=0;if(arguments[1]._cellIndex==(P-1)){l=this._initalSplR+(e.clientX-m);if(!this._initalSplF){this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth}if(this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||(e.clientX-m)>0)){arguments[3]=(this._initalSplF||arguments[3]);c=this.doColResizeA.apply(this,arguments)}else{c=this.doColResizeA.apply(this,arguments)}}else{if(this.obj.offsetWidth<this.entBox.offsetWidth){l=this.obj.offsetWidth}c=this.doColResizeA.apply(this,arguments)}if(c!==false){this._correctSplit(l);this.resized=this._fake.resized=1}return c};this._fake.changeCursorState=function(c){var e=c.target||c.srcElement;if(e.tagName!="TD"){e=this.getFirstParentOfType(e,"TD")}if((e.tagName=="TD")&&(this._drsclmn)&&(!this._drsclmn[e._cellIndex])){return}var g=(c.layerX||0)+(((!_isIE)&&(c.target.tagName=="DIV"))?e.offsetLeft:0);var a=parseInt(this.getPosition(e,this.hdrBox));if(((e.offsetWidth-(c.offsetX||(a-g)*-1))<(_isOpera?20:10))||((this.entBox.offsetWidth-(c.offsetX?(c.offsetX+e.offsetLeft):g)+this.objBox.scrollLeft-0)<(_isOpera?20:10))){e.style.cursor="E-resize"}else{e.style.cursor="default"}if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft}};this._fake.startColResizeA=this._fake.startColResize;this._fake.startColResize=function(c){var a=this.startColResizeA(c);this._initalSplR=this.entBox.offsetWidth;this._initalSplF=null;if(this.entBox.onmousemove){var e=this.entBox.parentNode;if(e._aggrid){return a}e._aggrid=e.grid;e.grid=this;this.entBox.parentNode.onmousemove=this.entBox.onmousemove;this.entBox.onmousemove=null}return a};this._fake.stopColResizeA=this._fake.stopColResize;this._fake.stopColResize=function(a){if(this.entBox.parentNode.onmousemove){var c=this.entBox.parentNode;c.grid=c._aggrid;c._aggrid=null;this.entBox.onmousemove=this.entBox.parentNode.onmousemove;this.entBox.parentNode.onmousemove=null;if(this.obj.offsetWidth<this.entBox.offsetWidth){this._correctSplit(this.obj.offsetWidth)}}return this.stopColResizeA(a)};this.doKeyA=this.doKey;this._fake.doKeyA=this._fake.doKey;function Q(g,h,a,c){var o=c.shiftKey?-1:1;var n=c.shiftKey?-1:a._cCount;var l=false;for(var m=g+o;m!=n;m+=o){if(a.smartTabOrder){l=a.cells2(h,m).isDisabled()?false:m}else{l=m}if(l!==false){var e=!a._key_events.k_other;a.selectCell(h,l,false,false,e,true);c.cancelBubble=true;if(c.preventDefault){c.preventDefault()}return true}}}this._fake.doKey=this.doKey=function(a){if(!a){return true}if(this._htkebl){return true}if((a.target||a.srcElement).value!==window.undefined){var g=(a.target||a.srcElement);if((!g.parentNode)||(g.parentNode.className.indexOf("editable")==-1)){return true}}switch(a.keyCode){case 9:var c=this._realfake?this._fake:this;if(!c.callEvent("onTab",[true])){return true}if(this.cell){var e=this.cell._cellIndex;var h=c.getRowIndex(this.cell.parentNode.idd);while(!Q(e,h,c,a)){h+=(a.shiftKey?-1:1);if(h<0||h>=c.rowsBuffer.length){return}e=a.shiftKey?c._cCount:-1}return}break}return this.doKeyA(a)};this.editCellA=this.editCell;this.editCell=function(){if(this.cell&&this.cell.parentNode.grid!=this){return this._fake.editCell()}return this.editCellA()};this.deleteRowA=this.deleteRow;this.deleteRow=function(c,a){if(this.deleteRowA(c,a)===false){return false}if(this._fake.rowsAr[c]){this._fake.deleteRow(c)}};this.clearAllA=this.clearAll;this.clearAll=function(){this.clearAllA();this._fake.clearAll()};this.editStopA=this.editStop;this.editStop=function(a){if(this._fake.editor){this._fake.editStop(a)}else{this.editStopA(a)}};this.attachEvent("onAfterSorting",function(c,e,a){if(c>=P){this._fake.setSortImgState(false)}});this._fake.sortField=function(e,g,a){this._fake.sortField.call(this._fake,e,g,this._fake.hdr.rows[0].cells[e]);if(this.fldSort[e]!="na"&&this._fake.fldSorted){var c=this._fake.getSortingState()[1];this._fake.setSortImgState(false);this.setSortImgState(true,arguments[0],c)}};this.sortTreeRowsA=this.sortTreeRows;this._fake.sortTreeRowsA=this._fake.sortTreeRows;this.sortTreeRows=this._fake.sortTreeRows=function(c,a,g,e){if(this._realfake){return this._fake.sortTreeRows(c,a,g,e)}this.sortTreeRowsA(c,a,g,e);this._fake._h2syncModel();this._fake.setSortImgStateA(false);this._fake.fldSorted=null};this._fake._fillers=[];this._fake.rowsBuffer=this.rowsBuffer;this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer});this._add_filler_s=this._add_filler;this._add_filler=function(g,h,a,e){if(!this._fake._fillers){this._fake._fillers=[]}if(this._realfake||!e){var c;if(a&&a.idd){c=this._fake.rowsAr[a.idd]}else{if(a&&a.nextSibling){c={};c.nextSibling=this._fake.rowsAr[a.nextSibling.idd];c.parentNode=c.nextSibling.parentNode}else{if(this._fake._fillers.length){c=this._fake._fillers[this._fake._fillers.length-1][2]}}}this._fake._fillers.push(this._fake._add_filler(g,h,c))}return this._add_filler_s.apply(this,arguments)};this._add_from_buffer_s=this._add_from_buffer;this._add_from_buffer=function(){var a=this._add_from_buffer_s.apply(this,arguments);if(a!=-1){this._fake._add_from_buffer.apply(this._fake,arguments);if(this.multiLine){this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)}}return a};this._fake.render_row=function(c){var a=this._fake.render_row(c);if(a==-1){return -1}if(a){return this.rowsAr[a.idd]=this.rowsAr[a.idd]||this._fake.copy_row(a)}return null};this._reset_view_s=this._reset_view;this._reset_view=function(){this._fake._reset_view(true);this._fake._fillers=[];this._reset_view_s()};this.moveColumn_s=this.moveColumn;this.moveColumn=function(a,c){if(c>=P){return this.moveColumn_s(a,c)}};this.attachEvent("onCellChanged",function(a,e,c){if(this._split_event&&e<P&&this.rowsAr[a]){var h=this._fake.rowsAr[a];if(!h){return}if(h._childIndexes){h=h.childNodes[h._childIndexes[e]]}else{h=h.childNodes[e]}var g=this.rowsAr[a].childNodes[e];if(g._treeCell&&g.firstChild.lastChild){g.firstChild.lastChild.innerHTML=c}else{g.innerHTML=h.innerHTML}g._clearCell=false;g.combo_value=h.combo_value;g.chstate=h.chstate}});this._fake.combos=this.combos;this.setSizes();if(this.rowsBuffer[0]){this._reset_view()}this.attachEvent("onXLE",function(){this._fake._correctSplit()});this._fake._correctSplit()};dhtmlXGridObject.prototype._correctSplit=function(l){l=l||(this.obj.scrollWidth-this.objBox.scrollLeft);l=Math.min(this.globalBox.offsetWidth,l);if(l>-1){this.entBox.style.width=l+"px";this.objBox.style.width=l+"px";var a=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;this._fake.entBox.style.left=l+"px";this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-l-(this.quirks?0:2)*a)+"px";if(this._fake.ftr){this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width}if(_isIE){var h=_isIE&&!window.xmlHttpRequest;var a=(this.globalBox.offsetWidth-this.globalBox.clientWidth);this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(h?a:0)-l)+"px"}}};dhtmlXGridObject.prototype._correctRowHeight=function(w,h){if(!this.rowsAr[w]||!this._fake.rowsAr[w]){return}var s=this.rowsAr[w].offsetHeight;var v=this._fake.rowsAr[w].offsetHeight;var r=Math.max(s,v)-(this.rowsAr[w].delta_fix||0);if(!r){return}this.rowsAr[w].style.height=this._fake.rowsAr[w].style.height=Math.round(r+1)+"px";this.rowsAr[w].delta_fix=1;if(window._KHTMLrv){var y=this._fake._cCount;var x;while(!x&&y>=0){x=this.rowsAr[w].childNodes[y];y-=1}var u=this._fake.rowsAr[w].firstChild;if(x&&u){x.style.height=u.style.height=r+"px";x.style.boxSizing=u.style.boxSizing="border-box"}}};dhtmlXGridObject.prototype.enableAutoSizeSaving=function(g,e){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(g,e)})};dhtmlXGridObject.prototype.saveOpenStates=function(n,h){if(!n){n=this.entBox.id}var m=[];this._h2.forEachChild(0,function(a){if(a.state=="minus"){m.push(a.id)}});var l="gridOpen"+(n||"")+"="+m.join("|")+(h?("; "+h):"");document.cookie=l};dhtmlXGridObject.prototype.loadOpenStates=function(o,l){var m=this.getCookie(o,"gridOpen");if(!m){return}m=m.split("|");for(var n=0;n<m.length;n++){var r=this.getParentId(m[n]);if(!this.getOpenState(r)){continue}this.openItem(m[n])}};dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(g,e){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(g,e)})};dhtmlXGridObject.prototype.enableSortingSaving=function(g,e){this.attachEvent("onBeforeSorting",function(){var a=this;window.setTimeout(function(){a.saveSortingToCookie(g,e)},1);return true})};dhtmlXGridObject.prototype.enableOrderSaving=function(g,e){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(g,e);this.saveSizeToCookie(g,e)})};dhtmlXGridObject.prototype.enableAutoSaving=function(g,e){this.enableOrderSaving(g,e);this.enableAutoSizeSaving(g,e);this.enableSortingSaving(g,e)};dhtmlXGridObject.prototype.saveSizeToCookie=function(r,l){if(this.cellWidthType=="px"){var m=this.cellWidthPX}else{var m=this.cellWidthPC}var n=(this.initCellWidth||[]).join(",");if(this._hrrar){for(var o=0;o<this._hrrar.length;o++){if(this._hrrar[o]){m[o]=""}}}this.setCookie(r,l,0,m.join(","));this.setCookie(r,l,1,n)};dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(n,h){var l=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar){for(var m=0;m<this._fake._cCount;m++){l[m]=this._fake._hrrar[m]?"1":""}}this.setCookie(n,h,4,l.join(",").replace(/display:none;/g,"1"))};dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(n){var l=this._getCookie(n,4);var h=(l||"").split(",");for(var m=0;m<this._cCount;m++){this.setColumnHidden(m,(h[m]?true:false))}};dhtmlXGridObject.prototype.saveSortingToCookie=function(g,e){this.setCookie(g,e,2,(this.getSortingState()||[]).join(","))};dhtmlXGridObject.prototype.loadSortingFromCookie=function(e){var g=this._getCookie(e,2);g=(g||"").split(",");if(g.length>1&&g[0]<this._cCount){this.sortRows(g[0],null,g[1]);this.setSortImgState(true,g[0],g[1])}};dhtmlXGridObject.prototype.saveOrderToCookie=function(m,h){if(!this._c_order){this._c_order=[];var n=this._cCount;for(var l=0;l<n;l++){this._c_order[l]=l}}this.setCookie(m,h,3,((this._c_order||[]).slice(0,this._cCount)).join(","));this.saveSortingToCookie(m,h)};dhtmlXGridObject.prototype.loadOrderFromCookie=function(r){var m=this._getCookie(r,3);m=(m||"").split(",");if(m.length>1&&m.length<=this._cCount){for(var n=0;n<m.length;n++){if((!this._c_order&&m[n]!=n)||(this._c_order&&m[n]!=this._c_order[n])){var o=m[n];if(this._c_order){for(var l=0;l<this._c_order.length;l++){if(this._c_order[l]==m[n]){o=l;break}}}this.moveColumn(o*1,n)}}}};dhtmlXGridObject.prototype.loadSizeFromCookie=function(g){var h=this._getCookie(g,1);if(h){this.initCellWidth=h.split(",")}var h=this._getCookie(g,0);if((h)&&(h.length)){h=h.split(",");if(!this._fake&&this._hrrar){for(var l=0;l<h.length;l++){if(this._hrrar[l]){h[l]=0}}}if(this.cellWidthType=="px"){this.cellWidthPX=h}else{this.cellWidthPC=h}}for(var l=0;l<h.length;l++){if(h[l]===""){h[l]=this.initCellWidth[l];this.setColumnHidden(l,true)}}this.setSizes();return true};dhtmlXGridObject.prototype.clearConfigCookie=function(e){if(!e){e=this.entBox.id}var g="gridSettings"+e+"=||||";document.cookie=g};dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie;dhtmlXGridObject.prototype.setCookie=function(u,n,m,r){if(!u){u=this.entBox.id}var s=this.getCookie(u);s=(s||"||||").split("|");s[m]=r;var o="gridSettings"+u+"="+s.join("|").replace(/,/g,"-")+(n?("; "+n):"");document.cookie=o};dhtmlXGridObject.prototype.getCookie=function(r,n){if(!r){r=this.entBox.id}r=(n||"gridSettings")+r;var o=r+"=";if(document.cookie.length>0){var m=document.cookie.indexOf(o);if(m!=-1){m+=o.length;var l=document.cookie.indexOf(";",m);if(l==-1){l=document.cookie.length}return document.cookie.substring(m,l)}}};dhtmlXGridObject.prototype._getCookie=function(e,g){return((this.getCookie(e)||"||||").replace(/-/g,",").split("|"))[g]};dhtmlXGridObject.prototype.enableUndoRedo=function(){var l=this;var h=function(){return l._onEditUndoRedo.apply(l,arguments)};this.attachEvent("onEditCell",h);var g=function(c,e,a){return l._onEditUndoRedo.apply(l,[2,c,e,(a?1:0),(a?0:1)])};this.attachEvent("onCheckbox",g);this._IsUndoRedoEnabled=true;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=false;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype._onEditUndoRedo=function(s,u,n,r,m){if(this._IsUndoRedoEnabled&&s==2&&m!=r){if(this._UndoRedoPos!==-1&&this._UndoRedoPos!=(this._UndoRedoData.length-1)){this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1)}else{if(this._UndoRedoPos===-1&&this._UndoRedoData.length>0){this._UndoRedoData=[]}}var o={old_value:m,new_value:r,row_id:u,cell_index:n};this._UndoRedoData.push(o);this._UndoRedoPos++}return true};dhtmlXGridObject.prototype.doUndo=function(){if(this._UndoRedoPos===-1){return false}var c=this._UndoRedoData[this._UndoRedoPos--];var g=this.cells(c.row_id,c.cell_index);if(this.getColType(c.cell_index)=="tree"){g.setLabel(c.old_value)}else{g.setValue(c.old_value)}this.callEvent("onUndo",[c.row_id])};dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1){return false}var c=this._UndoRedoData[++this._UndoRedoPos];this.cells(c.row_id,c.cell_index).setValue(c.new_value);this.callEvent("onUndo",[c.row_id])};dhtmlXGridObject.prototype.getRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1){return[]}return this._UndoRedoData.slice(this._UndoRedoPos+1)};dhtmlXGridObject.prototype.getUndo=function(){if(this._UndoRedoPos==-1){return[]}return this._UndoRedoData.slice(0,this._UndoRedoPos+1)};dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){if(this.editor&&this.editor.obj&&this.editor.obj.select){this.editor.obj.select()}};this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[true])){return true}var c=this._getNextCell(null,1);if(c){if(this.pagingOn){this.showRow(c.parentNode.idd)}this.selectCell(c.parentNode,c._cellIndex,(this.row!=c.parentNode),false,true);this._still_active=true}this._select_ifpossible()},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[false])){return true}var c=this._getNextCell(null,-1);if(c){this.selectCell(c.parentNode,c._cellIndex,(this.row!=c.parentNode),false,true);this._still_active=true}this._select_ifpossible()},k113_0_0:function(){if(this._f2kE){this.editCell()}},k32_0_0:function(){var c=this.cells4(this.cell);if(!c.changeState||(c.changeState()===false)){return false}},k27_0_0:function(){this.editStop(true)},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k37_0_0:function(){if(this.editor){return false}if(this.isTreeGrid()){this.collapseKids(this.row)}else{this._key_events.k9_0_1.call(this)}},k39_0_0:function(){if(this.editor){return false}if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row)}else{this._key_events.k9_0_0.call(this)}},k37_1_0:function(){if(this.editor){return false}this.selectCell(this.row,0,false,false,true);this._select_ifpossible()},k39_1_0:function(){if(this.editor){return false}this.selectCell(this.row,this._cCount-1,false,false,true);this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,true,false,true);this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,true,false,true);this._select_ifpossible()},k38_0_1:function(){var e=this.getRowIndex(this.row.idd);var g=this._nextRow(e,-1);if(!g||g._sRow||g._rLoad){return false}this.selectCell(g,this.cell._cellIndex,true,false,true);this._select_ifpossible()},k40_0_1:function(){var e=this.getRowIndex(this.row.idd);var g=this._nextRow(e,1);if(!g||g._sRow||g._rLoad){return false}this.selectCell(g,this.cell._cellIndex,true,false,true);this._select_ifpossible()},k38_1_1:function(){var e=this.getRowIndex(this.row.idd);for(var g=e;g>=0;g--){this.selectCell(this.rowsCol[g],this.cell._cellIndex,true,false,true)}},k40_1_1:function(){var e=this.getRowIndex(this.row.idd);for(var g=e+1;g<this.rowsCol.length;g++){this.selectCell(this.rowsCol[g],this.cell._cellIndex,true,false,true)}},k40_0_0:function(){if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{if(!this.row.idd){return}var e=e=this.getRowIndex(this.row.idd)+1;if(this.rowsBuffer[e]){var g=this._nextRow(e-1,1);if(this.pagingOn&&g){this.showRow(g.idd)}this._Opera_stop=0;this.selectCell(g,this.cell._cellIndex,true,false,true)}else{if(!this.callEvent("onLastRow",[])){return false}this._key_events.k34_0_0.apply(this,[])}}this._still_active=true},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length){return false}this.selectCell(this.rowsCol[0],0,true,false,true);this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length){return false}this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,true,false,true);this._select_ifpossible()},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k38_0_0:function(){if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{if(!this.row.idd){return}var e=e=this.getRowIndex(this.row.idd)+1;if(e!=-1){var g=this._nextRow(e-1,-1);this._Opera_stop=0;if(this.pagingOn&&g){this.showRow(g.idd)}this.selectCell(g,this.cell._cellIndex,true,false,true)}else{this._key_events.k33_0_0.apply(this,[])}}this._still_active=true}}};dhtmlXGridObject.prototype.enableExcelKeyMap=function(){this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop();this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[(this.row?this.row.idd:null),(this.cell?this.cell._cellIndex:null)]);this._still_active=true;this._key_events.k40_0_0.call(this)},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[true])){return true}if(this.cell&&(this.cell._cellIndex+1)>=this._cCount){return}var c=this._getNextCell(null,1);if(c&&this.row==c.parentNode){this.selectCell(c.parentNode,c._cellIndex,true);this._still_active=true}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[false])){return true}if(this.cell&&(this.cell._cellIndex==0)){return}var c=this._getNextCell(null,-1);if(c&&this.row==c.parentNode){this.selectCell(c.parentNode,c._cellIndex,true);this._still_active=true}},k113_0_0:function(){if(this._f2kE){this.editCell()}},k32_0_0:function(){var c=this.cells4(this.cell);if(!c.changeState||(c.changeState()===false)){return false}},k27_0_0:function(){this.editStop(true);this._still_active=true},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k37_0_0:function(){if(this.editor){return false}if(this.isTreeGrid()){this.collapseKids(this.row)}else{this._key_events.k9_0_1.call(this)}},k39_0_0:function(){if(this.editor){return false}if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row)}else{this._key_events.k9_0_0.call(this)}},k37_1_0:function(){if(this.editor){return false}this.selectCell(this.row,0,true)},k39_1_0:function(){if(this.editor){return false}this.selectCell(this.row,this._cCount-1,true)},k38_1_0:function(){if(this.editor||!this.rowsCol.length){return false}this.selectCell(this.rowsCol[0],this.cell._cellIndex,true)},k40_1_0:function(){if(this.editor||!this.rowsCol.length){return false}this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,true)},k38_0_1:function(){if(this.editor||!this.rowsCol.length){return false}var e=this.row.rowIndex;var g=this._nextRow(e-1,-1);if(!g||g._sRow||g._rLoad){return false}this.selectCell(g,this.cell._cellIndex,true,true)},k40_0_1:function(){if(this.editor||!this.rowsCol.length){return false}var e=this.row.rowIndex;var g=this._nextRow(e-1,1);if(!g||g._sRow||g._rLoad){return false}this.selectCell(g,this.cell._cellIndex,true,true)},k38_1_1:function(){if(this.editor||!this.rowsCol.length){return false}var e=this.row.rowIndex;for(var g=e-1;g>=0;g--){this.selectCell(this.rowsCol[g],this.cell._cellIndex,true,true)}},k40_1_1:function(){if(this.editor||!this.rowsCol.length){return false}var e=this.row.rowIndex;for(var g=e;g<this.rowsCol.length;g++){this.selectCell(this.rowsCol[g],this.cell._cellIndex,true,true)}},k40_0_0:function(){var l=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{if(this.editor){return false}var g=Math.max((l._r_select||0),this.getRowIndex(this.row.idd));var h=this._nextRow(g,1);if(h){l._r_select=null;this.selectCell(h,this.cell._cellIndex,true);if(l.pagingOn){l.showRow(h.idd)}}else{if(!this.callEvent("onLastRow",[])){return false}this._key_events.k34_0_0.apply(this,[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length){return false}this.selectCell(this.rowsCol[0],0,true)},k35_1_0:function(){if(this.editor||!this.rowsCol.length){return false}this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,true)},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k38_0_0:function(){var l=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{if(this.editor){return false}if(!this.row.idd){return}var g=this.getRowIndex(this.row.idd)+1;if(g!=-1&&(!this.pagingOn||(g!=1))){var h=this._nextRow(g-1,-1);this.selectCell(h,this.cell._cellIndex,true);if(l.pagingOn&&h){l.showRow(h.idd)}}else{this._key_events.k33_0_0.apply(this,[])}}},k_other:function(l){if(this.editor){return false}if(!l.ctrlKey&&l.keyCode>=40&&(l.keyCode<91||(l.keyCode>95&&l.keyCode<111)||l.keyCode>187)){if(this.cell){var h=this.cells4(this.cell);if(h.isDisabled()){return false}var c=h.getValue();if(h.editable!==false){h.setValue("")}this.editCell();if(this.editor){this.editor.val=c;if(this.editor.obj&&this.editor.obj.select){this.editor.obj.select()}}else{h.setValue(c)}}}}}};function eXcell_time(c){this.base=eXcell_ed;this.base(c);this.getValue=function(){return this.cell.innerHTML.toString()};this.setValue=function(a){var m=new RegExp(" ","i");a=a.replace(m,":");if((a=="")){a="00:00"}else{var m=new RegExp("[a-zA-Z]","i");var n=a.match(m);if(n){a="00:00"}else{var m=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i");var n=a.search(m);if(n!=-1){var m=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i");a=a.replace(m,":")}else{var m=new RegExp("[^0-9]","i");res1=a.search(m);if(n=a.match(m)){a="00:00"}else{if(a.length==1){a="00:0"+a}else{if(parseInt(a)<60){a="00:"+a}else{if(a.length<5){var o=parseInt(a);var r=Math.floor(o/60);o=o-60*r;var r=r.toString();var o=o.toString();while(r.length<2){r="0"+r}while(o.length<2){o="0"+o}a=r+":"+o}}}}}}}this.cell.innerHTML=a}}eXcell_time.prototype=new eXcell_ed;function eXcell_sub_row(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")};this._setState=function(g,a){(a||this.cell).innerHTML="<img src='"+this.grid.imgURL+g+"' width='18' height='18' />";(a||this.cell).firstChild.onclick=this.grid._expandMonolite};this.open=function(){this.cell.firstChild.onclick(null,true)};this.close=function(){this.cell.firstChild.onclick(null,false,true)};this.isOpen=function(){return !!this.cell.parentNode._expanded};this.setValue=function(a){if(a){this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a)}this._setState(a?"plus.gif":"blank.gif")};this.setContent=function(a){if(this.cell.parentNode._expanded){this.cell.parentNode._expanded.innerHTML=a;this.resize()}else{this.cell._previous_content=null;this.setValue(a);this.cell._sub_row_type=null}};this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return true};this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}eXcell_sub_row.prototype=new eXcell;function eXcell_sub_row_ajax(c){this.base=eXcell_sub_row;this.base(c);this.setValue=function(a){if(a){this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a)}this.cell._sub_row_type="ajax";this.cell._previous_content=null;this._setState(a?"plus.gif":"blank.gif")}}eXcell_sub_row_ajax.prototype=new eXcell_sub_row;function eXcell_sub_row_grid(c){this.base=eXcell_sub_row;this.base(c);this.setValue=function(a){if(a){this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a)}this.cell._sub_row_type="grid";this._setState(a?"plus.gif":"blank.gif")};this.getSubGrid=function(){if(!c._sub_grid){return null}return c._sub_grid}}eXcell_sub_row_grid.prototype=new eXcell_sub_row;dhtmlXGridObject.prototype._expandMonolite=function(D,F,x){var C=this.parentNode;var E=C.parentNode;var n=E.grid;if(D||window.event){if(!x&&!E._expanded){n.editStop()}(D||event).cancelBubble=true}var H=n.getUserData(E.idd,"__sub_row");if(!n._sub_row_editor){n._sub_row_editor=new eXcell_sub_row(C)}if(!H){return}if(E._expanded&&!F){n._sub_row_editor._setState("plus.gif",C);C._previous_content=E._expanded;n.objBox.removeChild(E._expanded);E._expanded=false;E.style.height=(E.oldHeight||20)+"px";C.style.height=(E.oldHeight||20)+"px";if(n._fake){n._fake.rowsAr[E.idd].style.height=(E.oldHeight||20)+"px";n._fake.rowsAr[E.idd].firstChild.style.height=(E.oldHeight||20)+"px"}for(var y=0;y<E.cells.length;y++){E.cells[y].style.verticalAlign="middle"}delete n._flow[E.idd];n._correctMonolite();E._expanded.ctrl=null}else{if(!E._expanded&&!x){n._sub_row_editor._setState("minus.gif",C);E.oldHeight=C.offsetHeight-4;if(C._previous_content){var c=C._previous_content;c.ctrl=C;n.objBox.appendChild(c);n._detectHeight(c,C,parseInt(c.style.height))}else{var c=document.createElement("DIV");c.ctrl=C;if(C._sub_row_type){n._sub_row_render[C._sub_row_type](n,c,C,H)}else{c.innerHTML=H}c.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;";c.className="dhx_sub_row";n.objBox.appendChild(c);n._detectHeight(c,C)}if(!n._flow){n.attachEvent("onGridReconstructed",function(){if((this.pagingOn&&!this.parentGrid)||this._srnd){this._collapsMonolite()}else{this._correctMonolite()}});n.attachEvent("onResizeEnd",function(){this._correctMonolite(true)});n.attachEvent("onAfterCMove",function(){this._correctMonolite(true)});n.attachEvent("onDrop",function(){this._correctMonolite(true)});n.attachEvent("onBeforePageChanged",function(){this._collapsMonolite();return true});n.attachEvent("onGroupStateChanged",function(){this._correctMonolite();return true});n.attachEvent("onFilterEnd",function(){this._collapsMonolite()});n.attachEvent("onUnGroup",function(){this._collapsMonolite()});n.attachEvent("onPageChanged",function(){this._collapsMonolite()});n.attachEvent("onXLE",function(){this._collapsMonolite()});n.attachEvent("onClearAll",function(){for(var a in this._flow){if(this._flow[a]&&this._flow[a].parentNode){this._flow[a].parentNode.removeChild(this._flow[a])}}this._flow=[]});n.attachEvent("onEditCell",function(e, g, a){if((e!==2)&&this._flow[g]&&this.cellType[a]!="ch"&&this.cellType[a]!="ra"){this._expandMonolite.apply(this._flow[g].ctrl.firstChild,[0,false,true])}return true});n.attachEvent("onCellChanged",function(a, g){if(!this._flow[a]){return}var e=this.cells(a,g).cell;e.style.verticalAlign="header.html"});n._flow=[]}n._flow[E.idd]=c;n._correctMonolite();var w=n._srdh>30?11:3;if(n.multiLine){w=0}for(var y=0; y<E.cells.length; y++){E.cells[y].style.verticalAlign="header.html"}if(n._fake){var A=n._fake.rowsAr[E.idd];for(var y=0; y<A.cells.length; y++){A.cells[y].style.verticalAlign="header.html"}}E._expanded=c}}if(n._ahgr){n.setSizes()}if(n.parentGrid){n.callEvent("onGridReconstructed",[])}n.callEvent("onSubRowOpen",[E.idd,(!!E._expanded)])};dhtmlXGridObject.prototype._sub_row_render={ajax:function(that, d, td, c){d.innerHTML="Loading...";dhx4.ajax.get(c,function(xml){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);if(z){for(var i=0; i<z.length; i++){eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""))}}that._detectHeight(d,td);that._correctMonolite();that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText);td._sub_row_type=null;if(that._ahgr){that.setSizes()}that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])})},grid:function(c,n,l,m){l._sub_grid=new dhtmlXGridObject(n);if(c.skin_name){l._sub_grid.setSkin(c.skin_name)}l._sub_grid.parentGrid=c;l._sub_grid.imgURL=c.imgURL;l._sub_grid.iconURL=c.iconURL;l._sub_grid.enableAutoHeight(true);l._sub_grid._delta_x=l._sub_grid._delta_y=null;l._sub_grid.attachEvent("onGridReconstructed",function(){c._detectHeight(n,l,l._sub_grid.objBox.scrollHeight+l._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0));c._correctMonolite();this.setSizes();if(c.parentGrid){c.callEvent("onGridReconstructed",[])}});if(!c.callEvent("onSubGridCreated",[l._sub_grid,l.parentNode.idd,l._cellIndex,m])){l._sub_grid.objBox.style.overflow="hidden";l._sub_row_type=null}else{l._sub_grid.load(m,function(){c._detectHeight(n,l,l._sub_grid.objBox.scrollHeight+l._sub_grid.hdr.offsetHeight+(l._sub_grid.ftr?l._sub_grid.ftr.offsetHeight:0));l._sub_grid.objBox.style.overflow="hidden";c._correctMonolite();l._sub_row_type=null;if(!c.callEvent("onSubGridLoaded",[l._sub_grid,l.parentNode.idd,l._cellIndex,m])){return}if(c._ahgr){c.setSizes()}})}}};dhtmlXGridObject.prototype._detectHeight=function(h,u,s){var l=u.offsetLeft+u.offsetWidth;h.style.left=l+"px";h.style.width=Math.max(0,u.parentNode.offsetWidth-l-4)+"px";var s=s||h.scrollHeight;h.style.overflow="hidden";h.style.height=s+"px";var o=u.parentNode;u.parentNode.style.height=(o.oldHeight||20)+s*1+"px";u.style.height=(o.oldHeight||20)+s*1+"px";if(this._fake){var r=this._fake.rowsAr[u.parentNode.idd];r.style.height=(o.oldHeight||20)+s*1+"px";r.firstChild.style.height=(o.oldHeight||20)+s*1+"px"}};dhtmlXGridObject.prototype._correctMonolite=function(a){if(this._in_correction){return}this._in_correction=true;for(var h in this._flow){if(this._flow[h]&&this._flow[h].tagName=="DIV"){if(this.rowsAr[h]){if(this.rowsAr[h].style.display=="none"){this.cells4(this._flow[h].ctrl).close();continue}this._flow[h].style.top=this.rowsAr[h].offsetTop+(this.rowsAr[h].oldHeight||20)+"px";if(a){var l=this._flow[h].ctrl.offsetLeft+this._flow[h].ctrl.offsetWidth;this._flow[h].style.left=l+"px";this._flow[h].style.width=this.rowsAr[h].offsetWidth-l-4+"px"}}else{this._flow[h].ctrl=null;this.objBox.removeChild(this._flow[h]);delete this._flow[h]}}}this._in_correction=false};dhtmlXGridObject.prototype._collapsMonolite=function(){for(var a in this._flow){if(this._flow[a]&&this._flow[a].tagName=="DIV"){if(this.rowsAr[a]){this.cells4(this._flow[a].ctrl).close()}}}};function eXcell_ra_str(c){if(c){this.base=eXcell_ra;this.base(c);this.grid=c.parentNode.grid}}eXcell_ra_str.prototype=new eXcell_ch;eXcell_ra_str.prototype.setValue=function(h){this.cell.style.verticalAlign="middle";if(h){h=h.toString()._dhx_trim();if((h=="false")||(h=="0")){h=""}}if(h){if(this.grid.rowsAr[this.cell.parentNode.idd]){for(var l=0;l<this.grid._cCount;l++){if(l!==this.cell._cellIndex){var g=this.grid.cells(this.cell.parentNode.idd,l);if((g.cell._cellType||this.grid.cellType[g.cell._cellIndex])!="ra_str"){continue}if(g.getValue()){g.setValue("0")}}}}h="1";this.cell.chstate="1"}else{h="0";this.cell.chstate="0"}this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+h+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)};dhx4.attachEvent("onGridCreated",function(g){if(!window.dhx_globalImgPath){window.dhx_globalImgPath=g.imgURL}g._col_combos=[];for(var e=0;e<g._cCount;e++){if(g.cellType[e].indexOf("combo")==0){g._col_combos[e]=eXcell_combo.prototype.initCombo.call({grid:g},e)}}if(!g._loading_handler_set){g._loading_handler_set=g.attachEvent("onXLE",function(m,n,a,c){eXcell_combo.prototype.fillColumnCombos(this,c);this.detachEvent(this._loading_handler_set);this._loading_handler_set=null})}});function eXcell_combo(c){if(!c){return}this.cell=c;this.grid=c.parentNode.grid;this._combo_pre="";this.edit=function(){if(!window.dhx_globalImgPath){window.dhx_globalImgPath=this.grid.imgURL}this.val=this.getValue();var a=this.getText();if(this.cell._clearCell){a=""}this.cell.innerHTML="";if(!this.cell._brval){this.combo=(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex]}else{this.combo=this.cell._brval}this.cell.appendChild(this.combo.DOMParent);this.combo.DOMParent.style.margin="0";this.combo.DOMelem_input.focus();this.combo.setSize(this.cell.offsetWidth-2);if(!this.combo._xml){if(this.combo.getIndexByValue(this.cell.combo_value)!=-1){this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value))}else{if(this.combo.getOptionByLabel(a)){this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(a).value))}else{this.combo.setComboText(a)}}}else{this.combo.setComboText(a)}this.combo.openSelect()};this.selectComboOption=function(a,g){g.selectOption(g.getIndexByValue(g.getOptionByLabel(a).value))};this.getValue=function(a){return this.cell.combo_value||""};this.getText=function(h){var a=this.cell;if(this._combo_pre==""&&a.childNodes[1]){a=a.childNodes[1]}else{a.childNodes[0].childNodes[1]}return(_isIE?a.innerText:a.textContent)};this.setValue=function(a){if(typeof(a)=="object"){this.cell._brval=this.initCombo();var m=this.cell._cellIndex;var l=this.cell.parentNode.idd;if(!a.firstChild){this.cell.combo_value="&nbsp;";this.cell._clearCell=true}else{this.cell.combo_value=a.firstChild.data}this.setComboOptions(this.cell._brval,a,this.grid,m,l)}else{this.cell.combo_value=a;var n=null;if((n=this.cell._brval)&&(typeof(this.cell._brval)=="object")){a=(n.getOption(a)||{}).text||a}else{if(n=this.grid._col_combos[this.cell._cellIndex]||((this.grid._fake)&&(n=this.grid._fake._col_combos[this.cell._cellIndex]))){a=(n.getOption(a)||{}).text||a}}if((a||"").toString()._dhx_trim()==""){a=null}if(a!==null){this.setComboCValue(a)}else{this.setComboCValue("&nbsp;","");this.cell._clearCell=true}}};this.detach=function(){var g=this.combo.getParent();if(g.parentNode==this.cell){this.cell.removeChild(g)}else{return false}var a=this.cell.combo_value;if(!this.combo.getComboText()||this.combo.getComboText().toString()._dhx_trim()==""){this.setComboCValue("&nbsp;");this.cell._clearCell=true}else{this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue());this.cell._clearCell=false}this.combo._confirmSelect();this.cell.combo_value=this.combo.getActualValue();this.combo.closeAll();this.grid._still_active=true;this.grid.setActive(1);return a!=this.cell.combo_value}}eXcell_combo.prototype=new eXcell;eXcell_combo_v=function(e){var g=new eXcell_combo(e);g._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>";return g};eXcell_combo.prototype.initCombo=function(r){var l=document.createElement("DIV");l.className="dhxcombo_in_grid_parent";var n=this.grid.defVal[arguments.length?r:this.cell._cellIndex];var m=new dhtmlXCombo(l,"combo",0,n);this.grid.defVal[arguments.length?r:this.cell._cellIndex]="";var o=this.grid;m.DOMelem.onmousedown=m.DOMelem.onclick=function(a){a=a||event;a.cancelBubble=true};m.DOMelem.onselectstart=function(a){a=a||event;a.cancelBubble=true;return true};m.attachEvent("onKeyPressed",function(a){if(a==13||a==27){o.editStop();if(o._fake){o._fake.editStop()}}});return m};eXcell_combo.prototype.fillColumnCombos=function(m,h){if(!h){return}var l=dhx4.ajax.xmltop("rows",h,-1);if(l&&l.tagName!=="DIV"){m.combo_columns=m.combo_columns||[];columns=dhx4.ajax.xpath("//column",l);for(var n=0;n<columns.length;n++){if((columns[n].getAttribute("type")||"").indexOf("combo")==0){m.combo_columns[m.combo_columns.length]=n;this.setComboOptions(m._col_combos[n],columns[n],m,n)}}}};eXcell_combo.prototype.setComboCValue=function(h,l){if(this._combo_pre!=""){var g=(this.cell.offsetHeight?this.cell.offsetHeight+"px":0);h="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+h+"</span></div>"}if(arguments.length>1){this.setCValue(h,l)}else{this.setCValue(h)}};eXcell_combo.prototype.setComboOptions=function(y,x,D,c,F){if(window.dhx4.s2b(x.getAttribute("xmlcontent"))){if(!x.getAttribute("source")){options=x.childNodes;var E=[];for(var w=0;w<options.length;w++){if(options[w].tagName=="option"){var C=options[w].firstChild?options[w].firstChild.data:"";E[E.length]=[options[w].getAttribute("value"),C,(options[w].getAttribute("css")||"")]}}y.addOption(E);if(arguments.length==4){D.forEachRowA(function(a){var e=D.cells(a,c);if(!e.cell._brval&&!e.cell._cellType&&(e.cell._cellIndex==c)){if(e.cell.combo_value==""){e.setComboCValue("&nbsp;","")}else{if(!y.getOption(e.cell.combo_value)){e.setComboCValue(e.cell.combo_value)}else{e.setComboCValue(y.getOption(e.cell.combo_value).text,e.cell.combo_value)}}}})}else{var H=(this.cell)?this:D.cells(F,c);if(x.getAttribute("text")){if(x.getAttribute("text")._dhx_trim()==""){H.setComboCValue("&nbsp;","")}else{H.setComboCValue(x.getAttribute("text"))}}else{if((!H.cell.combo_value)||(H.cell.combo_value._dhx_trim()=="")){H.setComboCValue("&nbsp;","")}else{if(!y.getOption(H.cell.combo_value)){H.setComboCValue(H.cell.combo_value)}else{H.setComboCValue(y.getOption(H.cell.combo_value).text,H.cell.combo_value)}}}}}}if(x.getAttribute("source")){if(x.getAttribute("auto")&&window.dhx4.s2b(x.getAttribute("auto"))){if(x.getAttribute("xmlcontent")){var H=(this.cell)?this:D.cells(F,c);if(x.getAttribute("text")){H.setComboCValue(x.getAttribute("text"))}}else{D.forEachRowA(function(h){var a=D.cells(h,c);if(!a.cell._brval&&!a.cell._cellType){var e=a.cell.combo_value.toString();if(e.indexOf("^")!=-1){var g=e.split("^");a.cell.combo_value=g[0];a.setComboCValue(g[1])}}})}y.enableFilteringMode(true,x.getAttribute("source"),window.dhx4.s2b(x.getAttribute("cache")||true),window.dhx4.s2b(x.getAttribute("sub")||false))}else{var v=this;var A=arguments.length;y.load(x.getAttribute("source"),function(){if(A==4){D.forEachRow(function(e){var g=D.cells(e,c);if(!g.cell._brval&&!g.cell._cellType){if(y.getOption(g.cell.combo_value)){g.setComboCValue(y.getOption(g.cell.combo_value).text,g.cell.combo_value)}else{if((g.cell.combo_value||"").toString()._dhx_trim()==""){g.setComboCValue("&nbsp;","");g.cell._clearCell=true}else{g.setComboCValue(g.cell.combo_value)}}}})}else{var a=D.cells(F,c);if(y.getOption(a.cell.combo_value)){a.setComboCValue(y.getOption(a.cell.combo_value).text,a.cell.combo_value)}else{a.setComboCValue(a.cell.combo_value)}}})}}if(!x.getAttribute("auto")||!window.dhx4.s2b(x.getAttribute("auto"))){if(x.getAttribute("editable")&&!window.dhx4.s2b(x.getAttribute("editable"))){y.readonly(true)}if(x.getAttribute("filter")&&window.dhx4.s2b(x.getAttribute("filter"))){y.enableFilteringMode(true)}}};eXcell_combo.prototype.getCellCombo=function(){if(this.cell._brval){return this.cell._brval}this.cell._brval=this.initCombo();return this.cell._brval};eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXGridObject.prototype.getColumnCombo=function(c){if(this._col_combos&&this._col_combos[c]){return this._col_combos[c]}if(!this._col_combos){this._col_combos=[]}this._col_combos[c]=eXcell_combo.prototype.initCombo.call({grid:this},c);return this._col_combos[c]};dhtmlXGridObject.prototype.refreshComboColumn=function(c){this.forEachRow(function(a){if(this.cells(a,c).refreshCell){this.cells(a,c).refreshCell()}})};function eXcell_clist(e){try{this.cell=e;this.grid=this.cell.parentNode.grid}catch(g){}this.edit=function(){this.val=this.getValue();var s=(this.cell._combo||this.grid.clists[this.cell._cellIndex]);if(!s){return}this.obj=document.createElement("DIV");var u=this.val.split(",");var v="";for(var a=0;a<s.length;a++){var w=false;for(var r=0;r<u.length;r++){if(s[a]==u[r]){w=true}}if(w){v+="<div><input type='checkbox' id='dhx_clist_"+a+"' checked='true' /><label for='dhx_clist_"+a+"'>"+s[a]+"</label></div>"}else{v+="<div><input type='checkbox' id='dhx_clist_"+a+"'/><label for='dhx_clist_"+a+"'>"+s[a]+"</label></div>"}}v+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>";this.obj.editor=this;this.obj.innerHTML=v;document.body.appendChild(this.obj);this.obj.style.position="absolute";this.obj.className="dhx_clist";this.obj.onclick=function(h){(h||event).cancelBubble=true;return true};var c=this.grid.getPosition(this.cell);this.obj.style.left=c[0]+"px";this.obj.style.top=c[1]+this.cell.offsetHeight+"px";this.obj.getValue=function(){var h="";for(var l=0;l<this.childNodes.length-1;l++){if(this.childNodes[l].childNodes[0].checked){if(h){h+=", "}h+=this.childNodes[l].childNodes[1].innerHTML}}return h.replace(/&amp;/g,"&")}};this.getValue=function(){if(this.cell._clearCell){return""}return this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&").replace(/, /g,",")};this.detach=function(a){if(this.obj){this.setValue(this.obj.getValue());this.obj.editor=null;this.obj.parentNode.removeChild(this.obj);this.obj=null}return this.val!=this.getValue()}}eXcell_clist.prototype=new eXcell;eXcell_clist.prototype.setValue=function(h){if(typeof(h)=="object"){var l=dhx4.ajax.xpath("./option",h);if(l.length){this.cell._combo=[]}for(var g=0;g<l.length;g++){this.cell._combo.push(l[g].firstChild?l[g].firstChild.data:"")}h=h.firstChild.data}if(h===""||h===this.undefined){this.setCTxtValue(" ",h);this.cell._clearCell=true}else{h=h.replace(/,[ ]*/g,", ");this.setCTxtValue(h);this.cell._clearCell=false}};dhtmlXGridObject.prototype.registerCList=function(e,g){if(!this.clists){this.clists=new Array()}if(typeof(g)!="object"){g=g.split(",")}this.clists[e]=g};function eXcell_calck(e){try{this.cell=e;this.grid=this.cell.parentNode.grid}catch(g){}this.edit=function(){this.val=this.getValue();var a=this.grid.getPosition(this.cell);this.obj=new calcX(a[0],a[1]+this.cell.offsetHeight,this,this.val)};this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){if(this.obj){this.setValue(this.obj.inputZone.value);this.obj.removeSelf()}this.obj=null;return this.val!=this.getValue()}}eXcell_calck.prototype=new eXcell;eXcell_calck.prototype.setValue=function(c){if(!c||c.toString()._dhx_trim()==""){c="0"}this.setCValue(this.grid._aplNF(c,this.cell._cellIndex),c)};function calcX(left,top,onReturnSub,val){this.top=top||0;this.left=left||0;this.onReturnSub=onReturnSub||null;this.operandA=0;this.operandB=0;this.operatorA="";this.state=0;this.dotState=0;this.calckGo=function(){return(eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1"))};this.isNumeric=function(str){return((str.search(/[^1234567890]/gi)==-1)?(true):(false))};this.isOperation=function(str){return((str.search(/[^\+\*\-\/]/gi)==-1)?(true):(false))};this.onCalcKey=function(e){that=this.calk;var z=this.innerHTML;var rZone=that.inputZone;if(((that.state==0)||(that.state==2))&&(that.isNumeric(z))){if(rZone.value!="0"){rZone.value+=z}else{rZone.value=z}}if((((that.state==0)||(that.state==2))&&(z=="."))&&(that.dotState==0)){that.dotState=1;rZone.value+=z}if((z=="C")){rZone.value=0;that.dotState=0;that.state=0}if((that.state==0)&&(that.isOperation(z))){that.operatorA=z;that.operandA=rZone.value;that.state=1}if((that.state==2)&&(that.isOperation(z))){that.operandB=rZone.value;rZone.value=that.calckGo();that.operatorA=z;that.operandA=rZone.value;that.state=1}if((that.state==2)&&(z=="=")){that.operandB=rZone.value;rZone.value=that.calckGo();that.operatorA=z;that.operandA=rZone.value;that.state=3}if((that.state==1)&&(that.isNumeric(z))){rZone.value=z;that.state=2;that.dotState=0}if((that.state==3)&&(that.isNumeric(z))){rZone.value=z;that.state=0}if((that.state==3)&&(that.isOperation(z))){that.operatorA=z;that.operandA=rZone.value;that.state=1}if(z=="e"){rZone.value=Math.E;if(that.state==1){that.state=2}that.dotState=0}if(z=="p"){rZone.value=Math.PI;if(that.state==1){that.state=2}that.dotState=0}if(z=="Off"){that.topNod.parentNode.removeChild(that.topNod)}if(e||event){(e||event).cancelBubble=true}};this.sendResult=function(){that=this.calk;if(that.state==2){var rZone=that.inputZone;that.operandB=rZone.value;rZone.value=that.calckGo();that.operatorA=z;that.operandA=rZone.value;that.state=3}var z=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod);that.onReturnSub.grid.editStop(false)};this.removeSelf=function(){if(this.topNod.parentNode){this.topNod.parentNode.removeChild(this.topNod)}};this.keyDown=function(){this.className="calcPressed"};this.keyUp=function(){this.className="calcButton"};this.init_table=function(){var table=this.topNod.childNodes[0];if((!table)||(table.tagName!="TABLE")){return}for(i=1;i<table.childNodes[0].childNodes.length;i++){for(j=0;j<table.childNodes[0].childNodes[i].childNodes.length;j++){table.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey;table.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown;table.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp;table.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp;table.childNodes[0].childNodes[i].childNodes[j].calk=this}}this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0];if(this.onReturnSub){this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult;this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this}else{this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}};this.drawSelf=function(){var div=document.createElement("div");div.className="calcTable";div.style.position="absolute";div.style.top=this.top+"px";div.style.left=this.left+"px";div.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'></td><td class='calkSubmit'>=</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton'>C</td><td class='calcButton'>=</td></tr></table>";div.onclick=function(e){(e||event).cancelBubble=true};document.body.appendChild(div);this.topNod=div};this.drawSelf();this.init_table();if(val){var rZone=this.inputZone;rZone.value=val*1;this.operandA=val*1;this.state=3}return this}dhtmlXGridObject.prototype._updateTGRState=function(c){if(!c.update||c.id==0){return}if(this.rowsAr[c.id].imgTag){this.rowsAr[c.id].imgTag.src=this.iconTree+c.state+".gif"}c.update=false};dhtmlXGridObject.prototype.doExpand=function(l){this.editStop();var h=l.parentNode.parentNode.parentNode;var g=this._h2.get[h.idd];if(!this.callEvent("onOpen",[h.idd,(g.state=="plus"?-1:1)])){return}if(g.state=="plus"){this.expandKids(h)}else{if((g.state=="minus")&&(!g._closeable)){this.collapseKids(h)}}};dhtmlXGridObject.prototype._createHierarchy=function(){if(!this._emptyLineImg){this._emptyLineImg="blank"}return new dhtmlxHierarchy({_emptyLineImg:this._emptyLineImg})};function dhtmlxHierarchy(e){var g={id:0,childs:[],level:-1,parent:null,index:0,state:e._emptyLineImg};this.order=[g];this.get={"0":g};this.swap=function(m, n){var c=m.parent;var a=m.welcome;c.childs[a]=n;c.childs[n.welcome]=m;m.index=n.welcome;n.index=a};this.forEachChildF=function(u, s, c, r){var a=this.get[u];for(var o=0; o<a.childs.length; o++){if(!s.apply((c||this),[a.childs[o]])){continue}if(a.childs[o].childs.length){this.forEachChildF(a.childs[o].id,s,c,r)}if(r){r.call((c||this),a.childs[o])}}};this.forEachChild=function(a, r, n){var c=this.get[a];for(var o=0; o<c.childs.length; o++){r.apply((n||this),[c.childs[o]]);if(c.childs[o].childs.length){this.forEachChild(c.childs[o].id,r,n)}}};this.change=function(a, n, c){var m=this.get[a];if(m[n]==c){return}m[n]=c;m.update=true};this.add=function(a, c){return this.addAfter(a,c)};this.addAfter=function(v, x, s, u){var y=this.get[x||0];if(s){var a=this.get[s].welcome+(u?0:1)}else{var a=y.childs.length}var w={id:v,childs:[],level:y.level+1,parent:y,index:a,state:e._emptyLineImg};if(y.state==e._emptyLineImg){this.change(x,"state",(x==0?"minus":"plus"))}if(s){for(var c=a; c<y.childs.length; c++){y.childs[c].welcome++}y.childs=y.childs.slice(0,a).concat([w]).concat(y.childs.slice(a,y.childs.length))}else{y.childs.push(w)}this.get[v]=w;return w};this.addBefore=function(a, c, l){return this.addAfter(a,c,l,true)};this.remove=function(a){var c=this.get[a||0];for(var l=0; l<c.childs.length; l++){this.deleteAll(c.childs[l].id)}c.childs=[];c.parent.childs=c.parent.childs.slice(0,c.welcome).concat(c.parent.childs.slice(c.welcome+1));for(var l=c.welcome; l<c.parent.childs.length; l++){c.parent.childs[l].welcome--}delete this.get[a]};this.deleteAll=function(a){var c=this.get[a||0];for(var l=0; l<c.childs.length; l++){this.deleteAll(c.childs[l].id)}c.childs=[];delete this.get[a]};return this}dhtmlXGridObject.prototype._getOpenLenght=function(l, m){var n=this._h2.get[l].childs;m+=n.length;for(var h=0; h<n.length; h++){if(n[h].childs.length&&n[h].state=="minus"){m+=this._getOpenLenght(n[h].id,0)}}return m};dhtmlXGridObject.prototype.collapseKids=function(o){var n=this._h2.get[o.idd];if(n.state!="minus"){return}if(!this.callEvent("onOpenStart",[o.idd,1])){return}var m=o.rowIndex;if(m<0){m=this.rowsCol._dhx_find(o)+1}this._h2.change(n.id,"state","plus");this._updateTGRState(n);if(this._srnd||this.pagingOn){this._h2_to_buff();this._renderSort()}else{var l=this._getOpenLenght(this.rowsCol[m-1].idd,0);for(var r=0;r<l;r++){this.rowsCol[m+r].parentNode.removeChild(this.rowsCol[m+r])}this.rowsCol.splice(m,l)}this.callEvent("onGridReconstructed",[]);this.setSizes();this._h2_to_buff();this.callEvent("onOpenEnd",[o.idd,-1])};dhtmlXGridObject.prototype._massInsert=function(C,y,x,r){var w=[];var s=(_isKHTML?this.obj:this.obj.rows[0].parentNode);this._h2_to_buff();if(this._srnd||this.pagingOn){return this._renderSort()}var u=this._getOpenLenght(C.id,0);for(var v=0;v<u;v++){var A=this.render_row(x+v);if(y){y.parentNode.insertBefore(A,y)}else{s.appendChild(A)}w.push(A)}this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,x).concat(w).concat(this.rowsCol.slice(x)));return C.childs.length+w.length};dhtmlXGridObject.prototype.expandKids=function(r,m){var o=this._h2.get[r.idd];if((!o.childs.length)&&(!o._xml_await)){return}if(o.state!="plus"){return}if(!o._loading&&!m){if(!this.callEvent("onOpenStart",[o.id,-1])){return}}var n=this.getRowIndex(o.id)+1;if(o.childs.length){o._loading=false;this._h2.change(o.id,"state","minus");this._updateTGRState(o);var l=this._massInsert(o,this.rowsCol[n],n);this.callEvent("onGridReconstructed",[])}else{if(o._xml_await){o._loading=true;if(this.callEvent("onDynXLS",[o.id])){this.load(this.kidsXmlFile+""+(this.kidsXmlFile.indexOf("?")!=-1?"&":"?")+"id="+encodeURIComponent(o.id),this._data_type)}}}this.setSizes();if(!o._loading){this.callEvent("onOpenEnd",[o.id,1])}this._fixAlterCss()};dhtmlXGridObject.prototype.kidsXmlFile="";dhtmlXGridObject.prototype.sortTreeRows=function(v,u,s){var r="getValue";if(this.cells5({parentNode:{grid:this}},this.getColType(v)).getDate){r="getDate";u="str"}this.forEachRow(function(a){var c=this._h2.get[a];if(!c){return}var e=this._get_cell_value(c.buff,v,r);if(u=="int"){c._sort=parseFloat(e);c._sort=isNaN(c._sort)?-99999999999999:c._sort}else{c._sort=e}});var w=this;var y=1;var o=-1;if(s=="des"){y=-1;o=1}var x=null;if(typeof u=="function"){x=function(a,c){return u(a._sort,c._sort,s,a.id,c.id)}}else{if(u=="cus"){x=function(a,c){return w._customSorts[v](a._sort,c._sort,s,a.id,c.id)}}if(u=="str"){x=function(a,c){return(a._sort<c._sort?o:(a._sort==c._sort?0:y))}}if(u=="int"){x=function(a,c){return(a._sort<c._sort?o:(a._sort==c._sort?0:y))}}if(u=="date"){x=function(a,c){return(Date.parse(new Date(a._sort||"01/01/1900"))-Date.parse(new Date(c._sort||"01/01/1900")))*y}}}this._sortTreeRows(x,0);this._renderSort(0,true);this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._sortTreeRows=function(h,l){var n=this._h2.get[l].childs;if(this.rowsCol.stablesort){this.rowsCol.stablesort.call(n,h)}else{n.sort(h)}for(var m=0; m<n.length; m++){if(n[m].childs.length){this._sortTreeRows(h,n[m].id)}n[m].index=m}};dhtmlXGridObject.prototype._renderSort=function(h, l){this._h2_to_buff();var g=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=g};dhtmlXGridObject.prototype._fixAlterCssTGR=function(){if(!this._realfake){this._h2.forEachChild(0,function(e){if(e.buff.tagName=="TR"){var g=(this._cssSP?(e.level%2):(e.welcome%2))?this._cssUnEven:this._cssEven;this.rowsAr[e.id].className=(g+(this._cssSU?(" "+g+"_"+e.level):""))+" "+(this.rowsAr[e.id]._css||"")+((this.rowsAr[e.id].className.indexOf("rowselected")!=-1)?" rowselected":"")}},this)}};dhtmlXGridObject.prototype.moveRowUDTG=function(A, w){var s=this._h2.get[A];var y=s.parent.childs[s.welcome+w];if((!y)||(y.parent!=s.parent)){return}var C=[s.state,y.state];this.collapseKids(this.rowsAr[s.id]);this.collapseKids(this.rowsAr[y.id]);var x=this.rowsCol._dhx_find(this.rowsAr[A]);var u=this.rowsBuffer._dhx_find(this.rowsAr[A]);var r=this.obj.rows[0].parentNode.removeChild(this.rowsCol[x]);var v=this.rowsCol[x+((w==1)?2:w)];if(v){v.parentNode.insertBefore(r,v)}else{this.obj.rows[0].parentNode.appendChild(r)}this.rowsCol._dhx_swapItems(x,x+w);this.rowsBuffer._dhx_swapItems(u,u+w);this._h2.swap(y,s);if(C[0]=="minus"){this.expandKids(this.rowsAr[s.id])}if(C[1]=="minus"){this.expandKids(this.rowsAr[y.id])}this._fixAlterCss(Math.min(x,x+w))};function eXcell_tree(c){if(c){this.cell=c;this.grid=this.cell.parentNode.grid}this.isDisabled=function(){return this.cell._disabled||this.grid._edtc};this.edit=function(){if((this.er)||(this.grid._edtc)){return}this.er=this.cell.parentNode.valTag;this.val=this.getLabel();this.cell.atag=((!this.grid.multiLine)&&(_isKHTML||_isMacOS||_isFF))?"INPUT":"TEXTAREA";this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'></"+this.cell.atag+">";this.er.childNodes[0].onmousedown=function(a){(a||event).cancelBubble=true};this.er.childNodes[0].onselectstart=function(a){if(!a){a=event}a.cancelBubble=true;return true};this.er.className+=" editable";this.er.firstChild.onclick=function(a){(a||event).cancelBubble=true};this.er.firstChild.value=this.val;this.obj=this.er.firstChild;this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px";this.er.firstChild.focus();if(_isIE){this.er.firstChild.focus()}};this.detach=function(){if(!this.er){return}this.setLabel(this.er.firstChild.value);this.er.className=this.er.className.replace("editable","");var a=(this.val!=this.er.innerHTML);this.obj=this.er=null;return(a)};this.getValue=function(){return this.getLabel()};this.setImage=function(a){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+a;this.grid._h2.get[this.cell.parentNode.idd].image=a};this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image};this.setLabel=function(a){this.setValueA(a)};this.getLabel=function(a){return this.cell.parentNode.valTag.innerHTML}}eXcell_tree.prototype=new eXcell;eXcell_tree.prototype.setValueA=function(c){this.cell.parentNode.valTag.innerHTML=c;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,c])};eXcell_tree.prototype.setValue=function(r){if(this.cell.parentNode.imgTag){return this.setLabel(r)}if((this.grid._tgc.iconTree==null)||(this.grid._tgc.iconTree!=this.grid.iconTree)){var s={};s.spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>";s.imst="<img style='margin-top:-2px;' src='"+this.grid.iconTree;s.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree);s.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>";s.plus=s.imst+"plus.gif"+s.imact;s.minus=s.imst+"minus.gif"+s.imact;s.blank=s.imst+"blank.gif"+s.imact;s.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>";s.itemim="' align='top' "+(this.grid._img_height?(' height="'+this.grid._img_height+'"'):"")+(this.grid._img_width?(' width="'+this.grid._img_width+'"'):"")+" ><span id='nodeval'>";s.close="</span></div>";this.grid._tgc=s}var o=this.grid._h2;var s=this.grid._tgc;var u=this.cell.parentNode.idd;var n=this.grid._h2.get[u];if(this.grid.kidsXmlFile||this.grid._slowParse){n.has_kids=(n.has_kids||(this.cell.parentNode._attrs.xmlkids&&(n.state!="minus")));n._xml_await=!!n.has_kids}n.image=n.image||(this.cell._attrs.image||"leaf.gif");n.label=r;var v=[s.start];for(var w=0; w<n.level; w++){v.push(s.spacer)}if(n.has_kids){v.push(s.plus);n.state="plus"}else{v.push(s.imst+n.state+".gif"+s.imact)}v.push(s.imsti);v.push(n.image);v.push(s.itemim);v.push(n.label);v.push(s.close);this.cell.innerHTML=v.join("");this.cell._treeCell=true;this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[n.level];this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[n.level+2];if(_isKHTML){this.cell.vAlign="header.html"}if(n.parent.id!=0&&n.parent.state=="plus"){this.grid._updateTGRState(n.parent,false);this.cell.parentNode._skipInsert=true}this.grid.callEvent("onCellChanged",[u,this.cell._cellIndex,r])};dhtmlXGridObject.prototype._process_tree_xml=function(s, y){this._parsing=true;var r=false;if(!y){this.render_row=this.render_row_tree;r=true;y=s.getAttribute("parent")||0;if(y=="0"){y=0}if(!this._h2){this._h2=this._createHierarchy()}if(this._fake){this._fake._h2=this._h2}}var u=dhx4.ajax.xpath(this.xml.row,s);this._open=this._open||[];for(var w=0;w<u.length;w++){var x=u[w].getAttribute("id");if(!x){x=this.uid();u[w].setAttribute("id",x)}var o=this._h2.add(x,y);o.buff={idd:x,data:u[w],_parser:this._process_xml_row,_locator:this._get_xml_data};if(u[w].getAttribute("open")){o.state="minus";this._open.push(x)}this.rowsAr[x]=o.buff;this._process_tree_xml(u[w],x)}if(r){if(!u.length){this._h2.change(y,"state",this._emptyLineImg)}else{if(y!=0&&!this._srnd){this._h2.change(y,"state","minus")}}for(var w=0;w<this._open.length;w++){var v=this._h2.get[this._open[w]];if(!v.childs.length){v.state=this._emptyLineImg}}this._updateTGRState(this._h2.get[y]);this._h2_to_buff();if(y!=0&&this._srnd){this.openItem(y)}else{if(this.pagingOn){this._renderSort()}else{this.render_dataset()}}if(this.kidsXmlFile){for(var w=0;w<this._open.length;w++){var v=this._h2.get[this._open[w]];if(v._xml_await){this.expandKids({idd:v.id})}}}this._open=[];if(this._slowParse===false){this.forEachRow(function(a){this.render_row_tree(0,a)})}this._parsing=false;if(y!=0&&!this._srnd){this.callEvent("onOpenEnd",[y,1])}}};dhtmlXGridObject.prototype._h2_to_buff=function(g){if(!g){g=this._h2.get[0];this.rowsBuffer=new dhtmlxArray();if(this._fake&&!this._realfake){this._fake.rowsBuffer=this.rowsBuffer}}for(var e=0;e<g.childs.length;e++){this.rowsBuffer.push(g.childs[e].buff);if(g.childs[e].state=="minus"){this._h2_to_buff(g.childs[e])}}};dhtmlXGridObject.prototype.render_row_tree=function(n,l){if(l){var h=this._h2.get[l];h=h?h.buff:h}else{var h=this.rowsBuffer[n]}if(!h){return -1}if(h._parser){if(this.rowsAr[h.idd]&&this.rowsAr[h.idd].tagName=="TR"){return this._h2.get[h.idd].buff=this.rowsBuffer[n]=this.rowsAr[h.idd]}var m=this._prepareRow(h.idd);this.rowsAr[h.idd]=m;if(!l){this.rowsBuffer[n]=m}this._h2.get[h.idd].buff=m;h._parser.call(this,m,h.data);this._postRowProcessing(m);return m}return h};dhtmlXGridObject.prototype._removeTrGrRow=function(n,r){if(r){this._h2.forEachChild(r.id,function(a){this._removeTrGrRow(null,a);delete this.rowsAr[a.id]},this);return}var m=this.getRowIndex(n.idd);var r=this._h2.get[n.idd];if(m!=-1&&m!==this.undefined){var l=1;if(r&&r.state=="minus"){l+=this._getOpenLenght(r.id,0)}for(var o=0;o<l;o++){if(this.rowsCol[o+m]){this.rowsCol[o+m].parentNode.removeChild(this.rowsCol[o+m])}}if(this._fake){for(var o=0;o<l;o++){if(this._fake.rowsCol[o+m]){this._fake.rowsCol[o+m].parentNode.removeChild(this._fake.rowsCol[o+m])}}if(l>1){this._fake.rowsCol.splice(m+1,l-1)}}this.rowsCol.splice(m,l);this.rowsBuffer.splice(m,l)}if(!r){return}this._removeTrGrRow(null,r);delete this.rowsAr[r.id];if(r.parent.childs.length==1){this._h2.change(r.parent.id,"state",this._emptyLineImg);this._updateTGRState(r.parent)}this._h2.remove(r.id)};dhtmlXGridObject.prototype.openItem=function(l){var h=this._h2.get[l||0];var g=this.getRowById(l||0);if(!g){return}if(h.parent&&h.parent.id!=0){this.openItem(h.parent.id)}this.expandKids(g)};dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow;dhtmlXGridObject.prototype.addRow=function(y,o,u,v,s,x){if(!this._h2){return this._addRowClassic(y,o,u)}v=v||0;var w=this.cellType._dhx_find("tree");if(typeof(o)=="string"){o=o.split(this.delim)}var r=this._h2.get[y];if(!r){if(v==0){u=this.rowsBuffer.length}else{u=this.getRowIndex(v)+1;if(this._h2.get[v].state=="minus"){u+=this._getOpenLenght(v,0)}else{this._skipInsert=true}}}r=r||this._h2.add(y,v);r.image=s;r.has_kids=x;return r.buff=this._addRowClassic(y,o,u)};dhtmlXGridObject.prototype.addRowBefore=function(w,s,v,y,x){var o=this.rowsAr[v];if(!o){return}if(!this._h2){return this.addRow(w,s,this.getRowIndex(v))}var r=this._h2.get[v].parent.id;var u=this.getRowIndex(v);if(u==-1){this._skipInsert=true}this._h2.addBefore(w,r,v);return this.addRow(w,s,u,this._h2.get[v].parent.id,y,x)};dhtmlXGridObject.prototype.addRowAfter=function(w,s,v,y,x){var o=this.rowsAr[v];if(!o){return}if(!this._h2){return this.addRow(w,s,this.getRowIndex(v)+1)}var r=this._h2.get[v].parent.id;var u=this.getRowIndex(v);if(u==-1){this._skipInsert=true}if(this._h2.get[v].state=="minus"){u+=this._getOpenLenght(v,0)+1}else{u++}this._h2.addAfter(w,r,v);return this.addRow(w,s,u,r,y,x)};dhtmlXGridObject.prototype.enableSmartXMLParsing=function(c){this._slowParse=dhx4.s2b(c)};dhtmlXGridObject.prototype._copyTreeGridRowContent=function(h,n,m){var l=this.cellType._dhx_find("tree");for(i=0;i<h.cells.length;i++){if(i!=l){this.cells(m,i).setValue(this.cells(n,i).getValue())}else{this.cells(m,i).setValueA(this.cells(n,i).getValue())}}};dhtmlXGridObject.prototype.closeItem=function(g){var e=this.getRowById(g);if(!e){return}this.collapseKids(e)};dhtmlXGridObject.prototype.deleteChildItems=function(e){var g=this._h2.get[e];if(!g){return}while(g.childs.length){this.deleteRow(g.childs[0].id)}};dhtmlXGridObject.prototype.getAllSubItems=function(n){var l=[];var m=this._h2.get[n||0];if(m){for(var h=0;h<m.childs.length;h++){l.push(m.childs[h].id);if(m.childs[h].childs.length){l=l.concat(this.getAllSubItems(m.childs[h].id).split(this.delim))}}}return l.join(this.delim)};dhtmlXGridObject.prototype.getChildItemIdByIndex=function(l,g){var h=this._h2.get[l||0];if(!h){return null}return(h.childs[g]?h.childs[g].id:null)};dhtmlXGridObject.prototype.getItemText=function(c){return this.cells(c,this.cellType._dhx_find("tree")).getLabel()};dhtmlXGridObject.prototype.getOpenState=function(e){var g=this._h2.get[e||0];if(!g){return}if(g.state=="minus"){return true}return false};dhtmlXGridObject.prototype.getParentId=function(e){var g=this._h2.get[e||0];if((!g)||(!g.parent)){return null}return g.parent.id};dhtmlXGridObject.prototype.getSubItems=function(n){var l=[];var m=this._h2.get[n||0];if(m){for(var h=0;h<m.childs.length;h++){l.push(m.childs[h].id)}}return l.join(this.delim)};dhtmlXGridObject.prototype.expandAll=function(c){this._renderAllExpand(c||0);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);if(this._redrawLines){this._redrawLines()}};dhtmlXGridObject.prototype._renderAllExpand=function(h){var g=this._h2.get[h].childs;for(var l=0;l<g.length;l++){if(g[l].childs.length){this._h2.change(g[l].id,"state","minus");this._updateTGRState(g[l]);this._renderAllExpand(g[l].id)}}};dhtmlXGridObject.prototype.collapseAll=function(c){this._h2.forEachChild((c||0),function(a){if(a&&a.state=="minus"){a.state="plus";a.update=true;this._updateTGRState(a)}},this);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);if(this._redrawLines){this._redrawLines()}};dhtmlXGridObject.prototype.hasChildren=function(g){var e=this._h2.get[g];if(e&&e.childs.length){return e.childs.length}if(e._xml_await){return -1}return 0};dhtmlXGridObject.prototype.setItemCloseable=function(h,l){var g=this._h2.get[h];if(!g){return}g._closeable=(!dhx4.s2b(l))};dhtmlXGridObject.prototype.setItemText=function(e,g){return this.cells(e,this.cellType._dhx_find("tree")).setLabel(g)};dhtmlXGridObject.prototype.setItemImage=function(g,e){this._h2.get[g].image=e;this.rowsAr[g].imgTag.nextSibling.src=(this.iconURL||"")+e};dhtmlXGridObject.prototype.getItemImage=function(c){this.getRowById(c);return this._h2.get[c].image};dhtmlXGridObject.prototype.setImageSize=function(g,e){this._img_width=g;this._img_height=e};dhtmlXGridObject.prototype._getRowImage=function(c){return this._h2.get[c.idd].image};dhtmlXGridObject.prototype.setOnOpenStartHandler=function(c){this.attachEvent("onOpenStart",c)};dhtmlXGridObject.prototype.setOnOpenEndHandler=function(c){this.attachEvent("onOpenEnd",c)};dhtmlXGridObject.prototype.enableTreeCellEdit=function(c){this._edtc=!dhx4.s2b(c)};dhtmlXGridObject.prototype.getLevel=function(e){var g=this._h2.get[e||0];if(!g){return -1}return g.level};dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(g, e){for(i in this.rowsAr){if((this.rowsAr[i])&&(this.rowsAr[i].childNodes)){this.rowsAr[i].childNodes[g].style.display=e}}};dhtmlXGridObject.prototype._updateLine=function(m, n){n=n||this.rowsAr[m.id];if(!n){return}var h=n.imgTag;if(!h){return}if(m.state=="blank"){return h.src=this.iconTree+"blank.gif"}var l=1;if(m.welcome==0){if(m.level==0){if((m.parent.childs.length-1)>m.welcome){l=3}else{l=1}}else{if((m.parent.childs.length-1)>m.welcome){l=3}else{l=2}}}else{if((m.parent.childs.length-1)>m.welcome){l=3}else{l=2}}h.src=this.iconTree+m.state+l+".gif"};dhtmlXGridObject.prototype._updateParentLine=function(l, m){m=m||this.rowsAr[l.id];if(!m){return}var h=m.imgTag;if(!h){return}for(var n=l.level; n>0; n--){if(l.id==0){break}h=h.previousSibling;l=l.parent;if((l.parent.childs.length-1)>l.welcome){h.src=this.iconTree+"line1.gif"}else{h.src=this.iconTree+"blank.gif"}}};dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort;dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments);this._redrawLines(0)};dhtmlXGridObject.prototype._redrawLines=function(c){if(this._tgle){this._h2.forEachChild((c||0),function(a){this._updateLine(a);this._updateParentLine(a)},this)}};dhtmlXGridObject.prototype.enableTreeGridLines=function(){this._emptyLineImg="line";this._updateTGRState=function(g, e){if(e||!g.update||g.id==0){return}if(this._tgle){this._updateLine(g,this.rowsAr[g.id])}g.update=false};this._tgle=true;this.attachEvent("onXLE",function(h, l, a){this._redrawLines(a)});this.attachEvent("onOpenEnd",function(c){this._redrawLines(c)});this.attachEvent("onRowAdded",function(g){var e=this._h2.get[g];this._updateLine(e);this._updateParentLine(e);if(e.welcome<(e.parent.childs.length-1)){e=e.parent.childs[e.welcome+1];this._updateLine(e);this._updateParentLine(e)}else{if(e.welcome!=0){e=e.parent.childs[e.welcome-1];this._updateLine(e);this._updateParentLine(e);if(e.childs.length){this._h2.forEachChild(e.id,function(a){this._updateParentLine(a)},this)}}}});this.attachEvent("onOpen",function(l, n){if(n){var m=this._h2.get[l];for(var h=0; h<m.childs.length; h++){this._updateParentLine(m.childs[h])}}return true});this.attachEvent("onBeforeRowDeleted",function(l){var n=this;var m=this._h2.get[l];var h=null;if(m.welcome!=0){h=m.parent.childs[m.welcome-1]}m=m.parent;window.setTimeout(function(){m=n._h2.get[m.id];if(!m){return}n._updateLine(m);n._updateParentLine(m);if(h){n._updateLine(h);if(h.state=="minus"){n._h2.forEachChild(h.id,function(a){n._updateParentLine(a)},n)}}},1);return true})};dhtmlXGridObject.prototype.setFiltrationLevel=function(h, g, l){this._tr_strfltr=h;this._tr_fltr_c=g;this._tr_fltr_d=l;this.refreshFilters()};dhtmlXGridObject.prototype.filterTreeBy=function(r, o, s){var n=this._h2;if(typeof this._tr_strfltr=="undefined"){this._tr_strfltr=-1}if(this._f_rowsBuffer){if(!s){this._h2=this._f_rowsBuffer;if(this._fake){this._fake._h2=this._h2}}}else{this._f_rowsBuffer=this._h2}var m=true;this.dma(true);this._fbf={};if(typeof(r)=="object"){for(var u=0;u<o.length;u++){this._filterTreeA(r[u],o[u])}}else{this._filterTreeA(r,o)}this._fbf=null;this.dma(false);this._fix_filtered_images(this._h2,n);this._renderSort();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._filterTreeA=function(C,u){if(u==""){return}var w=true;if(typeof(u)=="function"){w=false}else{u=(u||"").toString().toLowerCase()}var D=function(c,e,g){var a=g.get[c.parent.id];if(!a){a=D(c.parent,e,g)}var g=s.get[c.id];if(!g){g={id:c.id,childs:[],level:c.level,parent:a,index:a.childs.length,image:c.image,state:c.state,buff:c.buff,has_kids:c.has_kids,_xml_await:c._xml_await};a.childs.push(g);s.get[g.id]=g}return g};var v=this._fbf;var s=this._createHierarchy();var E;var y=this._tr_strfltr;var x=this;var A=function(a){for(var c=0;c<a.childs.length;c++){x.temp(a.childs[c])}};switch(y.toString()){case"-2":E=function(a){if(v[a.id]){return false}A(a);return true};break;case"-1":E=function(a){return !a.childs.length};break;default:E=function(a){return y==a.level};break}this.temp=function(a){if(a.id!=0&&E(a)){if(w?(this._get_cell_value(a.buff,C).toString().toLowerCase().indexOf(u)==-1):(!u(this._get_cell_value(a.buff,C),a.id))){v[a.id]=true;if(this._tr_fltr_c){D(a.parent,this._h2,s)}return false}else{D(a,this._h2,s);if(a.childs&&y!=-2){this._h2.forEachChild(a.id,function(c){D(c,this._h2,s)},this)}return true}}else{if(this._tr_fltr_d&&this._tr_strfltr>a.level&&a.id!=0){D(a,this._h2,s)}A(a)}};this.temp(this._h2.get[0]);this._h2=s;if(this._fake){this._fake._h2=this._h2}};dhtmlXGridObject.prototype._fix_filtered_images=function(g,e){g.forEachChild(0,function(c){if(!c.childs.length&&!c.has_kids){if(c.state!=this._emptyLineImg){c.state=this._emptyLineImg;c.update=true;this._updateTGRState(c)}}else{if(c.buff.tagName=="TR"){var a=e.get[c.id];if(a&&a.state!=this._emptyLineImg){c.state=a.state}c.update=true;this._updateTGRState(c)}}},this)};dhtmlXGridObject.prototype.collectTreeValues=function(u){if(typeof this._tr_strfltr=="undefined"){this._tr_strfltr=-1}this.dma(true);this._build_m_order();u=this._m_order?this._m_order[u]:u;var c={};var r=[];var o=this._f_rowsBuffer||this._h2;o.forEachChild(0,function(e){if(this._tr_strfltr==-2||(this._tr_strfltr==-1&&!e.childs.length)||(this._tr_strfltr==e.level)){var a=this._get_cell_value(e.buff,u);if(a){c[a]=true}}},this);this.dma(false);var s=this.combos[u];for(var n in c){if(c[n]===true){r.push(s?(s.get(n)||n):n)}}return r.sort()};dhtmlXGridObject.prototype._in_header_stat_tree_total=function(n,c,l){var m=function(){var a=0;this._build_m_order();var e=this._m_order?this._m_order[c]:c;this._h2.forEachChild(0,function(h){var g=parseFloat(this._get_cell_value((h.buff||this.rowsAr[h.id]),e));a+=isNaN(g)?0:g},this);return this._maskArr[c]?this._aplNF(a,c):(Math.round(a*100)/100)};this._stat_in_header(n,m,c,l,l)};dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(n,c,l){var m=function(){var a=0;this._build_m_order();var e=this._m_order?this._m_order[c]:c;this._h2.forEachChild(0,function(h){if(h.childs.length){return}var g=parseFloat(this._get_cell_value((h.buff||this.rowsAr[h.id]),e));a+=isNaN(g)?0:g},this);return this._maskArr[c]?this._aplNF(a,c):(Math.round(a*100)/100)};this._stat_in_header(n,m,c,l,l)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(r,m,c){var n=c[1].split(":");c[1]="";var o=function(){var a=0;this._h2.forEachChild(0,function(g){var e=parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),n[0]))*parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),n[1]));a+=isNaN(e)?0:e},this);return this._maskArr[m]?this._aplNF(a,m):(Math.round(a*100)/100)};this._stat_in_header(r,o,m,c,c)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(r,m,c){var n=c[1].split(":");c[1]="";var o=function(){var a=0;this._h2.forEachChild(0,function(g){if(g.childs.length){return}var e=parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),n[0]))*parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),n[1]));a+=isNaN(e)?0:e},this);return this._maskArr[m]?this._aplNF(a,m):(Math.round(a*100)/100)};this._stat_in_header(r,o,m,c,c)};dhtmlXGridObject.prototype._in_header_stat_tree_max=function(n,c,l){var m=function(){var a=-999999999;this._build_m_order();var e=this._m_order?this._m_order[c]:c;if(this.getRowsNum()==0){return""}this._h2.forEachChild(0,function(g){var h=parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),e));if(!isNaN(h)){a=Math.max(a,h)}},this);return this._maskArr[c]?this._aplNF(a,c):a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_min=function(n,c,l){var m=function(){var a=999999999;this._build_m_order();var e=this._m_order?this._m_order[c]:c;if(this.getRowsNum()==0){return""}this._h2.forEachChild(0,function(g){var h=parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),e));if(!isNaN(h)){a=Math.min(a,h)}},this);return this._maskArr[c]?this._aplNF(a,c):a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_average=function(n,c,l){var m=function(){var a=0;var e=0;this._build_m_order();var g=this._m_order?this._m_order[c]:c;this._h2.forEachChild(0,function(h){var r=parseFloat(this._get_cell_value((h.buff||this.rowsAr[h.id]),g));a+=isNaN(r)?0:r;e++},this);return this._maskArr[c]?this._aplNF(a,c):(Math.round(a/e*100)/100)};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(n,c,l){var m=function(){var a=-999999999;this._build_m_order();var e=this._m_order?this._m_order[c]:c;if(this.getRowsNum()==0){return""}this._h2.forEachChild(0,function(g){if(g.childs.length){return}var h=parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),e));if(!isNaN(h)){a=Math.max(a,h)}},this);return this._maskArr[c]?this._aplNF(a,c):a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(n,c,l){var m=function(){var a=999999999;this._build_m_order();var e=this._m_order?this._m_order[c]:c;if(this.getRowsNum()==0){return""}this._h2.forEachChild(0,function(g){if(g.childs.length){return}var h=parseFloat(this._get_cell_value((g.buff||this.rowsAr[g.id]),e));if(!isNaN(h)){a=Math.min(a,h)}},this);return this._maskArr[c]?this._aplNF(a,c):a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(n,c,l){var m=function(){var a=0;var e=0;this._build_m_order();var g=this._m_order?this._m_order[c]:c;this._h2.forEachChild(0,function(h){if(h.childs.length){return}var r=parseFloat(this._get_cell_value((h.buff||this.rowsAr[h.id]),g));a+=isNaN(r)?0:r;e++},this);return this._maskArr[c]?this._aplNF(a,c):(Math.round(a/e*100)/100)};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_count=function(n,c,l){var m=function(){var a=0;this._h2.forEachChild(0,function(e){a++},this);return a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(n,c,l){var m=function(){var a=0;this._h2.forEachChild(0,function(e){if(!e.childs.length){a++}},this);return a};this._stat_in_header(n,m,c,l)};dhtmlXGridObject.prototype._stat_in_header=function(u,s,o,c){var r=this;var n=function(){this.dma(true);u.innerHTML=(c[0]?c[0]:"")+s.call(this)+(c[1]?c[1]:"");this.dma(false);this.callEvent("onStatReady",[])};if(!this._stat_events){this._stat_events=[];this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var e=0;e<this._stat_events.length;e++){for(var a=0;a<4;a++){this.detachEvent(this._stat_events[e][a])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent("onGridReconstructed",n),this.attachEvent("onXLE",n),this.attachEvent("onFilterEnd",n),this.attachEvent("onEditCell",function(g,a,e){if(g==2&&e==o){n.call(this)}return true})]);u.innerHTML=""};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var c=0;c<this._c_order.length;c++){this._m_order[this._c_order[c]]=c}}};function dhtmlXForm(m,n,a){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var o=this;this.setSkin=function(c){this.skin=c;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=(c=="dhx_terrace"?"13px":"12px");this._updateBlocks();this.forEachItem(function(g){var e=o.getItemType(g);if(typeof(o.items[e])!="undefined"&&typeof(o.items[e].setSkin)=="function"){o.doWithItem(g,"setSkin",c)}})};this.skin=(a||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"dhx_skyblue");this.separator=",";this.live_validate=false;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=(typeof(m)=="object"?m:document.getElementById(m));if(!m._isNestedForm){this._parentForm=true;this.cont.style.fontSize=(this.skin=="dhx_terrace"?"13px":"12px");this.cont.className="dhxform_obj_"+this.skin;this.setFontSize=function(c){this.cont.style.fontSize=c;this._updateBlocks()};this.getForm=function(){return this};this.cont.onkeypress=function(c){c=(c||event);if(c.keyCode==13){var e=(c.target||c.srcElement);if(typeof(e.tagName)!="undefined"&&String(e.tagName).toLowerCase()=="textarea"&&!c.ctrlKey){return}o.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(h,g){if(this.b_index==null){this.b_index=0}else{this.b_index++}var y=null;var c=null;if(g!=null){if(g<0){g=0}var w=0;for(var e=0;e<this.cont.childNodes.length;e++){for(var l=0;l<this.cont.childNodes[e].childNodes.length;l++){if(c==null&&this.cont.childNodes[e].childNodes[l]._isNestedForm!=true){if(w==g){y=this.cont.childNodes[e].nextSibling;c=this.cont.childNodes[e].childNodes[l]}w++}}}}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";if(typeof(h)!="undefined"){this.base[this.b_index].style.cssText+=" margin-left:"+h+"px!important;"}if(y!=null){this.cont.insertBefore(this.base[this.b_index],y);y=null}else{this.cont.appendChild(this.base[this.b_index])}if(c!=null){while(c!=null){var x=c;c=c.nextSibling;this.base[this.b_index].appendChild(x);x=null}}};this.setSizes=function(){};this._mergeSettings=function(e){var l=-1;var h={type:"settings"};for(var c in this.idef){h[c]=this.idef[c]}for(var g=0;g<e.length;g++){if(typeof(e[g])!="undefined"&&e[g].type=="settings"){for(var c in e[g]){h[c]=e[g][c]}l=g}}e[l>=0?l:e.length]=h;return e};this._genStr=function(e){var c="dhxId_";var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<e;h++){c+=g.charAt(Math.floor(Math.random()*g.length))}return c};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=(this._parentForm?this._genStr(12)+"_":m._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(T,e,L,P,g,Q,l){if(this.items[T]._index){this.getForm()._indexId.push(e);this.getForm()._idIndex[e]={ind:this.getForm()._indexId.length-1}}if(!T){T=this._type}if(T=="list"&&g!=null&&this.itemPull[this.idPrefix+g]!=null&&typeof(this.itemPull[this.idPrefix+g]._addSubListNode)=="function"){var c=this.itemPull[this.idPrefix+g]._addSubListNode()}else{if(T=="newcolumn"){var c={}}else{var S=this.base[this.b_index];var J=null;if(typeof(Q)!="undefined"&&!isNaN(Q)&&T!="list"){Q=Math.max(parseInt(Q),0)+1;for(var M=0;M<this.cont.childNodes.length;M++){for(var w=0;w<this.cont.childNodes[M].childNodes.length;w++){if(J==null&&this.cont.childNodes[M].childNodes[w]._isNestedForm!=true){Q--;if(Q==0){J=this.cont.childNodes[M].childNodes[w];S=this.cont.childNodes[M]}}}}}else{if(T=="list"){for(var O in this.itemPull){if(O==this.idPrefix+e){J=this.itemPull[O].nextSibling;if(this.itemPull[O]._listBase!=null&&this.itemPull[O]._listBase.length>0){J=this.itemPull[O]._listBase[this.itemPull[O]._listBase.length-1]}}}}}var c=document.createElement("DIV");if(l==true&&J!=null){J=J.nextSibling}if(J!=null){S.insertBefore(c,J)}else{S.appendChild(c)}}}c._idd=e;c._rId=this._rId;if(typeof(c.style)!="undefined"){if(typeof(L.offsetLeft)=="undefined"&&this.idef.offsetLeft>0){L.offsetLeft=this.idef.offsetLeft}if(typeof(L.offsetTop)=="undefined"&&this.idef.offsetTop>0){L.offsetTop=this.idef.offsetTop}var N="";if(typeof(L.offsetLeft)!="undefined"){N+=" padding-left:"+L.offsetLeft+"px!important;"}if(typeof(L.offsetTop)!="undefined"){N+=" padding-top:"+L.offsetTop+"px!important;"}c.style.cssText+=N}if(T=="block"){if(isNaN(L.blockOffset)){L.blockOffset=this.idef.blockOffset}}if(T=="list"){if(typeof(c._ofsNested)=="undefined"){c._ofsNested=this.idef_const.offsetNested}if(P!=null){c._sId=P}var K=this.items[T].render(c,this.skin);if(!this.itemPull[this.idPrefix+e]._listObj){this.itemPull[this.idPrefix+e]._listObj=[]}if(!this.itemPull[this.idPrefix+e]._list){this.itemPull[this.idPrefix+e]._list=[]}if(!this.itemPull[this.idPrefix+e]._listBase){this.itemPull[this.idPrefix+e]._listBase=[]}(this.itemPull[this.idPrefix+e]._listObj).push(K[0]);(this.itemPull[this.idPrefix+e]._list).push(K[1]);(this.itemPull[this.idPrefix+e]._listBase).push(c);K[1].checkEvent=function(s){return o.checkEvent(s)};K[1].callEvent=function(u,s){return o.callEvent(u,s)};K[1].getForm=function(){return o.getForm()};K[1]._initObj(this._mergeSettings(L));if(c._inBlcok){c.className+=" in_block"}return K[1]}if(T=="newcolumn"){this._prepare(L.offset,Q);return}if(T=="label"&&this._ic++==0){L._isTopmost=true}L.position=this.apos_css[(!L.position||!this.apos_css[L.position]?this.idef.position:L.position)];c.className=L.position+(typeof(L.className)=="string"?" "+L.className:"");if(!L.labelWidth){L.labelWidth=this.idef.labelWidth}if(!L.labelHeight){L.labelHeight=this.idef.labelHeight}if(typeof(L.wrap)!="undefined"){L.wrap=window.dhx4.s2b(L.wrap)}L.labelAlign=(this.align_css[L.labelAlign]?this.align_css[L.labelAlign]:this.align_css[this.idef.labelAlign]);L.inputWidth=(L.width?L.width:(L.inputWidth?L.inputWidth:this.idef.inputWidth));if(!L.inputHeight){L.inputHeight=this.idef.inputHeight}if(typeof(L.note)!="undefined"){if(L.note.length!=null&&L.note[0]!=null){L.note=L.note[0]}if(typeof(L.note.width)=="undefined"){L.note.width=this.idef.noteWidth}if(L.note.width=="auto"){L.note.width=L.inputWidth}}c.checkEvent=function(s){return o.checkEvent(s)};c.callEvent=function(u,s){return o.callEvent(u,s)};c.getForm=function(){return o.getForm()};c._autoCheck=function(s){o._autoCheck(s)};if(typeof(L.readonly)=="string"){L.readonly=window.dhx4.s2b(L.readonly)}if(typeof(L.autoStart)=="string"){L.autoStart=window.dhx4.s2b(L.autoStart)}if(typeof(L.autoRemove)=="string"){L.autoRemove=window.dhx4.s2b(L.autoRemove)}if(typeof(L.titleScreen)=="string"){L.titleScreen=window.dhx4.s2b(L.titleScreen)}if(typeof(L.info)=="string"){L.info=window.dhx4.s2b(L.info)}if(typeof(L.hidden)=="string"){L.hidden=window.dhx4.s2b(L.hidden)}if(typeof(L.checked)=="string"){L.checked=window.dhx4.s2b(L.checked)}if(typeof(L.userdata)!="undefined"){for(var O in L.userdata){this.getForm().setUserData(e,O,L.userdata[O])}}if(L.validate){if(typeof(L.validate!="undefined")&&(typeof(L.validate)=="function"||typeof(window[L.validate])=="function")){c._validate=[L.validate]}else{c._validate=String(L.validate).split(this.separator)}}if(typeof(L.required)!="undefined"){if(typeof(L.required)=="string"){L.required=window.dhx4.s2b(L.required)}c._required=(L.required==true)}if(c._required){if(!c._validate){c._validate=[]}var h=false;for(w=0;w<c._validate.length;w++){h=(h||(c._validate[w]=="NotEmpty"))}if(!h){c._validate.push("NotEmpty")}}c._ll=(L.position==this.apos_css["label-left"]||L.position==this.apos_css["label-top"]);this.objPull[this.idPrefix+e]=this.items[T].render(c,L);this.itemPull[this.idPrefix+e]=c};this._initObj=function(g,l){if(typeof(g.data)!="undefined"){var e=null;if(typeof(l)!="undefined"){e=l.match(/(\?|\&)id\=([a-z0-9_\-]*)/i);if(e!=null&&e[0]!=null){e=e[0].split("=")[1]}}if(this.callEvent("onBeforeDataLoad",[e,window.dhx4._copyObj(g.data)])===true){this.formId=e;this._last_load_data=g;this.setFormData(g.data);this.resetDataProcessor("updated")}return}this._prepare();for(var h=0;h<g.length;h++){if(typeof(g[h])!="undefined"&&g[h].type=="settings"){for(var c in g[h]){this.idef[c]=g[h][c]}}}for(var h=0;h<g.length;h++){this._prepareItem(g[h])}this._autoCheck()};this._prepareItem=function(w,g,x){var y=(w!=null&&w.type!=null?w.type:"");if(this.items[y]){if(!w.name){w.name=this._genStr(12)}var h=w.name;if(this.objPull[this.idPrefix+h]!=null||y=="radio"){h=this._genStr(12)}var l=w;l.label=l.label||"";l.value=l.value;l.checked=window.dhx4.s2b(l.checked);l.disabled=window.dhx4.s2b(l.disabled);l.name=l.name||this._genStr(12);l.options=l.options||[];l.rows=l.rows||"none";l.uid=this._genStr(12);this._addItem(y,h,l,null,null,g,x);g=null;if(this._parentEnabled===false){this._disableItem(h)}for(var c=0;c<l.options.length;c++){if(l.options[c].list!=null){if(!l.options[c].value){l.options[c].value=this._genStr()}var e=this._addItem("list",h,l.options[c].list,l.options[c].value,null);e._subSelect=true;e._subSelectId=l.options[c].value}}if(w.list!=null){if(!w.listParent){w.listParent=l.name}var e=this._addItem("list",h,w.list,null,w.listParent)}}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(g,K){if(typeof(K)=="undefined"){K=true}if(K){var U=g.getElementsByTagName("items");U=(U!=null&&U[0]!=null?U[0]:null);var w=g.getElementsByTagName("data");w=(w!=null&&w[0]!=null?w[0]:null)}else{U=g}var L=(K?[]:{});if(U!=null){for(var e=0;e<U.childNodes.length;e++){if(typeof(U.childNodes[e].tagName)!="undefined"){var V=U.childNodes[e].tagName;if(this._xmlSubItems[V]!=null){var S=this._xmlSubItems[V];if(typeof(L[S])=="undefined"){L[S]=[]}var l=U.childNodes[e];var N={};for(var M=0;M<l.attributes.length;M++){var T=l.attributes[M].name;var c=l.attributes[M].value;N[T]=c}if(S=="note"){N.text=l.firstChild.nodeValue}if(S=="_userdata"){N.value=(l.firstChild!=null&&l.firstChild.nodeValue!=null?l.firstChild.nodeValue:"")}var Q=this._xmlToObject(l,false);for(var P in Q){if(P=="_userdata"){if(!N.userdata){N.userdata={}}for(var M=0;M<Q[P].length;M++){N.userdata[Q[P][M].name]=Q[P][M].value}}else{N[P]=Q[P]}}l=null;if(K){L.push(N)}else{L[S].push(N)}}}}}if(w!=null){L={data:{}};for(var e=0;e<w.childNodes.length;e++){if(typeof(w.childNodes[e].tagName)!="undefined"){var h=w.childNodes[e].tagName;var O=(w.childNodes[e].firstChild!=null?w.childNodes[e].firstChild.nodeValue:"");L.data[h]=O}}}return L};this._autoCheck=function(h){if(this._locked===true){h=false}else{if(typeof(h)=="undefined"){h=true}}for(var v in this.itemPull){var g=(h&&(this.itemPull[v]._udis!==true));this[g?"_enableItem":"_disableItem"](this.itemPull[v]._idd);if(this.getForm()._idIndex[this.itemPull[v]._idd]!=null){this.getForm()._idIndex[this.itemPull[v]._idd].enabled=g}var A=(g&&(typeof(this.itemPull[v]._checked)=="boolean"?this.itemPull[v]._checked:true));if(this.itemPull[v]._list){for(var w=0;w<this.itemPull[v]._list.length;w++){var e=true;if(this.itemPull[v]._list[w]._subSelect==true){e=false;var l=this.getItemValue(this.itemPull[v]._idd);if(!(typeof(l)=="object"&&typeof(l.length)=="number")){l=[l]}for(var c=0;c<l.length;c++){e=(l[c]==this.itemPull[v]._list[w]._subSelectId)||e}this.itemPull[v]._listObj[w][e?"show":"hide"](this.itemPull[v]._listBase[w])}this.itemPull[v]._list[w]._autoCheck(A&&e)}}}};this.doWithItem=function(g,D,F,H,I,J){if(typeof(g)=="object"){var h=g[0];var E=g[1];var e=null;var K=null;for(var c in this.itemPull){if((this.itemPull[c]._value==E||E===null)&&this.itemPull[c]._group==h){return this.objPull[c][D](this.itemPull[c],F,H,I,J)}if(this.itemPull[c]._list!=null&&!K){for(var l=0;l<this.itemPull[c]._list.length;l++){K=this.itemPull[c]._list[l].doWithItem(g,D,F,H,I)}}}if(K!=null){return K}else{if(D=="getType"){return this.doWithItem(g[0],"getType")}}}else{if(!this.itemPull[this.idPrefix+g]){var K=null;for(var c in this.itemPull){if(this.itemPull[c]._list&&!K){for(var l=0;l<this.itemPull[c]._list.length;l++){if(K==null){K=this.itemPull[c]._list[l].doWithItem(g,D,F,H,I,J)}}}}return K}else{return this.objPull[this.idPrefix+g][D](this.itemPull[this.idPrefix+g],F,H,I,J)}}};this._removeItem=function(c,e){if(e!=null){c=this.doWithItem([c,e],"destruct")}else{this.doWithItem(c,"destruct")}this._clearItemData(c)};this._clearItemData=function(g){if(this.itemPull[this.idPrefix+g]){g=this.idPrefix+g;try{this.objPull[g]=null;this.itemPull[g]=null;delete this.objPull[g];delete this.itemPull[g]}catch(h){}}else{for(var e in this.itemPull){if(this.itemPull[e]._list){for(var c=0;c<this.itemPull[e]._list.length;c++){this.itemPull[e]._list[c]._clearItemData(g)}}}}};this.isItem=function(c,e){if(e!=null){c=[c,e]}return this.doWithItem(c,"isExist")};this.getItemType=function(c,e){c=[c,(e||null)];return this.doWithItem(c,"getType")};this.forEachItem=function(g){for(var c in this.objPull){if(this.objPull[c].t=="radio"){g(this.itemPull[c]._group,this.itemPull[c]._value)}else{g(String(c).replace(this.idPrefix,""))}if(this.itemPull[c]._list){for(var e=0;e<this.itemPull[c]._list.length;e++){this.itemPull[c]._list[e].forEachItem(g)}}}};this.setItemLabel=function(g,e,c){if(c!=null){g=[g,e]}else{c=e}this.doWithItem(g,"setText",c)};this.getItemLabel=function(c,e){if(e!=null){c=[c,e]}return this.doWithItem(c,"getText")};this._enableItem=function(c){this.doWithItem(c,"enable")};this._disableItem=function(c){this.doWithItem(c,"disable")};this._isItemEnabled=function(c){return this.doWithItem(c,"isEnabled")};this.checkItem=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"check");this._autoCheck()};this.uncheckItem=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"unCheck");this._autoCheck()};this.isItemChecked=function(c,e){if(e!=null){c=[c,e]}return this.doWithItem(c,"isChecked")};this.getCheckedValue=function(c){return this.doWithItem([c,null],"getChecked")};this._getRGroup=function(e,g){for(var c in this.itemPull){if(this.itemPull[c]._group==e&&(g==null||this.itemPull[c]._value==g)){return this.itemPull[c]._idd}if(this.itemPull[c]._list!=null){for(var h=0;h<this.itemPull[c]._list.length;h++){var l=this.itemPull[c]._list[h]._getRGroup(e,g);if(l!=null){return l}}}}return null};this.setItemValue=function(c,e){this.resetValidateCss(c,e);if(this.getItemType(c)=="radio"){if(this._getRGroup(c,e)!=null){this.checkItem(c,e)}else{this.uncheckItem(c,this.getCheckedValue(c))}return null}return this.doWithItem(c,"setValue",e)};this.getItemValue=function(c,e){if(this.getItemType(c)=="radio"){return this.getCheckedValue(c)}return this.doWithItem(c,"getValue",e)};this.updateValues=function(){this._updateValues()};this.showItem=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"show")};this.hideItem=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"hide")};this.isItemHidden=function(c,e){if(e!=null){c=[c,e]}return this.doWithItem(c,"isHidden")};this.getOptions=function(c){return this.doWithItem(c,"getOptions")};this.setItemWidth=function(c,e){this.doWithItem(c,"setWidth",e)};this.getItemWidth=function(c){return this.doWithItem(c,"getWidth")};this.setItemHeight=function(c,e){this.doWithItem(c,"setHeight",e)};this.setItemFocus=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"setFocus")};this._updateValues=function(){for(var c in this.itemPull){if(this.objPull[c]&&typeof(this.objPull[c].updateValue)=="function"){this.objPull[c].updateValue(this.itemPull[c])}if(this.itemPull[c]._list){for(var e=0;e<this.itemPull[c]._list.length;e++){this.itemPull[c]._list[e]._updateValues()}}}};this._getItemByName=function(e){for(var c in this.itemPull){if(this.itemPull[c]._idd==e){return this.itemPull[c]}if(this.itemPull[c]._list!=null){for(var g=0;g<this.itemPull[c]._list.length;g++){var h=this.itemPull[c]._list[g]._getItemByName(e);if(h!=null){return h}}}}return null};this._resetValidateCss=function(c){c.className=(c.className).replace(c._vcss,"");c._vcss=null};this.setValidateCss=function(e,g,h){var c=this[this.getItemType(e)=="radio"?"_getRGroup":"_getItemByName"](e);if(!c){return}if(c._vcss!=null){this._resetValidateCss(c)}c._vcss=(typeof(h)=="string"?h:"validate_"+(g===true?"ok":"error"));c.className+=" "+c._vcss};this.resetValidateCss=function(g){for(var c in this.itemPull){if(this.itemPull[c]._vcss!=null){this._resetValidateCss(this.itemPull[c])}if(this.itemPull[c]._list!=null){for(var e=0;e<this.itemPull[c]._list.length;e++){this.itemPull[c]._list[e].resetValidateCss()}}}};this.validate=function(c){if(this.callEvent("onBeforeValidate",[])==false){return}var e=true;this.forEachItem(function(h,g){if(typeof(g)!="undefined"){h=[h,g]}var l=o.doWithItem(h,"_validate");if(typeof(l)!="boolean"){l=true}e=l&&e});this.callEvent("onAfterValidate",[e]);return e};this.validateItem=function(e,c){if(typeof(c)!="undefined"){e=[e,c]}return this.doWithItem(e,"_validate")};this.enableLiveValidation=function(c){this.live_validate=(c==true)};this.setReadonly=function(c,e){this.doWithItem(c,"setReadonly",e)};this.isReadonly=function(c){return this.doWithItem(c,"isReadonly")};this.getFirstActive=function(c){for(var g=0;g<this._indexId.length;g++){var e=true;if(c==true){var h=this.getItemType(this._indexId[g]);if(!dhtmlXForm.prototype.items[h].setFocus){e=false}}if(e&&this._idIndex[this._indexId[g]].enabled){return this._indexId[g]}}return null};this.setFocusOnFirstActive=function(){var c=this.getFirstActive(true);if(c!=null){this.setItemFocus(c)}};this.enableItem=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"userEnable");this._autoCheck()};this.disableItem=function(c,e){if(e!=null){c=[c,e]}this.doWithItem(c,"userDisable");this._autoCheck()};this.isItemEnabled=function(c,e){if(e!=null){c=[c,e]}return this.doWithItem(c,"isUserEnabled")};this.clear=function(){var c={};this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");for(var x in this.itemPull){var w=this.itemPull[x]._idd;if(this.itemPull[x]._type=="ch"){this.uncheckItem(w)}if(this.itemPull[x]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(w,"")}if(this.itemPull[x]._type=="combo"){this.itemPull[x]._apiChange=true;var e=this.getCombo(w);e.selectOption(0);e=null;this.itemPull[x]._apiChange=false}if(this.itemPull[x]._type=="se"){var h=this.getOptions(w);if(h.length>0){h[0].selected=true}}if(this.itemPull[x]._type=="ra"){var l=this.itemPull[x]._group;if(!c[l]){this.checkItem(l,this.doWithItem(w,"_getFirstValue"));c[l]=true}}if(this.itemPull[x]._list){for(var g=0;g<this.itemPull[x]._list.length;g++){this.itemPull[x]._list[g].clear()}}if(this["setFormData_"+this.itemPull[x]._type]){this["setFormData_"+this.itemPull[x]._type](w,"")}}c=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var c in this.objPull){this._removeItem(String(c).replace(this.idPrefix,""))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var e=0;e<this.base.length;e++){while(this.base[e].childNodes.length>0){this.base[e].removeChild(this.base[e].childNodes[0])}if(this.base[e].parentNode){this.base[e].parentNode.removeChild(this.base[e])}this.base[e]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(var c in this){this[c]=null}o=null};for(var r in this.items){this.items[r].t=r;if(typeof(this.items[r]._index)=="undefined"){this.items[r]._index=true}if(!this.items[r].show){this.items[r].show=function(e){e.style.display="";if(e._listObj){for(var c=0;c<e._listObj.length;c++){e._listObj[c].show(e._listBase[c])}}}}if(!this.items[r].hide){this.items[r].hide=function(e){e.style.display="none";if(e._listObj){for(var c=0;c<e._listObj.length;c++){e._listObj[c].hide(e._listBase[c])}}}}if(!this.items[r].isHidden){this.items[r].isHidden=function(c){return(c.style.display=="none")}}if(!this.items[r].userEnable){this.items[r].userEnable=function(c){c._udis=false}}if(!this.items[r].userDisable){this.items[r].userDisable=function(c){c._udis=true}}if(!this.items[r].isUserEnabled){this.items[r].isUserEnabled=function(c){return(c._udis!==true)}}if(!this.items[r].getType){this.items[r].getType=function(){return this.t}}if(!this.items[r].isExist){this.items[r].isExist=function(){return true}}if(!this.items[r]._validate){this.items[r]._validate=function(v){if(!v._validate||!v._enabled){return true}if(v._type=="ch"){var g=(this.isChecked(v)?this.getValue(v):0)}else{var g=this.getValue(v)}var c=true;for(var h=0;h<v._validate.length;h++){var e="is"+v._validate[h];if((g==null||g.length==0)&&e!="isNotEmpty"&&v._type!="container"){}else{var l=dhtmlxValidation[e];if(v._type=="container"&&typeof(l)=="function"){l=function(){return true}}if(typeof(l)!="function"&&typeof(v._validate[h])=="function"){l=v._validate[h]}if(typeof(l)!="function"&&typeof(window[v._validate[h]])=="function"){l=window[v._validate[h]]}c=((typeof(l)=="function"?l(g,v._idd):new RegExp(v._validate[h]).test(g))&&c);l=null}}if(!(v.callEvent("onValidate"+(c?"Success":"Error"),[v._idd,g,c])===false)){v.getForm().setValidateCss(v._idd,c)}return c}}}this._locked=false;this._doLock=function(c){var e=(c===true?true:false);if(this._locked==e){return}else{this._locked=e}this._autoCheck(!this._locked)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(g,c,e,h){return this.doWithItem(g,"setNumberFormat",c,e,h)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(e,c){this.callEvent("onButtonClick",[e,c])});this._updateBlocks=function(){this.forEachItem(function(c){if(o.getItemType(c)=="block"||o.getItemType(c)=="combo"){o.doWithItem(c,"_setCss",o.skin,o.cont.style.fontSize)}})};this._isObj=function(c){return(c!=null&&typeof(c)=="object"&&typeof(c.length)=="undefined")};this._copyObj=function(e){if(this._isObj(e)){var g={};for(var c in e){if(typeof(e[c])=="object"&&e[c]!=null){g[c]=this._copyObj(e[c])}else{g[c]=e[c]}}}else{var g=[];for(var c=0;c<e.length;c++){if(typeof(e[c])=="object"&&e[c]!=null){g[c]=this._copyObj(e[c])}else{g[c]=e[c]}}}return g};if(n!=null&&typeof(n)=="object"){this._initObj(this._copyObj(n))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(c){return this.doWithItem(c,"getInput")};dhtmlXForm.prototype.getSelect=function(c){return this.doWithItem(c,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={render:function(g,l){g._type="ch";g._enabled=true;g._checked=false;g._value=(typeof(l.value)=="undefined"?null:String(l.value));g._ro=(l.readonly==true);if(l._autoInputWidth!==false){l.inputWidth=14}this.doAddLabel(g,l);this.doAddInput(g,l,"INPUT","TEXT",true,true,"dhxform_textarea");g.childNodes[g._ll?1:0].className+=" dhxform_img_node";var h=document.createElement("DIV");h.className="dhxform_img chbx0";g.appendChild(h);if(!isNaN(l.inputLeft)){g.childNodes[g._ll?1:0].style.left=parseInt(l.inputLeft)+"px"}if(!isNaN(l.inputTop)){g.childNodes[g._ll?1:0].style.top=parseInt(l.inputTop)+"px"}g.childNodes[g._ll?1:0].appendChild(h);g.childNodes[g._ll?1:0].firstChild.value=String(l.value);g._updateImgNode=function(c,a){var e=c.childNodes[c._ll?1:0].lastChild;e.className=(a?"dhxform_actv_c":"dhxform_img")+" "+(c._checked?"chbx1":"chbx0");c=e=null};g._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};g._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};g._doOnKeyUpDown=function(a,c){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};if(l.checked==true){this.check(g)}if(l.hidden==true){this.hide(g)}if(l.disabled==true){this.userDisable(g)}this.doAttachEvents(g);return this},destruct:function(c){c._doOnFocus=c._doOnBlur=c._updateImgNode=null;this.doUnloadNestedLists(c);this.doDestruct(c)},doAddLabel:function(l,h){var g=document.createElement("DIV");g.className="dhxform_label "+h.labelAlign;if(h.wrap==true){g.style.whiteSpace="normal"}if(l._ll){l.insertBefore(g,l.firstChild)}else{l.appendChild(g)}if(typeof(h.tooltip)!="undefined"){g.title=h.tooltip}g.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+h.label+(h.info?"<span class='dhxform_info'>[?]</span>":"")+(l._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(h.labelWidth)){g.firstChild.style.width=parseInt(h.labelWidth)+"px"}if(!isNaN(h.labelHeight)){g.firstChild.style.height=parseInt(h.labelHeight)+"px"}if(!isNaN(h.labelLeft)){g.style.left=parseInt(h.labelLeft)+"px"}if(!isNaN(h.labelTop)){g.style.top=parseInt(h.labelTop)+"px"}},doAddInput:function(J,E,H,x,u,D,C){var I=document.createElement("DIV");I.className="dhxform_control";if(J._ll){J.appendChild(I)}else{J.insertBefore(I,J.firstChild)}var K=document.createElement(H);K.className=C;K.name=J._idd;K._idd=J._idd;K.id=E.uid;if(typeof(x)=="string"){K.type=x}if(H=="INPUT"||H=="TEXTAREA"){K.onkeyup=function(a){a=a||event;J.callEvent("onKeyUp",[this,a,this._idd])};K.onkeydown=function(a){a=a||event;J.callEvent("onKeyDown",[this,a,this._idd])}}I.appendChild(K);if(E.readonly){this.setReadonly(J,true)}if(E.hidden==true){this.hide(J)}if(E.disabled==true){this.userDisable(J)}if(u){if(!isNaN(E.inputLeft)){I.style.left=parseInt(E.inputLeft)+"px"}if(!isNaN(E.inputTop)){I.style.top=parseInt(E.inputTop)+"px"}}var L="";var A=false;if(D){if(!isNaN(E.inputWidth)){L+="width:"+parseInt(E.inputWidth)+"px;";A=true}if(!isNaN(E.inputHeight)){L+="height:"+parseInt(E.inputHeight)+"px;"}}if(typeof(E.style)=="string"){L+=E.style}K.style.cssText=L;if(E.maxLength){K.setAttribute("maxLength",E.maxLength)}if(E.connector){K.setAttribute("connector",E.connector)}var F=(dhtmlXForm.prototype.items[this.t]!=null?dhtmlXForm.prototype.items[this.t]._dimFix==true:false);if(A&&({input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]==1||F)){if(dhtmlXForm.prototype.items[this.t]._dim==null){dhtmlXForm.prototype.items[this.t]._dim=J.getForm()._checkDim(I,K)}K.style.width=parseInt(K.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if(typeof(E.note)=="object"){var y=document.createElement("DIV");y.className="dhxform_note";y.style.width=(isNaN(E.note.width)?K.offsetWidth:parseInt(E.note.width))+"px";y._w=E.note.width;y.innerHTML=E.note.text;I.appendChild(y);y=null}},doUnloadNestedLists:function(e){if(!e._list){return}for(var g=0;g<e._list.length;g++){e._list[g].unload();e._list[g]=null;e._listObj[g]=null;e._listBase[g].parentNode.removeChild(e._listBase[g]);e._listBase[g]=null}e._list=null;e._listObj=null;e._listBase=null},doDestruct:function(c){c.callEvent=null;c.checkEvent=null;c.getForm=null;c._autoCheck=null;c._checked=null;c._enabled=null;c._idd=null;c._type=null;c._value=null;c._group=null;c.onselectstart=null;c.childNodes[c._ll?1:0].onmousedown=null;c.childNodes[c._ll?1:0].ontouchstart=null;c.childNodes[c._ll?0:1].onmousedown=null;c.childNodes[c._ll?0:1].ontouchstart=null;c.childNodes[c._ll?0:1].childNodes[0].onfocus=null;c.childNodes[c._ll?0:1].childNodes[0].onblur=null;c.childNodes[c._ll?0:1].childNodes[0].onkeypress=null;c.childNodes[c._ll?0:1].childNodes[0].onkeyup=null;c.childNodes[c._ll?0:1].childNodes[0].onkeydown=null;c.childNodes[c._ll?0:1].childNodes[0].onmousedown=null;c.childNodes[c._ll?0:1].childNodes[0].ontouchstart=null;c.childNodes[c._ll?0:1].removeChild(c.childNodes[c._ll?0:1].childNodes[0]);while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.parentNode.removeChild(c);c=null},doAttachEvents:function(g){var e=this;g.childNodes[g._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}var c=(a.target||a.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(c.className)!="undefined"&&c.className=="dhxform_note")){a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}e.doClick(this.parentNode)};g.childNodes[g._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}if(!this.parentNode.parentNode._enabled){a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}var c=a.target||a.srcElement;if(typeof(c.className)!="undefined"&&c.className=="dhxform_info"){this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,a]);a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}e.doClick(this.parentNode.parentNode)}},doClick:function(c){c.childNodes[c._ll?0:1].childNodes[0].focus();if(!c._enabled||c._ro){return}if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,c._checked])!==true){return}}this.setChecked(c,!c._checked);c._autoCheck();c.callEvent("onChange",[c._idd,c._value,c._checked])},doCheckValue:function(c){if(c._checked&&c._enabled){c.childNodes[c._ll?1:0].firstChild.name=String(c._idd);c.childNodes[c._ll?1:0].firstChild.value=this.getValue(c)}else{c.childNodes[c._ll?1:0].firstChild.name="";c.childNodes[c._ll?1:0].firstChild.value=""}},setChecked:function(e,g){e._checked=(g===true?true:false);e.childNodes[e._ll?1:0].lastChild.className=e.childNodes[e._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(e._checked?" chbx1":" chbx0");this.doCheckValue(e)},check:function(c){this.setChecked(c,true)},unCheck:function(c){this.setChecked(c,false)},isChecked:function(c){return c._checked},enable:function(c){if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._enabled=true;c.childNodes[c._ll?0:1].childNodes[0].tabIndex=0;c.childNodes[c._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(c)},disable:function(c){if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._enabled=false;if(c._updateImgNode!=null){c._updateImgNode(c,false)}c.childNodes[c._ll?0:1].childNodes[0].tabIndex=-1;c.childNodes[c._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(c)},isEnabled:function(c){return c._enabled},setText:function(e,g){e.childNodes[e._ll?0:1].childNodes[0].innerHTML=g+(e._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(c){return c.childNodes[c._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(e,g){this.setChecked(e,(g===true||parseInt(g)==1||g=="true"||e._value===g))},getValue:function(e,g){if(g=="realvalue"){return e._value}return((typeof(e._value)=="undefined"||e._value==null)?(e._checked?1:0):e._value)},setReadonly:function(e,g){e._ro=(g===true)},isReadonly:function(c){return c._ro},setFocus:function(c){c.childNodes[c._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(o,n,r){o._type="ra";o._enabled=true;o._checked=false;o._group=n.name;o._value=n.value;o._uid=r;o._ro=(n.readonly==true);o._rName=o._rId+o._group;this.r[o._idd]=o;n.inputWidth=14;this.doAddLabel(o,n);this.doAddInput(o,n,"INPUT","TEXT",true,true,"dhxform_textarea");o.childNodes[o._ll?1:0].className+=" dhxform_img_node";var m=document.createElement("DIV");m.className="dhxform_img rdbt0";o.appendChild(m);if(!isNaN(n.inputLeft)){o.childNodes[o._ll?1:0].style.left=parseInt(n.inputLeft)+"px"}if(!isNaN(n.inputTop)){o.childNodes[o._ll?1:0].style.top=parseInt(n.inputTop)+"px"}o.childNodes[o._ll?1:0].appendChild(m);o.childNodes[o._ll?1:0].firstChild.name="";o.childNodes[o._ll?1:0].firstChild.value="";o._updateImgNode=function(a,e){var c=a.childNodes[a._ll?1:0].lastChild;c.className=(e?"dhxform_actv_r":"dhxform_img")+" "+(a._checked?"rdbt1":"rdbt0");a=c=null};o._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._group,a._value])};o._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._group,a._value])};o._doOnKeyUpDown=function(a,c){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],c,this._group,this._value])};if(this.input[o._rName]==null){var l=document.createElement("INPUT");l.type="HIDDEN";l.name=n.name;l.firstValue=o._value;o.appendChild(l);this.input[o._rName]=l}if(!this.firstValue[o._rName]){this.firstValue[o._rName]=n.value}if(n.checked==true){this.check(o)}if(n.hidden==true){this.hide(o)}if(n.disabled==true){this.userDisable(o)}this.doAttachEvents(o);return this},destruct:function(n,m){if(n.lastChild==this.input[n._rName]){var o=false;for(var r in this.r){if(!o&&this.r[r]._group==n._group&&this.r[r]._idd!=n._idd){this.r[r].appendChild(this.input[n._rName]);o=true}}if(!o){this.input[n._rName].parentNode.removeChild(this.input[n._rName]);this.input[n._rName]=null;this.firstValue[n._rName]=null}}var a=n._idd;n._doOnFocus=n._doOnBlur=n._updateImgNode=null;this.doUnloadNestedLists(n);this.doDestruct(n);return a},doClick:function(g){g.childNodes[g._ll?0:1].childNodes[0].focus();if(!(g._enabled&&!g._checked)){return}if(g._ro){return}var e=[g._group,g._value,true];if(g.checkEvent("onBeforeChange")){if(g.callEvent("onBeforeChange",e)!==true){return}}this.setChecked(g,true);g.getForm()._autoCheck();g.callEvent("onChange",e)},doCheckValue:function(h){var a=null;for(var l in this.r){if(this.r[l]._checked&&this.r[l]._group==h._group&&this.r[l]._rId==h._rId){a=this.r[l]._value}}if(a!=null&&this.r[l]._enabled){this.input[h._rName].name=String(h._group);this.input[h._rName].value=a}else{this.input[h._rName].name="";this.input[h._rName].value=""}this.input[h._rName]._value=a},setChecked:function(m,a){a=(a===true);for(var r in this.r){if(this.r[r]._group==m._group&&this.r[r]._rId==m._rId){var n=false;if(this.r[r]._idd==m._idd){if(this.r[r]._checked!=a){this.r[r]._checked=a;n=true}}else{if(this.r[r]._checked){this.r[r]._checked=false;n=true}}if(n){var o=this.r[r].childNodes[this.r[r]._ll?1:0].childNodes[1];o.className=o.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[r]._checked?" rdbt1":" rdbt0");o=null}}}this.doCheckValue(m)},getChecked:function(c){return this.input[c._rName]._value},_getFirstValue:function(c){return this.firstValue[c._rName]},_getId:function(c){return c._idd},setValue:function(e,g){}};(function(){for(var a in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.items.select={render:function(e,g){e._type="se";e._enabled=true;e._value=null;e._newValue=null;this.doAddLabel(e,g);this.doAddInput(e,g,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(e);this.doLoadOpts(e,g);if(g.connector!=null){this.doLoadOptsConnector(e,g.connector)}if(typeof(g.value)!="undefined"&&g.value!=null){this.setValue(e,g.value)}return this},destruct:function(c){this.doUnloadNestedLists(c);c.callEvent=null;c.checkEvent=null;c.getForm=null;c._autoCheck=null;c._enabled=null;c._idd=null;c._type=null;c._value=null;c._newValue=null;c.onselectstart=null;c.childNodes[c._ll?1:0].childNodes[0].onclick=null;c.childNodes[c._ll?1:0].childNodes[0].onkeydown=null;c.childNodes[c._ll?1:0].childNodes[0].onchange=null;c.childNodes[c._ll?1:0].childNodes[0].onfocus=null;c.childNodes[c._ll?1:0].childNodes[0].onblur=null;c.childNodes[c._ll?1:0].childNodes[0].onkeyup=null;c.childNodes[c._ll?1:0].removeChild(c.childNodes[c._ll?1:0].childNodes[0]);while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.parentNode.removeChild(c);c=null},doAddLabel:function(l,h){var g=document.createElement("DIV");g.className="dhxform_label "+h.labelAlign;g.innerHTML="<label for='"+h.uid+"'>"+h.label+(h.info?"<span class='dhxform_info'>[?]</span>":"")+(l._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(h.wrap==true){g.style.whiteSpace="normal"}if(typeof(h.tooltip)!="undefined"){g.title=h.tooltip}l.appendChild(g);if(typeof(h.label)=="undefined"||h.label==null||h.label.length==0){g.style.display="none"}if(!isNaN(h.labelWidth)){g.style.width=parseInt(h.labelWidth)+"px"}if(!isNaN(h.labelHeight)){g.style.height=parseInt(h.labelHeight)+"px"}if(!isNaN(h.labelLeft)){g.style.left=parseInt(h.labelLeft)+"px"}if(!isNaN(h.labelTop)){g.style.top=parseInt(h.labelTop)+"px"}if(h.info){g.onclick=function(a){a=a||event;var c=a.target||a.srcElement;if(typeof(c.className)!="undefined"&&c.className=="dhxform_info"){this.parentNode.callEvent("onInfo",[this.parentNode._idd,a]);a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}}}},doAttachEvents:function(h){var g=h.childNodes[h._ll?1:0].childNodes[0];var l=this;g.onclick=function(){l.doOnChange(this)};g.onkeydown=function(a){a=a||event;l.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,a,this.parentNode.parentNode._idd])};g.onchange=function(){l.doOnChange(this)};g.onkeyup=function(a){a=a||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,a,this.parentNode.parentNode._idd])};g=null;this.doAttachChangeLS(h)},doAttachChangeLS:function(g){var e=g.childNodes[g._ll?1:0].childNodes[0];e.onfocus=function(){var a=this.parentNode.parentNode;a.getForm()._ccActivate(a._idd,this,a.getForm().getItemValue(a._idd,true));a.getForm().callEvent("onFocus",[a._idd]);a=null};e.onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);a.getForm().callEvent("onBlur",[a._idd]);a=null};e=null},doValidate:function(c){if(c.getForm().live_validate){this._validate(c)}},doLoadOpts:function(u,w,r){var s=u.childNodes[u._ll?1:0].childNodes[0];var C=w.options;var x=false;for(var A=0;A<C.length;A++){var v=C[A].text||C[A].label;if(!v||typeof(v)=="undefined"){v=""}var y=new Option(v,C[A].value);if(typeof(C[A].img_src)=="string"){y.setAttribute("img_src",C[A].img_src)}s.options.add(y);if(typeof(C[A].selected)!="undefined"&&window.dhx4.s2b(C[A].selected)==true){y.selected=true;u._value=C[A].value;x=true}if(typeof(C[A].checked)!="undefined"&&window.dhx4.s2b(C[A].checked)==true){y.setAttribute("checked","1")}if(typeof(C[A].img)!="undefined"){y.setAttribute("img",C[A].img)}if(typeof(C[A].img_dis)!="undefined"){y.setAttribute("img_dis",C[A].img_dis)}if(typeof(C[A].css)!="undefined"){y.setAttribute("css",C[A].css)}}if(!x&&s.selectedIndex>=0){u._value=s.options[s.selectedIndex].value}if(r===true){u.callEvent("onOptionsLoaded",[u._idd])}this._checkNoteWidth(u)},doLoadOptsConnector:function(h,g){var l=this;h._connector_working=true;window.dhx4.ajax.get(g,function(a){a=a.xmlDoc.responseXML;if(a==null){return}var o=a.getElementsByTagName("data");if(o==null||o[0]==null){return}o=o[0];var c=[];for(var r=0;r<o.childNodes.length;r++){if(typeof(o.childNodes[r].tagName)!="undefined"&&String(o.childNodes[r].tagName).toLowerCase()=="item"){var e=o.childNodes[r];c.push({label:e.getAttribute("label"),value:e.getAttribute("value"),selected:(e.getAttribute("selected")!=null)});e=null}}l.doLoadOpts(h,{options:c},true);h._connector_working=false;if(h._connector_value!=null){l.setValue(h,h._connector_value);h._connector_value=null}l=h=null})},doOnChange:function(h){var g=h.parentNode.parentNode;g._newValue=(h.selectedIndex>=0?h.options[h.selectedIndex].value:null);if(g._newValue!=g._value){if(g.checkEvent("onBeforeChange")){if(g.callEvent("onBeforeChange",[g._idd,g._value,g._newValue])!==true){for(var l=0;l<h.options.length;l++){if(h.options[l].value==g._value){h.options[l].selected=true}}return}}g._value=g._newValue;g.callEvent("onChange",[g._idd,g._value]);if(g._type=="se"&&g.getForm().live_validate){this._validate(g)}}g._autoCheck()},setText:function(e,g){if(!g){g=""}e.childNodes[e._ll?0:1].childNodes[0].innerHTML=g+(e._required?"<span class='dhxform_item_required'>*</span>":"");e.childNodes[e._ll?0:1].style.display=(g.length==0||g==null?"none":"")},getText:function(c){return c.childNodes[c._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(c){if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._enabled=true;c.childNodes[c._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(c){if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._enabled=false;c.childNodes[c._ll?1:0].childNodes[0].setAttribute("disabled",true)},getOptions:function(c){return c.childNodes[c._ll?1:0].childNodes[0].options},setValue:function(n,l){if(n._connector_working){n._connector_value=l;return}var h=this.getOptions(n);for(var m=0;m<h.length;m++){if(h[m].value==l){h[m].selected=true;n._value=h[m].value}}if(n._list!=null&&n._list.length>0){n.getForm()._autoCheck()}n.getForm()._ccReload(n._idd,n._value)},getValue:function(m){var h=-1;var n=this.getOptions(m);for(var l=0;l<n.length;l++){if(n[l].selected){h=n[l].value}}return h},setWidth:function(g,e){g.childNodes[g._ll?1:0].childNodes[0].style.width=e+"px"},getSelect:function(c){return c.childNodes[c._ll?1:0].childNodes[0]},setFocus:function(c){c.childNodes[c._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(g){var e;if(g.childNodes[g._ll?1:0].childNodes[1]!=null){e=g.childNodes[g._ll?1:0].childNodes[1];if(e.className!=null&&e.className.search(/dhxform_note/gi)>=0&&e._w=="auto"){e.style.width=g.childNodes[g._ll?1:0].childNodes[0].offsetWidth+"px"}}e=null}};(function(){for(var a in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(u,r,n){var w=u.childNodes[u._ll?1:0].childNodes[0];w.multiple=true;if(!isNaN(r.size)){w.size=Number(r.size)}u._value=[];u._newValue=[];var v=r.options;for(var s=0;s<v.length;s++){var o=new Option(v[s].text||v[s].label,v[s].value);w.options.add(o);if(v[s].selected==true||v[s].selected=="true"){o.selected=true;u._value.push(v[s].value)}}if(n===true){u.callEvent("onOptionsLoaded",[u._idd])}this._checkNoteWidth(u)},doAttachEvents:function(h){var g=h.childNodes[h._ll?1:0].childNodes[0];var l=this;g.onfocus=function(){l.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd]);a=null};g.onblur=function(){l.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onBlur",[a._idd]);a=null};g.onclick=function(){l.doOnChange(this);var a=this.parentNode.parentNode;a._autoCheck();a=null}},doOnChange:function(l){var n=l.parentNode.parentNode;n._newValue=[];for(var m=0;m<l.options.length;m++){if(l.options[m].selected){n._newValue.push(l.options[m].value)}}if((n._value).sort().toString()!=(n._newValue).sort().toString()){if(n.checkEvent("onBeforeChange")){if(n.callEvent("onBeforeChange",[n._idd,n._value,n._newValue])!==true){var h={};for(var m=0;m<n._value.length;m++){h[n._value[m]]=true}for(var m=0;m<l.options.length;m++){l.options[m].selected=(h[l.options[m].value]==true)}h=null;return}}n._value=[];for(var m=0;m<n._newValue.length;m++){n._value.push(n._newValue[m])}n.callEvent("onChange",[n._idd,n._value])}n._autoCheck()},setValue:function(o,m){var l={};if(typeof(m)=="string"){m=m.split(",")}if(typeof(m)!="object"){m=[m]}for(var n=0;n<m.length;n++){l[m[n]]=true}var r=this.getOptions(o);for(var n=0;n<r.length;n++){r[n].selected=(l[r[n].value]==true)}o._autoCheck()},getValue:function(m){var h=[];var n=this.getOptions(m);for(var l=0;l<n.length;l++){if(n[l].selected){h.push(n[l].value)}}return h}};(function(){for(var a in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[a]){dhtmlXForm.prototype.items.multiselect[a]=dhtmlXForm.prototype.items.select[a]}}})();dhtmlXForm.prototype.items.input={render:function(c,a){var o=(!isNaN(a.rows));c._type="ta";c._enabled=true;this.doAddLabel(c,a);this.doAddInput(c,a,(o?"TEXTAREA":"INPUT"),(o?null:"TEXT"),true,true,"dhxform_textarea");this.doAttachEvents(c);if(o){c.childNodes[c._ll?1:0].childNodes[0].rows=Number(a.rows)+(window.dhx4.isIE6?1:0)}if(typeof(a.numberFormat)!="undefined"){var r,s=null,u=null;if(typeof(a.numberFormat)!="string"){r=a.numberFormat[0];s=a.numberFormat[1]||null;u=a.numberFormat[2]||null}else{r=a.numberFormat;if(typeof(a.groupSep)=="string"){s=a.groupSep}if(typeof(a.decSep)=="string"){u=a.decSep}}this.setNumberFormat(c,r,s,u,false)}this.setValue(c,a.value);return this},doAttachEvents:function(g){var e=this;if(g._type=="ta"||g._type=="se"||g._type=="pw"){g.childNodes[g._ll?1:0].childNodes[0].onfocus=function(){var a=this.parentNode.parentNode;if(a._df!=null){this.value=a._value||""}a.getForm()._ccActivate(a._idd,this,this.value);a.getForm().callEvent("onFocus",[a._idd]);a=null}}g.childNodes[g._ll?1:0].childNodes[0].onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);e.updateValue(a,true);if(a.getForm().live_validate){e._validate(a)}a.getForm().callEvent("onBlur",[a._idd]);a=null}},updateValue:function(o,n){var m=o.childNodes[o._ll?1:0].childNodes[0].value;var r=o.getForm();var u=(r._ccActive==true&&r._formLS!=null&&r._formLS[o._idd]!=null);r=null;if(!u&&o._df!=null&&m==window.dhx4.template._getFmtValue(o._value,o._df)){return}if(!n&&o._df!=null&&o._value==m&&m==window.dhx4.template._getFmtValue(m,o._df)){return}var s=this;if(o._value!=m){if(o.checkEvent("onBeforeChange")){if(o.callEvent("onBeforeChange",[o._idd,o._value,m])!==true){if(o._df!=null){s.setValue(o,o._value)}else{o.childNodes[o._ll?1:0].childNodes[0].value=o._value}return}}if(o._df!=null&&n){s.setValue(o,m)}else{o._value=m}o.callEvent("onChange",[o._idd,m]);return}if(o._df!=null&&n){this.setValue(o,o._value)}},setValue:function(m,l){m._value=(typeof(l)!="undefined"&&l!=null?l:"");var n=(String(m._value)||"");var h=m.childNodes[m._ll?1:0].childNodes[0];if(m._df!=null){n=window.dhx4.template._getFmtValue(n,m._df)}if(h.value!=n){h.value=n;m.getForm()._ccReload(m._idd,n)}h=null},getValue:function(e){var g=e.getForm();if(g._formLS&&g._formLS[e._idd]!=null){this.updateValue(e)}g=null;return(typeof(e._value)!="undefined"&&e._value!=null?e._value:"")},setReadonly:function(e,g){e._ro=(g===true);if(e._ro){e.childNodes[e._ll?1:0].childNodes[0].setAttribute("readOnly","true")}else{e.childNodes[e._ll?1:0].childNodes[0].removeAttribute("readOnly")}},isReadonly:function(c){if(!c._ro){c._ro=false}return c._ro},getInput:function(c){return c.childNodes[c._ll?1:0].childNodes[0]},setNumberFormat:function(r,o,s,n,u){if(typeof(u)!="boolean"){u=true}if(o==""){r._df=null;if(u){this.setValue(r,r._value)}return true}if(typeof(o)!="string"){return}var m=window.dhx4.template._parseFmt(o,s,n);if(m==false){return false}else{r._df=m}if(u){this.setValue(r,r._value)}return true}};(function(){for(var a in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[a]=dhtmlXForm.prototype.items.select[a]}})();dhtmlXForm.prototype.items.password={render:function(e,g){e._type="pw";e._enabled=true;this.doAddLabel(e,g);this.doAddInput(e,g,"INPUT","PASSWORD",true,true,"dhxform_textarea");this.doAttachEvents(e);this.setValue(e,g.value);return this}};(function(){for(var a in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[a]=dhtmlXForm.prototype.items.input[a]}})();dhtmlXForm.prototype.items.file={render:function(m,l){m._type="fl";m._enabled=true;this.doAddLabel(m,l);this.doAddInput(m,l,"INPUT","FILE",true,false,"dhxform_textarea");var h=m.childNodes[m._ll?1:0].childNodes[0];var n=this;h.onfocus=function(){var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd]);a=null};h.onblur=function(){var a=this.parentNode.parentNode;if(a.getForm().live_validate){n._validate(a)}a.getForm().callEvent("onBlur",[a._idd]);a=null};h=null;m.childNodes[m._ll?1:0].childNodes[0].onchange=function(){m.callEvent("onChange",[m._idd,this.value])};return this},setValue:function(){},getValue:function(c){return c.childNodes[c._ll?1:0].childNodes[0].value}};(function(){for(var a in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[a]=dhtmlXForm.prototype.items.input[a]}})();dhtmlXForm.prototype.items.label={_index:false,render:function(l,h){l._type="lb";l._enabled=true;l._checked=true;var g=document.createElement("DIV");g.className="dhxform_txt_label2"+(h._isTopmost?" topmost":"");g.innerHTML=h.label;l.appendChild(g);if(h.hidden==true){this.hide(l)}if(h.disabled==true){this.userDisable(l)}if(!isNaN(h.labelWidth)){g.style.width=parseInt(h.labelWidth)+"px"}if(!isNaN(h.labelHeight)){g.style.height=parseInt(h.labelHeight)+"px"}if(!isNaN(h.labelLeft)){g.style.left=parseInt(h.labelLeft)+"px"}if(!isNaN(h.labelTop)){g.style.top=parseInt(h.labelTop)+"px"}return this},destruct:function(c){this.doUnloadNestedLists(c);c._autoCheck=null;c._enabled=null;c._type=null;c.callEvent=null;c.checkEvent=null;c.getForm=null;c.onselectstart=null;c.parentNode.removeChild(c);c=null},enable:function(c){if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._enabled=true},disable:function(c){if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._enabled=false},setText:function(e,g){e.firstChild.innerHTML=g},getText:function(c){return c.firstChild.innerHTML}};(function(){for(var a in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.items.button={render:function(l,h){l._type="bt";l._enabled=true;l._name=h.name;l.className=String(l.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");l._doOnKeyUpDown=function(a,c){this.callEvent(a,[this.childNodes[0].childNodes[0],c,this._idd])};l.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+h.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>';if(!isNaN(h.width)){var g=Math.max(h.width,10);if(dhtmlXForm.prototype.items[this.t]._dim==null){l.firstChild.style.width=g+"px";dhtmlXForm.prototype.items[this.t]._dim=l.getForm()._checkDim(l,l.firstChild)}l.firstChild.style.width=g-dhtmlXForm.prototype.items[this.t]._dim+"px";l.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}if(!isNaN(h.inputLeft)){l.childNodes[0].style.left=parseInt(h.inputLeft)+"px"}if(!isNaN(h.inputTop)){l.childNodes[0].style.top=parseInt(h.inputTop)+"px"}if(h.hidden==true){this.hide(l)}if(h.disabled==true){this.userDisable(l)}if(typeof(h.tooltip)!="undefined"){l.firstChild.title=h.tooltip}l.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};l.firstChild.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};l.firstChild.onkeypress=function(a){a=a||event;if((a.keyCode==32||a.charCode==32||a.keyCode==13||a.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]);return false}};l.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};l.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};l.firstChild.onkeyup=function(a){this.parentNode._doOnKeyUpDown("onKeyUp",a||event)};l.firstChild.onkeydown=function(a){this.parentNode._doOnKeyUpDown("onKeyDown",a||event)};l.firstChild.onmouseover=function(){var a=this.parentNode;if(!a._enabled){return}this._isOver=true;this.className="dhxform_btn dhxform_btn_over";a=null};l.firstChild.onmouseout=function(){var a=this.parentNode;if(!a._enabled){return}this.className="dhxform_btn";this._allowClick=false;this._pressed=false;this._isOver=false;a=null};l.firstChild.ontouchstart=l.firstChild.onmousedown=function(a){a=a||event;if(a.type=="touchstart"&&a.preventDefault){a.preventDefault()}if(a.button>=2){return}if(this._pressed){return}var c=this.parentNode;if(!c._enabled){return}this.className="dhxform_btn dhxform_btn_pressed";this._allowClick=true;this._pressed=true;c=null};l.firstChild.ontouchend=l.firstChild.onmouseup=function(a){a=a||event;if(a.button>=2){return}if(!this._pressed){return}var c=this.parentNode;if(!c._enabled){return}c._busy=false;this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":"");if(this._pressed&&this._allowClick){c.callEvent("_onButtonClick",[c._name,c._cmd])}this._allowClick=false;this._pressed=false;c=null};l._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};l._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};return this},destruct:function(c){this.doUnloadNestedLists(c);c.callEvent=null;c.checkEvent=null;c.getForm=null;c._autoCheck=null;c._type=null;c._enabled=null;c._cmd=null;c._name=null;c._doOnFocus=null;c._doOnBlur=null;c._doOnKeyUpDown=null;c.onselectstart=null;c.firstChild.onselectstart=null;c.firstChild.onkeypress=null;c.firstChild.ontouchstart=null;c.firstChild.ontouchend=null;c.firstChild.onfocus=null;c.firstChild.onblur=null;c.firstChild.onkeyup=null;c.firstChild.onkeydown=null;c.firstChild.onmouseover=null;c.firstChild.onmouseout=null;c.firstChild.onmousedown=null;c.firstChild.onmouseup=null;while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.parentNode.removeChild(c);c=null},enable:function(c){if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._enabled=true;c.childNodes[0].removeAttribute("disabled");c.childNodes[0].setAttribute("role","link");c.childNodes[0].setAttribute("tabIndex","0")},disable:function(c){if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._enabled=false;c.childNodes[0].setAttribute("disabled","true");c.childNodes[0].removeAttribute("role");c.childNodes[0].removeAttribute("tabIndex")},setText:function(e,g){e.childNodes[0].childNodes[0].innerHTML=g},getText:function(c){return c.childNodes[0].childNodes[0].innerHTML},setFocus:function(c){c.childNodes[0].focus()}};(function(){for(var a in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.items.hidden={_index:false,render:function(l,h){l.style.display="none";l._name=h.name;l._type="hd";l._enabled=true;var g=document.createElement("INPUT");g.type="HIDDEN";g.name=h.name;g.value=(h.value||"");l.appendChild(g);return this},destruct:function(c){this.doUnloadNestedLists(c);while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c._autoCheck=null;c._name=null;c._type=null;c._enabled=null;c.onselectstart=null;c.callEvent=null;c.checkEvent=null;c.getForm=null;c.parentNode.removeChild(c);c=null},enable:function(c){c._enabled=true;c.childNodes[0].setAttribute("name",c._name)},disable:function(c){c._enabled=false;c.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(e,g){e.childNodes[0].value=g},getValue:function(c){return c.childNodes[0].value},getInput:function(c){return c.childNodes[0]}};(function(){for(var a in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.items.list={_index:false,render:function(e,g){e._type="list";e._enabled=true;e._isNestedForm=true;e.style.paddingLeft=e._ofsNested+"px";e.className="dhxform_base_nested"+(e._custom_css||"");return[this,new dhtmlXForm(e,null,g)]},destruct:function(c){}};dhtmlXForm.prototype.items.fieldset={_index:false,render:function(r,n){r._type="fs";if(typeof(parseInt(n.inputWidth))=="number"){}r._width=n.width;r._enabled=true;r._checked=true;r.className="fs_"+n.position+(typeof(n.className)=="string"?" "+n.className:"");var o=document.createElement("FIELDSET");o.className="dhxform_fs";var m=String(n.labelAlign).replace("align_","");o.innerHTML="<legend class='fs_legend' align='"+m+"' style='text-align:"+m+"'>"+n.label+"</legend>";r.appendChild(o);if(!isNaN(n.inputLeft)){o.style.left=parseInt(n.inputLeft)+"px"}if(!isNaN(n.inputTop)){o.style.top=parseInt(n.inputTop)+"px"}if(n.inputWidth!="auto"){if(!isNaN(n.inputWidth)){o.style.width=parseInt(n.inputWidth)+"px";var l=parseInt(o.style.width);if(o.offsetWidth>l){o.style.width=l+(l-o.offsetWidth)+"px"}}}r._addSubListNode=function(){var a=document.createElement("DIV");a._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(a);return a};if(n.hidden==true){this.hide(r)}if(n.disabled==true){this.userDisable(r)}return this},destruct:function(c){this.doUnloadNestedLists(c);c._checked=null;c._enabled=null;c._idd=null;c._type=null;c._width=null;c.onselectstart=null;c._addSubListNode=null;c._autoCheck=null;c.callEvent=null;c.checkEvent=null;c.getForm=null;while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.parentNode.removeChild(c);c=null},setText:function(e,g){e.childNodes[0].childNodes[0].innerHTML=g},getText:function(c){return c.childNodes[0].childNodes[0].innerHTML},enable:function(c){c._enabled=true;if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}},disable:function(c){c._enabled=false;if(String(c.className).search("disabled")<0){c.className+=" disabled"}},setWidth:function(g,e){g.childNodes[0].style.width=e+"px";g._width=e},getWidth:function(c){return c._width}};(function(){for(var a in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.items.block={_index:false,render:function(l,h){l._type="bl";l._width=h.width;l._enabled=true;l._checked=true;l.className="block_"+h.position+(typeof(h.className)=="string"?" "+h.className:"");var g=document.createElement("DIV");g.className="dhxform_obj_"+l.getForm().skin+" dhxform_block";g.style.fontSize=l.getForm().cont.style.fontSize;if(h.style){g.style.cssText=h.style}if(typeof(h.id)!="undefined"){g.id=h.id}l.appendChild(g);if(!isNaN(h.inputLeft)){g.style.left=parseInt(h.inputLeft)+"px"}if(!isNaN(h.inputTop)){g.style.top=parseInt(h.inputTop)+"px"}if(h.inputWidth!="auto"){if(!isNaN(h.inputWidth)){g.style.width=parseInt(h.inputWidth)+"px"}}if(!isNaN(h.blockOffset)){l._ofsNested=h.blockOffset}l._addSubListNode=function(){var a=document.createElement("DIV");a._inBlcok=true;if(typeof(this._ofsNested)!="undefined"){a._ofsNested=this._ofsNested}this.childNodes[0].appendChild(a);return a};if(h.hidden==true){this.hide(l)}if(h.disabled==true){this.userDisable(l)}return this},_setCss:function(g,h,l){g.firstChild.className="dhxform_obj_"+h+" dhxform_block";g.firstChild.style.fontSize=l}};(function(){for(var a in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[a]=dhtmlXForm.prototype.items.fieldset[a]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={render:function(l,h){var g=(!isNaN(h.rows));l._type="tp";l._enabled=true;if(h.format!=null){if(typeof(h.format)=="function"){l.format=h.format}else{if(typeof(h.format)=="string"&&typeof(window[h.format])=="function"){l.format=window[h.format]}}}if(l.format==null){l.format=function(c,a){return a}}this.doAddLabel(l,h);this.doAddInput(l,h,"DIV",null,true,true,"dhxform_item_template");this.setValue(l,h.value||"");return this},destruct:function(c){c.format=null;this.d2(c);c=null},setValue:function(e,g){e._value=g;e.childNodes[e._ll?1:0].childNodes[0].innerHTML=e.format(e._idd,e._value)},getValue:function(c){return c._value},enable:function(c){if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._enabled=true},disable:function(c){if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._enabled=false}};(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var a in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[a]=dhtmlXForm.prototype.items.select[a]}})();dhtmlXForm.prototype._ulToObject=function(v,a){var n=[];for(var y=0;y<v.childNodes.length;y++){if(String(v.childNodes[y].tagName||"").toLowerCase()=="li"){var x={};var A=v.childNodes[y];for(var C=0;C<a.length;C++){if(A.getAttribute(a[C])!=null){x[String(a[C]).replace("ftype","type")]=A.getAttribute(a[C])}}if(!x.label){try{x.label=A.firstChild.nodeValue}catch(e){}}var w=A.getElementsByTagName("UL");if(w[0]!=null){x[(x.type=="select"?"options":"list")]=dhtmlXForm.prototype._ulToObject(w[0],a)}for(var C=0;C<A.childNodes.length;C++){if(String(A.childNodes[C].tagName||"").toLowerCase()=="userdata"){if(!x.userdata){x.userdata={}}x.userdata[A.childNodes[C].getAttribute("name")]=A.childNodes[C].firstChild.nodeValue}}n[n.length]=x}if(String(v.childNodes[y].tagName||"").toLowerCase()=="div"){var x={};x.type="label";try{x.label=v.childNodes[y].firstChild.nodeValue}catch(e){}n[n.length]=x}}return n};dhtmlXForm.prototype.setUserData=function(m,o,n,l){if(typeof(l)!="undefined"){var r=this.doWithItem([m,o],"_getId");if(r!=null){m=r;o=n;n=l}}if(!this._userdata){this._userdata={}}this._userdata[m]=(this._userdata[m]||{});this._userdata[m][o]=n};dhtmlXForm.prototype.getUserData=function(l,m,h){if(typeof(h)!="undefined"){var n=this.doWithItem([l,m],"_getId");if(n!=null){l=n;m=h}}if(this._userdata!=null&&typeof(this._userdata[l])!="undefined"&&typeof(this._userdata[l][m])!="undefined"){return this._userdata[l][m]}return""};dhtmlXForm.prototype.setRTL=function(c){this._rtl=(c===true?true:false);if(this._rtl){if(String(this.cont).search(/dhxform_rtl/gi)<0){this.cont.className+=" dhxform_rtl"}}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(l,n){if(typeof(n)=="object"){var e=n[1];n=n[0]}if(document.createEvent){var m=document.createEvent("MouseEvents");m.initEvent(n,true,false);l.dispatchEvent(m)}else{if(document.createEventObject){var m=document.createEventObject();m.button=1;l.fireEvent("on"+n,m)}}if(e){window.setTimeout(function(){_dhxForm_doClick(l,e)},100)}};dhtmlXForm.prototype.setFormData=function(h){for(var l in h){var a=this.getItemType(l);switch(a){case"checkbox":this[h[l]==true||parseInt(h[l])==1||h[l]=="true"||h[l]==this.getItemValue(l,"realvalue")?"checkItem":"uncheckItem"](l);break;case"radio":this.checkItem(l,h[l]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(l,h[l]);break;default:if(this["setFormData_"+a]){this["setFormData_"+a](l,h[l])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,l,h[l])}break}}};dhtmlXForm.prototype.getFormData=function(H,y){var E={};var a=this;for(var I in this.itemPull){var r=this.itemPull[I]._idd;var F=this.itemPull[I]._type;if(F=="ch"){E[r]=(this.isItemChecked(r)?this.getItemValue(r):0)}if(F=="ra"&&!E[this.itemPull[I]._group]){E[this.itemPull[I]._group]=this.getCheckedValue(this.itemPull[I]._group)}if(F in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){E[r]=this.getItemValue(r,H)}if(this["getFormData_"+F]){E[r]=this["getFormData_"+F](r)}if(F=="up"){var A=this.getItemValue(r);for(var C in A){E[C]=A[C]}}if(this.itemPull[I]._list){for(var D=0;D<this.itemPull[I]._list.length;D++){var x=this.itemPull[I]._list[D].getFormData(H,y);for(var J in x){E[J]=x[J]}}}}if(!y&&this.hId&&this._userdata[this.hId]){for(var I in this._userdata[this.hId]){if(!E[I]){E[I]=this._userdata[this.hId][I]}}}return E};dhtmlXForm.prototype.adjustParentSize=function(){var s=0;var u=-1;for(var e=0;e<this.base.length;e++){s+=this.base[e].firstChild.offsetWidth;if(this.base[e].offsetHeight>u){u=this.base[e].offsetHeight}}var v=false;try{v=(this.cont.parentNode.parentNode.parentNode.parentNode._isCell==true);if(v){var r=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(y){}if(v&&typeof(r)!="undefined"){if(s>0){r.setWidth(s+10)}if(u>0){r.setHeight(u+r.firstChild.firstChild.offsetHeight+5)}v=r=null;return}var x=false;try{x=(this.cont.parentNode.parentNode.parentNode._isWindow==true);if(x){var w=this.cont.parentNode.parentNode;if(typeof(w.callEvent)=="function"){this.cont.style.display="none";w.callEvent("_setCellSize",[s+15,u+15]);this.cont.style.display=""}}}catch(y){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent("onBeforeReset",[this.formId,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent("onAfterReset",[this.formId])}};dhtmlXForm.prototype.send=function(y,o,x,v){if(typeof o=="function"){x=o;o="post"}else{o=(o=="get"?"get":"post")}if(v!==true&&!this.validate()){return}var s=this.getFormData(true);var u=[];for(var w in s){u.push(w+"="+encodeURIComponent(s[w]))}var r=function(a){if(x){x.call(this,a,a.xmlDoc.responseText)}};if(o=="get"){window.dhx4.ajax.get(y+(y.indexOf("?")==-1?"?":"&")+u.join("&"),r)}else{window.dhx4.ajax.post(y,u.join("&"),r)}};dhtmlXForm.prototype.save=function(e,g){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(g,e){this.formId=e};dhtmlXForm.prototype._dp_init=function(c){c._methods=["dummy","dummy","_changeFormId","dummy"];c._getRowData=function(a,l){var h=this.obj.getFormData(true);h[this.action_param]=this.obj.getUserData(a,this.action_param);return h};c._clearUpdateFlag=function(){};c.attachEvent("onAfterUpdate",function(m,l,a,n){if(l=="inserted"||l=="updated"){this.obj.resetDataProcessor("updated");this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent("onAfterSave",[this.obj.formId,n]);return true});c.autoUpdate=false;c.setTransactionMode("POST",true);this.dp=c;this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");this.save=function(){if(!this.callEvent("onBeforeSave",[this.formId,this.getFormData()])){return}if(!this.validate()){return}c.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(c){if(!this.dp){return}this.dp.updatedRows=[];this.dp._in_progress=[];this.dp.setUpdated(this.formId,true,c)};dhtmlXForm.prototype._ccActivate=function(h,g,l){if(!this._formLS){this._formLS={}}if(!this._formLS[h]){this._formLS[h]={input:g,value:l}}if(!this._ccActive){this._ccActive=true;this._ccDo()}g=null};dhtmlXForm.prototype._ccDeactivate=function(c){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&&this._formLS[c]!=null){this._formLS[c].input=null;this._formLS[c]=null;delete this._formLS[c]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var n in this._formLS){var a=this._formLS[n].input;if(String(a.tagName).toLowerCase()=="select"){var m="";if(a.selectedIndex>=0&&a.selectedIndex<a.options.length){m=a.options[a.selectedIndex].value}}else{var m=a.value}if(m!=this._formLS[n].value){this._formLS[n].value=m;this.callEvent("onInputChange",[a._idd,m,this])}a=null}if(this._ccActive){var l=this;this._ccTm=window.setTimeout(function(){l._ccDo();l=null},100)}};dhtmlXForm.prototype._ccReload=function(g,e){if(this._formLS&&this._formLS[g]){this._formLS[g].value=e}};dhtmlXForm.prototype._checkDim=function(o,s){var v=document.createElement("DIV");v.className="dhxform_obj_"+this.skin;v.style.cssText+=(dhx4.isIE6==true?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;");document.body.appendChild(v);var u=o.parentNode;var y=o.nextSibling;v.appendChild(o);var w=parseInt(s.style.width);var r=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?s.offsetWidth:s.clientWidth);var x=r-w;if(y!=null){u.insertBefore(o,y)}else{u.appendChild(o)}v.parentNode.removeChild(v);u=y=v=o=s=null;return x};dhtmlXForm.prototype._autoload=function(){var w=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];var u=document.getElementsByTagName("UL");var s=[];for(var a=0;a<u.length;a++){if(u[a].className=="dhtmlxForm"){var o=document.createElement("DIV");s[s.length]={nodeUL:u[a],nodeForm:o,data:dhtmlXForm.prototype._ulToObject(u[a],w),name:(u[a].getAttribute("name")||null)}}}for(var a=0;a<s.length;a++){s[a].nodeUL.parentNode.insertBefore(s[a].nodeForm,s[a].nodeUL);var v=new dhtmlXForm(s[a].nodeForm,s[a].data);if(s[a].name!==null){window[s[a].name]=v}var r=(s[a].nodeUL.getAttribute("oninit")||null);s[a].nodeUL.parentNode.removeChild(s[a].nodeUL);s[a].nodeUL=null;s[a].nodeForm=null;s[a].data=null;s[a]=null;if(r){if(typeof(r)=="function"){r()}else{if(typeof(window[r])=="function"){window[r]()}}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.detachEvent("onload",dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.attachEvent("onload",dhtmlXForm.prototype._autoload)}if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachForm=function(e){this.callEvent("_onBeforeContentAttach",["form"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(g)}else{g.style.overflow="auto"}this._attachObject(g);this.dataType="form";this.dataObj=new dhtmlXForm(g,e);this.dataObj.setSkin(this.conf.skin);g=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXForm.prototype.items.combo={render:function(l,h){l._type="combo";l._enabled=true;l._value=null;l._newValue=null;this.doAddLabel(l,h);this.doAddInput(l,h,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(l);this.doLoadOpts(l,h);l.onselectstart=function(a){return true};l.childNodes[l._ll?1:0].childNodes[0].setAttribute("mode",h.comboType||"");if(h.comboImagePath){l.childNodes[l._ll?1:0].childNodes[0].setAttribute("imagePath",h.comboImagePath)}if(h.comboDefaultImage){l.childNodes[l._ll?1:0].childNodes[0].setAttribute("defaultImage",h.comboDefaultImage)}if(h.comboDefaultImageDis){l.childNodes[l._ll?1:0].childNodes[0].setAttribute("defaultImageDis",h.comboDefaultImageDis)}l._combo=new dhtmlXComboFromSelect(l.childNodes[l._ll?1:0].childNodes[0]);l._combo.setSkin(l.getForm().skin);l._combo._currentComboValue=l._combo.getSelectedValue();l._combo.getInput().id=h.uid;var g=this;l._combo.attachEvent("onChange",function(){g.doOnChange(this)});if(h.connector){this.doLoadOptsConnector(l,h.connector)}if(h.filtering){l._combo.enableFilteringMode(true)}else{if(h.serverFiltering){l._combo.enableFilteringMode(true,h.serverFiltering,h.filterCache,h.filterSubLoad)}}if(h.readonly==true){this.setReadonly(l,true)}if(h.style){l._combo.DOMelem_input.style.cssText+=h.style}l._combo.attachEvent("onFocus",function(){var c=this.cont.parentNode.parentNode;var a=c.getForm();if(a.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)<0){this.cont.className+=" combo_in_focus"}a.callEvent("onFocus",[c._idd]);a=c=null});l._combo.attachEvent("onBlur",function(){var c=this.cont.parentNode.parentNode;var a=c.getForm();if(a.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)>=0){this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")}a.callEvent("onBlur",[c._idd]);a=c=null});return this},destruct:function(c){c.childNodes[c._ll?1:0].childNodes[0].onchange=null;c._combo._currentComboValue=null;c._combo.unload();c._combo=null;c._apiChange=null;this.d2(c);c=null},doAttachEvents:function(g){var e=this;g.childNodes[g._ll?1:0].childNodes[0].onchange=function(){e.doOnChange(this);e.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(c){if(c.getForm().hot_validate){this._validate(c)}},doOnChange:function(g){var e=g.base.parentNode.parentNode.parentNode;if(e._apiChange){return}g._newComboValue=g.getSelectedValue();if(g._newComboValue!=g._currentComboValue){if(e.checkEvent("onBeforeChange")){if(e.callEvent("onBeforeChange",[e._idd,g._currentComboValue,g._newComboValue])!==true){window.setTimeout(function(){g.setComboValue(g._currentComboValue)},1);return false}}g._currentComboValue=g._newComboValue;e.callEvent("onChange",[e._idd,g._currentComboValue])}e._autoCheck(e._enabled)},doLoadOptsConnector:function(l,h){var m=this;var n=l;l._connector_working=true;l._apiChange=true;l._combo.load(h,function(){n.callEvent("onOptionsLoaded",[n._idd]);n._connector_working=false;if(n._connector_value!=null){m.setValue(n,n._connector_value);n._connector_value=null}n._apiChange=false;m=n=null})},enable:function(c){if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._enabled=true;c._combo.enable()},disable:function(c){if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._enabled=false;c._combo.disable()},getCombo:function(c){return c._combo},setValue:function(e,g){if(e._connector_working){e._connector_value=g;return}e._apiChange=true;e._combo.setComboValue(g);e._combo._currentComboValue=e._combo.getActualValue();e._apiChange=false},getValue:function(c){return c._combo.getActualValue()},setWidth:function(g,e){g.childNodes[g._ll?1:0].childNodes[0].style.width=e+"px"},setReadonly:function(e,g){if(!e._combo){return}e._combo_ro=g;e._combo.readonly(e._combo_ro)},isReadonly:function(e,g){return e._combo_ro||false},setFocus:function(c){if(c._enabled){c._combo.setFocus()}},_setCss:function(g,h,l){g._combo.setFontSize(l,l)}};(function(){for(var a in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[a]=dhtmlXForm.prototype.items.select[a]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(c){return this.doWithItem(c,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(s,o){var u=this;s._type="calendar";s._enabled=true;var n=navigator.userAgent;var m=(n.indexOf("MSIE 6.0")>=0||n.indexOf("MSIE 7.0")>=0||n.indexOf("MSIE 8.0")>=0);this.doAddLabel(s,o);this.doAddInput(s,o,"INPUT","TEXT",true,true,"dhxform_textarea calendar");this.doAttachChangeLS(s);if(m){s.childNodes[s._ll?1:0].childNodes[0].onfocus2=s.childNodes[s._ll?1:0].childNodes[0].onfocus;s.childNodes[s._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}s.childNodes[s._ll?1:0].childNodes[0]._idd=s._idd;s.childNodes[s._ll?1:0].childNodes[0].onblur=function(){var a=this.parentNode.parentNode;if(a._c.base._formMouseDown){a._c.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;a=null;return true}var c=a.getForm();c._ccDeactivate(a._idd);u.checkEnteredValue(this.parentNode.parentNode);if(c.live_validate){u._validate(a)}c.callEvent("onBlur",[a._idd]);if(!a._c.isVisible()){a._tempValue=null}c=a=null};s._f=(o.dateFormat||null);s._f0=(o.serverDateFormat||s._f);var r=s.getForm();s._c=new dhtmlXCalendarObject(s.childNodes[s._ll?1:0].childNodes[0],o.skin||r.skin||"dhx_skyblue");s._c._nullInInput=true;s._c.enableListener(s.childNodes[s._ll?1:0].childNodes[0]);if(s._f!=null){s._c.setDateFormat(s._f)}if(!window.dhx4.s2b(o.enableTime)){s._c.hideTime()}if(window.dhx4.s2b(o.showWeekNumbers)){s._c.showWeekNumbers()}if(!isNaN(o.weekStart)){s._c.setWeekStartDay(o.weekStart)}if(typeof(o.calendarPosition)!="undefined"){s._c.setPosition(o.calendarPosition)}if(o.minutesInterval!=null){s._c.setMinutesInterval(o.minutesInterval)}s._c._itemIdd=s._idd;s._c.attachEvent("onBeforeChange",function(a){if(s._value!=a){if(s.checkEvent("onBeforeChange")){if(s.callEvent("onBeforeChange",[s._idd,s._value,a])!==true){return false}}s._tempValue=s._value=a;u.setValue(s,a,false);s.callEvent("onChange",[this._itemIdd,s._value])}return true});s._c.attachEvent("onClick",function(){s._tempValue=null});s._c.attachEvent("onHide",function(){s._tempValue=null});if(m){s._c.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(s,o.value);r=null;return this},getCalendar:function(c){return c._c},setSkin:function(e,g){e._c.setSkin(g)},setValue:function(l,h,g){if(!h||h==null||typeof(h)=="undefined"||h==""){l._value=null;l.childNodes[l._ll?1:0].childNodes[0].value=""}else{l._value=(h instanceof Date?h:l._c._strToDate(h,l._f0||l._c._dateFormat));l.childNodes[l._ll?1:0].childNodes[0].value=l._c._dateToStr(l._value,l._f||l._c._dateFormat)}if(g!==false){l._c.setDate(l._value)}},getValue:function(l,g){var h=l._tempValue||l._c.getDate();if(g===true&&h==null){return""}return(g===true?l._c._dateToStr(h,l._f0||l._c._dateFormat):h)},setDateFormat:function(l,g,h){l._f=g;l._f0=(h||l._f);l._c.setDateFormat(l._f);this.setValue(l,this.getValue(l))},destruct:function(e){e._c.disableListener(e.childNodes[e._ll?1:0].childNodes[0]);e._c.unload();e._c=null;try{delete e._c}catch(g){}e._f=null;try{delete e._f}catch(g){}e._f0=null;try{delete e._f0}catch(g){}e.childNodes[e._ll?1:0].childNodes[0]._idd=null;e.childNodes[e._ll?1:0].childNodes[0].onblur=null;this.d2(e);e=null},checkEnteredValue:function(c){this.setValue(c,c._c.getDate())}};(function(){for(var a in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[a]=dhtmlXForm.prototype.items.input[a]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(c){return this.doWithItem(c,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(l,g,h){this.doWithItem(l,"setDateFormat",g,h)};dhtmlXForm.prototype.items.btn2state={setChecked:function(e,g){e._checked=(g===true?true:false);e.childNodes[e._ll?1:0].lastChild.className="dhxform_img "+e._cssName+"_"+(e._checked?"1":"0");this.doCheckValue(e)}};(function(){for(var a in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[a]){dhtmlXForm.prototype.items.btn2state[a]=dhtmlXForm.prototype.items.checkbox[a]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(e,g){g._autoInputWidth=false;this.render2(e,g);e._type="btn2state";e._cssName=(typeof(g.cssName)=="undefined"?"btn2state":g.cssName);e._updateImgNode=function(){};e._doOnFocus=function(){e.getForm().callEvent("onFocus",[e._idd])};e._doOnBlur=function(){e.getForm().callEvent("onBlur",[e._idd])};e._doOnKeyUpDown=function(c,l,a){this.callEvent(c,[this.childNodes[this._ll?0:1].childNodes[0],l,this._idd])};this.setChecked(e,e._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(e,g){this[g==true||parseInt(g)==1||g=="true"||g==this.getItemValue(e)?"checkItem":"uncheckItem"](e)};dhtmlXForm.prototype.getFormData_btn2state=function(c){return(this.isItemChecked(c)?this.getItemValue(c):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(m,l){var n=this;m._type="colorpicker";m._enabled=true;this.doAddLabel(m,l);this.doAddInput(m,l,"INPUT","TEXT",true,true,"dhxform_textarea");m._value=(l.value||"");m.childNodes[m._ll?1:0].childNodes[0].value=m._value;var h={input:m.childNodes[m._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(l.enableCustomColors)==true),skin:m.getForm().skin};this.colorpicker[m._idd]=new dhtmlXColorPicker(h);this.colorpicker[m._idd]._nodes[0].valueColor=null;this.colorpicker[m._idd].base.className+=" dhtmlxcp_in_form";if(typeof(l.customColors)!="undefined"){this.colorpicker[m._idd].setCustomColors(l.customColors)}if(typeof(l.cpPosition)=="string"){this.colorpicker[m._idd].setPosition(l.cpPosition)}this.colorpicker[m._idd].attachEvent("onSelect",function(a){if(m._value!=a){if(m.checkEvent("onBeforeChange")){if(m.callEvent("onBeforeChange",[m._idd,m._value,a])!==true){m.childNodes[m._ll?1:0].childNodes[0].value=m._value;return}}m._value=a;n.setValue(m,a);m.callEvent("onChange",[m._idd,m._value])}});this.colorpicker[m._idd].attachEvent("onHide",function(c){var a=m.childNodes[m._ll?1:0].childNodes[0];if(a.value!=m._value){a.value=m._value}a=null});m.childNodes[m._ll?1:0].childNodes[0]._idd=m._idd;return this},getColorPicker:function(c){return this.colorpicker[c._idd]},destruct:function(e){if(this.colorpicker[e._idd].unload){this.colorpicker[e._idd].unload()}this.colorpicker[e._idd]=null;try{delete this.colorpicker[e._idd]}catch(g){}e.childNodes[e._ll?1:0].childNodes[0]._idd=null;this.d2(e);e=null},setSkin:function(e,g){this.colorpicker[e._idd].setSkin(g)}};(function(){for(var a in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[a]=dhtmlXForm.prototype.items.input[a]}})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(c){return this.doWithItem(c,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(e,g){e._type="container";e._enabled=true;this.doAddLabel(e,g);this.doAddInput(e,g,"DIV",null,true,true,"dhxform_container");return this},getContainer:function(c){return c.childNodes[c._ll?1:0].childNodes[0]},enable:function(c){c._enabled=true;if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c.callEvent("onEnable",[c._idd])},disable:function(c){c._enabled=false;if(String(c.className).search("disabled")<0){c.className+=" disabled"}c.callEvent("onDisable",[c._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(c){return this.doWithItem(c,"getContainer")};(function(){for(var a in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[a]){dhtmlXForm.prototype.items.container[a]=dhtmlXForm.prototype.items.input[a]}}})();dhtmlXForm.prototype.items.editor={editor:{},render:function(m,l){var h=(!isNaN(l.rows));m._type="editor";m._enabled=true;m._editor_id=m.getForm().idPrefix+m._idd;this.doAddLabel(m,l);this.doAddInput(m,l,"DIV",null,true,true,"dhxform_item_template");m._value=(l.value||"");var n=this;this.editor[m._editor_id]=new dhtmlXEditor({parent:m.childNodes[m._ll?1:0].childNodes[0],content:m._value,iconsPath:l.iconsPath,toolbar:l.toolbar});this.editor[m._editor_id].attachEvent("onAccess",function(c,a){m.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");if(c=="blur"){n.doOnBlur(m,this);m.callEvent("onBlur",[m._idd]);if(m.getForm().skin=="dhx_terrace"){var e=m.childNodes[m._ll?1:0].className;if(e.indexOf("dhxeditor_focus")>=0){m.childNodes[m._ll?1:0].className=(e).replace(/\s{0,}dhxeditor_focus/gi,"")}}}else{m.callEvent("onEditorAccess",[m._idd,c,a,this,m.getForm()]);m.callEvent("onFocus",[m._idd]);if(m.getForm().skin=="dhx_terrace"){var e=m.childNodes[m._ll?1:0].className;if(e.indexOf("dhxeditor_focus")==-1){m.childNodes[m._ll?1:0].className+=" dhxeditor_focus"}}}});this.editor[m._editor_id].attachEvent("onToolbarClick",function(a){m.callEvent("onEditorToolbarClick",[m._idd,a,this,m.getForm()])});if(l.readonly){this.setReadonly(m,true)}m.childNodes[m._ll?0:1].childNodes[0].removeAttribute("for");m.childNodes[m._ll?0:1].childNodes[0].onclick=function(){n.editor[m._editor_id]._focus()};return this},doOnBlur:function(h,l){var g=l.getContent();if(h._value!=g){if(h.checkEvent("onBeforeChange")){if(h.callEvent("onBeforeChange",[h._idd,h._value,g])!==true){l.setContent(h._value);return}}h._value=g;h.callEvent("onChange",[h._idd,g])}},setValue:function(e,g){if(e._value==g){return}e._value=g;this.editor[e._editor_id].setContent(e._value)},getValue:function(c){c._value=this.editor[c._editor_id].getContent();return c._value},enable:function(c){if(this.isEnabled(c)!=true){this.editor[c._editor_id].setReadonly(false);this.doEn(c)}},disable:function(c){if(this.isEnabled(c)==true){this.editor[c._editor_id].setReadonly(true);this.doDis(c)}},setReadonly:function(e,g){this.editor[e._editor_id].setReadonly(g)},getEditor:function(c){return(this.editor[c._editor_id]||null)},destruct:function(c){c.childNodes[c._ll?0:1].childNodes[0].onclick=null;this.editor[c._editor_id].unload();this.editor[c._editor_id]=null;this.d2(c);c=null},setFocus:function(c){this.editor[c._editor_id]._focus()}};(function(){for(var a in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[a]=dhtmlXForm.prototype.items.template[a]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(c){return this.doWithItem(c,"getEditor")};dhtmlXForm.prototype.items.image={_dimFix:true,render:function(o,h){o._type="image";o._enabled=true;o._fr_name="dhxform_image_"+window.dhx4.newId();o._url=h.url;if(h.inputWidth=="auto"){h.inputWidth=120}if(h.inputHeight=="auto"){h.inputHeight=h.inputWidth}this.doAddLabel(o,h);this.doAddInput(o,h,"DIV",null,true,true,"dhxform_image");var u=o.childNodes[o._ll?1:0].childNodes[0];u.style.height=parseInt(u.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var n=(typeof(h.imageWidth)!="undefined"?parseInt(h.imageWidth):h.inputWidth);var s=(typeof(h.imageHeight)!="undefined"?parseInt(h.imageHeight):h.inputHeight);if(s=="auto"){s=n}o._dim={mw:h.inputWidth-this._dim,mh:h.inputHeight-this._dim,w:n,h:s};u.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+o._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+o._url+"' method='POST' enctype='multipart/form-data' target='"+o._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+o._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>";"</div>";this.adjustImage(o);u.childNodes[2].firstChild.lastChild.onchange=function(){o._is_uploading=true;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress"};var r=this;if(window.navigator.userAgent.indexOf("MSIE")>=0){u.childNodes[1].onreadystatechange=function(){if(this.readyState=="complete"){r.doOnUpload(o)}}}else{u.childNodes[1].onload=function(){r.doOnUpload(o)}}this._moreClear=function(){r=null};this.setValue(o,h.value||"");u=null;return this},destruct:function(g){var e=g.childNodes[g._ll?1:0].childNodes[0];e.childNodes[2].firstChild.lastChild.onchange=null;e.childNodes[1].onreadystatechange=null;e.childNodes[1].onload=null;this._moreClear();this.d2(g);g=null},doAttachEvents:function(){},setValue:function(o,m){o._value=(m==null?"":m);var r=o._url+(o._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(o._idd)+"&itemValue="+encodeURIComponent(o._value)+(window.dhx4.ajax.cache!=true?"&dhxr"+new Date().getTime()+"=1":"");var n=o.childNodes[o._ll?1:0].childNodes[0].firstChild;if(n.nextSibling.tagName.toLowerCase()=="img"){n.nextSibling.src=r}else{var l=document.createElement("IMG");l.className="dhxform_image_img";l.style.visibility="hidden";l.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=null};l.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"};n.parentNode.insertBefore(l,n);l.src=r;l=null;this.adjustImage(o)}n=null},getValue:function(c){return c._value},doOnUpload:function(h){if(h._is_uploading==true){var g=h.childNodes[h._ll?1:0].childNodes[0].lastChild.previousSibling;var l=dhx4.s2j(g.contentWindow.document.body.innerHTML);if(typeof(l)=="object"&&l!=null&&l.state==true&&l.itemId==h._idd){this.setValue(h,l.itemValue,true);h.getForm().callEvent("onImageUploadSuccess",[l.itemId,l.itemVaule,l.extra])}else{h.getForm().callEvent("onImageUploadFail",[h._idd,(l?l.extra:null)])}l=g=null;window.setTimeout(function(){h.childNodes[h._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";h._is_uploading=false},50)}},adjustImage:function(l){var n=l.childNodes[l._ll?1:0].childNodes[0].firstChild;var h=Math.min(l._dim.mw,l._dim.w);var m=Math.min(l._dim.mh,l._dim.h);n.style.width=h+"px";n.style.height=m+"px";n.style.marginLeft=Math.max(0,Math.round(l._dim.mw/2-h/2))+"px";n.style.marginTop=Math.max(0,Math.round(l._dim.mh/2-m/2))+"px";n=l=null}};(function(){for(var a in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.image[a]){dhtmlXForm.prototype.items.image[a]=dhtmlXForm.prototype.items.input[a]}}})();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(e,g){this.setItemValue(e,g)};dhtmlXForm.prototype.getFormData_image=function(c){return this.getItemValue(c)};dhtmlXForm.prototype.items.upload={render:function(l,h){l._type="up";l._enabled=true;l._checked=true;l.className=h.position+(typeof(h.className)=="string"?" "+h.className:"");var g=document.createElement("DIV");l.appendChild(g);if(!isNaN(h.inputLeft)){l.style.left=parseInt(h.inputLeft)+"px"}if(!isNaN(h.inputTop)){l.style.top=parseInt(h.inputTop)+"px"}if(h.inputWidth!="auto"){if(!isNaN(h.inputWidth)){g.style.width=parseInt(h.inputWidth)+"px"}}l._uploader=new dhtmlXFileUploader(g,h.swfPath||"",h.swfUrl||"",h.mode||null,h.swfLogs,h.slXap||"",h.slUrl||"",h.slLogs||"",h.multiple);l._uploader.setURL(h.url||"");l._uploader.callEvent=l.callEvent;if(typeof(h.autoStart)!="undefined"){l._uploader.setAutoStart(h.autoStart)}if(typeof(h.autoRemove)!="undefined"){l._uploader.setAutoRemove(h.autoRemove)}if(typeof(h.titleScreen)!="undefined"){l._uploader.enableTitleScreen(h.titleScreen)}if(typeof(h.titleText)!="undefined"){l._uploader.setTitleText(h.titleText)}if(h.hidden==true){this.hide(l)}if(h.disabled==true){this.userDisable(l)}if(!(h.inputHeight=="auto"||parseInt(h.inputHeight)==NaN)){l._uploader.p_files.style.height=parseInt(h.inputHeight)+"px"}return this},destruct:function(c){this.doUnloadNestedLists(c);c._uploader.callEvent=function(){return true};c._uploader.unload();c._uploader.callEvent=null;c._uploader=null;c._checked=null;c._enabled=null;c._idd=null;c._type=null;c.onselectstart=null;c._autoCheck=null;c.callEvent=null;c.checkEvent=null;c.getForm=null;while(c.childNodes.length>0){c.removeChild(c.childNodes[0])}c.parentNode.removeChild(c);c=null},setText:function(e,g){},getText:function(c){},enable:function(c){c._enabled=true;if(String(c.className).search("disabled")>=0){c.className=String(c.className).replace(/disabled/gi,"")}c._uploader.enable()},disable:function(c){c._enabled=false;if(String(c.className).search("disabled")<0){c.className+=" disabled"}c._uploader.disable()},setWidth:function(g,e){g.childNodes[0].style.width=e+"px";g._width=e},getWidth:function(c){return c._width||parseInt(c.childNodes[0].style.width)},setValue:function(c){c._uploader.clear()},getValue:function(a){var n=a._uploader.getData();var m={};var o=0;for(var r in n){m[a._idd+"_r_"+o]=n[r].realName;m[a._idd+"_s_"+o]=n[r].serverName;o++}m[a._idd+"_count"]=o;return m},getUploader:function(c){return c._uploader},getStatus:function(c){return c._uploader.getStatus()}};(function(){for(var a in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[a]=dhtmlXForm.prototype.items.checkbox[a]}})();dhtmlXForm.prototype.setFormData_upload=function(c){this.doWithItem(c,"setValue")};dhtmlXForm.prototype.getUploader=function(c){return this.doWithItem(c,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(c){return this.doWithItem(c,"getStatus")};function dhtmlXFileUploader(F,y,A,e,K,C,I,D,H){var a=this;if(typeof(e)=="string"&&typeof(this[e])=="function"){this.engine=e}else{this.engine="html4";var E=null;if(typeof(window.FormData)!="undefined"&&typeof(window.XMLHttpRequest)!="undefined"){E=new XMLHttpRequest();if(typeof(E.upload)=="undefined"){E=null}}if(E!=null){this.engine="html5"}else{if(typeof(window.swfobject)!="undefined"||E===false){var E=swfobject.getFlashPlayerVersion();if(E.major>=10){this.engine="flash"}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine="sl"}}}E=null}if(typeof(F)=="string"){F=document.getElementById(F)}this._upload_mp=(typeof(H)!="undefined"?H==true:true);this._upload_dnd=true;this._swf_file_url=y||"";this._swf_upolad_url=A||"";this._swf_logs=K;this._sl_xap=C;this._sl_upload_url=I;this._sl_logs=D;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";F.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){if(!a._enabled){return}if(!a._uploading){a._uploadStart()}},tooltip:"Upload"},cancel:{onclick:function(){if(!a._enabled){return}a._uploadStop();a._switchButton(false)},tooltip:"Stop"},clear:{onclick:function(){if(!a._enabled){return}a.clear()},tooltip:"Clear list"}};this.buttons={};for(var c in this.b_opts){var g=document.createElement("DIV");g.innerHTML="&nbsp;";g.className="dhx_file_uploader_button button_"+c;g.onclick=this.b_opts[c].onclick;if(this.b_opts[c].tooltip){g.title=this.b_opts[c].tooltip}this.p_controls.appendChild(g);this.buttons[c]=g;g=null}this.buttons.cancel.style.display="none"};this._readableSize=function(l){var h=false;var g=["b","Kb","Mb","Gb","Tb","Pb","Eb"];for(var c=0;c<g.length;c++){if(l>1024){l=l/1024}else{if(h===false){h=c}}}if(h===false){h=g.length-1}return Math.round(l*100)/100+" "+g[h]};this._beforeAddFileToList=function(c,g){return(this.callEvent("onBeforeFileAdd",[c,g])===true)};this._addFileToList=function(l,h,c,m,g){this._checkTitleScreen();var n=document.createElement("DIV");n._idd=l;n.className="dhx_file dhx_file_"+m;n.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+g+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(n);n.childNodes[0].style.width=n.offsetWidth-127+"px";this._items[l]=n;this._updateFileNameSize(l);n.childNodes[2].onclick=function(){if(!a._enabled){return}var o=this.parentNode._idd;a._removeFileFromQueue(o)};this.callEvent("onFileAdd",[h])};this._removeFileFromList=function(c){if(!this._items[c]){return}this._items[c].childNodes[2].onclick=null;this._items[c].parentNode.removeChild(this._items[c]);this._items[c]=null;delete this._items[c];if(this._data[c]){this._data[c]=null;delete this._data[c]}this._checkTitleScreen()};this._updateFileNameSize=function(c){this._items[c].childNodes[0].innerHTML=this._files[c].name+(!isNaN(this._files[c].size)?" ("+this._readableSize(this._files[c].size)+")":"&nbsp;");this._items[c].childNodes[0].title=this._files[c].name+(!isNaN(this._files[c].size)?" ("+this._readableSize(this._files[c].size)+")":"")};this._updateFileInList=function(h,g,c){if(!this._items[h]){return}this._items[h].className="dhx_file dhx_file_"+g;this._updateProgress(h,g,c);this._updateFileNameSize(h)};this._updateProgress=function(h,g,c){if(g=="uploading"&&c<100&&this._progress_type=="loader"){this._items[h].childNodes[1].className="dhx_file_param dhx_file_uploading";this._items[h].childNodes[1].innerHTML="&nbsp;"}else{this._items[h].childNodes[1].className="dhx_file_param dhx_file_progress";this._items[h].childNodes[1].innerHTML=c+"%"}this._updateFileNameSize(h)};this._removeFilesByState=function(g){for(var c in this._files){if(g===true||this._files[c].state==g){this._removeFileFromQueue(c)}}};this._switchButton=function(g){if(g==true){this.buttons.upload.style.display="none";this.buttons.cancel.style.display=""}else{var c=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;if(c>0){this.callEvent("onUploadComplete",[c])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var c in this._files){if(this._files[c].state=="fail"){this._files[c].state="added";this._updateFileInList(c,"added",0)}}}this._uploading=true;var g=false;for(var c in this._files){if(!g&&[this._files[c].state]=="added"){g=true;this._files[c].state="uploading";this._updateFileInList(c,"uploading",0);this._doUploadFile(c)}}if(!g){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(l,c,m,g){if(typeof(m)!="undefined"&&this.engine=="flash"){var h=dhx4.s2j(m.data);if(h!=null&&h.state==true&&h.name!=null){c=h.name;if(h.extra!=null){g=h.extra}}else{this._onUploadFail(l,(h!=null&&h.extra!=null?h.extra:null));return}}this._uploaded_count++;this._data[l]={realName:this._files[l].name,serverName:c};this._files[l].state="uploaded";this._updateFileInList(l,"uploaded",100);this.callEvent("onUploadFile",[this._files[l].name,c,g]);if(this._autoRemove){this._removeFileFromQueue(l)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(g,c){this._files[g].state="fail";this._updateFileInList(g,"fail",0);this.callEvent("onUploadFail",[this._files[g].name,c]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(c){this._uploading=false;this._files[c].state="added";this._updateFileInList(c,"added",0);this.callEvent("onUploadCancel",[this._files[c].name])};this._checkTitleScreen=function(){var g=0;for(var c in this._files){g++}if(g==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title";this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((g>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,"");this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(c){this._autoStart=(c==true)};this.setAutoRemove=function(c){this._autoRemove=(c==true)};this.enableTitleScreen=function(c){this._titleScreen=(c==true);this._checkTitleScreen()};this.setTitleText=function(c){this._titleText=c;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(c){this._url=c};this.setSWFURL=function(c){this._swf_upolad_url=c};this.enable=function(){this._enabled=true;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=false;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var g=0;for(var c in this._files){if(this._files[c].state!="uploaded"){return -1}g=1}return g};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent("onBeforeClear",[])!==true){return}if(this._uploading){a._uploadStop()}a._switchButton(false);a._removeFilesByState(true);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var c in this.buttons){this.buttons[c].onclick=null;this.buttons[c].parentNode.removeChild(this.buttons[c]);this.buttons[c]=null;delete this.buttons[c]}this.buttons=null;for(var c in this.b_opts){this.b_opts[c].onclick=null;this.b_opts[c]=null;delete this.b_opts[c]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var c in this){this[c]=null}a=c=null};var L=new this[this.engine]();for(var J in L){this[J]=L[J];L[J]=null}J=L=F=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var g=this;this.buttons.browse.onclick=function(){if(g._enabled){g.f.click()}};this._progress_type="percentage";var e=window.navigator.userAgent;if(e.match(/Windows/gi)!=null&&e.match(/AppleWebKit/gi)!=null&&e.match(/Safari/gi)!=null){if(e.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(e.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(e.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(e.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(e.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(a){if(!a.dataTransfer){return}a.stopPropagation();a.preventDefault()};this.p.ondragover=function(a){if(!a.dataTransfer){return}a.stopPropagation();a.preventDefault()};this.p.ondrop=function(a){if(!a.dataTransfer){return}a.stopPropagation();a.preventDefault();if(g._enabled){g._parseFilesInInput(a.dataTransfer.files)}};this._titleText="Drag-n-Drop files here or<br>click to select files for upload."}else{this._titleText="Click to select files for upload."}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var c=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){c._parseFilesInInput(this.files);if(window.dhx4.isOpera){c._addFileInput()}else{this.value=""}}},_doUploadFile:function(h){var l=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(a){if(l._files[this._idd].state=="uploading"){l._updateFileInList(this._idd,"uploading",Math.round(a.loaded*100/a.total))}};this._loader.onload=function(a){var c=dhx4.s2j(this.responseText);if(typeof(c)=="object"&&c!=null&&typeof(c.state)!="undefined"&&c.state==true){l._onUploadSuccess(this.upload._idd,c.name,null,c.extra);c=null}else{l._onUploadFail(this.upload._idd,(c!=null&&c.extra!=null?c.extra:null))}};this._loader.onerror=function(a){l._onUploadFail(this.upload._idd)};this._loader.onabort=function(a){l._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=h;var g=new FormData();g.append("file",this._files[h].file);this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&dhxr"+new Date().getTime(),true);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(g)},_uploadStop:function(){if(!this._uploading||!this._loader){return}this._loader.abort()},_parseFilesInInput:function(g){for(var e=0;e<g.length;e++){this._addFileToQueue(g[e])}},_addFileToQueue:function(e){if(!this._beforeAddFileToList(e.name,e.size)){return}var g=(e._idd||window.dhx4.newId());this._files[g]={file:e,name:e.name,size:e.size,state:"added"};this._addFileToList(g,e.name,e.size,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(l){if(!this._files[l]){return}var n=this._files[l].name;var m=(this._data!=null&&this._data[l]!=null?this._data[l].serverName:null);if(this.callEvent("onBeforeFileRemove",[n,m])!==true){return}var h=false;if(this._uploading&&l==this._loader.upload._idd&&this._files[l].state=="uploading"){this._uploadStop();h=true}this._files[l].file=null;this._files[l].name=null;this._files[l].size=null;this._files[l].state=null;this._files[l]=null;delete this._files[l];this._removeFileFromList(l);this.callEvent("onFileRemove",[n,m]);if(h){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var g=this;var h=window.dhx4.newId();if(!this.k){this.k=document.createElement("DIV");this.k.className="dhx_file_form_cont";this.buttons.browse.appendChild(this.k);this.fr_name="dhx_file_"+window.dhx4.newId();this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf("MSIE")>=0){this.fr.onreadystatechange=function(){if(this.readyState=="complete"){g._onLoad()}}}else{this.fr.onload=function(){g._onLoad()}}}var l=document.createElement("DIV");l.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+h+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(l);l.firstChild.lastChild._idd=h;l.firstChild.lastChild.onchange=function(){if(!g._beforeAddFileToList(this.value,null)){return}g._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";g._addForm()};l=null},_onLoad:function(){if(this._uploading){var c=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if(typeof(c)=="object"&&c!=null){if(typeof(c.state)!="undefined"){if(c.state=="cancelled"){this._onUploadAbort(this.fr._idd);c=null;return}else{if(c.state==true){if(typeof(c.size)!="undefined"&&!isNaN(c.size)){this._files[this.fr._idd].size=c.size}this._onUploadSuccess(this.fr._idd,c.name,null,c.extra);c=null;return}}}}this._onUploadFail(this.fr._idd,(c!=null&&c.extra!=null?c.extra:null))}},_addFileToQueue:function(g){var e=g.value.match(/[^\\\/]*$/g);if(e[0]!=null){e=e[0]}else{e=g.value}this._files[g._idd]={name:e,form:g.parentNode,node:g.parentNode.parentNode,input:g,state:"added"};this._addFileToList(g._idd,g.value,false,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(h){var g=this._files[h].name;var l=(this._data!=null&&this._data[h]!=null?this._data[h].serverName:null);if(this.callEvent("onBeforeFileRemove",[g,l])!==true){return}this._files[h].input.onchange=null;this._files[h].form.removeChild(this._files[h].input);this._files[h].node.removeChild(this._files[h].form);this._files[h].node.parentNode.removeChild(this._files[h].node);this._files[h].input=null;this._files[h].name=null;this._files[h].form=null;this._files[h].node=null;this._files[h].size=null;this._files[h].state=null;this._files[h]=null;delete this._files[h];this._removeFileFromList(h);this.callEvent("onFileRemove",[g,l])},_doUploadFile:function(c){this.fr._idd=c;this._files[c].form.action=this._url;this._files[c].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&dhxr"+new Date().getTime()},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(!window.dhtmlXSWFObjectsPull){window.dhtmlXSWFObjectsPull={items:{},callEvent:function(a,l,c){return window.dhtmlXSWFObjectsPull.items[a].uploader[l].apply(window.dhtmlXSWFObjectsPull.items[a].uploader,c)}}}var g=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime();this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var e=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+e.major+"."+e.minor+"."+e.release;this._progress_type="percentage";window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(e,g){return(this.callEvent("onBeforeFileAdd",[e,g])===true)},_addFileToQueue:function(l,n,m){if(window.dhx4.isIE){var h=document.createElement("INPUT");h.type="TEXT";h.style.position="absolute";h.style.left="0px";h.style.top=window.dhx4.absTop(this.buttons.browse)+"px";h.style.width="10px";document.body.appendChild(h);h.focus();document.body.removeChild(h);h=null}this._files[l]={name:n,size:m,state:"added"};this._addFileToList(l,n,m,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(l){if(!this._files[l]){return}var n=this._files[l].name;var m=(this._data!=null&&this._data[l]!=null?this._data[l].serverName:null);if(this.callEvent("onBeforeFileRemove",[n,m])!==true){return}var h=false;if(this._uploading&&this._files[l].state=="uploading"){this._uploadStop();h=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(l);this._files[l].name=null;this._files[l].size=null;this._files[l].state=null;this._files[l]=null;delete this._files[l];this._removeFileFromList(l);this.callEvent("onFileRemove",[n,m]);if(h){this._uploadStart()}},_doUploadFile:function(c){swfobject.getObjectById(this._swf_obj_id).upload(c,this._swf_upolad_url)},_uploadStop:function(a){for(var g in this._files){if(this._files[g].state=="uploading"){swfobject.getObjectById(this._swf_obj_id).uploadStop(g)}}},_unloadEngine:function(){if(window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]){window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].id=null;window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].uploader=null;window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]=null;delete window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(h,g,l){window.dhtmlXFileUploaderSLObjects.items[h].uploader[g].apply(window.dhtmlXFileUploaderSLObjects.items[h].uploader,l)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();if(this._sl_v!=false){this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1];this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'}else{this._titleText="Silverlight plugin not found<br>or version less than 4.0";this.buttons.browse.style.cursor="wait";this.buttons.browse.title=""}this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(h,g,l){this._files[h]={name:g,size:l,state:"added"};this._addFileToList(h,g,l,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(g){if(!this._files[g]){return}var e=false;if(this._uploading&&this._files[g].state=="uploading"){this._uploadStop();e=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(g);this._files[g].name=null;this._files[g].size=null;this._files[g].state=null;this._files[g]=null;delete this._files[g];this._removeFileFromList(g);if(e){this._uploadStart()}},_doUploadFile:function(g){var e=this._sl_upload_url.split("?");e=(e[1]!=null?"&"+e[1]:"");document.getElementById(this._sl_obj_id).Content.a.upload(g,this._sl_upload_url,e+"&mode=sl&dhxr"+new Date().getTime())},_uploadStop:function(a){this._uploading=false;for(var g in this._files){if(this._files[g].state=="uploading"){document.getElementById(this._sl_obj_id).Content.a.uploadStop(g)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(c){this._sl_upload_url=c};dhtmlXFileUploader.prototype.getSLVersion=function(){var m=false;if(window.dhx4.isIE){try{var r=new ActiveXObject("AgControl.AgControl");if(r!=null){var e=4,n=0;while(r.isVersionSupported([e,n].join("."))){m=[e,n];if(++n>9){e++;n=0}}}r=null}catch(o){}}else{if(navigator.plugins["Silverlight Plug-In"]!=null){m=navigator.plugins["Silverlight Plug-In"].description.split(".")}}return m};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(c){if(this._backup!=null&&this._backup[c]!=null){this.setFormData(this._backup[c])}};dhtmlXForm.prototype.clearBackup=function(c){if(this._backup!=null&&this._backup[c]!=null){this._backup[c]=null;delete this._backup[c]}};dhtmlXForm.prototype.addItem=function(s,n,m,r){var u=null;if(s instanceof Array){u=s[1];s=s[0]}var o=null;if(s!=null){var o=this._getParentForm(s,u);if(o!=null){if(o.item._list==null){if(!n.listParent){n.listParent=o.item._idd}o.form._addItem("list",o.item._idd,[n],null,o.item._idd,m,r)}else{o.item._list[0].addItem(null,n,m,r)}o.form=o.item=null;o=null;this._autoCheck();return}}this._prepareItem(n,m,r);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(g,e){this._removeItem(g,e)};dhtmlXForm.prototype.removeColumn=function(u,v,x,y){var r=null;if(u instanceof Array){r=u[1];u=u[0]}if(u!=null){var w=this._getParentForm(u,r);if(w!=null){if(w.item._list!=null&&w.item._list[0]!=null){w.item._list[0].removeColumn(null,v,x,y)}w.form=w.item=null;w=null}return}v=Math.min(Math.max(v,0),this.cont.childNodes.length-1);if(this.cont.childNodes.length==1){if(x==true){this._removeItemsInColumn(this.cont.childNodes[v])}}else{if(x==true){this._removeItemsInColumn(this.cont.childNodes[v])}else{if(!y){var C=v-1;if(C<0){C=v+1}}else{var C=v+1;if(C>this.cont.childNodes.length-1){C=v-1}}while(this.cont.childNodes[v].childNodes.length>0){this.cont.childNodes[C].appendChild(this.cont.childNodes[v].childNodes[0])}}var s=[];for(var A=0;A<this.base.length;A++){if(this.cont.childNodes[v]!=this.base[A]){s.push(this.base[A])}}this.base=s;this.cont.removeChild(this.cont.childNodes[v]);this.b_index--;s=null}};dhtmlXForm.prototype.getColumnNode=function(o,r){var n=null;var l=null;if(o instanceof Array){l=o[1];o=o[0]}if(o!=null){var m=this._getParentForm(o,l);if(m!=null){if(m.item._list!=null&&m.item._list[0]!=null&&n==null){n=m.item._list[0].getColumnNode(null,r)}m.form=m.item=null;m=null}return n}if(r<0||r>this.cont.childNodes.length-1){return null}return this.cont.childNodes[r]};dhtmlXForm.prototype._removeItemsInColumn=function(l){var h=[];for(var m=0;m<l.childNodes.length;m++){var n=l.childNodes[m];if(n._idd!=null&&n._type!=null){h.push([n._idd,(n._type=="ra"?n._value:null)])}n=null}for(var m=0;m<h.length;m++){this.removeItem(h[m][0],h[m][1])}};dhtmlXForm.prototype._getParentForm=function(a,m){if(this.itemPull[this.idPrefix+a]!=null){return{form:this,item:this.itemPull[this.idPrefix+a]}}for(var r in this.itemPull){if(this.itemPull[r]._type=="ra"&&this.itemPull[r]._group==a&&this.itemPull[r]._value==m){return{form:this,item:this.itemPull[r]}}}var n=null;for(var r in this.itemPull){if(!n&&this.itemPull[r]._list!=null){for(var o=0;o<this.itemPull[r]._list.length;o++){if(!n){n=this.itemPull[r]._list[o]._getParentForm(a,m)}}}}return n};(function(){for(var a in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[a]._getItemNode){dhtmlXForm.prototype.items[a]._getItemNode=function(c){return c}}}})();dhtmlXForm.prototype._getItemNode=function(g,e){if(e!=null){g=[g,e]}return this.doWithItem(g,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(y,s,u){if(typeof(u)=="undefined"){u=s}else{y=[y,s]}var w=this._getItemNode(y);if(!w){return}u=window.dhx4.s2b(u);w._required=(u==true);if(w._required){if(!w._validate){w._validate=[]}var x=false;for(var v=0;v<w._validate.length;v++){x=(w._validate[v]=="NotEmpty"||x)}if(!x){w._validate.push("NotEmpty")}var o=w.childNodes[w._ll?0:1].childNodes[0];if(!(o.lastChild&&o.lastChild.className&&o.lastChild.className.search(/required/)>=0)){var r=document.createElement("SPAN");r.className="dhxform_item_required";r.innerHTML="*";o.appendChild(r);r=o=null}}else{if(w._validate!=null){var x=w._validate;w._validate=[];for(var v=0;v<x.length;v++){if(x[v]!="NotEmpty"){w._validate.push(x[v])}}if(w._validate.length==0){w._validate=null}}var o=w.childNodes[w._ll?0:1].childNodes[0];if(o.lastChild&&o.lastChild.className&&o.lastChild.className.search(/required/)>=0){o.removeChild(o.lastChild);o=null}}this._resetValidateCss(w);w=null};dhtmlXForm.prototype.setNote=function(m,o,l){if(typeof(l)=="undefined"){l=o}else{m=[m,o]}var r=this._getItemNode(m);if(!r){return}var n=this._getNoteNode(r);if(!n){if(!l.width){l.width=r.childNodes[r._ll?1:0].childNodes[0].offsetWidth}n=document.createElement("DIV");n.className="dhxform_note";if({ch:1,ra:1}[r._type]){r.childNodes[r._ll?1:0].insertBefore(n,r.childNodes[r._ll?1:0].lastChild)}else{r.childNodes[r._ll?1:0].appendChild(n)}}n.innerHTML=l.text;if(l.width!=null){n.style.width=l.width+"px";n._w=l.width}n=null};dhtmlXForm.prototype.clearNote=function(l,n){if(typeof(n)!="undefined"){l=[l,n]}var h=this._getItemNode(l);if(!h){return}var m=this._getNoteNode(h);if(m!=null){m.parentNode.removeChild(m);m=null}};dhtmlXForm.prototype._getNoteNode=function(g){var h=null;for(var l=0;l<g.childNodes[g._ll?1:0].childNodes.length;l++){if(String(g.childNodes[g._ll?1:0].childNodes[l].className).search(/dhxform_note/)>=0){h=g.childNodes[g._ll?1:0].childNodes[l]}}g=null;return h};dhtmlXForm.prototype.setValidation=function(n,r,o){if(typeof(note)=="undefined"){o=r}else{n=[n,r]}var u=this._getItemNode(n);if(!u){return}if(u._validate!=null){for(var s=0;s<u._validate.length;s++){u._validate[s]=null}}u._validate=[];if(typeof(o)=="function"||typeof(window[o])=="function"){u._validate=[o]}else{u._validate=String(o).split(this.separator)}if(u._required){var m=false;for(var s=0;s<u._validate.length;s++){m=(u._validate[s]=="NotEmpty"||m)}if(!m){u._validate.push("NotEmpty")}}u=null};dhtmlXForm.prototype.clearValidation=function(l,m){if(typeof(m)!="undefined"){l=[l,m]}var h=this._getItemNode(l);if(!h){return}if(h._validate!=null){for(var n=0;n<h._validate.length;n++){h._validate[n]=null}}h._validate=h._required?["NotEmpty"]:null;h=null};dhtmlXForm.prototype.reloadOptions=function(r,o){var w=this.getItemType(r);if(!{select:1,multiselect:1,combo:1}[w]){return}if(w=="select"||w=="multiselect"){var u=this.getOptions(r);while(u.length>0){u.remove(0)}u.length=0;u=null;if(typeof(o)=="string"){this.doWithItem(r,"doLoadOptsConnector",o)}else{if(o instanceof Array){this.doWithItem(r,"doLoadOpts",{options:o})}}}if(w=="combo"){var n=this.getCombo(r);n.clearAll();n.setComboValue("");if(typeof(o)=="string"){this.doWithItem(r,"doLoadOptsConnector",o)}else{if(o instanceof Array){var v=null;for(var s=0;s<o.length;s++){if(window.dhx4.s2b(o[s].selected)){v=o[s].value}}n.addOption(o);if(v!=null){this.setItemValue(r,v)}n=null}}}};dhtmlXForm.prototype.setTooltip=function(n,o,r){if(typeof(r)=="undefined"){r=o}else{n=[n,o]}var u=this._getItemNode(n);if(!u){return}var m=null;if(u.childNodes.length==1){m=u.childNodes[0]}else{for(var s=0;s<u.childNodes.length;s++){if(u.childNodes[s].className!=null&&u.childNodes[s].className.search("dhxform_label")>=0){m=u.childNodes[s]}}}if(m!=null){if(r==null||r.length==0){m.removeAttribute("title")}else{m.title=r}}m=null};function dhtmlXAccordion(r,a){var s=this;var u=window.dhx4.transDetect();this.conf={skin:(a||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"dhx_skyblue"),css:"dhxacc",icons_path:"",multi_mode:false,last_opened:null,on_active_id:null,on_active_click:false,size_changed:true,def_height:90,total_count:0,hiden_count:0,cont_w:null};this.conf.tr={prop:u.transProp,ev:u.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"};this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}}}};if(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0){this.conf.tr.height_open=this.conf.tr.height_close}else{this.conf.tr.height_open=this.conf.tr.height_close}var o=null;if(typeof(r)=="object"&&!r.tagName){o={};for(var w in r){o[w]=r[w];r[w]=null}r=o.parent;o.parent=null}window.dhtmlXCellTop.apply(this,[r,r._ofs]);this._adjustCont();if(this.base._ofs!=null){for(var v in this.ofs.base){if(this.base._ofs[v]!=null){for(var w in this.base._ofs[v]){this.ofs.base[v][w]=this.base._ofs[v][w]}}}}this._applyOffsets=function(){for(var c in this.ofs.def){var g=this.ofs.def[c];var e=(this.ofs.skin[this.conf.skin]!=null&&this.ofs.skin[this.conf.skin][c]!=null?this.ofs.skin[this.conf.skin][c]:null);var h=(this.base._ofs!=null?this.base._ofs[c]:null);for(var l in g){if(e!=null&&e[l]!=null){this.ofs[c][l]=e[l]}else{if(h!=null&&h[l]!=null){this.ofs[c][l]=h[l]}else{this.ofs[c][l]=g[l]}}}}};this._applyOffsets();this.t={};this.addItem=function(c,g,n,y,h){if(c==null){c="a"+window.dhx4.newId()}while(this.t[c]!=null){c="a"+window.dhx4.newId()}var e=new dhtmlXAccordionCell(c,this);e.conf.skin=this.conf.skin;e.setText(g);if(h!=null){e.setIcon(h)}e.cell._accId=c;e.cell.childNodes[e.conf.idx.hdr].onselectstart=function(x){x=x||event;if(x.preventDefault){x.preventDefault()}else{x.returnValue=false}return false};e.cell.childNodes[e.conf.idx.hdr].onclick=function(x){x=x||event;if(x.preventDefault){x.preventDefault()}else{x.returnValue=false}if(s._dnd!=null&&s._dnd.ofs==true){return}var E=(x.target||x.srcElement);var D=null;while(E._accId!=this&&D==null){if(E._accId!=null){D=E._accId}else{E=E.parentNode}}if(D!=null){s._hdrClick(D)}};this.t[c]={cell:e};this.conf.total_count++;if(this.conf.multi_mode){if(typeof(n)=="undefined"){n=true}this.cont.appendChild(e.cell);e.conf.opened=(n==true);if(typeof(y)=="undefined"||y==null||y=="*"){if(y=="*"){e.conf.h_auto=true}y=this.conf.def_height}else{y=Math.max(parseInt(y),30)}e._setSize(this.ofs.m.left,0,this.conf.cont_w||this._getAvailItemWidth(),e.conf.opened?y:e._getHdrHeight());e.cell.style.marginTop=(e.cell==this.cont.firstChild?this.ofs.m.first:this.ofs.m.between)+"px";if(n!=true){e.conf.size.h=y;e._adjustCell();e.cell.className+=" dhx_cell_closed"}this._adjustOpened();if(this._dnd!=null){this._dndAttachEvent(c)}}else{n=(this.conf.last_opened==null?true:window.dhx4.s2b(n));var l=this._updateCellsHeight();if(this.conf.last_opened!=null){if(n){this._closeItem(this.conf.last_opened,false)}else{var m=this.t[this.conf.last_opened].cell;m._setSize(m.conf.size.x,m.conf.size.y,m.conf.size.w,l);m=null}}this.cont.appendChild(e.cell);e.conf.opened=n;e.cell.style.marginTop=String(e.cell==this.cont.firstChild?this.ofs.s.first:this.ofs.s.between)+"px";e._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),n?l:e._getHdrHeight());if(n){this.conf.last_opened=c}else{e.conf.size.h=l;e._adjustCell();e.cell.className+=" dhx_cell_closed"}}e=null;return this.t[c].cell};this.removeItem=function(c){if(!this.t[c]){return}if(this.conf.last_opened==c){this.conf.last_opened=null}if(this.conf.on_active_id==c){this.conf.on_active_id=null}if(this._dnd!=null){this._dndClearCell(c)}this.conf.total_count--;if(!this.conf.multi_mode&&!this.t[c].cell.conf.visible){this.conf.hiden_count--}this.t[c].cell._unload();this.t[c].cell=null;this.t[c]=null;delete this.t[c];if(!this.conf.unloading){if(!this.conf.multi_mode){this._updateCellsMargin()}this.setSizes()}};this.cells=function(c){return this.t[c].cell};this.enableMultiMode=function(c,e){this.conf.multi_mode=true;if(!isNaN(e)){this.conf.def_height=e}if(c=="auto"||c=="scroll"){this.cont.style.overflowX="hidden";this.cont.style.overflowY=c}else{this.cont.style.overflow="visible"}};this.forEachItem=function(c){for(var e in this.t){if(typeof(c)=="function"){c.apply(this,[this.t[e].cell])}else{if(typeof(c)=="string"&&typeof(window[c])=="function"){window[c].apply(this,[this.t[e].cell])}}}};this._openItem=function(e,c){if(typeof(c)=="undefined"){c=true}if(this.t[e].cell.conf.opened==false){if(this.conf.multi_mode){this.t[e].cell._open(c)}else{if(this.conf.tr.prop==false){if(this.conf.last_opened!=null){this.t[this.conf.last_opened].cell._close(false)}this.t[e].cell._open(false);this.conf.last_opened=e}else{this.conf.on_active_id=e;this.t[e].cell._open(c);if(this.conf.last_opened!=null){this.t[this.conf.last_opened].cell._close(c)}this.conf.last_opened=e}}}};this._closeItem=function(e,c){if(typeof(c)=="undefined"){c=true}if(this.t[e].cell.conf.opened==true){this.t[e].cell._close(c);this.conf.last_opened=null}};this._adjustOpened=function(){if(this.conf.multi_mode==true){if(this._openCache==null){var g=this._getDynData();for(var l in g){this.t[l].cell.conf.size.h=g[l];this.t[l].cell.cell.style.height=g[l]+"px"}}else{var e=false;for(var l in this._openCache){e=(e||this._openCache[l])}if(e==true){return}this._openCache=this._openId=null}var m=this._getAvailItemWidth();for(var l in this.t){var h=true;if(m==this.t[l].cell.conf.size.w&&(this._openMode=="close"||this.t[l].cell.conf.opened==false)){h=false}if(h){this.t[l].cell._setWidth(m)}}this._openMode=null}else{if(this.conf.last_opened!=null){var c=this.conf.last_opened;this.t[c].cell._setSize(this.t[c].cell.conf.size.x,this.t[c].cell.conf.size.y,this.t[c].cell.conf.size.w,this.t[c].cell.conf.size.h)}}};this._getDynData=function(c,g){if(typeof(c)=="undefined"||c==null){c={}}if(typeof(g)=="undefined"||g==null){g={}}var H={};var l=0;var I=0;var M=0;for(var h=0;h<this.cont.childNodes.length;h++){var e=this.cont.childNodes[h]._accId;var K=this.t[e].cell;if(K.conf.visible==true){var n=this.ofs.m[M==0?"first":"between"];if(c[e]==true||g[e]==true||(K.conf.opened==true&&K.conf.h_auto==true)){if(g[e]==true){var m=K._getHdrHeight();H[e]=m;I+=m+n}else{if(K.conf.h_auto==true){H[e]=true;I+=n;l++}else{if(c[e]==true){H[e]=K.conf.size.h;I+=K.conf.size.h+n}}}}else{I+=K.cell.offsetHeight+n}M++}K=null}if(l>0){var J=this.cont.offsetHeight-I;var I=Math.floor(J/l);for(var L in H){if(H[L]==true){if(l>1){J-=I}else{I=J}H[L]=I;l--}}}return H};this.setSizes=function(){this._adjustCont();if(this.conf.multi_mode==true){this._adjustOpened()}else{this.conf.cont_w=null;var c=this._updateCellsHeight();for(var e in this.t){if(this.t[e].cell.conf.visible==true){this.t[e].cell._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),this.t[e].cell.conf.opened?c:this.t[e].cell._getHdrHeight());if(this.t[e].cell.conf.opened!=true){this.t[e].cell.conf.size.h=c;this.t[e].cell._adjustCell()}}}this.conf.size_changed=true}this.callEvent("_onSetSizes",[])};this.setSkin=function(c){this._setBaseSkin(c);this.conf.skin=c;for(var e in this.t){this.t[e].cell.conf.cells_cont=null;this.t[e].cell.conf.skin=this.conf.skin}this._applyOffsets();this._updateCellsMargin();this.setSizes()};this.setIconsPath=function(c){this.conf.icons_path=c};this._getAvailItemWidth=function(){var e=this.ofs[(this.conf.multi_mode?"m":"s")];var c=Math.max(this.cont.clientWidth-e.left-e.right,10);this.conf.cont_w=c;e=null;return c};this._updateCellsHeight=function(){if(this.conf.multi_mode==true){return}var l=this.conf.total_count-this.conf.hiden_count;var h=this.cont.offsetHeight-this.ofs.s.last;if(l==0){return h}var e=false;for(var g=0;g<this.cont.childNodes.length;g++){if(e==false){var c=this.cont.childNodes[g]._accId;if(this.t[c].cell.conf.visible){h-=this.t[c].cell._getHdrHeight()*(l-1);e=true}}}h-=(l-1)*this.ofs.s.between+this.ofs.s.first;for(var m in this.t){if(this.t[m].cell.conf.size!=null){this.t[m].cell.conf.size.h=h;this.t[m].cell._adjustCell()}}return h};this._updateCellsMargin=function(){var c=0;for(var g=0;g<this.cont.childNodes.length;g++){var e=this.cont.childNodes[g]._accId;if(this.t[e].cell.conf.visible){this.t[e].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][c++==0?"first":"between"])+"px"}}};this._hdrClick=function(e){if(!this.conf.multi_mode&&this.t[e].cell.conf.opened){return}var c=this.t[e].cell.conf.opened;if(this.callEvent("onBeforeActive",[e,(c?false:true)])!==true){return}this.conf.on_active_click=true;this[c?"_closeItem":"_openItem"](e);if(this.conf.multi_mode&&this.conf.tr.prop==false){this._adjustOpened()}};this.unload=function(){this.conf.unloading=true;for(var c in this.t){this.removeItem(c)}this.t=null;if(typeof(this._unloadDND)=="function"){this._unloadDND()}if(this.dhxWins){this.dhxWins.unload();this.dhxWins=null}this._unloadTop();window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.ofs=this.conf=null;for(var c in this){this[c]=null}s=null};this.setOffset=function(c){this.ofs.s.between=c;this.ofs.m.between=c;this._updateCellsMargin();this.setSizes()};this._initObj=function(e){if(e.skin!=null){this.setSkin(e.skin)}if(window.dhx4.s2b(e.multi_mode)){this.enableMultiMode()}if(e.icons_path!=null){this.setIconsPath(e.icons_path)}if(e.icon_path!=null){this.setIconsPath(e.icon_path)}if(e.items!=null){for(var c=0;c<e.items.length;c++){this.addItem(e.items[c].id,e.items[c].text,e.items[c].open,e.items[c].height,e.items[c].icon||e.items[c].img)}}if(window.dhx4.s2b(e.dnd)==true&&typeof(this.enableDND)=="function"){this.enableDND()}};this._xmlToObj=function(g){var l={items:[]};var c=g.getElementsByTagName("accordion")[0];if(c.getAttribute("skin")!=null){l.skin=c.getAttribute("skin")}if(c.getAttribute("mode")=="multi"){l.multi_mode=true}if(c.getAttribute("multiMode")!=null){l.multi_mode=window.dhx4.s2b(c.getAttribute("multiMode"))}if(c.getAttribute("iconsPath")!=null){l.icons_path=c.getAttribute("iconsPath")}for(var h=0;h<c.childNodes.length;h++){var e=c.childNodes[h];if(typeof(e.tagName)!="undefined"&&String(e.tagName).toLowerCase()=="cell"){var m={};if(e.getAttribute("id")!=null){m.id=e.getAttribute("id")}if(e.getAttribute("icon")!=null){m.icon=e.getAttribute("icon")}if(e.getAttribute("height")!=null){m.height=e.getAttribute("height")}if(e.getAttribute("open")!=null){m.open=window.dhx4.s2b(e.getAttribute("open"))}m.text=e.firstChild.nodeValue;l.items.push(m)}e=null}return l};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:true});window.dhx4._eventable(this);this._callMainEvent=function(e,c){return this.callEvent(e,c)};this.attachEvent("onActive",function(c){if(c!=null&&this.t[c]!=null&&this.t[c].cell.dataObj!=null&&this.t[c].cell.dataType=="editor"){this.t[c].cell.dataObj._prepareContent(true)}if(c!=null&&this.t[c]!=null&&this.t[c].cell.conf.opened==true){this.t[c].cell._adjustProgress()}});if(typeof(window.dhtmlXWindows)=="function"){this.dhxWins=new dhtmlXWindows();this.dhxWins.setSkin(this.conf.skin)}if(o!=null){this._initObj(o);o=null}return this}dhtmlXAccordion.prototype=new dhtmlXCellTop();function dhtmlXAccordionCell(a,h){dhtmlXCellObject.apply(this,[a,"_acc"]);this.acc=h;this.conf.visible=true;this.conf.docked=true;this.attachEvent("_onCellUnload",function(){this._trDetachEv();this._unloadDocking();this.acc=null;this.cell._accObj=null;this.cell.childNodes[this.conf.idx.hdr].onselectstart=null;this.cell.childNodes[this.conf.idx.hdr].onclick=null;this._initHeader=null;this._getHdrHeight=null;this._setWidth=null;this._adjustCell=null;this._open=null;this._close=null;this._isOpened=null;this._trInitEv=null;this._trAttachEv=null;this._trDetachEv=null;this._trOnEnd=null;this._onActiveCall=null;this.setText=null;this.getText=null;this.setIcon=null;this.clearIcon=null;this.show=null;this.hide=null;this.isVisible=null;this.setHeight=null;this.moveOnTop=null});this.acc.attachEvent("onBeforeDrag",function(c){if(this.t[c].cell.dataObj!=null&&this.t[c].cell.dataType=="editor"){if(this.conf.editor_data==null){this.conf.editor_data={}}this.conf.editor_data[c]=this.t[c].cell.dataObj.getContent()}for(var e in this.t){this.t[e].cell._showCellCover()}return true});this.acc.attachEvent("onDrop",function(c){if(this.t[c].cell.dataObj!=null&&this.t[c].cell.dataType=="editor"){this.t[c].cell.dataObj._prepareContent(true);if(this.conf.editor_data!=null&&this.conf.editor_data[c]!=null){this.t[c].cell.dataObj.setContent(this.conf.editor_data[c]);this.conf.editor_data[c]=null}}for(var e in this.t){this.t[e].cell._hideCellCover()}});this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)});this.attachEvent("_onBeforeContentAttach",function(c){if(c=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders()}});this._initHeader();this.conf.tr={};for(var l in this.acc.conf.tr){this.conf.tr[l]=this.acc.conf.tr[l]}if(this.conf.tr.prop!=false){this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity((this.conf.opened?"open":"close"),false)})}this.open=function(c){if(window.dhx4.s2b(c)==true){this.acc.conf.on_active_click=true}this.acc._openItem(this._idd)};this.close=function(c){if(window.dhx4.s2b(c)==true){this.acc.conf.on_active_click=true}this.acc._closeItem(this._idd)};this._setWidth=function(c){if(c!=this.conf.size.w){this.conf.size.w=c;this.cell.style.width=c+"px"}this._adjustCell()};this._adjustCell=function(){this._adjustCont();if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){this.dataObj.setSizes()}};this._initDocking();return this}dhtmlXAccordionCell.prototype=new dhtmlXCellObject();dhtmlXAccordionCell.prototype._initHeader=function(){var c=document.createElement("DIV");c.className="dhx_cell_hdr";c.innerHTML="<div class='dhx_cell_hdr_text'></div><div class='dhx_cell_hdr_arrow'></div>";this.cell.insertBefore(c,this.cell.childNodes[this.conf.idx.cont]);c=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:true};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx()};dhtmlXAccordionCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXAccordionCell.prototype.showHeader=function(){if(this.conf.hdr.visible==true){return}this.conf.hdr.visible=true;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr";this._adjustCont(this._idd)};dhtmlXAccordionCell.prototype.hideHeader=function(){if(this.conf.hdr.visible!=true){return}this.conf.hdr.visible=false;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden";this._adjustCont(this._idd)};dhtmlXAccordionCell.prototype.isHeaderVisible=function(){return(this.conf.hdr.visible==true)};dhtmlXAccordionCell.prototype.setText=function(g){this.conf.text=g;var e=this.cell.childNodes[this.conf.idx.hdr];e.childNodes[(e.firstChild.className=="dhx_cell_hdr_icon"?1:0)].innerHTML="<span>"+g+"</span>";e=null};dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text};dhtmlXAccordionCell.prototype.setIcon=function(h){var l=this.cell.childNodes[this.conf.idx.hdr];if(l.firstChild.className!="dhx_cell_hdr_icon"){l.firstChild.className+=" dhx_cell_hdr_icon";var g=document.createElement("IMG");g.className="dhx_cell_hdr_icon";l.insertBefore(g,l.firstChild);g=null}l.firstChild.src=this.acc.conf.icons_path+h;l=null};dhtmlXAccordionCell.prototype.clearIcon=function(){var c=this.cell.childNodes[this.conf.idx.hdr];if(c.firstChild.className=="dhx_cell_hdr_icon"){c.removeChild(c.firstChild);c.firstChild.className=String(c.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,"")}c=null};dhtmlXAccordionCell.prototype._open=function(r){var m={};if(this.acc.conf.multi_mode){var n={};n[this._idd]=true;m=this.acc._getDynData(n);this.acc._openId=this._idd;this.acc._openCache={};this.acc._openMode="open"}else{m[this._idd]=this.conf.size.h}for(var o in m){if(this.acc._openCache!=null){this.acc._openCache[o]=true}var a=this.acc.t[o].cell;a.cell.className=String(a.cell.className).replace(/\s{1,}dhx_cell_closed/gi,"");a.conf.opened=true;a._trInitEv("open",r);a.conf.size.h=m[o];a.cell.style.height=a.conf.size.h+"px";a=null}if(this.conf.tr.prop==false){this.acc._openId=this.acc._openCache=this.acc._openMode=null;this._onActiveCall(true)}};dhtmlXAccordionCell.prototype._close=function(r){var n={};if(this.acc.conf.multi_mode){var m={};m[this._idd]=true;n=this.acc._getDynData(null,m);this.acc._openId=this._idd;this.acc._openCache={};this.acc._openMode="close"}else{n[this._idd]=this._getHdrHeight()}for(var o in n){var a=this.acc.t[o].cell;if(this.acc._openCache!=null){this.acc._openCache[o]=true}if(o==this._idd){a.cell.className+=" dhx_cell_closed";a.conf.opened=false;a._trInitEv("close",r)}else{a.conf.size.h=n[o];a._adjustCell();a._trInitEv("open",r)}a.cell.style.height=n[o]+"px";a=null}if(this.conf.tr.prop==false){this.acc._openId=this.acc._openCache=this.acc._openMode=null;this._onActiveCall(false)}};dhtmlXAccordionCell.prototype.isOpened=function(){return(this.conf.opened==true)};dhtmlXAccordionCell.prototype._trInitEv=function(g,e){if(this.conf.tr.prop==false){return}this._trAttachEv();if(!this.cell._accObj){this.cell._accObj=this.acc}if(e){this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+g]}this._cellSetOpacity(g,e)};dhtmlXAccordionCell.prototype._trAttachEv=function(){if(!this.conf.tr.ev_attached){this.cell._trProp=this.conf.tr.prop;this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,false);this.conf.tr.ev_attached=true}};dhtmlXAccordionCell.prototype._trDetachEv=function(){if(this.conf.tr.ev_attached){this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,false);this.conf.tr.ev_attached=false}};dhtmlXAccordionCell.prototype._trOnEnd=function(c){if(c.stopPropagation){c.stopPropagation()}if(c.propertyName=="height"&&this._accObj!=null){this.style[this._trProp]="";if(this._accObj.conf.multi_mode){if(this._accObj._openCache!=null){this._accObj._openCache[this._accId]=false}this._accObj._adjustOpened()}if(this._accObj.conf.on_active_click==true){if(this._accObj.conf.multi_mode){this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]);this._accObj.conf.on_active_click=false}else{if(this._accObj.conf.on_active_id!=null){this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,true])}this._accObj.conf.on_active_id=null;this._accObj.conf.on_active_click=false}}this._accObj=null}};dhtmlXAccordionCell.prototype._cellSetOpacity=function(a,l){for(var h in this.conf.idx){if({hdr:true,pr1:true,pr2:true,cover:true}[h]!=true){if(l){this.cell.childNodes[this.conf.idx[h]].style[this.conf.tr.prop]=this.conf.tr["op_"+a]}this.cell.childNodes[this.conf.idx[h]].style.opacity=this.conf.tr["op_v_"+a]}}};dhtmlXAccordionCell.prototype._onActiveCall=function(c){if(this.acc.conf.on_active_click==false){return}if(this.acc.conf.multi_mode==true){this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]);this.acc.conf.on_active_click=false}else{if(c==true){this.acc._callMainEvent("onActive",[this._idd,true]);this.acc.conf.on_active_click=false}}};dhtmlXAccordionCell.prototype.show=function(){if(this.conf.visible){return}if(this.conf.docked==false){this.dock();return}this.cell.style.display="";this.conf.visible=true;if(!this.acc.conf.multi_mode){this.acc.conf.hiden_count--;this.acc._updateCellsHeight();this.acc._updateCellsMargin()}if(this.acc.conf.size_changed){this.acc.setSizes();this.acc.conf.size_changed=false}else{this.acc._adjustOpened()}};dhtmlXAccordionCell.prototype.hide=function(){if(!this.conf.visible){return}if(!this.acc.conf.multi_mode&&this.conf.opened){this._close(false);this.acc.conf.last_opened=null}this.cell.style.display="none";this.conf.visible=false;if(!this.acc.conf.multi_mode){this.acc.conf.hiden_count++;this.acc._updateCellsHeight();this.acc._updateCellsMargin()}this.acc._adjustOpened()};dhtmlXAccordionCell.prototype.isVisible=function(){return(this.conf.visible==true)};dhtmlXAccordionCell.prototype.setHeight=function(c){if(!this.acc.conf.multi_mode){return}if(c=="*"){this.conf.h_auto=true}else{this.conf.h_auto=false;this.conf.size.h=c}if(this.conf.opened){if(c!="*"){this.cell.style.height=c+"px"}this.acc._adjustOpened()}};dhtmlXAccordionCell.prototype.moveOnTop=function(){if(this.cell.parentNode.firstChild==this.cell){return}this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild);this.acc._updateCellsMargin()};dhtmlXAccordionCell.prototype._initDocking=function(){var c=this;this.dock=function(){if(this.acc.dhxWins==null||this.conf.docked==true){return}var a=this.acc.dhxWins.window(this._idd);a.close();this._attachFromCell(a);this.conf.docked=true;this.show();if(this.conf.dock_opened){this.open()}a=null;this.acc._callMainEvent("onDock",[this._idd])};this.undock=function(r,a,n,h){if(this.acc.dhxWins==null||this.conf.docked==false){return}this.conf.dock_opened=this.conf.opened;if(this.acc.dhxWins.window(this._idd)!=null){var o=this.acc.dhxWins.window(this._idd);o.show()}else{if(r==null){r=20}if(a==null){a=20}if(n==null){n=320}if(h==null){h=200}var o=this.acc.dhxWins.createWindow(this._idd,r,a,n,h);o.button("close").hide();o.addUserButton("dock",99,"Dock");o.button("dock").show();o.button("dock").attachEvent("onClick",this._doOnDockClick);o.setText(this.getText());o.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=false;this.hide();o._attachFromCell(this);o=null;this.acc._callMainEvent("onUnDock",[this._idd])};this._doOnDockClick=function(){c.dock()};this._doOnDockWinClose=function(a){a.hide();return false};this._unloadDocking=function(){c=null}};dhtmlXCellObject.prototype.attachAccordion=function(e){this.callEvent("_onBeforeContentAttach",["acc"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";this._attachObject(g);if(typeof(e)=="undefined"){e={}}if(typeof(e.skin)=="undefined"){e.skin=this.conf.skin}e.parent=g;if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){g._ofs={s:{first:-1},m:{first:4}}}if(typeof(window.dhtmlXTabBarCell)!="undefined"&&(this instanceof window.dhtmlXTabBarCell)){if(this.conf.skin=="dhx_skyblue"){g._ofs={t:-1,r:-1,b:-1,l:-1}}}if(typeof(window.dhtmlXSideBarCell)!="undefined"&&(this instanceof window.dhtmlXSideBarCell)){if(this.conf.skin=="dhx_web"){g._ofs={};if(this.sidebar.conf.autohide!=true){g._ofs.l=2}if(this.sidebar.conf.header==true){g._ofs.t=3}}else{g._ofs={l:-1};if(this.conf.skin=="dhx_terrace"){if(this.sidebar.conf.autohide==true){g._ofs.l=0}if(this.sidebar.conf.header==true){g._ofs.t=-1}}}}if(typeof(window.dhtmlXCarouselCell)!="undefined"&&(this instanceof window.dhtmlXCarouselCell)){this._hideBorders()}this.dataType="acc";this.dataObj=new dhtmlXAccordion(e);e.parent=null;g=e=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXAccordion.prototype.enableDND=function(){if(this.conf.multi_mode==false||this._dnd!=null){return}var a=this;this._dnd={tr_count:0,tr_items:{}};this._dndAttachEvent=function(e){var c=this.t[e].cell;if(c.conf.dnd_inited!=true){if(typeof(window.addEventListener)=="function"){c.cell.childNodes[c.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,false)}else{c.cell.childNodes[c.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown)}c.conf.dnd_inited=true}c=null};this._dndDetachEvent=function(e){var c=this.t[e].cell;if(c.conf.dnd_inited==true){if(typeof(window.addEventListener)=="function"){c.cell.childNodes[c.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,false)}else{c.cell.childNodes[c.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown)}c.conf.dnd_inited=false}c=null};this._dndOnMouseDown=function(e){e=e||event;if(e.preventDefault){e.preventDefault()}var c=(e.target||e.srcElement);while(c!=null&&c.parentNode!=a.cont){c=c.parentNode}if(c!=null){a._dndDragStart(e,c)}c=null};this._dndDragStart=function(c,o){if(this._dnd.tr_waiting==true){return}var n=-1;for(var e=0;e<o.parentNode.childNodes.length;e++){if(o.parentNode.childNodes[e]==o){n=e}}if(this.callEvent("onBeforeDrag",[o._accId,n])!==true){return}if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousemove",this._dndOnMouseMove,false);document.body.addEventListener("mouseup",this._dndOnMouseUp,false)}else{document.body.attachEvent("onmousemove",this._dndOnMouseMove,false);document.body.attachEvent("onmouseup",this._dndOnMouseUp,false)}this._dnd.dragObj=o;this._dnd.dy=c.clientY;var r=0;for(var e=0;e<this._dnd.dragObj.parentNode.childNodes.length;e++){this._dnd.dragObj.parentNode.childNodes[e]._ind=e;if(this._dnd.dragObj.parentNode.childNodes[e]==this._dnd.dragObj){this._dnd.dragObj._k0=r;if(e>0){this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first}r=0}else{r+=this._dnd.dragObj.parentNode.childNodes[e].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[e].style.marginTop)}}this._dnd.dragObj._k1=r;this._dnd.h=this._dnd.dragObj.offsetHeight;this._dnd.ofs=false};this._dndDoDrag=function(s){if(!this._dnd.dragObj){return}if(this._dnd.tr_waiting==true){return}var c=s.clientY-this._dnd.dy;if(this._dnd.ofs==false&&Math.abs(c)>5){this._dnd.dragObj.className+=" acc_cell_dragged";this._dnd.ofs=true}if(c<0){if(c<-this._dnd.dragObj._k0){c=-this._dnd.dragObj._k0}}else{if(c>this._dnd.dragObj._k1){c=this._dnd.dragObj._k1}}this._dnd.dragObj.style.top=c+"px";var x=s.clientY-this._dnd.dy;var r=0;var w=0;for(var y=this._dnd.dragObj._ind+1;y<=this._dnd.dragObj.parentNode.lastChild._ind;y++){var e=this._dnd.dragObj.parentNode.childNodes[y].offsetHeight;if(x>r+e*2/3){w++}r+=e}var v=this._dnd.dragObj.nextSibling;var y=0;while(v!=null){if(++y<=w&&v!=null){if(!v._ontop){if(v._tm){window.clearTimeout(v._tm)}this._dndAnim(v,false,parseInt(v.style.top||0),-this._dnd.h-this.ofs.m.between);v._ontop=true}}else{if(v._ontop){if(v._tm){window.clearTimeout(v._tm)}this._dndAnim(v,true,parseInt(v.style.top||0),0);v._ontop=false}}v=v.nextSibling}var x=this._dnd.dy-s.clientY;var r=0;var w=0;for(var y=this._dnd.dragObj._ind-1;y>=this._dnd.dragObj.parentNode.firstChild._ind;y--){var e=this._dnd.dragObj.parentNode.childNodes[y].offsetHeight;if(x>r+e*2/3){w++}r+=e}var v=this._dnd.dragObj.previousSibling;var y=0;while(v!=null){if(++y<=w&&v!=null){if(!v._onbottom){if(v._tm){window.clearTimeout(v._tm)}this._dndAnim(v,true,parseInt(v.style.top||0),this._dnd.h+this.ofs.m.between);v._onbottom=true}}else{if(v._onbottom){if(v._tm){window.clearTimeout(v._tm)}this._dndAnim(v,false,parseInt(v.style.top),0);v._onbottom=false}}v=v.previousSibling}};this._dndDragStop=function(x,c){if(c){}else{if(this._dnd.tr_count>0){this._dnd.tr_waiting=true;return}}if(!this._dnd.dragObj){return}this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,"");this._dnd.dragObj.style.top="0px";var y=false;for(var s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++){var u=this._dnd.dragObj.parentNode.childNodes[s];if(u!=this._dnd.dragObj){if(u._tm){window.clearTimeout(u._tm)}u.style.top="0px";if(u._ontop&&((u.nextSibling!=null&&u.nextSibling._ontop!=true)||!u.nextSibling)){y=(u.nextSibling||null)}if(u._onbottom&&((u.previousSibling!=null&&u.previousSibling._onbottom!=true)||!u.previousSibling)){y=u}}u=null}for(var s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++){this._dnd.dragObj.parentNode.childNodes[s]._ontop=null;this._dnd.dragObj.parentNode.childNodes[s]._onbottom=null}if(y!==false){if(y==null){this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj)}else{this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,y)}}var w=this._dnd.dragObj._accId;var v=this._dnd.dragObj._ind;var e=v;for(var s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++){if(this._dnd.dragObj.parentNode.childNodes[s]==this._dnd.dragObj){e=s}}this._dnd.dragObj=null;this._dnd.tr_waiting=false;this._updateCellsMargin();if(v!=e){this.setSizes();this.callEvent("onDrop",[w,v,e])}if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("mousemove",this._dndOnMouseMove,false);document.body.removeEventListener("mouseup",this._dndOnMouseUp,false)}else{document.body.detachEvent("onmousemove",this._dndOnMouseMove,false);document.body.detachEvent("onmouseup",this._dndOnMouseUp,false)}};this._dndAnim=function(c,n,e,o){if(this.conf.tr.prop!=false){if(!c._dnd_ev){c._dnd_ev=true;c._dnd_tr_prop=this.conf.tr.prop;c.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,false)}if(this._dnd.tr_items[c._accId]!=true){this._dnd.tr_items[c._accId]=true;this._dnd.tr_count++}c.style[this.conf.tr.prop]=this.conf.tr.dnd_top;c.style.top=o+"px";return}var r=false;if(n){e+=5;if(e>=o){e=o;r=true}}else{e-=5;if(e<=o){e=o;r=true}}c.style.top=e+"px";if(c._tm){window.clearTimeout(c._tm)}if(!r){c._tm=window.setTimeout(function(){a._dndAnim(c,n,e,o)},5)}else{c._tm=null}};this._dndOnTrEnd=function(c){if(c.stopPropagation){c.stopPropagation()}if(c.propertyName=="header.html"){if(a._dnd.tr_items[this._accId]==true){a._dnd.tr_count--;a._dnd.tr_items[this._accId]=false}this.style[this._dnd_tr_prop]="";if(a._dnd.tr_count==0&&a._dnd.tr_waiting==true){a._dndDragStop(null,true)}}};this._dndOnMouseMove=function(c){a._dndDoDrag(c||event)};this._dndOnMouseUp=function(c){a._dndDragStop(c||event)};this._dndClearCell=function(c){if(this.t[c].cell.cell._dnd_ev){this.t[c].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,false)}this._dndDetachEvent(c)};this._unloadDND=function(){for(var c in this){if(String(c).indexOf("_dnd")==0&&typeof(this[c])=="function"){this[c]=null}}this._dnd=null;a=null};for(var g in this.t){this._dndAttachEvent(g)}};function dhtmlXLayoutObject(F,x,I){var K=null;if(F!=null&&typeof(F)=="object"&&typeof(F.tagName)=="undefined"&&F._isCell!=true){K={};if(F.autosize!=null){K.autosize=F.autosize}if(F.cells!=null){K.cells=F.cells}if(F.pattern!=null){x=F.pattern}if(F.skin!=null){I=F.skin}if(F.offsets!=null){K.offsets=F.offsets}F=F.parent}this.cdata={};this.conf={skin:(I||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"dhx_skyblue"),css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",b:"a"},inited:false,b_size:{w:-1,h:-1}};if(typeof(F)=="object"&&F._isCell==true){var y=(typeof(K)!="undefined"&&K!=null?K:{});if(y.pattern==null&&x!=null){y.pattern=x}if(y.skin==null&&I!=null){y.skin=I}var C=F.attachLayout(y);return C}window.dhtmlXCellTop.apply(this,[F,(K==null?null:K.offsets)]);this.conf.sw=this._detectSW();var A=this;this._getLayout=function(){return this};this.mainInst=(F._layoutMainInst!=null?F._layoutMainInst:null);this._getMainInst=function(){if(this.mainInst!=null){return this.mainInst._getMainInst()}return this};this._init=function(g){var e=(typeof(g)=="string"?this.tplData[g]:g);this.conf.mode=e.mode;if(this.conf.mode=="c"){this.cdata.a=new dhtmlXLayoutCell("a",this)}else{this.cdata.a=new dhtmlXLayoutCell("a",this);this.cdata.b=new dhtmlXLayoutCell("b",this)}for(var h in this.cdata){this.cont.appendChild(this.cdata[h].cell);this.cdata[h].conf.init={w:0.5,h:0.5}}if(this.conf.mode!="c"){var c=this._getMainInst();if(c.conf.sep_idx==null){c.conf.sep_idx=1}else{c.conf.sep_idx++}this.sep=new dhtmlXLayoutSepObject(this.conf.mode,c.conf.sep_idx);this.cont.appendChild(this.sep.sep);this.sep._getLayout=function(){return A._getLayout()};c=null}if(e.cells!=null){for(var h in e.cells){if(e.cells[h].width!=null){this.cdata[h].conf.init.w=e.cells[h].width}if(e.cells[h].height!=null){this.cdata[h].conf.init.h=e.cells[h].height}if(e.cells[h].name!=null){this.cdata[h].conf.name=e.cells[h].name;this.cdata[h].setText(e.cells[h].name)}if(e.cells[h].fsize!=null){this.cdata[h].conf.fsize=e.cells[h].fsize}}}this.setSizes();for(var h in this.cdata){this.cdata[h].conf.init={}}if(e.cells!=null){for(var h in e.cells){if(e.cells[h].layout!=null){this.cdata[h].dataNested=true;this.cdata[h]._layoutMainInst=this;this.cdata[h].attachLayout({pattern:e.cells[h].layout});this.cdata[h]._layoutMainInst=null}}}};this.setSizes=function(Q,l,u,r){var P=(this.conf.inited==true&&this._getMainInst()==this&&this.checkEvent("onResizeFinish")==true?{}:false);this._adjustCont();var m=this.cont.offsetWidth;var c=this.cont.offsetHeight;if(this.conf.mode=="c"){var v=0;var h=0;var s=m;var n=c;this.cdata.a._setSize(v,h,s,n,Q,u,r);this.callEvent("_onSetSizes",[]);if(P&&(!(this.conf.b_size.w==m&&this.conf.b_size.h==c))){this._callMainEvent("onResizeFinish",[])}this.conf.b_size={w:m,h:c};return}if(typeof(l)=="undefined"){var g=(this.conf.mode=="v"?"w":"h");l=this.conf.autosize;if(this.cdata.a.conf.collapsed){l="b"}else{if(this.cdata.b.conf.collapsed){l="a"}else{if(Q=="a"||Q=="b"){l=this.conf.nextCell[Q]}}}}else{}if(this.conf.mode=="v"){if(l=="a"){if(this.cdata.b.conf.init.w!=null){var o=Math.round(m*this.cdata.b.conf.init.w-this.conf.sw/2)}else{var o=this.cdata.b.conf.size.w}var w=m-o;var S=0;var e=c;var v=0;var h=S;var s=w-v-this.conf.sw;var n=e}else{var v=0;var h=0;if(this.cdata.a.conf.init.w!=null){var s=Math.round(m*this.cdata.a.conf.init.w-this.conf.sw/2)-v}else{var s=this.cdata.a.conf.size.w}var n=c-h;var w=v+s+this.conf.sw;var S=h;var o=m-w;var e=n}this.cdata.a._setSize(v,h,s,n,Q,u,r);this.cdata.b._setSize(w,S,o,e,Q,u,r);this.sep._setSize(v+s,h,this.conf.sw,n)}else{if(l=="a"){if(this.cdata.b.conf.init.h!=null){var e=Math.round(c*this.cdata.b.conf.init.h-this.conf.sw/2)}else{var e=this.cdata.b.conf.size.h}var w=0;var S=c-e;var o=m-w;var v=w;var h=0;var s=o;var n=S-h-this.conf.sw}else{var v=0;var h=0;var s=m-v;if(this.cdata.a.conf.init.h!=null){var n=Math.round(c*this.cdata.a.conf.init.h-this.conf.sw/2)}else{var n=this.cdata.a.conf.size.h}var w=v;var S=h+n+this.conf.sw;var o=s;var e=c-S}this.cdata.a._setSize(v,h,s,n,Q,u,r);this.cdata.b._setSize(w,S,o,e,Q,u,r);this.sep._setSize(v,h+n,s,this.conf.sw)}this.callEvent("_onSetSizes",[]);if(P&&(!(this.conf.b_size.w==m&&this.conf.b_size.h==c))){this._callMainEvent("onResizeFinish",[])}this.conf.b_size={w:m,h:c}};this._getAvailWidth=function(){var e=[];for(var g=0;g<this.conf.as_cells.h.length;g++){var c=this.cells(this.conf.as_cells.h[g]);var l=c.layout;var m=l.conf.autosize;if(c.conf.collapsed){c=l.cdata[l.conf.nextCell[c._idd]];m=l.conf.nextCell[m]}e.push(Math.max(0,c.getWidth()-c._getMinWidth(m)));l=c=null}var h=(e.length>0?Math.min.apply(window,e):0);return this.cont.offsetWidth-h};this._getAvailHeight=function(){var l=[];for(var g=0;g<this.conf.as_cells.v.length;g++){var e=this.cells(this.conf.as_cells.v[g]);var c=e.layout;var m=c.conf.autosize;if(e.conf.collapsed){e=c.cdata[c.conf.nextCell[e._idd]];m=c.conf.nextCell[m]}l.push(Math.max(0,e.getHeight()-e._getHdrHeight()-e._getMinHeight(m)));c=e=null}var h=Math.min.apply(window,l);return this.cont.offsetHeight-h};this.setSkin=function(c){this._setBaseSkin(c);this.conf.skin=c};this.unload=function(){this.conf.unloading=true;this.mainInst=null;this.parentLayout=null;if(this.items!=null){for(var e=0;e<this.items.length;e++){this.items[e]=null}this.items=null}if(this.dhxWins!=null){this.dhxWins.unload();this.dhxWins=null}if(this.sep!=null){this.sep._unload();this.sep=null}for(var c in this.cdata){this.cdata[c]._unload();this.cdata[c]=null}this._unloadTop();window.dhx4._eventable(this,"clear");for(var c in this){this[c]=null}A=null};this._getWindowMinDimension=function(e){var g=A._getAvailWidth()+7+7;var h=A._getAvailHeight()+7+31;var c={w:Math.max(g,200),h:Math.max(h,140)};e=null;return c};window.dhx4._eventable(this);this._callMainEvent=function(c,e){return this.callEvent(c,e)};this._init(x||"3E");var a=this._availAutoSize[x];if(a!=null){this.conf.pattern=x;this.setAutoSize(a.h[a.h.length-1],a.v[a.v.length-1])}if(typeof(window.dhtmlXWindows)=="function"&&this.mainInst==null){var E={vp_overflow:(this.conf.fs_mode==true?false:"auto")};this.dhxWins=new dhtmlXWindows(E);this.dhxWins.setSkin(this.conf.skin)}this.conf.inited=true;if(this==this._getMainInst()){var L=0;this.items=[];this.forEachItem(function(c){A.items.push(c);c.conf.index=L++})}if(this==this._getMainInst()&&K!=null){if(K.autosize!=null){this.setAutoSize.apply(this,K.autosize)}if(K.cells!=null){for(var H=0;H<K.cells.length;H++){var D=K.cells[H];var J=this.cells(D.id);if(D.width){J.setWidth(D.width)}if(D.height){J.setHeight(D.height)}if(D.text){J.setText(D.text)}if(D.collapsed_text){J.setCollapsedText(D.collapsed_text)}if(D.collapse){J.collapse()}if(D.fix_size){J.fixSize(D.fix_size[0],D.fix_size[1])}if(typeof(D.header)!="undefined"&&window.dhx4.s2b(D.header)==false){J.hideHeader()}}}}K=null;return this}dhtmlXLayoutObject.prototype=new dhtmlXCellTop();dhtmlXLayoutObject.prototype.cells=function(a){for(var l in this.cdata){if(this.cdata[l].conf.name==a){return this.cdata[l]}if(this.cdata[l].dataType=="layout"&&this.cdata[l].dataNested==true&&this.cdata[l].dataObj!=null){var h=this.cdata[l].dataObj.cells(a);if(h!=null){return h}}}return null};dhtmlXLayoutObject.prototype.forEachItem=function(a,h){if(typeof(a)!="function"){return}if(typeof(h)=="undefined"){h=this}for(var l in this.cdata){if(typeof(this.cdata[l].conf.name)!="undefined"){a.apply(h,[this.cdata[l]])}if(this.cdata[l].dataType=="layout"&&this.cdata[l].dataNested==true&&this.cdata[l].dataObj!=null){this.cdata[l].dataObj.forEachItem(a,h)}}h=null};dhtmlXLayoutObject.prototype._forEachSep=function(a,h){if(typeof(a)!="function"){return}if(typeof(h)=="undefined"){h=this}if(this.sep!=null){a.apply(h,[this.sep])}for(var l in this.cdata){if(this.cdata[l].dataType=="layout"&&this.cdata[l].dataNested==true&&this.cdata[l].dataObj!=null){this.cdata[l].dataObj._forEachSep(a,h)}}h=null};dhtmlXLayoutObject.prototype._detectSW=function(){if(this._confGlob.sw==null){this._confGlob.sw={}}if(this._confGlob.sw[this.conf.skin]==null){this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin)}return this._confGlob.sw[this.conf.skin]};dhtmlXLayoutObject.prototype._confGlob={};dhtmlXLayoutObject.prototype.listPatterns=function(){var a=[];for(var g in this.tplData){a.push(g)}return a};dhtmlXLayoutObject.prototype.listAutoSizes=function(){var l=(this.conf.as_cells!=null?(this.conf.as_cells.h).join(";"):"");var m=(this.conf.as_cells!=null?(this.conf.as_cells.v).join(";"):"");var n=this._availAutoSize[this.conf.pattern].h;var h=this._availAutoSize[this.conf.pattern].v;return[l,m,n,h]};dhtmlXLayoutObject.prototype._getCellsNames=function(n){var m={};if(this.cdata[n].conf.name!=null){m[this.cdata[n].conf.name]=true}if(this.cdata[n].dataType=="layout"&&this.cdata[n].dataObj!=null&&this.cdata[n].dataObj.mainInst==this){var r=this.cdata[n].dataObj._getCellsNames("a");var a=this.cdata[n].dataObj._getCellsNames("b");for(var o in r){m[o]=r[o]}for(var o in a){m[o]=a[o]}}return m};dhtmlXLayoutObject.prototype.setAutoSize=function(D,m,a){if(a!==true){var F=this.listAutoSizes();if(F[0]==D&&F[1]==m){return}var s=false;var x=false;for(var C=0;C<F[2].length;C++){s=s||F[2][C]==D}for(var C=0;C<F[3].length;C++){x=x||F[3][C]==m}if(!s||!x){return}}this.conf.as_cells={h:D.split(";"),v:m.split(";")};var A=(this.conf.mode=="v"?"h":"v");for(var H in this.cdata){var y=this._getCellsNames(H);var E=false;for(var C=0;C<this.conf.as_cells[A].length;C++){E=E||y[this.conf.as_cells[A][C]]}if(E){this.conf.autosize=H}if(this.cdata[H].dataType=="layout"&&this.cdata[H].dataObj!=null){this.cdata[H].dataObj.setAutoSize(D,m,true)}}};dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:1/5,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}};dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}};function dhtmlXLayoutSepObject(h,g){var l=this;this.conf={mode:h,idx:g,blocked:false,locked:false,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0)};if(window.dhx4.isIE&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")>=0){this.conf.btn_left=1}this.sep=document.createElement("DIV");this.sep.className="dhxlayout_sep";if(window.dhx4.isIE==true){this.sep.onselectstart=function(){return false}}this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode;this._setSize=function(e,o,c,a){this.sep.style.left=e+"px";this.sep.style.top=o+"px";this.sep.style.width=Math.max(c,0)+"px";this.sep.style.height=Math.max(a,0)+"px"};this._lockSep=function(a){this.conf.locked=(a==true);this._blockSep()};this._setWH=function(c){var a=this._getLayout();a.conf.sw=(c==null?a._detectSW():Math.max(parseInt(c)||-1,-1));a._getMainInst().setSizes();a=null};this._blockSep=function(){var c=this._getLayout();var a=c.cdata.a.conf.collapsed||c.cdata.b.conf.collapsed||this.conf.locked;c=null;if(this.conf.blocked==a){return}this.sep.className="dhxlayout_sep"+(a?"":" dhxlayout_sep_resize_"+this.conf.mode);this.conf.blocked=a};this._beforeResize=function(e){if(this.conf.blocked){return}if(this.conf.resize!=null&&this.conf.resize.active==true){return}if(e.type==window.dhx4.dnd.evs.start){this.sep.className+=" dhxlayout_sep_resize_actv";var a=(e.pageX||e.touches[0].pageX);var c=(e.pageY||e.touches[0].pageY)}else{if(e.button!==this.conf.btn_left){return}var a=e.clientX;var c=e.clientY}if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOff()}var n=this._getLayout();this.conf.resize={sx:a,sy:c,tx:e.layerX,ty:e.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:n.cdata.a._getAvailWidth("a"),min_wb:n.cdata.b._getAvailWidth("b"),min_ha:n.cdata.a._getAvailHeight("a"),min_hb:n.cdata.b._getAvailHeight("b")};this.conf.resize.nx=this.conf.resize.sep_x;this.conf.resize.ny=this.conf.resize.sep_y;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._doOnMouseMove,false);window.addEventListener("mouseup",this._doOnMouseUp,false);window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,false);window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,false)}else{document.body.attachEvent("onmousemove",this._doOnMouseMove);document.body.attachEvent("onmouseup",this._doOnMouseUp)}n=null};this._onResize=function(c){if(!this.conf.resize.active){this._initResizeArea();this.conf.resize.active=true}if(this.conf.mode=="v"){var n=(c.type=="mousemove"?c.clientX:(c.pageX||c.touches[0].pageX));var e=this.conf.resize.sx-n;this.conf.resize.nx=this.conf.resize.sep_x-e;if(this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb){this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb}else{if(this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa){this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa}}this.r_sep.style.left=this.conf.resize.nx+"px"}else{var a=(c.type=="mousemove"?c.clientY:(c.pageY||c.touches[0].pageY));var e=this.conf.resize.sy-a;this.conf.resize.ny=this.conf.resize.sep_y-e;if(this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb){this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb}else{if(this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha){this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha}}this.r_sep.style.top=this.conf.resize.ny+"px"}};this._afterResize=function(w){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._doOnMouseMove,false);window.removeEventListener("mouseup",this._doOnMouseUp,false);window.removeEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,false);window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,false)}else{document.body.detachEvent("onmousemove",this._doOnMouseMove);document.body.detachEvent("onmouseup",this._doOnMouseUp)}if(!this.conf.resize.active){this.conf.resize=null;return}if(w.type==window.dhx4.dnd.evs.end){this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"")}else{if(w.button!==this.conf.btn_left){return}}var a=this._getLayout();var u=a._getMainInst();var y=(u.checkEvent("onPanelResizeFinish")==true?{}:false);if(y!==false){u.forEachItem(function(m){y[m.conf.name]={w:m.conf.size.w,h:m.conf.size.h};m=null})}var c=this.conf.resize.nx-this.conf.resize.sep_x;var v=this.conf.resize.ny-this.conf.resize.sep_y;a.cdata.a._setSize(a.cdata.a.conf.size.x,a.cdata.a.conf.size.y,a.cdata.a.conf.size.w+c,a.cdata.a.conf.size.h+v,"a");a.cdata.b._setSize(a.cdata.b.conf.size.x+c,a.cdata.b.conf.size.y+v,a.cdata.b.conf.size.w-c,a.cdata.b.conf.size.h-v,"b");this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height));if(window.dhx4.isIE){var e=this;window.setTimeout(function(){e._removeResizeArea();e=null},1)}else{this._removeResizeArea()}if(y!==false){var x=[];u.forEachItem(function(n){var m=y[n.conf.name];if(!(m.w==n.conf.size.w&&m.h==n.conf.size.h)){x.push(n.conf.name)}n=null});u._callMainEvent("onPanelResizeFinish",[x])}u=a=null;this.conf.resize.active=false;this.conf.resize=null;if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOn()}};this._initResizeArea=function(){if(this.r_sep==null){this.r_sep=document.createElement("DIV");this.r_sep.className="dhxlayout_resize_sep";this.r_sep.style.left=this.sep.style.left;this.r_sep.style.top=this.sep.style.top;this.r_sep.style.width=this.sep.style.width;this.r_sep.style.height=this.sep.style.height;this.sep.parentNode.appendChild(this.r_sep);if(window.dhx4.isIE){this.r_sep.onselectstart=function(){return false}}}if(this.r_area==null){this.r_area=document.createElement("DIV");this.r_area.className="dhxlayout_resize_area";this.sep.parentNode.appendChild(this.r_area);if(window.dhx4.isIE){this.r_area.onselectstart=function(){return false}}if(this.conf.mode=="v"){var e=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa;var o=parseInt(this.r_sep.style.top);var c=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width);var a=parseInt(this.r_sep.style.height)}else{var e=parseInt(this.r_sep.style.left);var o=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha;var c=parseInt(this.r_sep.style.width);var a=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height)}this.r_area.style.left=e+"px";this.r_area.style.top=o+"px";if(!dhtmlXLayoutObject.prototype._confGlob.reszieCover){dhtmlXLayoutObject.prototype._confGlob.reszieCover={};this.r_area.style.width=c+"px";this.r_area.style.height=a+"px";dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth;dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight}this.r_area.style.width=c+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px";this.r_area.style.height=a+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode};this._removeResizeArea=function(){this.r_sep.onselectstart=null;this.r_sep.parentNode.removeChild(this.r_sep);this.r_sep=null;this.r_area.onselectstart=null;this.r_area.parentNode.removeChild(this.r_area);this.r_area=null;document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")};this._doOnMouseDown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.cancelBubble=true}l._beforeResize(a)};this._doOnBodyMouseDown=function(a){a=a||event;if(l.conf.resize==null){return}if(l.conf.resize.active==true&&a.button!==l.conf.btn_left){if(a.preventDefault){a.preventDefault()}a.returnValue=false;a.cancelBubble=true;return false}};this._doOnMouseMove=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.cancelBubble=true}l._onResize(a)};this._doOnMouseUp=function(a){a=a||event;if(a.type=="mouseup"&&a.button!==l.conf.btn_left){return}l._afterResize(a)};if(typeof(window.addEventListener)=="function"){this.sep.addEventListener("mousedown",this._doOnMouseDown,false);this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,false);document.body.addEventListener("mousedown",this._doOnBodyMouseDown,false);document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,false)}else{this.sep.attachEvent("onmousedown",this._doOnMouseDown);document.body.attachEvent("onmousedown",this._doOnBodyMouseDown);document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown)}this._unload=function(){if(typeof(window.addEventListener)=="function"){this.sep.removeEventListener("mousedown",this._doOnMouseDown,false);this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,false);document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,false);document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,false)}else{this.sep.detachEvent("onmousedown",this._doOnMouseDown);document.body.detachEvent("onmousedown",this._doOnBodyMouseDown);document.body.detachEvent("oncontextmenu",this._doOnBodyMouseDown)}if(window.dhx4.isIE==true){this.sep.onselectstart=null}this.sep.parentNode.removeChild(this.sep);this.sep=null;for(var a in this){this[a]=null}l=null};return this}dhtmlXLayoutObject.prototype.setSeparatorSize=function(m, l){if(typeof(m)=="number"){var a=this.setSeparatorSize({index:m,current:-1},l);if(a.sep!=null){a.sep._setWH(l)}return}for(var n in this.cdata){if(this.cdata[n].dataType=="layout"&&this.cdata[n].dataNested==true&&this.cdata[n].dataObj!=null){m=this.cdata[n].dataObj.setSeparatorSize(m,l);if(m.sep!=null){return m}}if(n=="a"&&this.sep!=null){m.current++;if(m.welcome==m.current){return{sep:this.sep}}}}return m};window.dhtmlXLayoutCell=function(l, m){dhtmlXCellObject.apply(this,[l,"_layout"]);var n=this;this.layout=m;this.conf.skin=this.layout.conf.skin;this.conf.mode=this.layout.conf.mode;this.conf.collapsed=false;this.conf.fixed={w:false,h:false};this.conf.docked=true;this.conf.min_width=26;this.conf.min_height=26;this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null;if(this.conf.mode!="c"){this.cell.childNodes[this.conf.idx.hdr].lastChild.ondblclick=null}this._unloadDocking();this.layout=null;n=null});this._hdrInit();this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var a=n.layout._getMainInst();a._callMainEvent("onDblClick",[n.conf.name]);a=null};this.attachEvent("_onContentLoaded",function(){var a=this.layout._getMainInst();a._callMainEvent("onContentLoaded",[this.conf.name]);a=null});if(this.conf.mode!="c"){var h=document.createElement("DIV");h.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd;this.cell.childNodes[this.conf.idx.hdr].appendChild(h);h.onclick=function(a){if(n.conf.collapsed){n.expand()}else{n.collapse()}};h=null}this.attachEvent("_onBeforeContentAttach",function(a){if(a=="tabbar"||a=="layout"||a=="acc"){this._hideBorders()}if(a=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders();this.showHeader()}});this._initDocking();return this};dhtmlXLayoutCell.prototype=new dhtmlXCellObject();dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name};dhtmlXLayoutCell.prototype._initDocking=function(){var c=this;this.dock=function(){var a=this.layout._getMainInst();if(a.dhxWins==null||this.conf.docked){a=null;return}var g=a.dhxWins.window(this.conf.name);g.close();this._attachFromCell(g);this.conf.docked=true;if(!this.conf.dock_collapsed){this.expand()}a._callMainEvent("onDock",[this.conf.name]);a=g=null};this.undock=function(u,s,h,a){var o=this.layout._getMainInst();if(o.dhxWins==null||this.conf.docked==false){o=null;return}this.conf.dock_collapsed=this.conf.collapsed;if(!this.conf.collapsed){this.collapse()}if(o.dhxWins.window(this.conf.name)!=null){var r=o.dhxWins.window(this.conf.name);r.show()}else{if(u==null){u=20}if(s==null){s=20}if(h==null){h=320}if(a==null){a=200}var r=o.dhxWins.createWindow(this.conf.name,u,s,h,a);r.button("close").hide();r.addUserButton("dock",99,"Dock");r.button("dock").show();r.button("dock").attachEvent("onClick",this._doOnDockClick);r.setText(this.getText());r.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=false;r._attachFromCell(this);o._callMainEvent("onUnDock",[this.conf.name]);o=r=null};this._doOnDockClick=function(){c.dock()};this._doOnDockWinClose=function(a){a.hide();return false};this._unloadDocking=function(){c=null}};dhtmlXLayoutCell.prototype._hdrInit=function(){var g="";if(window.dhx4.isIE){if(navigator.userAgent.indexOf("MSIE 9.0")!=-1){g=" dhx_cell_hdr_text_ie9"}else{if(window.dhx4.isIE8){g=" dhx_cell_hdr_text_ie8"}else{if(window.dhx4.isIE7){g=" dhx_cell_hdr_text_ie7"}else{if(window.dhx4.isIE6){g=" dhx_cell_hdr_text_ie6"}}}}}else{if(window.dhx4.isChrome||window.dhx4.isKHTML){g=" dhx_cell_hdr_text_chrome"}}var e=document.createElement("DIV");e.className="dhx_cell_hdr";e.innerHTML="<div class='dhx_cell_hdr_text"+g+"'></div>";this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cont]);e=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:true};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx();this.attachEvent("_onSetSize",this._hdrOnSetSize);this.attachEvent("_onBorderChange",this._hdrOnBorderChange);this.attachEvent("_onViewSave",this._hdrOnViewSave);this.attachEvent("_onViewRestore",this._hdrOnViewRestore)};dhtmlXLayoutCell.prototype.showHeader=function(c){if(this.conf.hdr.visible||this.conf.collapsed){return}if(this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()){return}this.conf.hdr.w_saved=this.conf.hdr.h_saved=null;this.conf.hdr.visible=true;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr";if(c!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.hideHeader=function(c){if(!this.conf.hdr.visible||this.conf.collapsed){return}this.conf.hdr.w_saved=this._getMinWidth(this._idd);this.conf.hdr.h_saved=this._getMinHeight(this._idd);this.conf.hdr.visible=false;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden";this._hdrUpdBorder();this._mtbUpdBorder();if(c!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return(this.conf.hdr.visible==true)};dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""};dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"};dhtmlXLayoutCell.prototype.isArrowVisible=function(){return(this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=="")};dhtmlXLayoutCell.prototype.setText=function(c){this.conf.hdr.text=c;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text};dhtmlXLayoutCell.prototype.setCollapsedText=function(c){this.conf.hdr.text_collapsed=c;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getCollapsedText=function(){return(this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text)};dhtmlXLayoutCell.prototype._hdrUpdText=function(){var c=(this.conf.collapsed==true&&this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text);this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+c+"</span>"};dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){if(this.conf.borders==true){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden")}else{if(!this.conf.hdr.visible){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders"}}};dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){if(this.conf.collapsed&&this.conf.mode=="v"){this._fitHdr()}};dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(true);this._hdrUpdBorder()};dhtmlXLayoutCell.prototype._hdrOnViewSave=function(c){this.views[c].hdr_vis=this.conf.hdr.visible};dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(c){if(this.conf.hdr.visible!=this.views[c].hdr_vis){this[this.views[c].hdr_vis?"showHeader":"hideHeader"](true)}this.views[c].hdr_vis=null;delete this.views[c].hdr_vis};dhtmlXLayoutCell.prototype._getHdrHeight=function(c){if(this.conf.collapsed&&this.conf.mode=="v"&&c!==true){return 27}return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXLayoutCell.prototype._fitHdr=function(){if(this.conf.collapsed){if(typeof(dhtmlXLayoutObject.prototype._confGlob.hdrColH)=="undefined"){this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+"px";dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(this.cell.childNodes[this.conf.idx.hdr].style.height)-this._getHdrHeight(true)}this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH+"px"}else{this.cell.childNodes[this.conf.idx.hdr].style.height=null}};dhtmlXLayoutCell.prototype.expand=function(n){if(!this.conf.collapsed){return true}var v=this.layout;if(this.conf.mode=="v"){var r=(n?v.conf.hh:v.cdata[v.conf.nextCell[this._idd]]._getMinWidth(this._idd));var u=v.cont.offsetWidth-v.conf.sw;if(r+this.conf.size.w_avl>u){v=null;return false}}else{var s=(n?v.conf.hh:v.cdata[v.conf.nextCell[this._idd]]._getMinHeight(this._idd)+v.cdata[v.conf.nextCell[this._idd]]._getHdrHeight());var w=v.cont.offsetHeight-v.conf.sw;if(s+this.conf.size.h_avl>w){v=null;return false}}if(this.conf.docked==false){this.dock();return}this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,"");this.conf.collapsed=false;if(this.conf.mode=="v"){this.conf.size.w=Math.min(u-r,this.conf.size.w_saved);this.conf.size.w_saved=this.conf.size.w_avl=null}else{this.conf.size.h=Math.min(w-s,this.conf.size.h_saved);this.conf.size.h_saved=this.conf.size.h_avl=null}if(this.conf.mode=="v"){this._fitHdr()}v.setSizes(v.conf.nextCell[this._idd],v.conf.nextCell[this._idd],n==true,"expand");v.sep._blockSep();v=null;this._hdrUpdText();var o=this.layout._getMainInst();o._callMainEvent("onExpand",[this.conf.name]);o=null;return true};dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed){return false}var g=this.layout;if(g.cdata[g.conf.nextCell[this._idd]].expand(true)==false){return false}if(this.conf.mode=="v"){this.conf.size.w_saved=this.conf.size.w;this.conf.size.w_avl=this._getMinWidth(this._idd)}else{this.conf.size.h_saved=this.conf.size.h;this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()}this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode;this.conf.collapsed=true;if(this.conf.mode=="v"){this.conf.size.w=g.conf.hh}else{this.conf.size.h=this._getHdrHeight()}g.setSizes(g.conf.nextCell[this._idd],g.conf.nextCell[this._idd],false,"collapse");g.sep._blockSep();g=null;this._hdrUpdText();var e=this.layout._getMainInst();e._callMainEvent("onCollapse",[this.conf.name]);e=null;return true};dhtmlXLayoutCell.prototype.isCollapsed=function(){return(this.conf.collapsed==true)};dhtmlXLayoutCell.prototype.setMinWidth=function(c){this.conf.min_width=parseInt(c)||0};dhtmlXLayoutCell.prototype.setMinHeight=function(c){this.conf.min_height=parseInt(c)||0};dhtmlXLayoutCell.prototype._getMinWidth=function(g){if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst()){return this.dataObj._getAvailWidth()}if(this.dataObj.conf.pattern=="1C"){return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(g))}else{if(this.dataObj.conf.mode=="v"){var e=g||this._idd;if(this.dataObj.cdata[e].conf.collapsed){e=this.dataObj.conf.nextCell[e]}return Math.max(this.conf.min_width,this.dataObj.cdata[e]._getMinWidth(g)+this.dataObj.cdata[this.dataObj.conf.nextCell[e]]._getWidth()+this.dataObj.conf.sw)}else{return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(g),this.dataObj.cdata.b._getMinWidth(g))}}}return Math.max(this.conf.min_width,1)};dhtmlXLayoutCell.prototype._getMinHeight=function(h){var l=0;if(this.conf.idx.menu!=null){l+=this.cell.childNodes[this.conf.idx.menu].offsetHeight}if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst()){return this.dataObj._getAvailHeight()}if(this.dataObj.conf.pattern=="1C"){return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(h))}else{if(this.dataObj.conf.mode=="h"){var g=h;if(this.dataObj.cdata[g].conf.collapsed){g=this.dataObj.conf.nextCell[g]}return Math.max(this.conf.min_height,this.dataObj.cdata[g]._getMinHeight(h)+this.dataObj.cdata[g]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[g]]._getHeight()+this.dataObj.conf.sw)}else{return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(h)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(h)+this.dataObj.cdata.b._getHdrHeight())}}}return Math.max(this.conf.min_height,l)};dhtmlXLayoutCell.prototype._getAvailWidth=function(h){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C"){return this.dataObj.cdata.a._getAvailWidth(h)}else{if(this.dataObj.conf.mode=="v"){var g=(this.dataObj.cdata.a.conf.collapsed==true);var l=(this.dataObj.cdata.b.conf.collapsed==true);if(h=="a"){return this.dataObj.cdata[l?"a":"b"]._getAvailWidth(h)}else{return this.dataObj.cdata[g?"b":"a"]._getAvailWidth(h)}}else{return Math.min(this.dataObj.cdata.a._getAvailWidth(h),this.dataObj.cdata.b._getAvailWidth(h))}}}return this.cell.offsetWidth-this._getMinWidth()};dhtmlXLayoutCell.prototype._getAvailHeight=function(l){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C"){return this.dataObj.cdata.a._getAvailHeight(l)}else{if(this.dataObj.conf.mode=="h"){var n=(this.dataObj.cdata.a.conf.collapsed==true);var m=(this.dataObj.cdata.b.conf.collapsed==true);if(l=="a"){return this.dataObj.cdata[m?"a":"b"]._getAvailHeight(l)}else{return this.dataObj.cdata[n?"b":"a"]._getAvailHeight(l)}}else{return Math.min(this.dataObj.cdata.a._getAvailHeight(l),this.dataObj.cdata.b._getAvailHeight(l))}}}var h=this._getHdrHeight();if(this.conf.mode=="v"&&this.conf.collapsed){h=this.conf.hh}return this.cell.offsetHeight-h-this._getMinHeight()};dhtmlXLayoutCell.prototype.setWidth=function(s){if(this.conf.mode=="v"){if(this.conf.collapsed){return}var r=this.layout;var o=r.cdata[r.conf.nextCell[this._idd]];if(o.conf.collapsed){s=s+r.conf.sw+o._getWidth();a=r=o=null;return}var u=this._getMinWidth(this._idd);var w=r.cont.offsetWidth-o._getMinWidth(this._idd)-r.conf.sw;s=Math.max(u,Math.min(s,w));this.conf.size.w=s;r.setSizes(o._idd,o._idd);r=o=null}else{if(this.layout==null||this.layout.parentLayout==null){return}var a=this.layout.parentLayout;var r=this.layout;var o=r.cdata[r.conf.nextCell[this._idd]];for(var v in a.cdata){if(a.cdata[v].dataObj==r){a.cdata[v].setWidth(s)}}a=r=null}};dhtmlXLayoutCell.prototype.setHeight=function(w){if(this.conf.mode=="h"){if(this.conf.collapsed){return}var r=this.layout;var a=r.cdata[r.conf.nextCell[this._idd]];if(a.conf.collapsed){w=w+r.conf.sw+a._getHeight();var u=(this.layout!=null&&this.layout.parentLayout!=null?this.layout.parentLayout:null);if(u!=null){for(var v in u.cdata){if(u.cdata[v].dataObj==r){u.cdata[v].setHeight(w)}}}u=r=a=null;return}var h=this._getMinHeight(this._idd)+this._getHdrHeight();var s=r.cont.offsetHeight-a._getMinHeight(this._idd)-a._getHdrHeight()-r.conf.sw;w=Math.max(h,Math.min(w,s));this.conf.size.h=w;r.setSizes(a._idd,a._idd);r=a=null}else{if(this.layout==null||this.layout.parentLayout==null){return}var u=this.layout.parentLayout;var r=this.layout;var a=r.cdata[r.conf.nextCell[this._idd]];for(var v in u.cdata){if(u.cdata[v].dataObj==r){u.cdata[v].setHeight(w)}}u=r=null}};dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w};dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h};dhtmlXLayoutCell.prototype.fixSize=function(n,l){this.conf.fixed.w=window.dhx4.s2b(n);this.conf.fixed.h=window.dhx4.s2b(l);var h=this.layout._getMainInst();var m={};h.forEachItem(function(e){if(e.conf.fsize!=null){var g=e.getId();var r={h:(e.conf.fixed.w==true),v:(e.conf.fixed.h==true)};for(var c in r){if(r[c]==true&&e.conf.fsize[c]!=null){if(!(e.conf.fsize[c] instanceof Array)){e.conf.fsize[c]=[e.conf.fsize[c]]}for(var a=0;a<e.conf.fsize[c].length;a++){m[e.conf.fsize[c][a]]=true}}}}e=null});h._forEachSep(function(a){a._lockSep(m[a.conf.idx]==true);a=null});h=null};dhtmlXCellObject.prototype.attachLayout=function(e){this.callEvent("_onBeforeContentAttach",["layout"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";this._attachObject(g);if(typeof(this._layoutMainInst)!="undefined"){g._layoutMainInst=this._layoutMainInst}if(typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof dhtmlXLayoutCell){g._isParentCell=true}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){g._ofs={t:-1,r:-1,l:-1,b:-1}}if(typeof(window.dhtmlXTabBarCell)!="undefined"&&(this instanceof window.dhtmlXTabBarCell)){if(this.conf.skin=="dhx_skyblue"){g._ofs={t:-1,r:-1,b:-1,l:-1}}}if(typeof(window.dhtmlXSideBarCell)!="undefined"&&(this instanceof window.dhtmlXSideBarCell)){if(this.conf.skin=="dhx_web"){g._ofs={l:8};if(this.sidebar.conf.autohide==true){g._ofs.l=0}if(this.sidebar.conf.header==true){g._ofs.t=9}}else{if(this.conf.skin=="dhx_terrace"){g._ofs={l:11};if(this.sidebar.conf.autohide==true){g._ofs.l=0}if(this.sidebar.conf.header==true){g._ofs.t=10}}else{g._ofs={l:-1}}}}if(typeof(window.dhtmlXCarouselCell)!="undefined"&&(this instanceof window.dhtmlXCarouselCell)){this._hideBorders()}if(typeof(e)=="string"){e={pattern:e}}if(typeof(e.skin)=="undefined"){e.skin=this.conf.skin}e.parent=g;this.dataType="layout";this.dataObj=new dhtmlXLayoutObject(e);if(this instanceof dhtmlXLayoutCell){this.dataObj.parentLayout=this.layout}g._layoutMainInst=null;e.parent=null;g=e=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBar(r, a){var o=this;this.conf={skin:(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"dhx_skyblue"),css:"dhxtabbar",lastActive:null,closeButton:false,align:"left",tabsMode:(a=="bottom"?"bottom":"header.html"),tabsContCss:"",contZone:true,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:false,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9]}};var u=navigator.userAgent;if(u.indexOf("Safari")>=0&&(u.indexOf("5.1.7")>=0||(u.match(/7[\.\d]* mobile/gi)!=null&&u.match(/AppleWebKit/gi)!=null))){this.conf.tabsContCss=" safari_517_fix"}var n;if(r!=null&&typeof(r)=="object"&&typeof(r.tagName)=="undefined"){n=r.parent;if(typeof(r.skin)!="undefined"){this.conf.skin=r.skin}if(typeof(r.mode)!="undefined"){this.conf.tabsMode=(r.mode=="bottom"?"bottom":"header.html")}if(typeof(r.align)!="undefined"){this.conf.align=(r.align=="right"?"right":"left")}if(typeof(r.close_button)!="undefined"){this.conf.closeButton=window.dhx4.s2b(r.close_button)}if(typeof(r.content_zone)!="undefined"){this.conf.contZone=window.dhx4.s2b(r.content_zone)}if(typeof(r.xml)!="undefined"){this.conf.autoload.xml=r.xml}if(typeof(r.json)!="undefined"){this.conf.autoload.xml=r.json}if(typeof(r.tabs)!="undefined"){this.conf.autoload.tabs=r.tabs}if(typeof(r.onload)!="undefined"){this.conf.autoload.tabs=r.tabs}if(typeof(r.arrows_mode)!="undefined"){this.conf.autoload.arrows_mode=r.arrows_mode}}else{n=r}window.dhtmlXCellTop.apply(this,[n,r.offsets]);if(this.base._ofs!=null&&this.base._ofs.t!=null){this.conf.tabsTop=this.base._ofs.t}this.tabsMode=document.createElement("DIV");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.cont.appendChild(this.tabsMode);this.tabsArea=document.createElement("DIV");this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>";this.tabsArea.style.top=(this.conf.tabsMode=="header.html"?this.conf.tabsTop+"px":"auto");this.tabsMode.appendChild(this.tabsArea);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";this.tabsArea.childNodes[0].onclick=function(){if(o.conf.align=="left"){o._moveTabs(1)}else{o._moveTabs(-1)}};this.tabsArea.childNodes[2].onclick=function(){if(o.conf.align=="left"){o._moveTabs(-1)}else{o._moveTabs(1)}};this._onTabsAreaClick=function(c){return this._callMainEvent("onTabClose",[c])};this.tabsArea.onclick=function(e){e=e||event;var c=(e.target||e.srcElement);while(c!=null){if(typeof(c._tabCloseId)!="undefined"){if(o._onTabsAreaClick(c._tabCloseId)!==true){return}o.t[c._tabCloseId].conf.remove=true;o._hideTab(c._tabCloseId);c=null}else{if(typeof(c._tabId)!="undefined"){o._doOnClick(c._tabId);c=null}}if(c!=null){c=c.parentNode;if(c==this){c=null}}}};this.tabsArea.onselectstart=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}};this._doOnClick=function(c){this.callEvent("onTabClick",[c,this.conf.lastActive]);if(this.t[c].conf.enabled){this._setTabActive(c)}};this.t={};this.addTab=function(l,A,e,D,E,m){if(typeof(m)!="boolean"){m=(this.conf.closeButton==true)}E=window.dhx4.s2b(E);var c=document.createElement("DIV");c.className="dhxtabbar_tab";c.innerHTML="<div class='dhxtabbar_tab_text"+(m?" dhxtabbar_tab_text_close":"")+"'>"+A+"</div>"+(m?"<div class='dhxtabbar_tab_close'></div>":"");c._tabId=l;if(m){c.childNodes[1]._tabCloseId=l}var g=this.tabsArea.childNodes[1].firstChild;if(D!=null&&D+1>0&&D+1<g.childNodes.length){g.insertBefore(c,g.childNodes[D+1])}else{g.appendChild(c)}var h=false;if(typeof(e)=="undefined"||e==null||e=="*"){e=this._getLabelWidth(A,m);h=true}else{e=parseInt(e)}c.style.width=e+"px";var C=new dhtmlXTabBarCell(l,this);this.tabsMode.appendChild(C.cell);this.t[l]={tab:c,cell:C,conf:{text:A,visible:true,active:false,enabled:true,close:m,width:e,autowidth:h}};g=C=null;if(E){this._setTabActive(l)}else{this._adjustCell(l)}if(this.conf.initSeq!=true&&this.conf.arwMode=="auto"){this.setSizes()}};this.setSizes=function(){this._adjustCont();if(this.conf.tabsAreaOfs==null){this.tabsArea.style.width=this.cont.offsetWidth+"px";this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth}this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px";this._adjustCell(this.conf.lastActive);this._adjustTabs(true);this.callEvent("_onSetSizes",[])};this._adjustCell=function(e){if(!this.conf.contZone||e==null){return}var g=(this.conf.tabsMode=="header.html"?this.tabsArea.offsetHeight:0)+this.conf.tabsTop;var h=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop;var c=this.t[e].cell.dataType;if(this.conf.skin=="dhx_skyblue"&&(c=="layout"||c=="tabbar"||c=="acc")){if(this.conf.tabsMode=="header.html"){g=g-1}h=h+1}if(e!=this.conf.lastActive){g=-5000;this.t[e].cell.cell.style.visibility="hidden";this.t[e].cell.cell.style.zIndex=0}this.t[e].cell._setSize(0,g,this.cont.offsetWidth,h)};this.setTabsMode=function(c){this.conf.tabsMode=(c=="bottom"?"bottom":"header.html");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.style.top=(this.conf.tabsMode=="header.html"?this.conf.tabsTop+"px":"auto");this.setSizes()};this._tabCss=function(c, g){var l=this.t[c].conf.active;var e=!this.t[c].conf.enabled;var h=!this.t[c].conf.visible;return"dhxtabbar_tab"+(h?" dhxtabbar_tab_hidden":(l||e?" dhxtabbar_tab"+(l?"_actv":"")+(e?"_dis":""):""))};this._getLabelWidth=function(e, g){if(this.tabsTextTest==null){this.tabsTextTest=document.createElement("SPAN");this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=e;var c=this.tabsTextTest.offsetWidth;if(window.dhx4.isIE&&c==0){c=this.tabsTextTest.offsetWidth}c+=this.conf.tabsWidth[this.conf.skin][0];if(g==true){c+=this.conf.tabsWidth[this.conf.skin][1]}document.body.removeChild(this.tabsTextTest);return c};this._adjustTabs=function(l){if(this._checkArrows()==true||l==true){this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px";this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+1+"px"}var g=this.tabsArea.childNodes[1];if(g.offsetWidth<5){g=null;return}var c=parseInt(g.childNodes[0].style[this.conf.align]);var m=null;for(var h=0;h<g.childNodes[0].childNodes.length;h++){var e=g.childNodes[0].childNodes[h]._tabId;if(e!=null&&this.t[e].conf.visible){var w=this.t[e].tab.offsetWidth-this.conf.tabsOfs;if(this.t[e].conf.active){if(c<0||g.offsetWidth<w){m={d:1,id:e}}else{if(c+w>g.offsetWidth){m={d:-1,id:e}}}}c+=w}}if(m!=null){this._moveTabs(m.d,m.id)}else{if(g.offsetWidth>c+1){g.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(g.childNodes[0].style[this.conf.align])+(g.offsetWidth-c))+"px"}}g=m=null};this._moveTabs=function(x,e){var h=this.tabsArea.childNodes[1].childNodes[0];var I=0;var l=[];var c=null;for(var F=0;F<h.childNodes.length;F++){var m=h.childNodes[F]._tabId;if(m!=null&&this.t[m].conf.visible){l.push({id:m,w:this.t[m].tab.offsetWidth-this.conf.tabsOfs,ind:I});if(m==e){c=I}I++}}var g=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]);var J=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs;var H=null;var L=null;for(var F=0;F<l.length;F++){l[F].x=g;if(H==null&&g>=0&&g+l[F].w>0){H=l[F]}if(g<J&&g+l[F].w<=J){L=l[F]}g+=l[F].w}if(c!=null){var K=l[c]}else{var K=null;if(x>0){if(H==null){if(l.length>0){K=l[l.length-1]}}else{if(H.ind>0&&l.length>=H.ind){K=l[H.ind-1]}}}else{if(L==null){if(l.length>0){K=l[0]}}else{if(l.length>L.ind){K=l[L.ind+1]}}}}if(K!=null){if(x>0){if(g<J){h.style[this.conf.align]=Math.min(0,parseInt(h.style[this.conf.align])+(J-g))+"px"}else{h.style[this.conf.align]=parseInt(h.style[this.conf.align])-K.x+"px"}}else{h.style[this.conf.align]=parseInt(h.style[this.conf.align])-K.x+J-K.w+"px"}}h=K=l=null};this._getNextVisible=function(e,c){return this._getNearVisible(e,c,"next")};this._getPrevVisible=function(e,c){return this._getNearVisible(e,c,"previous")};this._getFirstVisible=function(){return this._getNearVisible(null,false,"first")};this._getNearVisible=function(e,l,g){if(g=="first"){var h=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];g="next"}else{if(e==null||this.t[e]==null){return(l?this._getFirstVisible():null)}var h=this.t[e].tab[g+"Sibling"]}var m=null;while(h!=null&&m==null){var c=h._tabId;if(c!=null&&m==null&&this.t[c].conf.visible){m=c}else{h=h[g+"Sibling"]}}h=null;return m};this._showTab=function(e,c){if(this.t[e]==null){return}if(this.t[e].conf.transActv==true){if(this.t[e].conf.transMode=="show"){return}}else{if(this.t[e].conf.visible==true){return}}if(this.conf.transProp!==false){this.t[e].conf.transActv=true;this.t[e].conf.transMode="show";this.t[e].conf.transProp=this.conf.transProp;this.t[e].conf.transActvId=(c?e:null);if(!this.t[e].conf.transEv){this.t[e].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[e].conf.transEv=true}this.t[e].conf.visible=true;this.t[e].tab.className=this._tabCss(e);this.t[e].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[e].tab.style.width=this.t[e].conf.width+"px";if(this.t[e].tab.clientWidth>=this.t[e].conf.width){this.t[e].tab.style.visibility="visible"}}else{this.t[e].conf.visible=true;this.t[e].tab.style.display="";if(c||this.t[e].conf.active){this.t[e].conf.active=false;this._setTabActive(e)}else{this._adjustTabs()}}};this._hideTab=function(e,c){if(this.t[e]==null){return}if(this.t[e].conf.transActv==true){if(this.t[e].conf.transMode=="hide"){return}}else{if(this.t[e].conf.visible!=true){return}}var m=false;if(this.conf.lastActive==e){this.conf.lastActive=null;this.t[e].conf.active=false;this.t[e].tab.className=this._tabCss(e);m=true}var h=this._getPrevVisible(e);var l=this._getNextVisible(e);var g=(m&&c!==false?(c==true?null:c)||l||h:null);if(this.conf.transProp!==false){this.t[e].conf.transActv=true;this.t[e].conf.transMode="hide";this.t[e].conf.transProp=this.conf.transProp;this.t[e].conf.transActvId=g;this.t[e].conf.visible=false;if(!this.t[e].conf.transEv){this.t[e].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[e].conf.transEv=true}this.t[e].tab.style.visibility="hidden";this.t[e].tab.className=o._tabCss(e);this.t[e].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[e].tab.style.width="0px"}else{this.t[e].tab.style.display="none";this.t[e].conf.visible=false;if(this.conf.contZone){this.t[e].cell.cell.style.visibility="hidden";this.t[e].cell.cell.style.top="-5000px"}if(g!=null){this._setTabActive(g)}this._adjustTabs();if(this.t[e].conf.remove){this._removeTab(e)}}};this._isTabVisible=function(c){return(this.t[c].conf.visible==true)};this._doOnTrEnd=function(){var e=this._tabId;if(o.t[e]==null){return}var c=o.t[e];var g=c.conf.transActvId;if(c.conf.transMode=="hide"){if(c.conf.remove){o._removeTab(e)}else{c.tab.style[c.conf.transProp]="";if(o.conf.contZone){c.cell.cell.style.visibility="hidden";c.cell.cell.style.top="-5000px"}c.conf.transActv=false}}else{if(c.conf.transMode=="show"){c.tab.style[c.conf.transProp]="";c.tab.style.visibility="visible";c.conf.transMode=null;c.conf.transActv=false}}if(g!=null){o._setTabActive(g)}else{o._adjustTabs()}c=null};this.enableTabCloseButton=function(c){this.conf.closeButton=window.dhx4.s2b(c)};this.unload=function(){this.conf.unloading=true;this.clearAll();this.t=null;if(this.tabsTextTest!=null){if(this.tabsTextTest.parentNode){this.tabsTextTest.parentNode.removeChild(this.tabsTextTest)}this.tabsTextTest=null}window.dhx4._enableDataLoading(this,null,null,null,"clear");this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(var c in this){this[c]=null}o=null};this.enableContentZone=function(c){this.conf.contZone=(c==true)};this.setSkin=function(c){this._setBaseSkin(c);this.conf.skin=c;if(this.tabsTextTest!=null){this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}for(var e in this.t){this.t[e].cell._resetSizeState();if(this.t[e].conf.autowidth==true){this.t[e].conf.width=this._getLabelWidth(this.t[e].conf.text,this.t[e].conf.close);if(this.t[e].conf.visible){this.t[e].tab.style.width=this.t[e].conf.width+"px"}}}this.conf.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()};this.setAlign=function(c){c=(c=="left"?"left":"right");if(c==this.conf.align){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";return}if(this.conf.transProp!==false){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="";this.conf.align=c;this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}};this._initObj=function(e){this.conf.initSeq=true;this.clearAll();var c=false;if(e.settings!=null){if(e.settings.skin!=null){this.setSkin(e.settings.skin)}if(e.settings.closeButton!=null){this.enableTabCloseButton(window.dhx4.s2b(e.settings.closeButton))}if(e.settings.align!=null){this.setAlign(e.settings.align)}if(e.settings.hrefmode=="ajax"){c=true}if(e.settings.hrefmode=="ajax-html"){c=true;this.conf.url_demand=true}}if(e.tabs!=null){for(var g=0; g<e.tabs.length; g++){var h=e.tabs[g];if(typeof(h.id)=="undefined"){h.id=window.dhx4.newId()}if(!isNaN(parseInt(h.width))){h.width=parseInt(h.width)}else{h.width=null}this.addTab(h.id,h.text||h.label||"",h.width,h.welcome,window.dhx4.s2b(h.selected)||window.dhx4.s2b(h.active),h.close);if(h.content!=null){this.cells(h.id).attachHTMLString(h.content)}else{if(h.href!=null){if(this.conf.url_demand==true){this.conf.urls[h.id]={href:h.href,ajax:c}}else{this.cells(h.id).attachURL(h.href,c)}}}if(typeof(h.enabled)!="undefined"&&window.dhx4.s2b(h.enabled)==false){this.tabs(h.id).disable()}else{if(typeof(h.disabled)!="undefined"&&window.dhx4.s2b(h.disabled)==true){this.tabs(h.id).disable()}}}}this.conf.initSeq=false;if(this.conf.arwMode=="auto"){this.setSizes()}if(this.conf.url_demand==true){this._loadURLOnDemand(this.conf.lastActive)}};this._xmlToObj=function(w){var D={settings:{},tabs:[]};var h=w.getElementsByTagName("tabbar")[0];if(h!=null){for(var m in {skin:1,align:1,closeButton:1,hrefmode:1}){if(h.getAttribute(m)!=null){D.settings[m]=h.getAttribute(m)}}var g=h.getElementsByTagName("tab");for(var e=0;e<g.length;e++){var E={text:(g[e].firstChild.nodeValue||"")};for(var m in {id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1}){if(g[e].getAttribute(m)!=null){E[m]=g[e].getAttribute(m)}}var c=g[e].getElementsByTagName("content")[0];if(c!=null){E.content="";for(var l=0;l<c.childNodes.length;l++){E.content+=(c.childNodes[l].nodeValue||"")}}D.tabs.push(E)}}return D};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:true});var s=window.dhx4.transDetect();this.conf.transProp=s.transProp;this.conf.transEv=s.transEv;this.conf.transValueWidth="width "+this.conf.transSpeed;s=null;if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}this._callMainEvent=function(e,c){return this.callEvent(e,c)};window.dhx4._eventable(this);if(this.conf.autoload.json!=null){this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload)}else{if(this.conf.autoload.xml!=null){this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload)}else{if(this.conf.autoload.tabs!=null){this.loadStruct({tabs:this.conf.autoload.tabs})}}}if(this.conf.autoload.arrows_mode!=null){this.setArrowsMode(this.conf.autoload.arrows_mode)}this._fixTabsOfs();this.setSizes();return this}dhtmlXTabBar.prototype=new dhtmlXCellTop();dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs=(this.conf.skin=="dhx_web"?0:1)};dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(c){if(this.t[c]){return this.t[c].cell}return null};dhtmlXTabBar.prototype.getAllTabs=function(){var a=[];for(var g in this.t){a.push(g)}return a};dhtmlXTabBar.prototype._setTabActive=function(g,e){if(!this.t[g]||this.t[g].conf.active){return}if(typeof(e)=="undefined"){e=true}if(e==true&&this.callEvent("onSelect",[g,this.conf.lastActive])!==true){return}this.setTabInActive();this.t[g].conf.active=true;if(this.conf.contZone){this.t[g].cell.cell.style.visibility="visible";this.t[g].cell.cell.style.top="0px";this.t[g].cell.cell.style.zIndex=1}this.t[g].tab.className=this._tabCss(g);this.conf.lastActive=g;this.setSizes();if(this.conf.url_demand==true){this._loadURLOnDemand(g)}};dhtmlXTabBar.prototype.setTabInActive=function(){if(this.conf.lastActive&&this.t[this.conf.lastActive]){this.t[this.conf.lastActive].conf.active=false;if(this.conf.contZone){this.t[this.conf.lastActive].cell.cell.style.visibility="hidden";this.t[this.conf.lastActive].cell.cell.style.top="-5000px";this.t[this.conf.lastActive].cell.cell.style.zIndex=0}this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive);this.conf.lastActive=null}};dhtmlXTabBar.prototype._isTabActive=function(c){return(c==this.conf.lastActive&&this.conf.lastActive!=null)};dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive};dhtmlXTabBar.prototype.goToNextTab=function(){var c=this._getNextVisible(this.conf.lastActive,true);if(c!=null){this._setTabActive(c)}};dhtmlXTabBar.prototype.goToPrevTab=function(){var c=this._getPrevVisible(this.conf.lastActive,true);if(c!=null){this._setTabActive(c)}};dhtmlXTabBar.prototype._enableTab=function(g,e){if(!this.t[g]||this.t[g].conf.enabled){return}this.t[g].conf.enabled=true;this.t[g].tab.className=this._tabCss(g);if(e==true){this._setTabActive(g)}};dhtmlXTabBar.prototype._disableTab=function(g,e){if(!this.t[g]||!this.t[g].conf.enabled){return}this.t[g].conf.enabled=false;this.t[g].tab.className=this._tabCss(g);if(e!==false&&this.conf.lastActive==g){if(e==true){e=this._getNextVisible(g)||this._getPrevVisible(g)}this._setTabActive(e)}};dhtmlXTabBar.prototype._isTabEnabled=function(c){return(this.t[c]!=null&&this.t[c].conf.enabled==true)};dhtmlXTabBar.prototype._setTabText=function(l,m,n){if(!this.t[l]){return}var h=false;if(typeof(n)=="undefined"||n==null){n=this._getLabelWidth(m,this.t[l].conf.close);h=true}this.t[l].tab.style.width=n+"px";this.t[l].tab.childNodes[0].innerHTML=m;this.t[l].conf.text=m;this.t[l].conf.width=n;this.t[l].conf.autowidth=h};dhtmlXTabBar.prototype._getTabText=function(c){if(!this.t[c]){return null}return this.t[c].conf.text};dhtmlXTabBar.prototype._removeTab=function(w,u,o){if(!this.t[w]){return}if(o!=true&&this.t[w].conf.remove!=true){this.t[w].conf.remove=true;this._hideTab(w,u);return}if(typeof(u)=="undefined"){u=true}var s=this._getNextVisible(w);var r=this._getPrevVisible(w);if(this.t[w].conf.transEv==true){this.t[w].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[w].conf.transEv=false}for(var v in this.t[w].conf){this.t[w].conf[v]=null}this.t[w].conf=null;delete this.t[w].conf;this.t[w].cell._unload();this.t[w].cell=null;this.t[w].tab.parentNode.removeChild(this.t[w].tab);this.t[w].tab=null;this.t[w]=null;delete this.t[w];this.conf.urls[w]=null;delete this.conf.urls[w];if(this.conf.lastActive==w){this.conf.lastActive=null;if(u!=false){var a=(u==true?(s||r||this._getFirstVisible()):u);if(a!=null){this._setTabActive(a)}}}else{if(o!=true){this._adjustTabs()}}};dhtmlXTabBar.prototype.clearAll=function(){for(var a in this.t){this._removeTab(a,false,true)}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"};dhtmlXTabBar.prototype.moveTab=function(h,g){if(!this.t[h]||g<0){return}g+=1;var l=this.tabsArea.childNodes[1].firstChild;if(l.childNodes[g]!=this.t[h].tab){l.removeChild(this.t[h].tab);if(g>=l.childNodes.length){l.appendChild(this.t[h].tab)}else{l.insertBefore(this.t[h].tab,l.childNodes[g])}}l=null};dhtmlXTabBar.prototype._getIndex=function(l){var h=-1;var m=this.tabsArea.childNodes[1].firstChild;for(var n=1;n<m.childNodes.length;n++){if(m.childNodes[n]._tabId==l){h=n-1}}m=null;return h};dhtmlXTabBar.prototype.getNumberOfTabs=function(a){var h=0;for(var l in this.t){h+=(a!=true?1:(this.t[l].conf.visible==true?1:0))}return h};dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(a){for(var g in this.t){a.apply(window,[this.t[g].cell])}};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()};dhtmlXTabBar.prototype.setArrowsMode=function(c){c={auto:"auto",always:"always"}[String(c)];if(c==null||c==this.conf.mode){return}this.conf.arwMode=c;if(c=="always"){this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left";this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"}this.setSizes()};dhtmlXTabBar.prototype._checkArrows=function(){var m=false;if(this.conf.arwMode=="auto"){var n=0;for(var o in this.t){n+=this.t[o].tab.offsetWidth}var r=this.tabsArea.childNodes[0];var a=this.tabsArea.childNodes[2];if(n>this.cont.offsetWidth){if(r.className.search(/dhxtabbar_tabs_ar_hidden/)>=0){r.className=r.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");a.className=a.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");m=true}}else{if(r.className.search(/dhxtabbar_tabs_ar_hidden/)<1){r.className+=" dhxtabbar_tabs_ar_hidden";a.className+=" dhxtabbar_tabs_ar_hidden";m=true}}r=a=null}return m};dhtmlXTabBar.prototype._loadURLOnDemand=function(c){if(c!=null&&this.conf.urls[c]!=null){this.cells(c).attachURL(this.conf.urls[c].href,this.conf.urls[c].ajax);this.conf.urls[c]=null}};window.dhtmlXTabBarCell=function(a,h){dhtmlXCellObject.apply(this,[a,"_tabbar"]);this.tabbar=h;this.conf.skin=this.tabbar.conf.skin;this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"};this._tabbarCall=function(c){return function(){var g=[this._idd];for(var e=0;e<arguments.length;e++){g.push(arguments[e])}return this.tabbar[c].apply(this.tabbar,g)}};for(var l in this.conf.tabbar_funcs){if(typeof(this[l])!="function"){this[l]=this._tabbarCall(this.conf.tabbar_funcs[l])}}this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var c in this.conf.tabbar_funcs){this[c]=null;this.conf.tabbar_funcs[c]=null}this.conf.tabbar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments);this.tabbar._callMainEvent("onTabContentLoaded",arguments)});this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)});this.attachEvent("_onBeforeContentAttach",function(c){if(c=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders()}})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject();dhtmlXCellObject.prototype.attachTabbar=function(e){this.callEvent("_onBeforeContentAttach",["tabbar"]);if(typeof(e)=="string"){e={mode:e}}else{if(typeof(e)!="object"||e==null){e={}}}var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){g._ofs={t:-1}}if(typeof(window.dhtmlXTabBarCell)!="undefined"&&(this instanceof window.dhtmlXTabBarCell)){if(this.conf.skin=="dhx_skyblue"){g._ofs={t:-1,r:-1,b:-1,l:-1}}}if(typeof(window.dhtmlXSideBarCell)!="undefined"&&(this instanceof window.dhtmlXSideBarCell)){g._ofs={l:-1};if(this.conf.skin=="dhx_web"&&this.sidebar.conf.autohide==true){g._ofs.l=0}if(this.conf.skin=="dhx_terrace"){if(this.sidebar.conf.autohide==true){g._ofs.l=0}if(this.sidebar.conf.header==true){g._ofs.t=-1}}}if(typeof(window.dhtmlXCarouselCell)!="undefined"&&(this instanceof window.dhtmlXCarouselCell)){this._hideBorders()}this._attachObject(g);e.skin=this.conf.skin;e.parent=g;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(e);e.parent=g=null;e=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBarInitFromHTML(){var z=document.getElementsByTagName("div");for(var i=0;i<z.length;i++){if(z[i].className.indexOf("dhtmlxTabBar")!=-1){var conf={settings:{},tabs:[]};var n=z[i];var id=n.id;n.className="";var k=new Array();for(var j=0;j<n.childNodes.length;j++){if(n.childNodes[j].tagName&&n.childNodes[j].tagName!="!"){k[k.length]=n.childNodes[j]}}var skin=n.getAttribute("skin");if(skin!=null){conf.settings.skin=skin}var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w;acs=n.getAttribute("onbeforeinit");if(acs){eval(acs)}align=n.getAttribute("align");if(align){conf.settings.align=align}var cont={};for(var j=0;j<k.length;j++){var m=k[j];var tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")};var href=m.getAttribute("href");if(href){cont[m.id]={href:href}}else{cont[m.id]={cont:m}}conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont){if(cont[a].href){w.cells(a).attachURL(cont[a].href);cont[a].href=null}else{w.cells(a).attachObject(cont[a].cont);if(cont[a].cont.style.display=="none"){cont[a].cont.style.display=""}cont[a].cont=null}cont[a]=null}var selId=n.getAttribute("select");if(selId!=null){w.tabs(selId).setActive()}else{if(w.getActiveTab()==null){var v=w._getFirstVisible();if(v!=null){w.cells(v).setActive()}}}acs=n.getAttribute("oninit");if(acs){eval(acs)}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}}if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.attachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXSideBar(l){var h=this;this.conf={skin:(l.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxsidebar")||"dhx_skyblue"),css:"dhxsidebar",width:l.width||200,scroll_size:12,scroll_mult:20,close_button:false,icons_path:l.icons_path||"",selected:null,single_cell:(typeof(l.single_cell)=="undefined"?false:window.dhx4.s2b(l.single_cell)),cell:null,header:window.dhx4.s2b(l.header),autohide:window.dhx4.s2b(l.autohide),animate_items:true};this.setTemplate(l.template);window.dhtmlXCellTop.apply(this,[l.parent,(l==null?null:l.offsets)]);window.dhx4._eventable(this);if(window.navigator.msPointerEnabled==true){this.conf.touch_ms=true;this.conf.touch_start="MSPointerDown",this.conf.touch_end="MSPointerUp"}else{this.conf.touch_ms=false;this.conf.touch_start="touchstart",this.conf.touch_end="touchend"}this.side=document.createElement("DIV");this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name;this.side.innerHTML="<div class='dhxsidebar_side_items'></div>";this.cont.appendChild(this.side);this.arw=document.createElement("DIV");this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden";this.arw.innerHTML="<div class='dhxsidebar_arrow dhxsidebar_arrow_left'><div class='dhxsidebar_arrow_image'></div></div><div class='dhxsidebar_arrow dhxsidebar_arrow_right'><div class='dhxsidebar_arrow_image'></div></div>";this.cont.appendChild(this.arw);if(this.conf.autohide==true){this.hideSide();this.cont.className+=" dhxsidebar_autohide";this._doOnBodyClick=function(){if(h.conf.clear_click==true){h.conf.clear_click=false;return}h.hideSide()};this._doOnEscDown=function(a){a=a||event;if(a.keyCode==27){h.conf.clear_click=false;h.hideSide()}};if(typeof(window.addEventListener)=="function"){window.addEventListener(this.conf.touch_start,this._doOnBodyClick,false);window.addEventListener("click",this._doOnBodyClick,false);window.addEventListener("keydown",this._doOnEscDown,false)}else{document.body.attachEvent("onclick",this._doOnBodyClick);document.body.attachEvent("onkeydown",this._doOnEscDown)}}window.setTimeout(function(){if(h!=null&&h.side!=null){h.side.firstChild.style.top="0px"}},1);this._doOnArwClick=function(a){a=a||event;if(a.type!="click"&&a.preventDefault){a.preventDefault()}var c=a.target||a.srcElement;if(c.className.match(/dhxsidebar_arrow_image/)!=null){c=c.parentNode}if(c.className.match(/dhxsidebar_arrow_left/)!=null){h._scrollSide(-h.conf.scroll_size)}else{if(c.className.match(/dhxsidebar_arrow_right/)!=null){h._scrollSide(h.conf.scroll_size)}}c=null};if(typeof(window.addEventListener)=="function"){this.arw.addEventListener(this.conf.touch_start,this._doOnArwClick,false);this.arw.addEventListener("click",this._doOnArwClick,false)}else{this.arw.attachEvent("onclick",this._doOnArwClick)}this._doOnSideClick=function(c){c=c||event;var e=c.target||c.srcElement;var a=null;var n=false;h.conf.clear_click=true;if(c.type=="touchstart"||c.type=="pointerdown"||c.type=="MSPointerDown"){if(c.preventDefault){c.preventDefault()}if(this.className.match(/dhxsidebar_touch/gi)==null){if(c.type=="touchstart"||(c.type=="pointerdown"&&c.pointerType=="touch")){this.className+=" dhxsidebar_touch"}}}while(e!=null&&a==null&&c.type!="pointerdown"&&c.type!="MSPointerDown"){if(typeof(e.className)!="undefined"){if(e.className.match(/^dhxsidebar_item/)!=null&&typeof(e._idd)!="undefined"){a=e._idd}else{if(e.className.match(/^dhxsidebar_bubble/)!=null){n=true;a=e.parentNode._idd}}}e=e.parentNode}if(a!=null){if(n==false||(n==true&&h.callEvent("onBubbleClick",[a,h.t[a].conf.bubble])==true)){h._setItemActive(a,true)}}e=null};if(typeof(window.addEventListener)=="function"){this.side.addEventListener(this.conf.touch_start,this._doOnSideClick,false);this.side.addEventListener(this.conf.touch_end,this._doOnSideClick,false);this.side.addEventListener("mouseup",this._doOnSideClick,false)}else{this.side.attachEvent("onclick",this._doOnSideClick)}this.side.onmouseover=function(){this.className=this.className.replace(/\s*dhxsidebar_touch/gi,"")};this._doOnSideScroll=function(c){c=c||event;var a=(c.type=="mousewheel"?-c.wheelDelta:c.deltaY);h._scrollSide(a/Math.abs(a)*3)};this._scrollSide=function(c){var a=parseInt(this.side.firstChild.style.header||0)-c*this.conf.scroll_mult;if(a+this.side.firstChild.offsetHeight<this.side.clientHeight){a=this.side.clientHeight-this.side.firstChild.offsetHeight}if(a>0){a=0}this.side.firstChild.style.top=a+"px"};if(typeof(window.addEventListener)=="function"){this.side.addEventListener("wheel",this._doOnSideScroll,false)}else{this.side.attachEvent("onmousewheel",this._doOnSideScroll)}this.t={};this.s={};this._adjustCell=function(s, v){if(this.conf.single_cell!=true&&s==null){return}var e=(this.conf.autohide==true?0:this.conf.width);var c=this.cont.offsetWidth-e;var u=0;var a=this.cont.offsetHeight;if(this.conf.single_cell==true){if(v==true){this.conf.cell._setSize(e,u,c,a)}}else{if(s!=this.conf.selected){u=-5000;this.t[s].cell.cell.style.visibility="hidden";this.t[s].cell.cell.style.zIndex=0}this.t[s].cell._setSize(e,u,c,a)}};var g=window.dhx4.transDetect();this.conf.transProp=g.transProp;this.conf.transEv=g.transEv;this.conf.transValue="all 0.1s";this._doOnTrEnd=function(e){var a=this._idd;if(h.t[a]==null){return}var n=h.t[a];var c=n.conf.transActvId;if(n.conf.transMode=="hide"){if(n.conf.remove==true){h._removeItem(a)}else{n.item.style[n.conf.transProp]="";if(h.conf.single_cell!=true){n.cell.cell.style.visibility="hidden";n.cell.cell.style.top="-5000px"}n.conf.transActv=false}}else{if(n.conf.transMode=="show"){n.item.style[n.conf.transProp]="";n.item.style.visibility="visible";n.conf.transMode=null;n.conf.transActv=false}}if(c!=null){h._setItemActive(c)}else{h._checkHeight()}n=null};this._initObj=function(a){this.clearAll();if(a.items!=null){this.addItem(a.items)}};this._xmlToObj=function(r){var e=[];var w=r.getElementsByTagName("sidebar");if(w!=null&&w[0]!=null){var c=w[0].getElementsByTagName("item");for(var v=0;v<c.length;v++){var a={};for(var u=0;u<c[v].attributes.length;u++){a[c[v].attributes[u].nodeName]=c[v].attributes[u].nodeValue}e.push(a)}}return{items:e}};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","sidebar",{struct:true});this.unload=function(){this.conf.unloading=true;if(typeof(window.addEventListener)=="function"){this.side.removeEventListener("wheel",this._doOnSideScroll,false)}else{this.side.detachEvent("onmousewheel",this._doOnSideScroll)}if(this.conf.autohide==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("click",this._doOnBodyClick,false);window.removeEventListener("keydown",this._doOnEscDown,false)}else{document.body.detachEvent("onclick",this._doOnBodyClick);document.body.detachEvent("onkeydown",this._doOnEscDown)}}if(typeof(this._sideCoverDetach)=="function"){this._sideCoverDetach()}this.clearAll();this.s=this.t=null;if(typeof(window.addEventListener)=="function"){this.arw.removeEventListener(this.conf.touch_start,this._doOnArwClick,false);this.arw.removeEventListener("click",this._doOnArwClick,false)}else{this.arw.detachEvent("onclick",this._doOnArwClick)}this.arw.parentNode.removeChild(this.arw);this.arw=null;if(typeof(window.addEventListener)=="function"){this.side.removeEventListener(this.conf.touch_start,this._doOnSideClick,false);this.side.removeEventListener(this.conf.touch_end,this._doOnSideClick,false);this.side.removeEventListener("click",this._doOnSideClick,false)}else{this.side.detachEvent("onclick",this._doOnSideClick)}this.side.onmouseover=null;this.side.parentNode.removeChild(this.side);this.side=null;this._unloadTop();if(this.conf.single_cell==true){this.conf.cell._unload();this.conf.cell=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");for(var a in this){this[a]=null}h=null};if(this.conf.single_cell==true){this.conf.cell=new dhtmlXSideBarCell("master",this);this.cont.appendChild(this.conf.cell.cell);this._cells_native=this.cells;this.cells=function(a){this.conf.cell._idd=a;return this.conf.cell}}this.setSizes();if(l.items!=null){this._initObj(l)}else{if(l.json!=null){this.loadStruct(l.json,l.onload)}else{if(l.xml!=null){this.loadStruct(l.xml,l.onload)}}}return this}dhtmlXSideBar.prototype=new dhtmlXCellTop();dhtmlXSideBar.prototype._addItem=function(n){var l=(typeof(n.id)!="undefined"?n.id:window.dhx4.newId());if(n.type=="separator"){var m=document.createElement("DIV");m.className="dhxsidebar_sep";this.side.firstChild.appendChild(m);this.s[l]={sep:m};m=null;return}n.icons_path=this.conf.icons_path;var m=document.createElement("DIV");m.className="dhxsidebar_item";m.innerHTML=window.dhx4.template(this.conf.tpl_str,n);m._idd=l;this.side.firstChild.appendChild(m);m.ondragstart=function(){return false};if(this.conf.single_cell==true){var h=this.conf.cell}else{var h=new dhtmlXSideBarCell(l,this);this.cont.appendChild(h.cell)}this.t[l]={item:m,cell:h,init:n,conf:{selected:false,visible:true,close:close}};if(typeof(n.bubble)!="undefined"){this._setItemBubble(l,n.bubble)}if(this.conf.header==true){h.setHeaderText(window.dhx4.template(this.tpl_header,n))}h=m=null;if(window.dhx4.s2b(n.selected)==true){this._setItemActive(l)}else{this._adjustCell(l)}this._checkHeight()};dhtmlXSideBar.prototype.addItem=function(e){if(!(e instanceof Array)){e=[e]}for(var g=0;g<e.length;g++){this._addItem(e[g])}};dhtmlXSideBar.prototype.items=dhtmlXSideBar.prototype.cells=function(c){if(this.conf.single_cell==true){return this.conf.cell}if(this.t[c]!=null){return this.t[c].cell}return null};dhtmlXSideBar.prototype.forEachCell=dhtmlXSideBar.prototype.forEachItem=function(a){if(this.conf.single_cell==true){if(typeof(a)=="function"){a.apply(window,[this.conf.cell])}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){window[a].apply(window,[this.conf.cell])}}return}for(var g in this.t){if(typeof(a)=="function"){a.apply(window,[this.t[g].cell])}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){window[a].apply(window,[this.t[g].cell])}}}};dhtmlXSideBar.prototype.getAllItems=function(){var a=[];for(var g in this.t){a.push(g)}return a};dhtmlXSideBar.prototype.getNumberOfItems=function(){return this.getAllItems().length};dhtmlXSideBar.prototype.clearAll=function(){for(var a in this.t){this._removeItem(a,false,true)}for(var a in this.s){this.removeSep(a)}};dhtmlXSideBar.prototype.setSizes=function(){this._adjustCont();this._adjustSide();this._checkHeight();this._adjustCell(this.conf.selected,true);this.callEvent("_onSetSizes",[])};dhtmlXSideBar.prototype.setSideWidth=function(c){this.conf.width=c;this.setSizes()};dhtmlXSideBar.prototype._adjustSide=function(){if(this.conf.side_ofs==null){this.conf.side_ofs={};this.side.style.width=this.conf.width+"px";this.side.style.height=this.side.parentNode.offsetHeight+"px";this.conf.side_ofs.w=this.side.offsetWidth-parseInt(this.side.style.width);this.conf.side_ofs.h=this.side.offsetHeight-parseInt(this.side.style.height)}this.side.style.width=this.conf.width-this.conf.side_ofs.w+"px";this.side.style.height=this.side.parentNode.offsetHeight-this.arw.offsetHeight-this.conf.side_ofs.h+"px";this.arw.style.width=this.side.style.width;this._scrollSide(0)};dhtmlXSideBar.prototype._checkHeight=function(){var c=(this.arw.className.match(/dhxsidebar_arrows_hidden/)!=null);if(this.conf.side_hfix==null){this.conf.side_hfix=this.side.offsetHeight-this.side.clientHeight}if(this.side.firstChild.offsetHeight>this.side.parentNode.clientHeight-this.conf.side_hfix){if(c==true){this.arw.className="dhxsidebar_arrows";this._adjustSide()}}else{if(c==false){this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden";this.side.firstChild.style.top="0px";this._adjustSide()}}};dhtmlXSideBar.prototype.removeSep=function(g){if(this.s[g]==null){return}this.side.firstChild.removeChild(this.s[g].sep);this.s[g].sep=null;this.s[g]=null;try{delete this.s[g]}catch(e){}};dhtmlXSideBar.prototype.showSide=function(){if(this.conf.autohide!=true){return}if(this.sideCover==null){this._sideCoverAttach()}if(this.conf.animate_items==true){var m=function(g,e,c){window.setTimeout(function(){g.style[c]="transform 0.3s";g.style.transform="translate(0px,0px)";g=null},e)};if(this.conf.transProp!==false){var a=100;for(var n in this.t){this.t[n].item.style[this.conf.transProp]="";this.t[n].item.style.transform="translate(-"+(this.conf.width+20)+"px,0px)";m(this.t[n].item,a+=50,this.conf.transProp)}}}var l=this;window.setTimeout(function(){l.arw.style.left=l.side.style.left="0px";l.sideCover.className="dhxsidebar_side_cover dhxsidebar_side_cover_actv";l=null},50)};dhtmlXSideBar.prototype.hideSide=function(c){if(this.conf.autohide!=true){return}this.arw.style.left=this.side.style.left=-this.conf.width-10+"px";if(this.sideCover!=null){if(this.conf.transProp!==false){this.sideCover.className="dhxsidebar_side_cover"}else{this._sideCoverDetach()}}};dhtmlXSideBar.prototype._sideCoverAttach=function(){var c=this;this.sideCover=document.createElement("DIV");this.sideCover.className="dhxsidebar_side_cover";if(this.arw.nextSibling!=null){this.cont.insertBefore(this.sideCover,this.arw.nextSibling)}else{this.cont.appendChild(this.sideCover)}this._sideCoverOnTrEnd=function(){if(this.className.match(/dhxsidebar_side_cover_actv/)==null){c._sideCoverDetach()}};this._sideCoverDetach=function(){if(this.sideCover==null){return}if(this.conf.transProp!==false){this.sideCover.removeEventListener(this.conf.transEv,this._sideCoverOnTrEnd,false)}this.sideCover.parentNode.removeChild(this.sideCover);this.sideCover=null;c=null};if(this.conf.transProp!==false){this.sideCover.addEventListener(this.conf.transEv,this._sideCoverOnTrEnd,false)}};dhtmlXSideBar.prototype._setItemActive=function(h,l){if(this.conf.selected==h){if(this.conf.autohide==true){this.hideSide()}return}if(typeof(l)=="undefined"){l=false}if(l==true&&this.callEvent("onBeforeSelect",[h,this.conf.selected])!==true){return}var g=null;if(this.conf.selected!=null){g=this.conf.selected;this._setItemInactive(this.conf.selected)}if(this.t[h]!=null){this.conf.selected=h;this.t[h].selected=true;this.t[h].item.className+=" dhxsidebar_item_selected";if(this.conf.single_cell!=true){this.t[h].cell.cell.style.visibility="visible";this.t[h].cell.cell.style.top="0px";this.t[h].cell.cell.style.zIndex=1}}else{this.conf.selected=null}this._adjustCell(h);if(l==true){this.callEvent("onSelect",[h,g])}if(this.conf.autohide==true){this.hideSide()}};dhtmlXSideBar.prototype._setItemInactive=function(c){if(this.t[c]==null){return}this.t[c].selected=false;this.t[c].item.className=this.t[c].item.className.replace(/\s{0,}dhxsidebar_item_selected/gi,"");if(this.conf.single_cell!=true){this.t[c].cell.cell.style.visibility="hidden";this.t[c].cell.cell.style.top="-5000px";this.t[c].cell.cell.style.zIndex=0}};dhtmlXSideBar.prototype._isItemActive=function(c){return(this.conf.selected==c)};dhtmlXSideBar.prototype._getNextVisible=function(g,e){return this._getNearVisible(g,e,"next")};dhtmlXSideBar.prototype._getPrevVisible=function(g,e){return this._getNearVisible(g,e,"previous")};dhtmlXSideBar.prototype._getFirstVisible=function(){return this._getNearVisible(null,false,"first")};dhtmlXSideBar.prototype._getNearVisible=function(n,u,o){if(o=="first"){var s=this.side.firstChild.firstChild;o="next"}else{if(n==null||this.t[n]==null){return(u?this._getFirstVisible():null)}var s=this.t[n].item[o+"Sibling"]}var r=null;while(s!=null&&r==null){var m=s._idd;if(m!=null&&r==null&&this.t[m].conf.visible){r=m}else{s=s[o+"Sibling"]}}s=null;return r};dhtmlXSideBar.prototype.goToNextItem=function(e){var g=this._getNextVisible(this.conf.selected,true);if(g!=null){this._setItemActive(g,e)}};dhtmlXSideBar.prototype.goToPrevItem=function(e){var g=this._getPrevVisible(this.conf.selected,true);if(g!=null){this._setItemActive(g,e)}};dhtmlXSideBar.prototype.getActiveItem=function(){return this.conf.selected};dhtmlXSideBar.prototype.setTemplate=function(a,l){this.conf.tpl_name=(a!=null&&this.templates[a]!=null?a:"details");this.conf.tpl_str=this.templates[this.conf.tpl_name];if(l!=null){this.conf.icons_path=l}for(var h in this.t){this.t[h].init.icons_path=this.conf.icons_path;this.t[h].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[h].init)}if(this.side!=null){this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name}if(this._scrollSide!=null){this._scrollSide(0);this._checkHeight()}};dhtmlXSideBar.prototype.templates={details:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",tiles:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",icons:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'>",icons_text:"<div class='dhxsidebar_item_icon'><img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'></div><div class='dhxsidebar_item_text'>#text#</div>",text:"<div class='dhxsidebar_item_text'>#text#</div>"};dhtmlXSideBar.prototype.tpl_bubble="<div class='dhxsidebar_bubble'>#value#</div>";dhtmlXSideBar.prototype.tpl_header="#text#";window.dhtmlXSideBarCell=function(a,l){dhtmlXCellObject.apply(this,[a,"_sidebar"]);var m=this;this.sidebar=l;this.conf.skin=this.sidebar.conf.skin;this.conf.sidebar_funcs={show:"_showItem",hide:"_hideItem",isVisible:"_isItemVisible",setActive:"_setItemActive",isActive:"_isItemActive",setText:"_setItemText",getText:"_getItemText",remove:"_removeItem",setBubble:"_setItemBubble",getBubble:"_getItemBubble",clearBubble:"_clearItemBubble"};this._sidebarCall=function(c){return function(){var g=[this._idd];for(var e=0;e<arguments.length;e++){g.push(arguments[e])}return this.sidebar[c].apply(this.sidebar,g)}};for(var n in this.conf.sidebar_funcs){if(typeof(this[n])!="function"){this[n]=this._sidebarCall(this.conf.sidebar_funcs[n])}}if(this.sidebar.conf.header==true){this._initHeader();this.cell.childNodes[this.conf.idx.hdr].onclick=function(e){e=e||event;var c=(e.target||e.srcElement);if(c.className.match(/dhx_cell_sidebar_hdr_icon/gi)!=null){m.sidebar.conf.clear_click=true;m.sidebar.showSide()}c=null}}this.attachEvent("_onCellUnload",function(){if(this.conf.idx.hdr!=null){this.cell.childNodes[this.conf.idx.hdr].onclick=null}this.sidebar=null;for(var c in this.conf.sidebar_funcs){this[c]=this.conf.sidebar_funcs[c]=null}this.conf.sidebar_funcs=null;m=null});this.attachEvent("_onContentLoaded",function(){this.sidebar.callEvent("onContentLoaded",arguments)});this.attachEvent("_onBeforeContentAttach",function(c){if(c=="tabbar"||c=="layout"||c=="acc"){this._hideBorders()}if(c=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders()}if((this.conf.skin=="dhx_web"||this.conf.skin=="dhx_terrace")&&(c=="menu"||c=="toolbar"||c=="ribbon")){if(this.cell.className.match(/dhx_cell_cont_no_top/gi)==null){this.cell.className+=" dhx_cell_cont_no_top"}}})};dhtmlXSideBarCell.prototype=new dhtmlXCellObject();dhtmlXSideBar.prototype._setItemText=function(a,h){if(this.t[a]!=null){for(var l in h){this.t[a].init[l]=h[l]}this.t[a].init.icons_path=this.conf.icons_path;this.t[a].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[a].init);if(this.t[a].conf.bubble!=null){this.t[a].item.innerHTML+=window.dhx4.template(this.tpl_bubble,{value:this.t[a].conf.bubble})}if(this.conf.header==true){this.t[a].cell.setHeaderText(window.dhx4.template(this.tpl_header,this.t[a].init))}}};dhtmlXSideBar.prototype._getItemText=function(a){var h={};if(this.t[a]!=null){for(var l in this.t[a].init){h[l]=this.t[a].init[l]}}return h};dhtmlXSideBar.prototype._removeItem=function(u,w,e){if(this.t[u]==null){return}if(e!=true&&this.t[u].conf.remove!=true){this.t[u].conf.remove=true;this._hideItem(u,w);return}if(typeof(w)=="undefined"){w=true}var s=this._getNextVisible(u);var r=this._getPrevVisible(u);if(this.t[u].conf.transEv==true){this.t[u].item.removeEventListener(this.conf.transEv,this._doOnTrEnd);this.t[u].conf.transEv=false}if(this.conf.single_cell!=true){this.t[u].cell._unload();this.t[u].cell=null}this.t[u].item.ondragstart=null;this.t[u].item.parentNode.removeChild(this.t[u].item);this.t[u].item=null;for(var v in this.t[u]){this.t[u][v]=null}this.t[u]=null;try{delete this.t[u]}catch(a){}if(this.conf.selected==u&&w!=false){this.conf.selected=null;var w=(w==true?(s||r||this._getFirstVisible()):w);if(w!=null){this._setItemActive(w)}}else{if(e!=true){this._checkHeight()}}};dhtmlXSideBar.prototype._showItem=function(g,e){if(this.t[g]==null||this.t[g].conf.visible==true||this.t[g].conf.transActv==true){return}if(this.conf.transProp!==false){this.t[g].conf.transActv=true;this.t[g].conf.transMode="show";this.t[g].conf.transProp=this.conf.transProp;this.t[g].conf.transActvId=(e?g:null);if(this.t[g].conf.transEv!=true){this.t[g].item.addEventListener(this.conf.transEv,this._doOnTrEnd);this.t[g].conf.transEv=true}this.t[g].conf.visible=true;this.t[g].item.style[this.conf.transProp]=this.conf.transValue;this.t[g].item.className="dhxsidebar_item"}else{this.t[g].conf.visible=true;this.t[g].item.style.display="";if(e==true){this._setItemActive(g)}else{this._checkHeight()}}};dhtmlXSideBar.prototype._hideItem=function(m,n){if(this.t[m]==null||this.t[m].conf.visible!=true||this.t[m].conf.transActv==true){return}var o=false;if(this.conf.selected==m){this.conf.selected=null;this.t[m].conf.active=false;this.t[m].item.className="dhxsidebar_item";o=true}var r=this._getPrevVisible(m);var l=this._getNextVisible(m);var n=(o&&n!==false?(n==true?null:n)||l||r:null);if(this.conf.transProp!==false){this.t[m].conf.transActv=true;this.t[m].conf.transMode="hide";this.t[m].conf.transProp=this.conf.transProp;this.t[m].conf.transActvId=n;this.t[m].conf.visible=false;if(this.t[m].conf.transEv!=true){this.t[m].item.addEventListener(this.conf.transEv,this._doOnTrEnd);this.t[m].conf.transEv=true}this.t[m].item.style[this.conf.transProp]=this.conf.transValue;this.t[m].item.className="dhxsidebar_item dhxsidebar_item_hidden"}else{this.t[m].item.style.display="none";this.t[m].conf.visible=false;if(this.conf.single_cell!=true){this.t[m].cell.cell.style.visibility="hidden";this.t[m].cell.cell.style.top="-5000px"}if(n!=null){this._setItemActive(n)}this._checkHeight();if(this.t[m].conf.remove==true){this._removeItem(m)}}};dhtmlXSideBar.prototype._isItemVisible=function(c){return(this.t[c].conf.visible==true)};dhtmlXSideBar.prototype._setItemBubble=function(g,e){if(this.t[g]==null){return}this.t[g].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[g].init)+window.dhx4.template(this.tpl_bubble,{value:String(e)});this.t[g].conf.bubble=e};dhtmlXSideBar.prototype._getItemBubble=function(c){if(this.t[c]==null){return null}return(typeof(this.t[c].conf.bubble)=="undefuned"?null:this.t[c].conf.bubble)};dhtmlXSideBar.prototype._clearItemBubble=function(c){if(this.t[c]==null){return}this.t[c].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[c].init);this.t[c].conf.bubble=null};dhtmlXCellObject.prototype.attachSidebar=function(e){this.callEvent("_onBeforeContentAttach",["sidebar"]);if(e==null){e={}}var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell)){}else{if(this.conf.skin=="dhx_skyblue"){g._ofs={t:-1,r:-1,b:-1,l:-1}}if(this.conf.skin=="dhx_web"){if(typeof(window.dhtmlXSideBarCell)!="undefined"&&(this instanceof window.dhtmlXSideBarCell)){g._ofs={l:8}}if(typeof(window.dhtmlXLayoutCell)!="undefined"&&(this instanceof window.dhtmlXLayoutCell)){g._ofs={t:2}}if(typeof(window.dhtmlXTabBarCell)!="undefined"&&(this instanceof window.dhtmlXTabBarCell)){g._ofs={t:8}}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){g._ofs={t:2}}}if(this.conf.skin=="dhx_terrace"){if(typeof(window.dhtmlXSideBarCell)!="undefined"&&(this instanceof window.dhtmlXSideBarCell)){g._ofs={l:-1}}if(typeof(window.dhtmlXLayoutCell)!="undefined"&&(this instanceof window.dhtmlXLayoutCell)){g._ofs={t:-1}}if(typeof(window.dhtmlXTabBarCell)!="undefined"&&(this instanceof window.dhtmlXTabBarCell)){g._ofs={t:-1}}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){g._ofs={t:-1,r:-1,b:-1,l:-1}}}}this._attachObject(g);e.skin=this.conf.skin;e.parent=g;this.dataType="sidebar";this.dataObj=new dhtmlXSideBar(e);e.parent=g=null;e=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXSideBarCell.prototype._initHeader=function(){var c=document.createElement("DIV");c.className="dhx_cell_sidebar_hdr";c.innerHTML=(this.sidebar.conf.autohide==true?"<div class='dhx_cell_sidebar_hdr_icon'></div>":"")+"<div class='dhx_cell_sidebar_hdr_text"+(this.sidebar.conf.autohide==true?" dhx_cell_sidebar_hdr_text_icon":"")+"'></div>";this.cell.insertBefore(c,this.cell.childNodes[this.conf.idx.cont]);c=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:true};this.conf.idx_data.hdr="dhx_cell_sidebar_hdr";this._updateIdx()};dhtmlXSideBarCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXSideBarCell.prototype.showHeader=function(){if(this.conf.hdr.visible==true){return}this.conf.hdr.visible=true;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr";this._adjustCont(this._idd)};dhtmlXSideBarCell.prototype.hideHeader=function(){if(this.conf.hdr.visible!=true){return}this.conf.hdr.visible=false;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr dhx_cell_sidebar_hdr_hidden";this._adjustCont(this._idd)};dhtmlXSideBarCell.prototype.isHeaderVisible=function(){return(this.conf.hdr.visible==true)};dhtmlXSideBarCell.prototype.setHeaderText=function(g){this.conf.text=g;var e=this.cell.childNodes[this.conf.idx.hdr];e.childNodes[(e.firstChild.className=="dhx_cell_sidebar_hdr_icon"?1:0)].innerHTML="<span>"+g+"</span>";e=null};dhtmlXSideBarCell.prototype.getHeaderText=function(){return this.conf.text};function dhtmlXCarousel(s,o,w){if(typeof(s)=="string"||(typeof(s)=="object"&&typeof(s.tagName)!="undefined")){s={parent:(typeof(s)=="string"?document.getElementById(s):s),effect:o,skin:w,delete_conf:true}}else{if(typeof(s)=="undefined"||s==null){s={}}}this.conf={skin:(s.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcarousel")||"dhx_skyblue"),css:"dhxcarousel",items_count:0,selected:-1,item_width:Number(s.item_width)||"auto",item_height:Number(s.item_height)||"auto",ofs_item:Number(s.offset_item)||1,ofs_left:Number(s.offset_left)||0,ofs_top:Number(s.offset_top)||0,buttons:(typeof(s.buttons)=="undefined"?true:window.dhx4.s2b(s.buttons)),drops:false,keys:(typeof(s.keys)=="undefined"?true:window.dhx4.s2b(s.keys)),key_data:{left:37,right:39},touch_scroll:(typeof(s.touch_scroll)!="undefined"?window.dhx4.s2b(s.touch_scroll):true),arw:["&#9668;","&#9658;"]};this.conf.autowidth=(this.conf.item_width=="auto");this.conf.autoheight=(this.conf.item_height=="auto");var u=window.dhx4.transDetect();this.conf.transProp=u.transProp;this.conf.transEv=u.transEv;this.conf.anim_type=(s.effect||"slide");if(this.ef[this.conf.anim_type]==true){var r=this["_"+this.conf.anim_type+"_init"]();if(r===false){this.conf.anim_type="slide";r=this["_"+this.conf.anim_type+"_init"]()}if(typeof(r)=="object"){for(var v in r){if(typeof(this.conf[v])=="undefined"){this.conf[v]=r[v]}}}}this.conf.anim_f=this["_"+this.conf.anim_type+"_f"]();var a=this;window.dhtmlXCellTop.apply(this,[s.parent,s.offsets]);this.area=document.createElement("DIV");this.area.className="dhxcarousel_area";this.cont.appendChild(this.area);if(typeof(window.addEventListener)=="function"&&a.conf.touch_scroll==true){this._doOnTouchStart=function(c){if(window.dhx4.dnd._mTouch(c)==true){return}if(a.conf.animating==true){return}if(c.preventDefault){c.preventDefault()}a.area.className+=" dhxcarousel_area_dnd";a.conf.touch_conf={t:new Date().getTime(),dx:null,dy:null};if(c.type.match(/^touch/)!=null){a.conf.touch_conf.id=c.touches[0].identifier;a.conf.touch_conf.x=c.touches[0].clientX;a.conf.touch_conf.y=c.touches[0].clientY}else{a.area.style.touchAction=a.area.style.msTouchAction="none";a.conf.touch_conf.x=c.clientX;a.conf.touch_conf.y=c.clientY}window.addEventListener(window.dhx4.dnd.evs.move,a._doOnTouchMove,false);window.addEventListener(window.dhx4.dnd.evs.end,a._doOnTouchEnd,false)};this._doOnTouchMove=function(c){};this._doOnTouchEnd=function(e){if(e.type.match(/^touch/)!=null){var h=0;for(var g=0;g<e.changedTouches.length;g++){if(e.changedTouches[g].identifier==a.conf.touch_conf.id){h=a.conf.touch_conf.x-e.changedTouches[g].clientX}}}else{var h=a.conf.touch_conf.x-e.clientX}window.removeEventListener(window.dhx4.dnd.evs.move,a._doOnTouchMove,false);window.removeEventListener(window.dhx4.dnd.evs.end,a._doOnTouchEnd,false);a.area.className=a.area.className.replace(/\s*dhxcarousel_area_dnd$/,"");if(h==0||new Date().getTime()-a.conf.touch_conf.t>400){return}var c=h/Math.abs(h);a._animateStart(c)};this.area.addEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,false)}this.cdata={};this.ind={};this.addCell=function(c, e){this.conf.items_count++;if(this.conf.selected==-1){this.conf.selected=0}this.setSizes();this._checkControls();if(typeof(e)=="undefined"||e==null){e=this.conf.items_count-1}else{if(e<0){e=0}else{if(e>this.conf.items_count-1){e=this.conf.items_count-1}}}for(var g in this.cdata){if(this.cdata[g].welcome>=e){this.cdata[g].welcome++;this.ind[this.cdata[g].welcome]=g;this._adjustCell(g)}}if(c==null){c=String(window.dhx4.newId())}while(this.cdata[c]!=null){c=String(window.dhx4.newId())}var h=new dhtmlXCarouselCell(c,this);if(this.area.childNodes[e]!=null){this.area.insertBefore(h.cell,this.area.childNodes[e])}else{this.area.appendChild(h.cell)}this.cdata[c]={index:e,cell:h};this.ind[e]=c;this._adjustCell(c);this._addBar();this._setBarIndex(this.conf.selected);h=null;this[this.conf.anim_f.cell_added](c);return c};this._removeCell=function(c){var g=this.cdata[c].welcome;this.cdata[c].cell._unload();this.cdata[c].index=this.cdata[c].cell=null;this.cdata[c]=null;delete this.cdata[c];delete this.ind[g];this.conf.items_count--;if(this.conf.unloading==true){return}this.ind={};var l=0;for(var h in this.cdata){if(this.cdata[h].welcome>g){this.cdata[h].welcome--}this.ind[this.cdata[h].welcome]=h}var e=false;if(this.conf.selected>g){this.conf.selected--}else{if(this.conf.selected==g){this.conf.selected=Math.min(this.conf.selected,this.conf.items_count-1);e=true}else{}}this._removeBar(false);this._setBarIndex(this.conf.selected);if(e==true){if(this.conf.selected>=0){this[this.conf.anim_f.update_selected](this.ind[this.conf.selected])}}this.setSizes();this._checkControls()};this.setSizes=function(){this._adjustCont();var c={};this.area.style.height=this.cont.offsetHeight-this.controls.offsetHeight+"px";this.conf.width=(this.conf.autowidth?this.cont.offsetWidth-this.conf.ofs_left*2:this.conf.item_width);this.conf.height=(this.conf.autoheight?this.area.offsetHeight-this.conf.ofs_top*2:this.conf.item_height);this.conf.top=Math.max(0,(this.conf.autoheight?this.conf.ofs_top:Math.floor((this.area.offsetHeight-this.conf.height)/2)));this.area.style.width=this[this.conf.anim_f.detect_aw]()*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item+"px";this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)+"px";for(var g in this.cdata){var e={};for(var h in this.cdata[g].cell.conf.size){e[h]=this.cdata[g].cell.conf.size[h]}if(this.conf.autowidth==true){e.w=this.conf.width;e.x=this[this.conf.anim_f.detect_x](g)}if(this.conf.autoheight==true){e.h=this.conf.height}c[g]=e}this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)-(this.conf.width+this.conf.ofs_item)*this.conf.selected+"px";this._adjustControls();if(this.conf.autoheight!=true){this.conf.top=Math.max(0,Math.floor(this.area.offsetHeight-this.conf.height)/2);for(var g in c){c[g].y=this.conf.header}}for(var g in c){this.cdata[g].cell._setSize(c[g].x,c[g].y,c[g].w,c[g].h)}this.callEvent("_onSetSizes",[])};this._adjustCell=function(c){this.cdata[c].cell._setSize(this[this.conf.anim_f.detect_x](c),this.conf.header,this.conf.width,this.conf.height)};this._animateStart=function(e, c){if((this.conf.selected<=0&&e<0)||(this.conf.selected>=this.conf.items_count-1&&e>0)){return}if(this.conf.animating==true){return}this.conf.animating=true;this[this.conf.anim_f.prepare](e,c)};this._animateTransEnd=function(c){a[a.conf.anim_f.end](c||event,this)};this._animateEnd=function(c){this.conf.selected=this.conf.selected+c;this._checkControls();this._setBarIndex(this.conf.selected);this.callEvent("onSelect",[this.ind[this.conf.selected]]);this.conf.animating=false};this._initControls();this.setCellSize=function(c,e){this.conf.item_width=(c==null?"auto":c);this.conf.item_height=(e==null?"auto":e);this.setSizes()};this.setOffset=function(e,g,c){if(e!=null){this.conf.ofs_left=e}if(g!=null){this.conf.ofs_top=g}if(c!=null){this.conf.ofs_item=c}this.setSizes()};this.enableHotKeys=function(c){this.conf.keys=window.dhx4.s2b(c)};this.goFirst=function(){if(this.conf.selected==0){return}this._animateStart(-this.conf.selected)};this.goLast=function(){if(this.conf.selected==this.conf.items_count-1){return}this._animateStart(this.conf.items_count-1-this.conf.selected)};this.goNext=function(){this._animateStart(1)};this.goPrev=function(){this._animateStart(-1)};this.getActiveIndex=function(){return this.conf.selected};this.getActiveId=function(){return this.ind[this.conf.selected]};this.getActiveCell=function(){var c=this.getActiveId();if(c!=null){return this.cdata[c].cell}return null};this.unload=function(){this.conf.unloading=true;if(typeof(window.addEventListener)=="function"){window.removeEventListener("keydown",this._doOnWinKeyDown,false);if(this._doOnTouchStart!=null){this.area.removeEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,false)}}else{document.body.detachEvent("onkeydown",this._doOnWinKeyDown)}for(var c in this.cdata){this._removeCell(c)}this.cdata[c]=null;this.area.parentNode.removeChild(this.area);this.area=null;this._unloadControls();this._unloadTop();window.dhx4._eventable(this,"clear");for(var c in this){this[c]=null}a=null};window.dhx4._eventable(this);this._callMainEvent=function(e,c){this.callEvent(e,c)};this.conf.ev_coverclick=this.attachEvent("_cellCoverClick",function(c){var e=c-this.conf.selected;if(Math.abs(e)==1){this._animateStart(e)}});this._doOnWinKeyDown=function(e){e=e||event;if(a.conf.keys==true){if(e.ctrlKey==true&&e.shiftKey!=true&&e.altKey!=true){var g=e.keyCode;var c=a.conf.key_data;if(g==c.left||g==c.right){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}a._animateStart(g==c.left?-1:1)}}}};if(typeof(window.addEventListener)=="function"){window.addEventListener("keydown",this._doOnWinKeyDown,false)}else{document.body.attachEvent("onkeydown",this._doOnWinKeyDown)}if(s.delete_conf==true){for(var v in s){s[v]=null}s=null}return this}dhtmlXCarousel.prototype=new dhtmlXCellTop();dhtmlXCarousel.prototype.ef={};dhtmlXCarousel.prototype.cells=function(c){return this.cdata[c].cell};dhtmlXCarousel.prototype.forEachCell=function(a){for(var g in this.cdata){if(typeof(a)=="function"){a.apply(window,[this.cdata[g].cell])}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){window[a].apply(window,[this.cdata[g].cell])}}}};dhtmlXCarousel.prototype._initControls=function(){var c=this;this.controls=document.createElement("DIV");this.controls.className="dhx_carousel_controls";this.controls.innerHTML="<div class='dhx_carousel_bars'></div><div class='dhx_carousel_btn dhx_carousel_btn_prev'>"+this.conf.arw[0]+"</div><div class='dhx_carousel_btn dhx_carousel_btn_next'>"+this.conf.arw[1]+"</div>";this.cont.appendChild(this.controls);this._doOnControlClick=function(a){if(c.conf.clear_click==true){c.conf.clear_click=false;return}a=a||event;if(window.dhx4.dnd.evs.start!=null&&a.type!="click"&&c.conf.clear_click!=true){if(window.dhx4.dnd._mTouch(a)==true){return}c.conf.clear_click=true}var n=a.target||a.srcElement;var e=null;if(n.className!=null){if(n.className.match(/btn_prev/)!=null){e=-1}else{if(n.className.match(/btn_next/)!=null){e=1}else{if(n.className.match(/dhx_carousel_onebar/)!=null&&n.className.match(/dhx_carousel_baractv/)==null){for(var m=0;m<n.parentNode.childNodes.length;m++){if(n.parentNode.childNodes[m]==n){e=m-c.conf.selected}}}}}}if(e!=null){c._animateStart(e)}n=null};if(typeof(window.addEventListener)=="function"){this.controls.addEventListener("click",this._doOnControlClick,false);if(window.dhx4.dnd.evs.start!=null){this.controls.addEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,false)}}else{this.controls.attachEvent("onclick",this._doOnControlClick);if(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8){this.controls.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}a.returnValue=false;return false}}}this.showControls=function(){this.controls.style.display="";this.setSizes()};this.hideControls=function(){this.controls.style.display="none";this.setSizes()};this._checkControls=function(){this.controls.childNodes[1].className="dhx_carousel_btn dhx_carousel_btn_prev"+(this.conf.selected<=0?"_dis":"");this.controls.childNodes[2].className="dhx_carousel_btn dhx_carousel_btn_next"+(this.conf.selected>=this.conf.items_count-1||this.conf.items_count==0?"_dis":"")};this._adjustControls=function(){this.controls.firstChild.style.left=Math.round(this.cont.offsetWidth/2-this.controls.firstChild.offsetWidth/2)+"px"};this._addBar=function(){var a=document.createElement("DIV");a.className="dhx_carousel_onebar";a.innerHTML="<div class='dhx_carousel_barcore'>&nbsp;</div>";this.controls.firstChild.appendChild(a);a=null;this._adjustControls()};this._removeBar=function(a){var g=this.controls.firstChild.lastChild;if(g!=null){g.parentNode.removeChild(g);g=null;if(a!==false){this._adjustControls()}}};this._setBarIndex=function(g){for(var a=0;a<this.controls.firstChild.childNodes.length;a++){this.controls.firstChild.childNodes[a].className="dhx_carousel_onebar"+(a==g?" dhx_carousel_baractv":"")}};this._unloadControls=function(){if(typeof(window.addEventListener)=="function"){this.controls.removeEventListener("click",this._doOnControlClick,false);if(window.dhx4.dnd.evs.start!=null){this.controls.removeEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,false)}}else{this.controls.detachEvent("onclick",this._doOnControlClick);if(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8){this.controls.onselectstart=null}}while(this.controls.firstChild.childNodes.length>0){this._removeBar(false)}this.cont.removeChild(this.controls);this.controls=null;c=null};if(this.conf.buttons!=true){this.hideControls()}this._checkControls()};window.dhtmlXCarouselCell=function(h,l){dhtmlXCellObject.apply(this,[h,"_carousel"]);var g=this;this.carousel=l;this.conf.skin=this.carousel.conf.skin;this.attachEvent("_onCellUnload",function(){this.carousel=null;g=null});this.attachEvent("_onContentLoaded",function(){this.carousel._callMainEvent("onContentLoaded",[this._idd])});this._showCover=function(){if(this.conf.cover==true){return}this._showCellCover();var a=this.cell.childNodes[this.conf.idx.cover];a.onclick=function(){g.carousel._callMainEvent("_cellCoverClick",[g._idd])};a=null};this._hideCover=function(){if(this.conf.cover!=true){return}this.cell.childNodes[this.conf.idx.cover].onclick=null;this._hideCellCover()};return this};dhtmlXCarouselCell.prototype=new dhtmlXCellObject();dhtmlXCarouselCell.prototype.getId=function(){return this._idd};dhtmlXCarouselCell.prototype.getIndex=function(){return this.carousel.cdata[this._idd].welcome};dhtmlXCarouselCell.prototype.setActive=function(){var c=this.getIndex()-this.carousel.conf.selected;if(c!=0){this.carousel._animateStart(c)}};dhtmlXCarouselCell.prototype.remove=function(){this.carousel._removeCell(this._idd)};dhtmlXCellObject.prototype.attachCarousel=function(e){this.callEvent("_onBeforeContentAttach",["carousel"]);var g=document.createElement("DIV");g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";this._attachObject(g);if(typeof(window.dhtmlXSideBarCell)!="undefined"&&(this instanceof window.dhtmlXSideBarCell)){if(this.conf.skin=="dhx_terrace"){g._ofs={t:-1,r:-1,b:-1,l:-1}}}if(typeof(e)=="undefined"||e==null){e={}}if(typeof(e.skin)=="undefined"){e.skin=this.conf.skin}e.parent=g;this.dataType="carousel";this.dataObj=new dhtmlXCarousel(e);e.parent=null;g=e=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCarousel.prototype.ef.slide=true;dhtmlXCarousel.prototype.ef.slide_conf={anim_step:25,anim_timeout:10,anim_slide:"left 0.3s"};dhtmlXCarousel.prototype.ef.slide_f={prepare:"_slide_prepare",start:"_slide_start",end:"_slide_end",update_selected:"_slide_update_selected",detect_x:"_slide_detect_x",detect_aw:"_slide_detect_area_width",cell_added:"_slide_cell_added"};dhtmlXCarousel.prototype._slide_init=function(){return this.ef.slide_conf};dhtmlXCarousel.prototype._slide_f=function(){return this.ef.slide_f};dhtmlXCarousel.prototype._slide_prepare=function(r,l){var n=this.conf.anim_step;var m=this.conf.width+this.conf.ofs_item;if(l==false){n=m+1}this.area._init=parseInt(this.area.style.left);var o=this.ind[this.conf.selected+r];this._slide_update_selected(o);if(this.conf.transProp!==false&&l!=false){if(this.conf.transEvInit!=true){this.area.addEventListener(this.conf.transEv,this._animateTransEnd,false);this.conf.transEvInit=true}this.conf.current_dir=r;this.area.style[this.conf.transProp]=this.conf.anim_slide;this.area.style.left=this.area._init+m*(-r)+"px"}else{this._slide_start(n,0,m,r)}};dhtmlXCarousel.prototype._slide_start=function(o,n,m,u){var r=false;n+=o;if(n>=m){n=m;r=true}this.area.style.left=this.area._init+n*(-u)+"px";if(r!=true){var s=this;window.setTimeout(function(){s._slide_start(o,n,m,u);s=null},this.conf.anim_timeout)}else{this.cdata[this.ind[this.conf.selected]].cell._showCover();this._animateEnd(u)}};dhtmlXCarousel.prototype._slide_end=function(g, e){if(g.type==this.conf.transEv&&e==this.area){this.area.style[this.conf.transProp]="";if(this.conf.transEvInit==true){this.area.removeEventListener(this.conf.transEv,this._animateTransEnd,false);this.conf.transEvInit=false}this.cdata[this.ind[this.conf.selected]].cell._showCover();this._animateEnd(this.conf.current_dir)}};dhtmlXCarousel.prototype._slide_update_selected=function(c){this.cdata[c].cell._hideCover()};dhtmlXCarousel.prototype._slide_detect_x=function(h){var l=this.cdata[h].welcome;var g=l*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item;return g};dhtmlXCarousel.prototype._slide_cell_added=function(c){if(this.conf.selected!=this.cdata[c].welcome){this.cdata[c].cell._showCover()}if(this.cdata[c].welcome<=this.conf.selected&&this.conf.items_count>1){this._animateStart(1,false)}};dhtmlXCarousel.prototype._slide_detect_area_width=function(){return this.conf.items_count};dhtmlXCarousel.prototype.ef.flip=true;dhtmlXCarousel.prototype.ef.flip_conf={anim_flip:"transform 0.3s ease-out",anim_flip_ang:-87,anim_flip_trstyle:"transform"};dhtmlXCarousel.prototype.ef.flip_f={prepare:"_flip_prepare",start:"_flip_start",end:"_flip_end",update_selected:"_flip_update_selected",detect_x:"_flip_detect_x",detect_aw:"_flip_detect_area_width",cell_added:"_flip_cell_added"};dhtmlXCarousel.prototype._flip_init=function(){var c=(this.conf.transProp==false?false:this.ef.flip_conf);if(c!==false&&window.dhx4.isKHTML==true&&c.anim_flip.match("webkit")==null){c.anim_flip=c.anim_flip.replace(/transform/,"-webkit-transform");c.anim_flip_trstyle="webkitTransform"}return c};dhtmlXCarousel.prototype._flip_f=function(){return this.ef.flip_f};dhtmlXCarousel.prototype._flip_prepare=function(c){this.conf.flip_data={fromIndex:this.conf.selected,toIndex:this.conf.selected+c,mode:0,dir:c};this._flip_start()};dhtmlXCarousel.prototype._flip_start=function(){var c=this.cdata[this.ind[this.conf.flip_data.mode==0?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;if(this.area.className.match(/dhxcarousel_area_flip/)==null){this.area.className+=" dhxcarousel_area_flip"}if(c.conf.tr_ev!=true){c.cell.addEventListener(this.conf.transEv,this._animateTransEnd,false);c.conf.tr_ev=true}if(this.conf.flip_data.mode==0){c.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.flip_data.dir>0?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)"}else{c.cell.style.visibility="visible";c.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"}c.cell.style[this.conf.transProp]=this.conf.anim_flip;c=null};dhtmlXCarousel.prototype._flip_end=function(w,e){if(w.type==this.conf.transEv){var r=this.cdata[this.ind[this.conf.flip_data.mode==0?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;if(e==r.cell){r.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,false);r.conf.tr_ev=false;if(this.conf.flip_data.mode==0){r.cell.style[this.conf.transProp]="";r.cell.style.visibility="hidden";this.conf.flip_data.mode=1;this._flip_start()}else{var u=this.conf.flip_data.dir;var s=Math.min(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)+1;var v=Math.max(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)-1;for(var o=s;o<=v;o++){this.cdata[this.ind[o]].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.anim_flip_ang*u/Math.abs(u))+"deg)"}if(this.area.className.match(/dhxcarousel_area_flip/)!=null){this.area.className=String(this.area.className).replace(/\s{0,}dhxcarousel_area_flip/gi,"")}this.conf.flip_data=null;r.cell.style[this.conf.transProp]="";this._animateEnd(u)}}r=null}};dhtmlXCarousel.prototype._flip_update_selected=function(c){};dhtmlXCarousel.prototype._flip_detect_x=function(h){var l=0;var g=l*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item;return g};dhtmlXCarousel.prototype._flip_cell_added=function(c){if(this.conf.selected!=this.cdata[c].welcome){this.cdata[c].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.cdata[c].welcome<this.conf.selected?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)";this.cdata[c].cell.cell.style.visibility="hidden"}else{this.cdata[c].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"}};dhtmlXCarousel.prototype._flip_detect_area_width=function(){return 1};dhtmlXCarousel.prototype.ef.cards=true;dhtmlXCarousel.prototype.ef.cards_conf={anim_cards:"left 0.3s"};dhtmlXCarousel.prototype.ef.cards_f={prepare:"_cards_prepare",start:"_cards_start",end:"_cards_end",update_selected:"_cards_update_selected",detect_x:"_cards_detect_x",detect_aw:"_cards_detect_area_width",cell_added:"_cards_cell_added"};dhtmlXCarousel.prototype._cards_init=function(){return(this.conf.transProp==false?false:this.ef.cards_conf)};dhtmlXCarousel.prototype._cards_f=function(){return this.ef.cards_f};dhtmlXCarousel.prototype._cards_prepare=function(m,n){if(m>0){var l=this.ind[this.conf.selected+m];var h=this.cdata[l].cell;this._cards_update_selected(l);if(h.conf.transEvInit!=true){h.cell.addEventListener(this.conf.transEv,this._animateTransEnd,false);h.conf.transEvInit=true}this.conf.current_id=l;this.conf.current_dir=m;h.cell.style[this.conf.transProp]=this.conf.anim_cards;h.cell.style.left=this._cards_detect_x(l,0)+"px";h=null}else{this._cards_adjust_middle(this.conf.selected+m+1,this.conf.selected-1,1);var l=this.ind[this.conf.selected];var h=this.cdata[l].cell;h._hideCover();if(h.conf.transEvInit!=true){h.cell.addEventListener(this.conf.transEv,this._animateTransEnd,false);h.conf.transEvInit=true}this.conf.current_id=l;this.conf.current_dir=m;this.cdata[this.ind[this.conf.selected+m]].cell._hideCover();h.cell.style[this.conf.transProp]=this.conf.anim_cards;h.cell.style.left=this._cards_detect_x(l,1)+"px";h=null}};dhtmlXCarousel.prototype._cards_start=function(m,h,l,n){};dhtmlXCarousel.prototype._cards_end=function(h,l){if(h.type==this.conf.transEv&&this.conf.current_id!=null&&l==this.cdata[this.conf.current_id].cell.cell){var e=this.cdata[this.conf.current_id].cell;e.cell.style[this.conf.transProp]="";if(e.conf.transEvInit!=true){e.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,false);e.conf.transEvInit=false}this.conf.current_id=null;if(this.conf.current_dir>0){this._cards_adjust_middle(this.conf.selected+1,this.conf.selected+this.conf.current_dir-1,0)}this.cdata[this.ind[this.conf.selected]].cell._showCover();this._animateEnd(this.conf.current_dir)}};dhtmlXCarousel.prototype._cards_update_selected=function(c){this.cdata[c].cell._hideCover()};dhtmlXCarousel.prototype._cards_adjust_middle=function(s, o, u){for(var r=s; r<=o; r++){var n=this.ind[r];var m=this.cdata[n].cell;m.conf.size.x=this._cards_detect_x(n,u);m.cell.style.left=m.conf.size.x+"px";m=null}};dhtmlXCarousel.prototype._cards_detect_x=function(h, l){if(typeof(l)=="undefined"||l==null){l=(this.cdata[h].welcome<=this.conf.selected?0:1)}var g=l*(this.conf.width+this.conf.ofs_left+this.conf.ofs_item)+this.conf.ofs_item;return g};dhtmlXCarousel.prototype._cards_cell_added=function(c){this.cdata[c].cell.conf.size.x=this._cards_detect_x(c);this.cdata[c].cell.cell.style.left=this.cdata[c].cell.conf.size.x+"px";if(this.conf.selected!=this.cdata[c].welcome){this.cdata[c].cell._showCover()}};dhtmlXCarousel.prototype._cards_detect_area_width=function(){return 2};function dhtmlXWindows(w){var o=this;var s={};if(typeof(w)!="undefined"){for(var u in w){s[u]=w[u]}}w=null;this.conf={skin:window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"dhx_skyblue",vp_pos_ofs:20,vp_custom:false,vp_of_auto:(s.vp_overflow=="auto"),vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:false,dblclick_ev:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8),fr_cover:(navigator.userAgent.indexOf("MSIE 6.0")>=0)};var v=window.dhx4.transDetect();this.conf.tr={prop:v.transProp,ev:v.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"};if(!s.viewport){this.attachViewportTo(document.body)}else{if(s.viewport.object!=null){this.attachViewportTo(s.viewport.object)}else{if(s.viewport.left!=null&&s.viewport.top!=null&&s.viewport.width!=null&&s.viewport.height!=null){this.setViewport(s.viewport.left,s.viewport.top,s.viewport.width,s.viewport.height,s.viewport.parent)}else{this.attachViewportTo(document.body)}}}this.w={};this.createWindow=function(P, L, O, M, m){var g={};if(arguments.length==1&&typeof(P)=="object"){g=P}else{g.id=P;g.left=L;g.top=O;g.width=M;g.height=m;if(typeof(g.id)=="undefined"||g.id==null){g.id=window.dhx4.newId()}while(this.w[g.id]!=null){g.id=window.dhx4.newId()}}if(g.left==null){g.left=0}if(g.header==null){g.top=0}g.move=(g.move!=null&&window.dhx4.s2b(g.move)==false?false:(g.deny_move!=null&&window.dhx4.s2b(g.deny_move)==true?false:true));g.park=(g.park!=null&&window.dhx4.s2b(g.park)==false?false:(g.deny_park!=null&&window.dhx4.s2b(g.deny_park)==true?false:true));g.resize=(g.resize!=null&&window.dhx4.s2b(g.resize)==false?false:(g.deny_resize!=null&&window.dhx4.s2b(g.deny_resize)==true?false:true));g.keep_in_viewport=(g.keep_in_viewport!=null&&window.dhx4.s2b(g.keep_in_viewport));g.modal=(g.modal!=null&&window.dhx4.s2b(g.modal));g.center=(g.center!=null&&window.dhx4.s2b(g.center));g.text=(g.text!=null?g.text:(g.caption!=null?g.caption:"dhtmlxWindow"));g.header=(!(g.header!=null&&window.dhx4.s2b(g.header)==false));var l=document.createElement("DIV");l.className="dhxwin_active";this.vp.appendChild(l);l._isWindow=true;l._idd=g.id;var h=document.createElement("DIV");h.className="dhxwin_hdr";h.style.zIndex=0;h.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+g.text+"</div></div><div class='dhxwin_btns'></div>";l.appendChild(h);h.onselectstart=function(A){A=A||event;if(A.preventDefault){A.preventDefault()}else{A.returnValue=false}return false};h.oncontextmenu=function(A){A=A||event;A.cancelBubble=true;return false};h._isWinHdr=true;h.firstChild._isWinIcon=true;var y=document.createElement("DIV");y.className="dhxwin_brd";l.appendChild(y);var c=document.createElement("DIV");c.className="dhxwin_fr_cover";c.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>";l.appendChild(c);this.w[g.id]={win:l,hdr:h,brd:y,fr_cover:c,b:{},conf:{z_id:window.dhx4.newId(),actv:false,modal:false,maxed:false,parked:false,sticked:false,visible:true,header:true,text:g.text,keep_in_vp:g.keep_in_viewport,allow_move:g.move,allow_park:g.park,allow_resize:g.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var x={help:{title:"Help",visible:false},stick:{title:"Stick",visible:false},park:{title:"Park",visible:true},minmax:{title:"Min/Max",visible:true},close:{title:"Close",visible:true}};for(var N in x){var e=new dhtmlXWindowsButton(this,g.id,N,x[N].title,false);if(x[N].visible==false){e.hide()}h.lastChild.appendChild(e.button);this.w[g.id].b[N]=e;e=null}this._winAdjustTitle(g.id);this.w[g.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[g.id].conf.z_id);var n=new dhtmlXWindowsCell(g.id,this);this.w[g.id].win.insertBefore(n.cell,c);this.w[g.id].cell=n;if(typeof(window.addEventListener)=="function"){this.w[g.id].win.addEventListener("mousedown",this._winOnMouseDown,false);this.w[g.id].win.addEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){this.w[g.id].win.addEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_enabled==true&&window.dhx4.dnd.evs.start!=null){this.w[g.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);if(window.dhx4.dnd.p_en!=true){this.w[g.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);this.w[g.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,false)}}}else{this.w[g.id].win.attachEvent("onmousedown",this._winOnMouseDown);this.w[g.id].win.attachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){this.w[g.id].win.attachEvent("ondblclick",this._winOnMouseDown)}}this._winInitFRM(g.id);this._winSetPosition(g.id,g.left,g.header);this._winSetSize(g.id,g.width,g.height);this._winMakeActive(g.id);if(g.center==true){this.w[g.id].cell.center()}if(g.modal==true){this.w[g.id].cell.setModal(true)}if(g.header==false){this.w[g.id].cell.hideHeader()}f=l=h=y=c=n=null;return this.w[g.id].cell};this._winOnMouseDown=function(e){e=e||event;var c=e.target||e.srcElement;var g={press_type:e.type};if(e.type=="MSPointerDown"||e.type=="pointerdown"){o.conf.ev_skip=true}else{if(o.conf.ev_skip==true){o.conf.ev_skip=false;c=null;return}}while(c!=null&&c._isWindow!=true){if(typeof(c.className)!="undefined"&&g.mode==null){if(typeof(c._buttonName)!="undefined"){g.mode="button";g.button_name=c._buttonName}else{if(c._isWinHdr==true){g.mode="hdr"}else{if(c._isWinIcon==true){g.mode="icon"}}}}c=c.parentNode}if(g.mode==null){g.mode="win"}g.id=(c!=null&&c._isWindow==true?c._idd:null);c=null;if(g.id!=null&&o.w[g.id]!=null){o.callEvent("_winMouseDown",[e,g])}};this._winOnParkTrans=function(e){if(e.stopPropagation){e.stopPropagation()}var c=o.w[this._idd];if(e.propertyName=="opacity"){o._winCellClearOpacity(this._idd)}if(e.propertyName=="height"&&c.conf.tr_mode=="park"){if(c.conf.tr_mode=="park"){c.win.style[o.conf.tr.prop]="";if(!c.conf.parked){o._winAdjustCell(this._idd);o._callMainEvent("onParkDown",this._idd);if(c.conf.keep_in_vp){o._winAdjustPosition(this._idd,c.conf.x,c.conf.y)}}else{c.hdr.style.zIndex=3;o._callMainEvent("onParkUp",this._idd)}}}c=null};this.unload=function(){this.conf.unloading=true;if(this._dndInitModule){this._dndUnloadModule()}for(var c in this.w){this._winClose(c)}this.w=null;if(this.cm!=null&&typeof(this._unloadContextMenu)=="function"){this._unloadContextMenu()}window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(var c in this.conf){this.conf[c]=null;delete this.conf[c]}for(var c in this){this[c]=null}o=c=null};window.dhx4._eventable(this);this.attachEvent("_winMouseDown",this._winMouseDownHandler);if(this._dndInitModule){this._dndInitModule()}if(s.wins!=null){for(var a=0;a<s.wins.length;a++){var r=s.wins[a];this.createWindow(r)}}s=null;return this}dhtmlXWindows.prototype.forEachWindow=function(a){for(var g in this.w){a.apply(window,[this.w[g].cell])}};dhtmlXWindows.prototype.window=function(c){if(this.w[c]!=null){return this.w[c].cell}return null};dhtmlXWindows.prototype.isWindow=function(c){return(this.w[c]!=null)};dhtmlXWindows.prototype.findByText=function(a){var h=[];for(var l in this.w){if((this.w[l].cell.getText()).indexOf(String(a))>=0){h.push(this.w[l])}}return h};dhtmlXWindows.prototype.setSkin=function(a){if(a==this.conf.skin){return}if(this.vp!=null){this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+a)}for(var g in this.w){this.w[g].cell._resetSizeState();this._winAdjustCell(g);this._winAdjustTitle(g)}this.conf.skin=a};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(false)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(true)};dhtmlXWindows.prototype._getTopBottomWin=function(a){var l=null;for(var n in this.w){if(this.w[n].conf.visible){var m=false;if(l!=null){m=l.z>this.w[n].win.style.zIndex;if(a){m=!m}}if(l==null||m){l={win:this.w[n].cell,z:this.w[n].win.style.zIndex}}}}return(l?l.win:null)};dhtmlXWindows.prototype._winMakeActive=function(E,C){if(E!=null&&C!==true&&this.w[E].conf.actv==true){return}var I=[];var x={};for(var F=0;F<this._zOrder.length;F++){var y=this._zOrder[F].name;var D=this._zOrder[F].value;var H=[];for(var a in this.w){var J=this.w[a];if(x[a]==null&&J.conf[y]===D&&J.conf.visible==true){if(E!=a){window.dhx4.zim.clear(J.conf.z_id);H.push([a,Number(J.win.style.zIndex)]);x[a]=true}}J=null}H.sort(function(c,e){return(c[1]<e[1]?1:-1)});if(E!=null&&this.w[E].conf[y]===D&&x[E]==null){window.dhx4.zim.clear(this.w[E].conf.z_id);var A=[[E,Number(this.w[E].win.style.zIndex)]];H=A.concat(H);x[E]=true}I=I.concat(H)}for(var F=I.length-1;F>=0;F--){var a=I[F][0];var J=this.w[a];J.win.style.zIndex=window.dhx4.zim.reserve(J.conf.z_id);if(J.conf.modal&&this.mcover!=null){for(var w in this.mcover){this.mcover[w].style.zIndex=J.win.style.zIndex}}this._winAdjustFRMZIndex(a);if(E==null&&F==0){E=a}J.conf.actv=(E==a);J.win.className=(J.conf.actv?"dhxwin_active":"dhxwin_inactive");J=null}if(E!=null&&this.conf.last_active!=E){this._callMainEvent("onFocus",E)}this.conf.last_active=E};dhtmlXWindows.prototype._zOrder=[{name:"modal",value:true},{name:"sticked",value:true},{name:"sticked",value:false}];dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpOf={};dhtmlXWindows.prototype._vpPullAdd=function(){if(this.vp==null){return}var a=null;for(var g in this._vpPull){if(this._vpPull[g].vp==this.vp){this._vpPull[g].count++;a=g}}if(a==null){this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1}}if(this.vp==document.body&&this.conf.vp_of_auto==true){this._vpOfInit()}this._vpOfUpd()};dhtmlXWindows.prototype._vpPullRemove=function(){if(this.vp==null){return 0}var a=0;for(var g in this._vpPull){if(this._vpPull[g].vp==this.vp){a=--this._vpPull[g].count;if(a==0){this._vpPull[g].vp=null;this._vpPull[g].count=null;delete this._vpPull[g]}}}this._vpOfClear();return a};dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=true};dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=false;delete this._vpOf[this.conf.vp_of_id];this._vpOfUpd()};dhtmlXWindows.prototype._vpOfUpd=function(){var a=false;for(var g in this._vpOf){a=a||this._vpOf[g]}if(a==true){if(document.body.className.match(/dhxwins_vp_auto/)==null){document.body.className+=" dhxwins_vp_auto"}}else{if(document.body.className.match(/dhxwins_vp_auto/)!=null){document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,"")}}};dhtmlXWindows.prototype.attachViewportTo=function(a){var m=this._vpPullRemove();if(this.conf.vp_custom){while(this.vp.childNodes.length>0){this.vp.removeChild(this.vp.lastChild)}this.vp.parentNode.removeChild(this.vp);this.vp=null}else{if(this.vp!=null&&m==0){this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),"")}}if(a==null){this.vp=null}else{this.vp=(typeof(a)=="string"?document.getElementById(a):a);var l="dhxwins_vp_"+this.conf.skin;if(this.vp.className.indexOf(l)<0){this.vp.className+=" "+l}a=null;for(var n in this.w){this.vp.appendChild(this.w[n].win)}this.conf.vp_custom=false}if(this.vp==document.body){document.body.style.position="static"}this._vpPullAdd()};dhtmlXWindows.prototype.setViewport=function(u,n,r,m,o){var s=document.createElement("DIV");s.style.position="absolute";s.style.left=u+"px";s.style.top=n+"px";s.style.width=r+"px";s.style.height=m+"px";if(typeof(o)=="undefined"||o==null){o=document.body}else{if(typeof(o)=="string"){o=document.getElementById(o)}}o.appendChild(s);this.attachViewportTo(s);this.conf.vp_custom=true;o=s=null};dhtmlXWindows.prototype._winSetPosition=function(l,h,m){var n=this.w[l];if(n.conf.maxed){n.conf.lastMX+=(h-n.conf.x);n.conf.lastMY+=(m-n.conf.y)}n.conf.x=h;n.conf.y=m;n.win.style.left=n.conf.x+"px";n.win.style.top=n.conf.y+"px";this._winAdjustFRMPosition(l);n=null};dhtmlXWindows.prototype._winAdjustPosition=function(n,w,r){var v=this.w[n];if(typeof(w)=="undefined"){w=v.conf.x}if(typeof(r)=="undefined"){r=v.conf.y}var o=(v.conf.keep_in_vp?0:-v.conf.w+this.conf.vp_pos_ofs);var s=(v.conf.keep_in_vp?this.vp.clientWidth-v.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs);if(w<o){w=o}else{if(w>s){w=s}}var u=(v.conf.keep_in_vp?this.vp.clientHeight-v.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs);if(r<0){r=0}else{if(r>u){r=u}}if(w!=v.conf.x||r!=v.conf.y){this._winSetPosition(n,w,r)}v=null};dhtmlXWindows.prototype._winSetSize=function(y,s,w,o,x){var v=this.w[y];var r=(s!=null?s:v.conf.w);var u=(w!=null?w:v.conf.h);if(this.conf.ofs_w==null){v.win.style.width=r+"px";v.win.style.height=u+"px";this.conf.ofs_w=v.win.offsetWidth-r;this.conf.ofs_h=v.win.offsetHeight-u}if(v.conf.min_w!=null&&r<v.conf.min_w){r=v.conf.min_w}if(v.conf.max_w!=null&&r>v.conf.max_w){r=v.conf.max_w}if(!v.conf.parked&&v.conf.min_h!=null&&u<v.conf.min_h){u=v.conf.min_h}if(v.conf.max_h!=null&&u>v.conf.max_h){u=v.conf.max_h}if(v.conf.keep_in_vp){if(r>this.vp.clientWidth){r=this.vp.clientWidth}if(u>this.vp.clientHeight){u=this.vp.clientHeight}}v.win.style.width=r-this.conf.ofs_w+"px";v.win.style.height=u-this.conf.ofs_h+"px";v.conf.w=r;v.conf.h=u;this._winAdjustFRMSize(y);if(x){this._winAdjustPosition(y,v.conf.x,v.conf.y)}if(!v.conf.parked&&o!=true){this._winAdjustCell(y)}v=null};dhtmlXWindows.prototype._winMinmax=function(m,o){if(typeof(o)!="undefined"&&this.w[m].conf.maxed==o){return}if(this.w[m].conf.allow_resize==false){return}var r=this.w[m];if(r.conf.parked){this._winPark(m,false)}if(r.conf.maxed){this._winSetSize(m,r.conf.lastMW,r.conf.lastMH);this._winAdjustPosition(m,r.conf.lastMX,r.conf.lastMY);r.conf.maxed=false}else{var l=0;var n=0;if(r.conf.max_w!=null){l=r.conf.x+Math.round(r.conf.w-r.conf.max_w)/2}if(r.conf.max_h!=null){n=Math.max(r.conf.y+Math.round(r.conf.h-r.conf.max_h)/2,0)}r.conf.lastMX=r.conf.x;r.conf.lastMY=r.conf.y;r.conf.lastMW=r.conf.w;r.conf.lastMH=r.conf.h;this._winSetSize(m,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(m,l,n);r.conf.maxed=true}r.b.minmax.setCss(r.conf.maxed?"minmaxed":"minmax");if(r.conf.maxed){this._callMainEvent("onMaximize",m)}else{this._callMainEvent("onMinimize",m)}r=null};dhtmlXWindows.prototype._winShow=function(g,e){if(this.w[g].conf.visible==true){return}this.w[g].win.style.display="";this.w[g].conf.visible=true;if(e==true||this.conf.last_active==null){this._winMakeActive(g,true)}this._callMainEvent("onShow",g)};dhtmlXWindows.prototype._winHide=function(g,e){if(this.w[g].conf.visible==false){return}this.w[g].win.style.display="none";this.w[g].conf.visible=false;if(this.w[g].conf.actv){this.w[g].conf.actv=false;this.w[g].win.className="dhxwin_inactive";this._winMakeActive(null,true)}this._callMainEvent("onHide",g)};dhtmlXWindows.prototype._winPark=function(h,g){if(this.w[h].conf.allow_park==false){return}if(this.w[h].conf.header==false){return}var l=this.w[h];if(g==true&&this.conf.tr.prop!==false){l.win.style[this.conf.tr.prop]=this.conf.tr[l.conf.parked?"height_open":"height_close"];if(!l.conf.tr_ev){l.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,false);l.conf.tr_ev=true}}if(l.conf.parked){l.hdr.className=String(l.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,"");l.hdr.style.zIndex=0;l.conf.parked=false;l.conf.tr_mode="park";this._winCellSetOpacity(h,"open",g);this._winSetSize(h,l.conf.w,l.conf.lastPH,(g==true&&this.conf.tr.prop!==false));if(!(g==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkDown",h);if(l.conf.keep_in_vp){this._winAdjustPosition(h,l.conf.x,l.conf.y)}}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&l.cell.cell.className.match(/dhxwin_parked/)!=null){l.cell.cell.className=l.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,"")}}else{l.conf.lastPH=l.conf.h;l.hdr.className+=" dhxwin_hdr_parked";if(g==false||this.conf.tr.prop==false){l.hdr.style.zIndex=3}l.conf.parked=true;l.conf.tr_mode="park";this._winCellSetOpacity(h,"close",g);this._winSetSize(h,l.conf.w,l.hdr.offsetHeight+this.conf.ofs_h,(g==true&&this.conf.tr.prop!==false));if(!(g==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkUp",h)}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&l.cell.cell.className.match(/dhxwin_parked/)==null){l.cell.cell.className+=" dhxwin_parked"}}l=null};dhtmlXWindows.prototype._winCellSetOpacity=function(a,n,s,o){var u=this.w[a].cell;for(var r in u.conf.idx){if({pr1:true,pr2:true}[r]!=true){if(s==true&&this.conf.tr.prop!=false){u.cell.childNodes[u.conf.idx[r]].style[this.conf.tr.prop]=this.conf.tr["op_"+n]}u.cell.childNodes[u.conf.idx[r]].style.opacity=this.conf.tr["op_v_"+n]}}u=null};dhtmlXWindows.prototype._winCellClearOpacity=function(a){var l=this.w[a].cell;for(var h in l.conf.idx){if({pr1:true,pr2:true}[h]!=true){if(this.conf.tr.prop!=false){l.cell.childNodes[l.conf.idx[h]].style[this.conf.tr.prop]=""}}}l=null};dhtmlXWindows.prototype._winStick=function(g,e){if(typeof(e)!="undefined"&&this.w[g].conf.sticked==e){return}this.w[g].conf.sticked=!this.w[g].conf.sticked;this.w[g].b.stick.setCss(this.w[g].conf.sticked?"sticked":"stick");this._winMakeActive(this.conf.last_active,true);if(this.w[g].conf.sticked){this._callMainEvent("onStick",g)}else{this._callMainEvent("onUnStick",g)}};dhtmlXWindows.prototype._winClose=function(a){if(this._callMainEvent("onClose",a)!==true&&this.conf.unloading!=true){return}var h=this.w[a];if(h.conf.fs_mode){h.cell.setToFullScreen(false)}if(h.conf.modal){this._winSetModal(a,false)}window.dhx4.zim.clear(h.conf.z_id);if(this.cm!=null&&this.cm.icon[a]!=null){this._detachContextMenu("icon",a,null)}if(typeof(window.addEventListener)=="function"){h.win.removeEventListener("mousedown",this._winOnMouseDown,false);h.win.removeEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){h.win.removeEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_enabled==true&&window.dhx4.dnd.evs.start!=null){h.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);if(window.dhx4.dnd.p_en!=true){h.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);h.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,false)}}}else{h.win.detachEvent("onmousedown",this._winOnMouseDown);h.win.detachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){h.win.attachEvent("ondblclick",this._winOnMouseDown)}}for(var l in h.b){this._winRemoveButton(a,l,true)}h.b=null;h.cell._unload();h.cell=null;h.brd.parentNode.removeChild(h.brd);h.brd=null;if(h.fr_cover!=null){h.fr_cover.parentNode.removeChild(h.fr_cover);h.fr_cover=null}if(h.fr_m_cover!=null){h.fr_m_cover.parentNode.removeChild(h.fr_m_cover);h.fr_m_cover=null}h.hdr._isWinHdr=true;h.hdr.firstChild._isWinIcon=true;h.hdr.onselectstart=null;h.hdr.parentNode.removeChild(h.hdr);h.hdr=null;for(var l in h.conf){h.conf[l]=null;delete h.conf[l]}h.conf=null;h.win._idd=null;h.win._isWindow=null;h.win.parentNode.removeChild(h.win);h.win=null;h=null;this.w[a]=null;delete this.w[a];if(!this.conf.unloading){this._winMakeActive(null,true)}};dhtmlXWindows.prototype._winSetModal=function(a,r,n){if(this.w[a].conf.modal==r){return}if(typeof(n)=="undefined"){n=true}var s=this.w[a];if(r==true&&s.conf.modal==false){if(this.conf.last_modal!=null){this._winSetModal(this.conf.last_modal,false,false)}if(this.mcover==null){var o=document.createElement("DIV");o.className="dhxwins_mcover";this.vp.insertBefore(o,s.fr_m_cover||s.win);this.mcover={d:o};if(this.conf.fr_cover){this.mcover.f=document.createElement("IFRAME");this.mcover.f.className="dhxwins_mcover";this.mcover.f.border=0;this.mcover.f.frameBorder=0;this.vp.insertBefore(this.mcover.f,o)}o=null}else{if(this.mcover.d.nextSibling!=(s.fr_m_cover||s.win)){this.vp.insertBefore(this.mcover.d,s.fr_m_cover||s.win);if(this.mcover.f!=null){this.vp.insertBefore(this.mcover.f,this.mcover.d)}}}s.conf.modal=true;this.conf.last_modal=a;this._winMakeActive(a,true)}else{if(r==false&&s.conf.modal==true){s.conf.modal=false;this.conf.last_modal=null;if(n&&this.mcover!=null){for(var u in this.mcover){this.vp.removeChild(this.mcover[u]);this.mcover[u]=null}this.mcover=null}}}s=null};dhtmlXWindows.prototype._winMouseDownHandler=function(h,l){var e=h.target||h.srcElement;if(h.button>=2){return}if(l.mode=="button"){if(l.press_type=="mousedown"){this.conf.button_last=l.button_name}else{if((l.press_type=="mouseup"&&l.button_name==this.conf.button_last)||l.press_type=="MSPointerDown"||l.press_type=="pointerdown"){this.conf.button_last=null;if(this._winButtonClick(l.id,l.button_name,h)!==true){return}}}}if((l.press_type=="pointerdown"||l.press_type=="mousedown"||l.press_type=="dblclick")&&l.mode=="hdr"){this.conf.dblclick_active=false;if(this.conf.dblclick_ev==true){if(l.press_type=="dblclick"){this.conf.dblclick_active=true}}else{if(this.conf.dblclick_last==null){this.conf.dblclick_last=new Date().getTime();this.dblclick_id=l.id}else{var e=new Date().getTime();if(this.conf.dblclick_last+this.conf.dblclick_tm>e&&this.dblclick_id==l.id){this.conf.dblclick_active=true;this.conf.dblclick_last=null;this.dblclick_id=null}else{this.conf.dblclick_last=e;this.dblclick_id=l.id}}}if(this.conf.dblclick_active){this._winDoHeaderDblClick(l.id);return}}if(l.press_type=="mousedown"||(l.press_type==window.dhx4.dnd.evs.start)){this._winMakeActive(l.id)}if(l.press_type=="touchend"){}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(c){if(this.conf.dblclick_mode=="minmax"){this._winMinmax(c);return}if(this.conf.dblclick_mode=="park"){this._winPark(c,true);return}if(typeof(this.conf.dblclick_mode)=="function"){this.conf.dblclick_mode.apply(window,[c]);return}if(typeof(window[this.conf.dblclick_mode])=="function"){window[this.conf.dblclick_mode].apply(window,[c]);return}};dhtmlXWindows.prototype._winAdjustCell=function(E){var u=this.w[E];var v=1;var w=(u.conf.header?u.hdr.offsetHeight:1);var C=u.win.clientWidth-2;var H=u.win.clientHeight-w-1;u.brd.style.left=v+"px";u.brd.style.top=w+"px";if(u.conf.brd==null){u.brd.style.width=C+"px";u.brd.style.height=H+"px";u.conf.brd={w:C-u.brd.offsetWidth,h:H-u.brd.offsetHeight}}u.brd.style.width=C+u.conf.brd.w+"px";u.brd.style.height=H+u.conf.brd.h+"px";var D=5;var F=1+D;var x=(u.conf.header?w:w+D);var A=u.brd.clientWidth;var y=u.brd.clientHeight;u.cell._setSize(F,x,A,y);u.fr_cover.style.left=F+"px";u.fr_cover.style.top=x+"px";u.fr_cover.style.width=A+"px";u.fr_cover.style.height=y+"px";u=null};dhtmlXWindows.prototype._winAdjustTitle=function(l){var h=this.w[l].hdr.childNodes[0];var m=this.w[l].hdr.childNodes[1];var n=this.w[l].hdr.childNodes[2];m.style.paddingLeft=h.offsetWidth+12+"px";m.style.paddingRight=n.offsetWidth+10+"px";m=n=h=null};dhtmlXWindows.prototype._callMainEvent=function(n,l){var h=this.w[l];if(h.cell.checkEvent(n)){var m=h.cell._callMainEvent(n,[h.cell])}else{var m=this.callEvent(n,[h.cell])}h=null;return m};dhtmlXWindows.prototype._winInitFRM=function(h){if(this.conf.fr_cover!=true){return}var g=this.w[h];var l=document.createElement("IFRAME");l.className="dhxwin_main_fr_cover";l.border=0;l.frameBorder=0;l.style.zIndex=g.win.style.zIndex;g.win.parentNode.insertBefore(l,g.win);g.fr_m_cover=l;l=null};dhtmlXWindows.prototype._winAdjustFRMSize=function(g){var e=this.w[g];if(e.fr_m_cover!=null){e.fr_m_cover.style.width=e.conf.w+"px";e.fr_m_cover.style.height=e.conf.h+"px"}e=null};dhtmlXWindows.prototype._winAdjustFRMPosition=function(g){var e=this.w[g];if(e.fr_m_cover!=null){e.fr_m_cover.style.left=e.win.style.left;e.fr_m_cover.style.top=e.win.style.top}e=null};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(g){var e=this.w[g];if(e.fr_m_cover!=null){e.fr_m_cover.style.zIndex=e.win.style.zIndex}e=null};function dhtmlXWindowsCell(a,l){dhtmlXCellObject.apply(this,[a,"_wins"]);this.wins=l;this.cell._winId=a;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){if(this._unloadResize){this._unloadResize()}window.dhx4._eventable(this.cell,"clear");this.cell._winId=null;this.wins=null;this.setText=null;this.getText=null;this.allowMove=null;this.denyMove=null;this.isMovable=null;this.allowResize=null;this.denyResize=null;this.isResizable=null;this.maximize=null;this.minimize=null;this.isMaximized=null;this.setPosition=null;this.getPosition=null;this.adjustPosition=null;this.park=null;this.isParked=null;this.allowPark=null;this.denyPark=null;this.isParkable=null;this.show=null;this.hide=null;this.isHidden=null;this.stick=null;this.unstick=null;this.isSticked=null;this.setDimension=null;this.getDimension=null;this.setMinDimension=null;this.getMinDimension=null;this.setMaxDimension=null;this.getMaxDimension=null;this.keepInViewport=null;this.center=null;this.centerOnScreen=null;this.bringToTop=null;this.bringToBottom=null;this.isOnTop=null;this.isOnBottom=null;this.showHeader=null;this.hideHeader=null;this.setModal=null;this.isModal=null;this.close=null;this._adjustByCont=null;this.button=null;this.addUserButton=null;this.removeUserButton=null;m=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(e,c){this.wins.callEvent("_winMouseDown",[c,{id:e,mode:"win"}])});this._callMainEvent=function(e,c){return this.callEvent(e,c)};this.conf.tr={};for(var n in this.wins.conf.tr){this.conf.tr[n]=this.wins.conf.tr[n]}if(this.conf.tr.prop!=false){}if(this._initResize){this._initResize()}window.dhx4._eventable(this.cell);var m=this;this.cell.attachEvent("_setCellSize",function(g,h){var e=m.wins.w[this._winId].conf.w-m.conf.size.w;var c=m.wins.w[this._winId].conf.h-m.conf.size.h;m.setDimension(g+e,h+c)});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject();dhtmlXWindowsCell.prototype.setText=function(c){this.wins.w[this._idd].conf.text=c;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=c};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=true};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=false};dhtmlXWindowsCell.prototype.isMovable=function(){return(this.wins.w[this._idd].conf.allow_move==true)};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=true;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=false;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return(this.wins.w[this._idd].conf.allow_resize==true)};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,true)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,false)};dhtmlXWindowsCell.prototype.isMaximized=function(){return(this.wins.w[this._idd].conf.maxed==true)};dhtmlXWindowsCell.prototype.setPosition=function(e,g){this.wins._winSetPosition(this._idd,e,g)};dhtmlXWindowsCell.prototype.getPosition=function(){var e=this.wins.w[this._idd];var g=[e.conf.x,e.conf.y];e=null;return g};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,true)};dhtmlXWindowsCell.prototype.isParked=function(){return(this.wins.w[this._idd].conf.parked==true)};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=true;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=false;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return(this.wins.w[this._idd].conf.allow_park==true)};dhtmlXWindowsCell.prototype.show=function(c){this.wins._winShow(this._idd,window.dhx4.s2b(c))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return(this.wins.w[this._idd].conf.visible!=true)};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,true)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,false)};dhtmlXWindowsCell.prototype.isSticked=function(){return(this.wins.w[this._idd].conf.sticked==true)};dhtmlXWindowsCell.prototype.setDimension=function(h,g){var l=this.wins.w[this._idd];if(l.conf.parked){this.wins._winPark(this._idd,false)}if(l.conf.maxed){if(h!=null){l.conf.lastMW=h}if(g!=null){l.conf.lastMH=g}this.wins._winMinmax(this._idd)}else{this.wins._winSetSize(this._idd,h,g,false,true)}l=null};dhtmlXWindowsCell.prototype.getDimension=function(){var e=this.wins.w[this._idd];var g=[e.conf.w,e.conf.h];e=null;return g};dhtmlXWindowsCell.prototype.setMinDimension=function(h,g){var l=this.wins.w[this._idd];l.conf.min_w=h;l.conf.min_h=g;this.wins._winSetSize(this._idd,l.conf.w,l.conf.h);l=null};dhtmlXWindowsCell.prototype.getMinDimension=function(){var e=this.wins.w[this._idd];var g=[e.conf.min_w,e.conf.min_h];e=null;return g};dhtmlXWindowsCell.prototype.setMaxDimension=function(h,g){var l=this.wins.w[this._idd];l.conf.max_w=h;l.conf.max_h=g;this.wins._winSetSize(this._idd,l.conf.w,l.conf.h);l=null};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var e=this.wins.w[this._idd];var g=[e.conf.max_w,e.conf.max_h];e=null;return g};dhtmlXWindowsCell.prototype.keepInViewport=function(c){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(c)};dhtmlXWindowsCell.prototype.center=function(){var m=this.wins.vp;var n=this.wins.w[this._idd];var h=Math.round((m.clientWidth-n.conf.w)/2);var l=Math.round((m.clientHeight-n.conf.h)/2);this.wins._winSetPosition(this._idd,h,l);m=n=null};dhtmlXWindowsCell.prototype.centerOnScreen=function(){var w=this.wins.w[this._idd];var r=window.dhx4.screenDim();var s=window.dhx4.absLeft(this.wins.vp);var u=window.dhx4.absTop(this.wins.vp);var v=this.wins.vp.parentNode;while(v!=null){if(v.scrollLeft){s=s-v.scrollLeft}if(v.scrollTop){u=u-v.scrollTop}v=v.parentNode}var o=Math.round((r.right-r.left-w.conf.w)/2);var n=Math.round((r.bottom-r.top-w.conf.h)/2);this.wins._winAdjustPosition(this._idd,o-s,n-u);d=w=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,true)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var c=(this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active);window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(c,true)};dhtmlXWindowsCell.prototype.isOnTop=function(){return(this.wins.w[this._idd].conf.actv==true)};dhtmlXWindowsCell.prototype.isOnBottom=function(){var a={id:null,z:+Infinity};for(var g in this.wins.w){if(this.wins.w[g].conf.visible&&this.wins.w[g].win.style.zIndex<a.z){a.id=g;a.z=this.wins.w[g].win.style.zIndex}}return(a.id==this._idd)};dhtmlXWindowsCell.prototype.showHeader=function(){var c=this.wins.w[this._idd];if(c.conf.header==false){c.hdr.className=String(c.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");c.brd.className=String(c.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");this.conf.cells_cont=null;c.conf.brd=null;c.conf.header=true;this.wins._winAdjustCell(this._idd)}c=null};dhtmlXWindowsCell.prototype.hideHeader=function(){var c=this.wins.w[this._idd];if(c.conf.header==true){if(c.conf.parked){this.wins._winPark(this._idd,false)}c.hdr.className+=" dhxwin_hdr_hidden";c.brd.className+=" dhxwin_hdr_hidden";this.conf.cells_cont=null;c.conf.brd=null;c.conf.header=false;this.wins._winAdjustCell(this._idd)}c=null};dhtmlXWindowsCell.prototype.setModal=function(c){this.wins._winSetModal(this._idd,window.dhx4.s2b(c))};dhtmlXWindowsCell.prototype.isModal=function(){return(this.wins.w[this._idd].conf.modal==true)};dhtmlXWindowsCell.prototype._adjustByCont=function(e,g){e+=this.wins.w[this._idd].conf.w-this.conf.size.w;g+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,e,g)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(c){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+c;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(g){g=window.dhx4.s2b(g);var e=this.wins.w[this._idd];if(e.conf.fs_mode==g){e=null;return}if(this.wins.fsn==null){this.wins.fsn=document.createElement("DIV");this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs";document.body.appendChild(this.wins.fsn)}if(g){this.wins.fsn.appendChild(e.win);this.maximize();this.hideHeader()}else{this.wins.vp.appendChild(e.win);this.minimize();this.showHeader();if(this.wins.fsn.childNodes.length==0){this.wins.fsn.parentNode.removeChild(this.wins.fsn);this.wins.fsn=null}}e.conf.fs_mode=g;e=null};dhtmlXWindowsCell.prototype.button=function(c){if(c=="minmax1"||c=="minmax2"){c="minmax"}return this.wins.w[this._idd].b[c]};dhtmlXWindowsCell.prototype.addUserButton=function(h,o,s){var n=new dhtmlXWindowsButton(this.wins,this._idd,h,s,true);var r=null;var u=this.wins.w[this._idd].hdr.lastChild;if(isNaN(o)){o=0}else{if(o<0){o=0}}if(u.childNodes[o]!=null){r=u.childNodes[o]}if(r!=null){u.insertBefore(n.button,r)}else{u.appendChild(n.button)}this.wins.w[this._idd].b[h]=n;n=r=u=null;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(c){if(this.wins.w[this._idd].b[c]==null||this.wins.w[this._idd].b[c].conf.custom!=true){return}this.wins._winRemoveButton(this._idd,c)};window.dhtmlXWindowsButton=function(m,r,l,n,o){this.conf={wins:m,winId:r,name:l,enabled:true,visible:true,custom:true};this.button=document.createElement("DIV");this.button._buttonName=l;this.button.title=n;this.enable=function(){this.conf.enabled=true;this.setCss(this.conf.css)};this.disable=function(){this.conf.enabled=false;this.setCss(this.conf.css)};this.isEnabled=function(){return(this.conf.enabled==true)};this.show=function(){this.button.style.display="";this.conf.visible=true;this.conf.wins._winAdjustTitle(this.conf.winId)};this.hide=function(){this.button.style.display="none";this.conf.visible=false;this.conf.wins._winAdjustTitle(this.conf.winId)};this.isHidden=function(){return(this.conf.visible==false)};this.setCss=function(a){this.conf.css=a;var c=(this.conf.enabled?"":"_dis");this.button.className="dhxwin_button"+c+" dhxwin_button_"+this.conf.css+c};this._doOnClick=function(a){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])};this.unload=function(a){dhx4._eventable(this,"clear");this.button._buttonName=null;this.button.parentNode.removeChild(this.button);if(this.conf.wins.cm!=null&&this.conf.wins.cm.button[this.conf.winId]!=null&&this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)}this.button=null;this.enable=null;this.disable=null;this.isEnabled=null;this.show=null;this.hide=null;this.isHidden=null;this.setCss=null;this.unload=null;if(a!=true){this.conf.wins._winAdjustTitle(this.conf.winId)}this.conf.wins=null;this.conf.winId=null;this.conf=null};this.setCss(l);dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(h,g,l){if(!this.w[h].b[g].isEnabled()){return true}if(this.w[h].b[g]._doOnClick()!==true){return}if(g=="help"){this._callMainEvent("onHelp",h)}if(g=="park"){this._winPark(h,true)}if(g=="minmax"){this._winMinmax(h)}if(g=="stick"){this._winStick(h);return false}if(g=="close"){this._winClose(h);return false}return true};dhtmlXWindows.prototype._winRemoveButton=function(h,g,l){this.w[h].b[g].unload(l);this.w[h].b[g]=null;delete this.w[h].b[g]};dhtmlXWindows.prototype._dndInitModule=function(){var c=this;this.conf.dnd_enabled=true;this.conf.dnd_tm=null;this.conf.dnd_time=0;this._dndOnMouseDown=function(e,a){if(c.conf.dblclick_active){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(c._callMainEvent("onBeforeMoveStart",a)!==true){return}c.conf.dnd={id:a,x:c._dndPos(e,"X"),y:c._dndPos(e,"Y"),ready:true,css:false,css_touch:false,css_vp:false,tr:null,mode:"def",moved:false,prevent:false};if(c.w[a].conf.keep_in_vp){c.conf.dnd.minX=0;c.conf.dnd.maxX=c.vp.clientWidth-c.w[a].conf.w;c.conf.dnd.minY=0;c.conf.dnd.maxY=c.vp.clientHeight-c.w[a].conf.h}else{c.conf.dnd.minX=-c.w[a].conf.w+c.conf.vp_pos_ofs;c.conf.dnd.maxX=c.vp.clientWidth-c.conf.vp_pos_ofs;c.conf.dnd.minY=0;c.conf.dnd.maxY=c.vp.clientHeight-c.conf.vp_pos_ofs}var n=["MozTransform","WebkitTransform","OTransform","msTransform","transform"];for(var m=0;m<n.length;m++){if(document.documentElement.style[n[m]]!=null&&c.conf.dnd.tr==null){c.conf.dnd.tr=n[m];c.conf.dnd.mode="tr"}}if(c.conf.dnd.mode=="tr"){c.w[a].win.style[c.conf.dnd.tr]="translate(0px,0px)";if(c.w[a].fr_m_cover!=null){c.w[a].fr_m_cover.style[c.conf.dnd.tr]=c.w[a].win.style[c.conf.dnd.tr]}}if(window.dhx4.dnd._mTouch(e)==false&&e.type==window.dhx4.dnd.evs.start){if(c.conf.dnd.css_touch==false){c.w[a].win.className+=" dhxwin_dnd_touch";c.conf.dnd.css_touch=true}if(c.conf.dnd.css_vp==false){c.vp.className+=" dhxwins_vp_dnd";c.conf.dnd.css_vp=true}}else{c._dndInitEvents()}};this._dndOnMouseMove=function(e){e=e||event;var n=c.conf.dnd;var r=c._dndPos(e,"X")-n.x;var a=c._dndPos(e,"Y")-n.y;if(e.type==window.dhx4.dnd.evs.move){if(n.moved!=true&&(Math.abs(r)>20||Math.abs(a)>20)){if(c.conf.dnd_tm!=null){window.clearTimeout(c.conf.dnd_tm);c.conf.dnd_tm=null}window.removeEventListener(window.dhx4.dnd.evs.start,c._dndOnMouseMove,false);return}}if(n.ready!=true){return}var o=c.w[n.id];if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(n.css!=true){if(n.css_touch==false){o.win.className+=" dhxwin_dnd"}o.fr_cover.className+=" dhxwin_fr_cover_dnd";n.css=true}if(n.css_vp!=true){c.vp.className+=" dhxwins_vp_dnd";n.css_vp=true}n.newX=o.conf.x+r;n.newY=o.conf.y+a;if(n.mode=="tr"){n.newX=Math.min(Math.max(n.newX,n.minX),n.maxX);r=n.newX-o.conf.x;n.newY=Math.min(Math.max(n.newY,n.minY),n.maxY);a=n.newY-o.conf.y;o.win.style[n.tr]="translate("+r+"px,"+a+"px)";if(o.fr_m_cover!=null){o.fr_m_cover.style[n.tr]=o.win.style[n.tr]}}else{if(n.newX<n.minX||n.newX>n.maxX){n.newX=Math.min(Math.max(n.newX,n.minX),n.maxX)}else{n.x=c._dndPos(e,"X")}if(n.newY<n.minY||n.newY>n.maxY){n.newY=Math.min(Math.max(n.newY,n.minY),n.maxY)}else{n.y=c._dndPos(e,"Y")}c._winSetPosition(n.id,n.newX,n.newY)}n.moved=true;o=n=null};this._dndOnMouseUp=function(a){a=a||event;if(c.conf.dnd!=null){var e=c.conf.dnd;var l=c.w[e.id];if(e.newX!=null){if(e.mode=="tr"){c._winSetPosition(e.id,e.newX,e.newY);l.win.style[e.tr]="translate(0px,0px)";if(l.fr_m_cover!=null){l.fr_m_cover.style[e.tr]=l.win.style[e.tr]}}}if(e.css==true){if(e.css_touch==false){l.win.className=String(l.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")}l.fr_cover.className=String(l.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,"")}if(e.css_touch==true){l.win.className=String(l.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,"")}if(e.css_vp==true){c.vp.className=String(c.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")}c._dndUnloadEvents();if(e.moved==true){c._callMainEvent("onMoveFinish",e.id)}else{c._callMainEvent("onMoveCancel",e.id)}l=e=c.conf.dnd=null}if(window.dhx4.dnd.p_en==true&&a.type==window.dhx4.dnd.evs.end){window.dhx4.dnd._touchOn();window.removeEventListener(window.dhx4.dnd.evs.end,c._dndOnMouseUp,false);window.removeEventListener(window.dhx4.dnd.evs.move,c._dndOnMouseMove,false);if(c.conf.dnd_tm!=null){window.clearTimeout(c.conf.dnd_tm)}c.conf.dnd_tm=null}};this._dndOnSelectStart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this._dndInitEvents=function(){if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._dndOnMouseMove,false);window.addEventListener("mouseup",this._dndOnMouseUp,false);window.addEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.attachEvent("onmousemove",this._dndOnMouseMove);document.body.attachEvent("onmouseup",this._dndOnMouseUp);document.body.attachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadEvents=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._dndOnMouseMove,false);window.removeEventListener("mouseup",this._dndOnMouseUp,false);window.removeEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.detachEvent("onmousemove",this._dndOnMouseMove);document.body.detachEvent("onmouseup",this._dndOnMouseUp);document.body.detachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);this.conf.dnd_evid=null;this._dndOnMouseDown=null;this._dndOnMouseMove=null;this._dndOnMouseUp=null;this._dndOnSelectStart=null;this._dndInitEvents=null;this._dndUnloadEvents=null;this._dndInitModule=null;this._dndUnloadModule=null;c=null};this._dndPos=function(h,l){var a=h[this.conf.dnd_ev_prefix+l];if((a==null||a==0)&&h.touches!=null){a=h.touches[0][this.conf.dnd_ev_prefix+l]}return a};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(a,e){if(this.w[e.id]==null||this.w[e.id].conf.allow_move!=true){return}if(typeof(a.button)!="undefined"&&a.button>=2){return}if(a.type==window.dhx4.dnd.evs.start){if(e.mode=="hdr"){if(this.w[e.id].conf.maxed&&this.w[e.id].conf.max_w==null&&this.w[e.id].conf.max_h==null){return}this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(a,"X"),y:this._dndPos(a,"Y")};if(this.conf.dnd_time<1){this._dndOnMouseDown(a,e.id)}else{if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm)}this.conf.dnd_tm=window.setTimeout(function(){c._dndOnMouseDown(a,e.id)},this.conf.dnd_time)}if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOff();window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,false)}window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,false)}return false}if(a.type==window.dhx4.dnd.evs.end){if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm);this.conf.dnd_tm=null}this._dndOnMouseUp(a);window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,false);return false}this.conf.dnd_ev_prefix="client";if(!(e.mode=="hdr"&&a.type=="mousedown")){return}if(this.w[e.id].conf.maxed&&this.w[e.id].conf.max_w==null&&this.w[e.id].conf.max_h==null){return}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}this._dndOnMouseDown(a,e.id);return false})};dhtmlXWindowsCell.prototype._initResize=function(){var e=this;var g=navigator.userAgent;this.conf.resize={b_width:6,c_type:(g.indexOf("MSIE 10.0")>0||g.indexOf("MSIE 9.0")>0||g.indexOf("MSIE 8.0")>0||g.indexOf("MSIE 7.0")>0||g.indexOf("MSIE 6.0")>0),btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0)};this._rOnCellMouseMove=function(c){if(e.wins.conf.resize_actv==true||e.wins.w[e._idd].conf.allow_resize==false||e.conf.progress==true||e.wins.w[e._idd].conf.maxed==true||e.wins.w[e._idd].conf.fs_mode==true){var x=e.wins.w[e._idd].brd;if(x.style.cursor!="default"){x.style.cursor="default"}x=null;return}c=c||event;var C=e.wins.w[e._idd].brd;var A=e.conf.resize;var F=(e.wins.w[e._idd].conf.header==false);var E=c.clientX;var a=c.clientY;var y=window.dhx4.absLeft(C);var D=window.dhx4.absTop(C);var r="";if(E<=y+A.b_width){r="w"}else{if(E>=y+C.offsetWidth-A.b_width){r="e"}}if(a>=D+C.offsetHeight-A.b_width){r="s"+r}else{if(F&&a<=D+A.b_width){r="n"+r}}if(r==""){r=false}if(A.mode!=r){A.mode=r;if(r==false){C.style.cursor="default"}else{C.style.cursor=r+"-resize"}}C=A=null};this._rOnCellMouseDown=function(a){a=a||event;if(typeof(a.button)!="undefined"&&a.button!=e.conf.resize.btn_left){return}if(e.conf.resize.mode==false){return}if(e.conf.progress==true){return}if(e.wins.w[e._idd].conf.allow_resize==false){return}if(e.wins.w[e._idd].conf.fs_mode==true){return}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}if(e.wins._callMainEvent("onBeforeResizeStart",e._idd)!==true){return}var o=e.wins.w[e._idd];var c=e.conf.resize;e.wins.conf.resize_actv=true;c.min_w=o.conf.min_w;c.min_h=o.conf.min_h;c.max_w=o.conf.max_w||+Infinity;c.max_h=o.conf.max_h||+Infinity;if(o.cell.dataType=="layout"&&o.cell.dataObj!=null&&typeof(o.cell.dataObj._getWindowMinDimension)=="function"){var n=o.cell.dataObj._getWindowMinDimension(o.cell);c.min_w=Math.max(n.w,c.min_w);c.min_h=Math.max(n.h,c.min_h)}c.vp_l=e.wins.conf.vp_pos_ofs;c.vp_r=e.wins.vp.clientWidth-e.wins.conf.vp_pos_ofs;c.vp_b=e.wins.vp.clientHeight-e.wins.conf.vp_pos_ofs;c.x=a.clientX;c.y=a.clientY;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",e._rOnWinMouseMove,false);window.addEventListener("mouseup",e._rOnWinMouseUp,false);window.addEventListener("selectstart",e._rOnSelectStart,false)}else{document.body.attachEvent("onmousemove",e._rOnWinMouseMove);document.body.attachEvent("onmouseup",e._rOnWinMouseUp);document.body.attachEvent("onselectstart",e._rOnSelectStart)}c.resized=false;c.vp_cursor=e.wins.vp.style.cursor;e.wins.vp.style.cursor=c.mode+"-resize";o=c=null};this._rOnCellContextMenu=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this._rOnWinMouseMove=function(a){a=a||event;var o=e.wins.w[e._idd];var c=e.conf.resize;if(!c.resized){o.fr_cover.className+=" dhxwin_fr_cover_resize";c.resized=true}var r=a.clientX-c.x;var s=a.clientY-c.y;if(c.mode.indexOf("e")>=0){c.rw=Math.min(Math.max(o.conf.w+r,c.min_w),c.max_w);c.rx=null;if(o.conf.x+c.rw<c.vp_l){c.rw=c.vp_l-o.conf.x}else{if(o.conf.x+c.rw>e.wins.vp.clientWidth){c.rw=e.wins.vp.clientWidth-o.conf.x}}}else{if(c.mode.indexOf("w")>=0){c.rw=Math.min(Math.max(o.conf.w-r,c.min_w),c.max_w);c.rx=o.conf.x+o.conf.w-c.rw;if(c.rx<0){c.rw=c.rw+c.rx;c.rx=0}else{if(c.rx>c.vp_r){c.rw=c.rw-c.vp_r;c.rx=c.vp_r}}}}if(c.mode.indexOf("s")>=0){c.rh=Math.min(Math.max(o.conf.h+s,c.min_h),c.max_h);c.ry=null;if(o.conf.y+c.rh>e.wins.vp.clientHeight){c.rh=e.wins.vp.clientHeight-o.conf.y}}else{if(c.mode.indexOf("n")>=0){c.rh=Math.min(Math.max(o.conf.h-s,c.min_h),c.max_h);c.ry=o.conf.y+o.conf.h-c.rh;if(c.ry<0){c.rh=c.rh+c.ry;c.ry=0}else{if(c.ry>c.vp_b){c.rh=c.rh-c.vp_b;c.ry=c.vp_b}}}}e._rAdjustSizer();o=c=null};this._rOnWinMouseUp=function(){var a=e.conf.resize;var c=e.wins.w[e._idd];e.wins.conf.resize_actv=false;e.wins.vp.style.cursor=a.vp_cursor;c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");if(a.resized){e.wins._winSetSize(e._idd,a.rw,a.rh);if(a.rx==null){a.rx=c.conf.x}if(a.ry==null){a.ry=c.conf.y}if(a.rx!=c.conf.x||a.ry!=c.conf.y){e.wins._winSetPosition(e._idd,a.rx,a.ry)}}if(a.obj!=null){a.obj.parentNode.removeChild(a.obj);a.obj=null}if(a.objFR!=null){a.objFR.parentNode.removeChild(a.objFR);a.objFR=null}if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",e._rOnWinMouseMove,false);window.removeEventListener("mouseup",e._rOnWinMouseUp,false);window.removeEventListener("selectstart",e._rOnSelectStart,false)}else{document.body.detachEvent("onmousemove",e._rOnWinMouseMove);document.body.detachEvent("onmouseup",e._rOnWinMouseUp);document.body.detachEvent("onselectstart",e._rOnSelectStart)}if(a.resized==true){if(e.dataType=="layout"&&e.dataObj!=null){e.dataObj.callEvent("onResize",[])}e.wins._callMainEvent("onResizeFinish",e._idd)}else{e.wins._callMainEvent("onResizeCancel",e._idd)}a.mode="";c=a=null};this._rOnSelectStart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this._rInitSizer=function(){var a=e.conf.resize;var c=e.wins.w[e._idd];a.obj=document.createElement("DIV");a.obj.className="dhxwin_resize";a.obj.style.zIndex=c.win.style.zIndex;a.obj.style.cursor=a.mode+"-resize";e.wins.vp.appendChild(a.obj);if(e.wins.conf.fr_cover==true){a.objFR=document.createElement("IFRAME");a.objFR.className="dhxwin_resize_fr_cover";a.objFR.style.zIndex=a.obj.style.zIndex;e.wins.vp.insertBefore(a.objFR,a.obj)}a.rx=c.conf.x;a.ry=c.conf.y;a.rw=c.conf.w;a.rh=c.conf.h;a=null};this._rAdjustSizer=function(){var a=e.conf.resize;if(!a.obj){this._rInitSizer()}a.obj.style.width=a.rw+"px";a.obj.style.height=a.rh+"px";if(a.rx!=null){a.obj.style.left=a.rx+"px"}if(a.ry!=null){a.obj.style.top=a.ry+"px"}if(a.objFR!=null){a.objFR.style.width=a.obj.style.width;a.objFR.style.height=a.obj.style.height;if(a.rx!=null){a.objFR.style.left=a.obj.style.left}if(a.ry!=null){a.objFR.style.top=a.obj.style.top}}a=null};if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,false);this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,false)}else{this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown);this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu)}this._unloadResize=function(){if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,false);this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,false)}else{this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown);this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu)}this._initResize=null;this._rOnCellMouseMove=null;this._rOnCellMouseDown=null;this._rOnWinMouseMove=null;this._rOnWinMouseUp=null;this._rOnSelectStart=null;this._rInitSizer=null;this._rAdjustSizer=null;this._unloadResize=null;this.conf.resize=null;e=null}};dhtmlXWindows.prototype.attachContextMenu=function(c){return this._renderContextMenu("icon",null,null,c)};dhtmlXWindows.prototype.getContextMenu=function(){if(this.cm!=null&&this.cm.global!=null){return this.cm.global}return null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(c){return this.wins._renderContextMenu("icon",this._idd,null,c)};dhtmlXWindowsCell.prototype.getContextMenu=function(){if(this.wins.cm!=null&&this.wins.cm.icon[this._idd]!=null){return this.wins.cm.icon[this._idd]}return null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(c){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,c)};dhtmlXWindowsButton.prototype.getContextMenu=function(){if(this.conf.wins.cm==null||this.conf.wins.cm.button[this.conf.winId]==null){return null}if(this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){return this.conf.wins.cm.button[this.conf.winId][this.conf.name]}return null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};dhtmlXWindows.prototype._renderContextMenu=function(n,r,v,w){var u=this;var o=false;if(this.cm==null){this.cm={global:null,icon:{},button:{}};o=true}if(r==null){if(this.cm.global!=null){return}}else{if(n=="icon"){if(this.cm.icon[r]!=null){return}}else{if(n=="button"){if(this.cm.button[r]!=null&&this.cm.button[r][v]!=null){return}}}}if(w==null){w={}}w.parent=null;w.context=true;var s=new dhtmlXMenuObject(w);s.setAutoHideMode(false);s.attachEvent("onShow",function(){this.conf.wins_menu_open=true});s.attachEvent("onHide",function(){this.conf.wins_menu_open=false;u.conf.opened_menu=null});if(r==null){this.cm.global=s}else{if(n=="icon"){this.cm.icon[r]=s}else{if(n=="button"){if(this.cm.button[r]==null){this.cm.button[r]={}}this.cm.button[r][v]=s}}}if(o){this._showContextMenu=function(c,e){if(c.button>=2){return}if(e.mode=="icon"&&e.id!=null&&e.press_type=="mousedown"){var a=this.cm.icon[e.id]||this.cm.global;if(a==null){return}c.cancelBubble=true;var g=this.w[e.id].hdr.firstChild;if(a.conf.wins_menu_open&&this.conf.opened_menu==e.id){a.hideContextMenu()}else{this._hideContextMenu();a.showContextMenu(window.dhx4.absLeft(g),window.dhx4.absTop(g)+g.offsetHeight);this.conf.opened_menu=e.id}a=g=null}if(e.mode=="button"&&e.id!=null&&e.press_type=="mousedown"){if(this.cm.button[e.id]==null||this.cm.button[e.id][e.button_name]==null){return}c.cancelBubble=true;this.conf.button_last=null;var a=this.cm.button[e.id][e.button_name];var h=this.w[e.id].b[e.button_name].button;if(a.conf.wins_menu_open&&this.conf.opened_menu==e.id){a.hideContextMenu()}else{this._hideContextMenu();a.showContextMenu(window.dhx4.absLeft(h),window.dhx4.absTop(h)+h.offsetHeight);this.conf.opened_menu=e.id}a=h=null}};this._hideContextMenu=function(a){if(a!=null){a=a||event;if(a.type=="keydown"&&a.keyCode!=27){return}var c=a.target||a.srcElement;var g=true;while(c!=null&&g==true){if(c.className!=null&&c.className.search(/SubLevelArea_Polygon/)>=0){g=false}else{c=c.parentNode}}}if(g||a==null){if(u.cm.global!=null){u.cm.global.hideContextMenu()}for(var e in u.cm.icon){if(u.cm.icon[e]!=null){u.cm.icon[e].hideContextMenu()}}for(var e in u.cm.button){for(var h in u.cm.button[e]){if(u.cm.button[e][h]!=null){u.cm.button[e][h].hideContextMenu()}}}}};this._detachContextMenu=function(a,c,e){if(this.cm==null){return}if(c==null){if(this.cm.global!=null){this.cm.global.unload();this.cm.global=null}}else{if(a=="icon"){if(this.cm.icon[c]!=null){this.cm.icon[c].unload();this.cm.icon[c]=null}}else{if(a=="button"){if(this.cm.button[c]!=null&&this.cm.button[c][e]!=null){this.cm.button[c][e].unload();this.cm.button[c][e]=null}}}}};this.attachEvent("_winMouseDown",this._showContextMenu);if(typeof(window.addEventListener)=="function"){window.addEventListener("mousedown",this._hideContextMenu,false);window.addEventListener("keydown",this._hideContextMenu,false)}else{document.body.attachEvent("onmousedown",this._hideContextMenu);document.body.attachEvent("onkeydown",this._hideContextMenu)}this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._hideContextMenu,false);window.removeEventListener("keydown",this._hideContextMenu,false)}else{document.body.detachEvent("onmousedown",this._hideContextMenu);document.body.detachEvent("onkeydown",this._hideContextMenu)}u=null}}return s};if(!window.dhtmlx){window.dhtmlx={}}(function(){var x=null;function M(c,a){var e=c.callback;N(false);c.box.parentNode.removeChild(c.box);x=c.box=null;if(e){e(a)}}function J(c){if(x){c=c||event;var a=c.which||event.keyCode;if(dhtmlx.message.keyboard){if(a==13||a==32){M(x,true)}if(a==27){M(x,false)}}if(c.preventDefault){c.preventDefault()}return !(c.cancelBubble=true)}}if(document.attachEvent){document.attachEvent("onkeydown",J)}else{document.addEventListener("keydown",J,true)}function N(c){if(!N.cover){N.cover=document.createElement("DIV");N.cover.onkeydown=J;N.cover.className="dhx_modal_cover";document.body.appendChild(N.cover)}var a=document.body.scrollHeight;N.cover.style.display=c?"inline-block":"none"}function D(c,a){return"<div class='dhtmlx_popup_button' result='"+a+"' ><div>"+c+"</div></div>"}function H(c){if(!L.area){L.area=document.createElement("DIV");L.area.className="dhtmlx_message_area";L.area.style[L.position]="5px";document.body.appendChild(L.area)}L.hide(c.id);var a=document.createElement("DIV");a.innerHTML="<div>"+c.text+"</div>";a.className="dhtmlx-info dhtmlx-"+c.type;a.onclick=function(){if(c){L.hide(c.id)}c=null};if(L.position=="bottom"&&L.area.firstChild){L.area.insertBefore(a,L.area.firstChild)}else{L.area.appendChild(a)}if(c.expire>0){L.timers[c.id]=window.setTimeout(function(){L.hide(c.id)},c.expire)}L.pull[c.id]=a;a=null;return c.id}function C(m,l,e){var g=document.createElement("DIV");g.className=" dhtmlx_modal_box dhtmlx-"+m.type;g.setAttribute("dhxbox",1);var c="";if(m.width){g.style.width=m.width}if(m.height){g.style.height=m.height}if(m.title){c+='<div class="dhtmlx_popup_title">'+m.title+"</div>"}c+='<div class="dhtmlx_popup_text"><span>'+(m.content?"":m.text)+'</span></div><div  class="dhtmlx_popup_controls">';if(l){c+=D(m.ok||"OK",true)}if(e){c+=D(m.cancel||"Cancel",false)}if(m.buttons){for(var a=0;a<m.buttons.length;a++){c+=D(m.buttons[a],a)}}c+="</div>";g.innerHTML=c;if(m.content){var h=m.content;if(typeof h=="string"){h=document.getElementById(h)}if(h.style.display=="none"){h.style.display=""}g.childNodes[m.title?1:0].appendChild(h)}g.onclick=function(n){n=n||event;var o=n.target||n.srcElement;if(!o.className){o=o.parentNode}if(o.className=="dhtmlx_popup_button"){var r=o.getAttribute("result");r=(r=="true")||(r=="false"?false:r);M(m,r)}};m.box=g;if(l||e){x=m}return g}function K(l, h, e){var g=l.tagName?l:C(l,h,e);if(!l.hidden){N(true)}document.body.appendChild(g);var a=l.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-g.offsetWidth)/2));var c=l.header||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-g.offsetHeight)/2));if(l.position=="header.html"){g.style.top="-3px"}else{g.style.top=c+"px"}g.style.left=a+"px";g.onkeydown=J;g.focus();if(l.hidden){dhtmlx.modalbox.hide(g)}return g}function y(a){return K(a,true,false)}function I(a){return K(a,true,true)}function E(a){return K(a)}function A(e, c, a){if(typeof e!="object"){if(typeof c=="function"){a=c;c=""}e={text:e,type:c,callback:a}}return e}function F(c, g, a, e){if(typeof c!="object"){c={text:c,type:g,expire:a,id:e}}c.id=c.id||L.uid();c.expire=c.expire||L.expire;return c}dhtmlx.alert=function(){var a=A.apply(this,arguments);a.type=a.type||"confirm";return y(a)};dhtmlx.confirm=function(){var a=A.apply(this,arguments);a.type=a.type||"alert";return I(a)};dhtmlx.modalbox=function(){var a=A.apply(this,arguments);a.type=a.type||"alert";return E(a)};dhtmlx.modalbox.hide=function(a){while(a&&a.getAttribute&&!a.getAttribute("dhxbox")){a=a.parentNode}if(a){a.parentNode.removeChild(a);N(false);x=null}};var L=dhtmlx.message=function(g, c, h, e){g=F.apply(this,arguments);g.type=g.type||"info";var a=g.type.split("-")[0];switch(a){case"alert":return y(g);case"confirm":return I(g);case"modalbox":return E(g);default:return H(g);break}};L.seed=(new Date()).valueOf();L.uid=function(){return L.seed++};L.expire=4000;L.keyboard=true;L.position="header.html";L.pull={};L.timers={};L.hideAll=function(){for(var a in L.pull){L.hide(a)}};L.hide=function(c){var a=L.pull[c];if(a&&a.parentNode){window.setTimeout(function(){a.parentNode.removeChild(a);a=null},2000);a.className+=" hidden";if(L.timers[c]){window.clearTimeout(L.timers[c])}delete L.pull[c]}}})();if(!window.dhx){dhx={}}dhx.assert=function(g, e){if(!g){dhx.assert_error(e)}};dhx.assert_error=function(message){dhx.log("error",message);if(dhx.message&&typeof message=="string"){dhx.message({type:"debug",text:message,expire:-1})}if(dhx.debug!==false){eval("debugger;")}};dhx.assert_core_ready=function(){if(window.dhx_on_core_ready){dhx_on_core_ready()}};dhx.codebase="./";dhx.name="Core";dhx.clone=function(g){var e=dhx.clone._function;e.prototype=g;return new e()};dhx.clone._function=function(){};dhx.extend=function(m,n,h){dhx.assert(m,"Invalid mixing target");dhx.assert(n,"Invalid mixing source");if(m._dhx_proto_wait){dhx.PowerArray.insertAt.call(m._dhx_proto_wait,n,1);return m}for(var l in n){if(!m[l]||h){m[l]=n[l]}}if(n.defaults){dhx.extend(m.defaults,n.defaults)}if(n.$init){n.$init.call(m)}return m};dhx.copy=function(g){dhx.assert(g,"Invalid mixing target");if(arguments.length>1){var l=arguments[0];g=arguments[1]}else{var l=(dhx.isArray(g)?[]:{})}for(var h in g){if(g[h]&&typeof g[h]=="object"&&!dhx.isDate(g[h])){l[h]=(dhx.isArray(g[h])?[]:{});dhx.copy(l[h],g[h])}else{l[h]=g[h]}}return l};dhx.single=function(h){var g=null;var l=function(a){if(!g){g=new h({})}if(g._reinit){g._reinit.apply(g,arguments)}return g};return l};dhx.protoUI=function(){if(dhx.debug_proto){dhx.log("UI registered: "+arguments[0].name)}var h=arguments;var g=h[0].name;var l=function(e){if(!l){return dhx.ui[g].prototype}var a=l._dhx_proto_wait;if(a){var c=[a[0]];for(var n=1;n<a.length;n++){c[n]=a[n];if(c[n]._dhx_proto_wait){c[n]=c[n].call(dhx,c[n].name)}if(c[n].prototype&&c[n].prototype.name){dhx.ui[c[n].prototype.name]=c[n]}}dhx.ui[g]=dhx.proto.apply(dhx,c);if(l._dhx_type_wait){for(var n=0;n<l._dhx_type_wait.length;n++){dhx.Type(dhx.ui[g],l._dhx_type_wait[n])}}l=a=null}if(this!=dhx){return new dhx.ui[g](e)}else{return dhx.ui[g]}};l._dhx_proto_wait=Array.prototype.slice.call(arguments,0);return dhx.ui[g]=l};dhx.proto=function(){if(dhx.debug_proto){dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]")}var v=arguments;var w=v[0];var A=!!w.$init;var s=[];dhx.assert(w,"Invalid mixing target");for(var x=v.length-1;x>0;x--){dhx.assert(v[x],"Invalid mixing source");if(typeof v[x]=="function"){v[x]=v[x].prototype}if(v[x].$init){s.push(v[x].$init)}if(v[x].defaults){var y=v[x].defaults;if(!w.defaults){w.defaults={}}for(var C in y){if(dhx.isUndefined(w.defaults[C])){w.defaults[C]=y[C]}}}if(v[x].type&&w.type){for(var C in v[x].type){if(!w.type[C]){w.type[C]=v[x].type[C]}}}for(var u in v[x]){if(!w[u]){w[u]=v[x][u]}}}if(A){s.push(w.$init)}w.$init=function(){for(var a=0;a<s.length;a++){s[a].apply(this,arguments)}};var r=function(c){this.$ready=[];dhx.assert(this.$init,"object without init method");this.$init(c);if(this._parseSettings){this._parseSettings(c,this.defaults)}for(var a=0;a<this.$ready.length;a++){this.$ready[a].call(this)}};r.prototype=w;w=v=null;return r};dhx.bind=function(g,e){return function(){return g.apply(e,arguments)}};dhx.require=function(y,x,o){if(typeof y!="string"){var s=y.length||0;var u=x;if(!s){for(var r in y){s++}x=function(){s--;if(s===0){u.apply(this,arguments)}};for(var r in y){dhx.require(r,x,o)}}else{x=function(){if(s){s--;dhx.require(y[y.length-s-1],x,o)}else{return u.apply(this,arguments)}};x()}return}if(dhx._modules[y]!==true){if(y.substr(-4)==".css"){var v=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+y});document.head.appendChild(v);if(x){x.call(o||window)}return}var w=arguments[4];if(!x){dhx.exec(dhx.ajax().sync().get(dhx.codebase+y).responseText);dhx._modules[y]=true}else{if(!dhx._modules[y]){dhx._modules[y]=[[x,o]];dhx.ajax(dhx.codebase+y,function(a){dhx.exec(a);var c=dhx._modules[y];dhx._modules[y]=true;for(var e=0;e<c.length;e++){c[e][0].call(c[e][1]||window,!e)}})}else{dhx._modules[y].push([x,o])}}}};dhx._modules={};dhx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhx.wrap=function(g,e){if(!g){return e}return function(){var a=g.apply(this,arguments);e.apply(this,arguments);return a}};dhx.isUndefined=function(a){return typeof a=="undefined"};dhx.delay=function(l,n,m,h){return window.setTimeout(function(){var a=l.apply(n,(m||[]));l=n=m=null;return a},h||1)};dhx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhx.toNode=function(c){if(typeof c=="string"){return document.getElementById(c)}return c};dhx.toArray=function(c){return dhx.extend((c||[]),dhx.PowerArray,true)};dhx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhx.isArray=function(c){return Array.isArray?Array.isArray(c):(Object.prototype.toString.call(c)==="[object Array]")};dhx.isDate=function(c){return c instanceof Date};dhx._events={};dhx.event=function(n,o,l,r){n=dhx.toNode(n);var m=dhx.uid();if(r){l=dhx.bind(l,r)}dhx._events[m]=[n,o,l];if(n.addEventListener){n.addEventListener(o,l,false)}else{if(n.attachEvent){n.attachEvent("on"+o,l)}}return m};dhx.eventRemove=function(g){if(!g){return}dhx.assert(this._events[g],"Removing non-existing event");var e=dhx._events[g];if(e[0].removeEventListener){e[0].removeEventListener(e[1],e[2],false)}else{if(e[0].detachEvent){e[0].detachEvent("on"+e[1],e[2])}}delete this._events[g]};dhx.log=function(l,h,g){if(arguments.length==1){h=l;l="log"}if(window.console&&console.log){l=l.toLowerCase();if(window.console[l]){window.console[l](h||"unknown error")}else{window.console.log(l+": "+h)}if(g){window.console.log(g)}}};dhx.log_full_time=function(c){dhx._start_time_log=new Date();dhx.log("Timing start ["+c+"]");window.setTimeout(function(){var a=new Date();dhx.log("Timing end ["+c+"]:"+(a.valueOf()-dhx._start_time_log.valueOf())/1000+"s")},1)};dhx.log_time=function(g){var h="_start_time_log"+g;if(!dhx[h]){dhx[h]=new Date();dhx.log("Info","Timing start ["+g+"]")}else{var l=new Date();dhx.log("Info","Timing end ["+g+"]:"+(l.valueOf()-dhx[h].valueOf())/1000+"s");dhx[h]=null}};dhx.debug_code=function(c){c.call(dhx)};dhx.EventSystem={$init:function(){if(!this._evs_events){this._evs_events={};this._evs_handlers={};this._evs_map={}}},blockEvent:function(){this._evs_events._block=true},unblockEvent:function(){this._evs_events._block=false},mapEvent:function(c){dhx.extend(this._evs_map,c,true)},on_setter:function(e){if(e){for(var g in e){if(typeof e[g]=="function"){this.attachEvent(g,e[g])}}}},callEvent:function(o,m){if(this._evs_events._block){return true}o=o.toLowerCase();var n=this._evs_events[o.toLowerCase()];var l=true;if(dhx.debug){dhx.log("info","["+this.name+"] event:"+o,m)}if(n){for(var r=0;r<n.length;r++){if(n[r].apply(this,(m||[]))===false){l=false}}}if(this._evs_map[o]&&!this._evs_map[o].callEvent(o,m)){l=false}return l},attachEvent:function(n,h,l){dhx.assert(h,"Invalid event handler for "+n);n=n.toLowerCase();l=l||dhx.uid();h=dhx.toFunctor(h);var m=this._evs_events[n]||dhx.toArray();m.push(h);this._evs_events[n]=m;this._evs_handlers[l]={f:h,t:n};return l},detachEvent:function(l){if(!this._evs_handlers[l]){return}var n=this._evs_handlers[l].t;var h=this._evs_handlers[l].f;var m=this._evs_events[n];m.remove(h);delete this._evs_handlers[l]},hasEvent:function(c){c=c.toLowerCase();return this._evs_events[c]?true:false}};dhx.extend(dhx,dhx.EventSystem);dhx.PowerArray={removeAt:function(g,e){if(g>=0){this.splice(g,(e||1))}},remove:function(c){this.removeAt(this.find(c))},insertAt:function(l,h){if(!h&&h!==0){this.push(l)}else{var g=this.splice(h,(this.length-h));this[h]=l;this.push.apply(this,g)}},find:function(g){for(var e=0;e<this.length;e++){if(g==this[e]){return e}}return -1},each:function(g,h){for(var l=0;l<this.length;l++){g.call((h||this),this[l])}},map:function(g,h){for(var l=0;l<this.length;l++){this[l]=g.call((h||this),this[l])}return this},filter:function(g,h){for(var l=0;l<this.length;l++){if(!g.call((h||this),this[l])){this.splice(l,1);l--}}return this}};dhx.env={};(function(){if(navigator.userAgent.indexOf("Mobile")!=-1){dhx.env.mobile=true}if(dhx.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1){dhx.env.touch=true}if(navigator.userAgent.indexOf("Opera")!=-1){dhx.env.isOpera=true}else{dhx.env.isIE=!!document.all;dhx.env.isFF=!document.all;dhx.env.isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);dhx.env.isSafari=dhx.env.isWebKit&&(navigator.userAgent.indexOf("Mac")!=-1)}if(navigator.userAgent.toLowerCase().indexOf("android")!=-1){dhx.env.isAndroid=true}dhx.env.transform=false;dhx.env.transition=false;var v={};v.names=["transform","transition"];v.transform=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];v.transition=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];var n=document.createElement("DIV");for(var s=0;s<v.names.length;s++){var u=v[v.names[s]];for(var w=0;w<u.length;w++){if(typeof n.style[u[w]]!="undefined"){dhx.env[v.names[s]]=u[w];break}}}n.style[dhx.env.transform]="translate3d(0,0,0)";dhx.env.translate=(n.style[dhx.env.transform])?"translate3d":"translate";var r="";var o=false;if(dhx.env.isOpera){r="-o-";o="O"}if(dhx.env.isFF){r="-Moz-"}if(dhx.env.isWebKit){r="-webkit-"}if(dhx.env.isIE){r="-ms-"}dhx.env.transformCSSPrefix=r;dhx.env.transformPrefix=o||(dhx.env.transformCSSPrefix.replace(/-/gi,""));dhx.env.transitionEnd=((dhx.env.transformCSSPrefix=="-Moz-")?"transitionend":(dhx.env.transformPrefix+"TransitionEnd"))})();dhx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhx.html={_native_on_selectstart:0,denySelect:function(){if(!dhx._native_on_selectstart){dhx._native_on_selectstart=document.onselectstart}document.onselectstart=dhx.html.stopEvent},allowSelect:function(){if(dhx._native_on_selectstart!==0){document.onselectstart=dhx._native_on_selectstart||null}dhx._native_on_selectstart=0},index:function(g){var e=0;while(g=g.previousSibling){e++}return e},_style_cache:{},createCss:function(m){var l="";for(var n in m){l+=n+":"+m[n]+";"}var h=this._style_cache[l];if(!h){h="s"+dhx.uid();this.addStyle("."+h+"{"+l+"}");this._style_cache[l]=h}return h},addStyle:function(g){var e=document.createElement("style");e.setAttribute("type","text/css");e.setAttribute("media","screen");if(e.styleSheet){e.styleSheet.cssText=g}else{e.appendChild(document.createTextNode(g))}document.getElementsByTagName("head")[0].appendChild(e)},create:function(r,l,o){l=l||{};var n=document.createElement(r);for(var m in l){n.setAttribute(m,l[m])}if(l.style){n.style.cssText=l.style}if(l["class"]){n.className=l["class"]}if(o){n.innerHTML=o}return n},getValue:function(c){c=dhx.toNode(c);if(!c){return""}return dhx.isUndefined(c.value)?c.innerHTML:c.value},remove:function(g){if(g instanceof Array){for(var e=0;e<g.length;e++){this.remove(g[e])}}else{if(g&&g.parentNode){g.parentNode.removeChild(g)}}},insertBefore:function(l,h,g){if(!l){return}if(h&&h.parentNode){h.parentNode.insertBefore(l,h)}else{g.appendChild(l)}},locate:function(n,l){if(n.tagName){var e=n}else{n=n||event;var e=n.target||n.srcElement}while(e){if(e.getAttribute){var m=e.getAttribute(l);if(m){return m}}e=e.parentNode}return null},offset:function(A){if(A.getBoundingClientRect){var w=A.getBoundingClientRect();var v=document.body;var D=document.documentElement;var E=window.pageYOffset||D.scrollTop||v.scrollTop;var y=window.pageXOffset||D.scrollLeft||v.scrollLeft;var x=D.clientTop||v.clientTop||0;var u=D.clientLeft||v.clientLeft||0;var s=w.top+E-x;var C=w.left+y-u;return{y:Math.round(s),x:Math.round(C)}}else{var s=0,C=0;while(A){s=s+parseInt(A.offsetTop,10);C=C+parseInt(A.offsetLeft,10);A=A.offsetParent}return{y:s,x:C}}},posRelative:function(c){c=c||event;if(!dhx.isUndefined(c.offsetX)){return{x:c.offsetX,y:c.offsetY}}else{return{x:c.layerX,y:c.layerY}}},pos:function(e){e=e||event;if(e.pageX||e.pageY){return{x:e.pageX,y:e.pageY}}var g=((dhx.env.isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:e.clientX+g.scrollLeft-g.clientLeft,y:e.clientY+g.scrollTop-g.clientTop}},preventEvent:function(c){if(c&&c.preventDefault){c.preventDefault()}return dhx.html.stopEvent(c)},stopEvent:function(c){(c||event).cancelBubble=true;return false},addCss:function(g,e){g.className+=" "+e},removeCss:function(g,e){g.className=g.className.replace(RegExp(" "+e,"g"),"")}};dhx.ready=function(c){if(this._ready){c.call()}else{this._ready_code.push(c)}};dhx._ready_code=[];(function(){var c=document.getElementsByTagName("SCRIPT");dhx.assert(c.length,"Can't locate codebase");if(c.length){c=(c[c.length-1].getAttribute("src")||"").split("/");c.splice(c.length-1,1);dhx.codebase=c.slice(0,c.length).join("/")+"/"}dhx.event(window,"load",function(){dhx4.callEvent("onReady",[]);dhx.delay(function(){dhx._ready=true;for(var a=0;a<dhx._ready_code.length;a++){dhx._ready_code[a].call()}dhx._ready_code=[]})})})();dhx.locale=dhx.locale||{};dhx.assert_core_ready();dhx.ready(function(){dhx.event(document.body,"click",function(c){dhx4.callEvent("onClick",[c||event])})});(function(){var h={};var l=new RegExp("(\\r\\n|\\n)","g");var g=new RegExp('(\\")',"g");dhx.Template=function(a){if(typeof a=="function"){return a}if(h[a]){return h[a]}a=(a||"").toString();if(a.indexOf("->")!=-1){a=a.split("->");switch(a[0]){case"html":a=dhx.html.getValue(a[1]);break;case"http":a=new dhx.ajax().sync().get(a[1],{uid:dhx.uid()}).responseText;break;default:break}}a=(a||"").toString();a=a.replace(l,"\\n");a=a.replace(g,'\\"');a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');a=a.replace("{obj}",'"+obj+"');a=a.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{h[a]=Function("obj","common",'return "'+a+'";')}catch(c){dhx.assert_error("Invalid template:"+a)}return h[a]};dhx.Template.empty=function(){return""};dhx.Template.bind=function(a){return dhx.bind(dhx.Template(a),this)};dhx.Type=function(r,a){if(r._dhx_proto_wait){if(!r._dhx_type_wait){r._dhx_type_wait=[]}r._dhx_type_wait.push(a);return}if(typeof r=="function"){r=r.prototype}if(!r.types){r.types={"default":r.type};r.type.name="default"}var o=a.name;var c=r.type;if(o){c=r.types[o]=dhx.clone(a.baseType?r.types[a.baseType]:r.type)}for(var e in a){if(e.indexOf("template")===0){c[e]=dhx.Template(a[e])}else{c[e]=a[e]}}return o}})();dhx.Settings={$init:function(){this._settings=this.config={}},define:function(g,e){if(typeof g=="object"){return this._parseSeetingColl(g)}return this._define(g,e)},_define:function(l,g){var h=this[l+"_setter"];return this._settings[l]=h?h.call(this,g,l):g},_parseSeetingColl:function(a){if(a){for(var g in a){this._define(g,a[g])}}},_parseSettings:function(h,g){var l={};if(g){l=dhx.extend(l,g)}if(typeof h=="object"&&!h.tagName){dhx.extend(l,h,true)}this._parseSeetingColl(l)},_mergeSettings:function(g,h){for(var l in h){switch(typeof g[l]){case"object":g[l]=this._mergeSettings((g[l]||{}),h[l]);break;case"undefined":g[l]=h[l];break;default:break}}return g},debug_freid_c_id:true,debug_freid_a_name:true};dhx.ajax=function(h,n,m){if(arguments.length!==0){var l=new dhx.ajax();if(m){l.master=m}return l.get(h,null,n)}if(!this.getXHR){return new dhx.ajax()}return this};dhx.ajax.count=0;dhx.ajax.prototype={master:null,getXHR:function(){if(dhx.env.isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(s,w,a){var y=this.getXHR();if(!dhx.isArray(a)){a=[a]}if(typeof w=="object"){var r=[];for(var v in w){var x=w[v];if(x===null||x===dhx.undefined){x=""}r.push(v+"="+encodeURIComponent(x))}w=r.join("&")}if(w&&this.request==="GET"){s=s+(s.indexOf("?")!=-1?"&":"?")+w;w=null}y.open(this.request,s,!this._sync);if(this.request==="POST"){y.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var u=this;y.onreadystatechange=function(){if(!y.readyState||y.readyState==4){if(dhx.debug_time){dhx.log_full_time("data_loading")}dhx.ajax.count++;if(a&&u){for(var c=0;c<a.length;c++){if(a[c]){var e=(a[c].success||a[c]);if(y.status>=400||(!y.status&&!y.responseText)){e=a[c].error}if(e){e.call((u.master||u),y.responseText,y.responseXML,y)}}}}if(u){u.master=null}a=u=null}};y.send(w||null);return y},get:function(g,h,l){if(arguments.length==2){l=h;h=null}this.request="GET";return this.send(g,h,l)},post:function(g,h,l){this.request="POST";return this.send(g,h,l)},put:function(g,h,l){this.request="PUT";return this.send(g,h,l)},del:function(g,h,l){this.request="DELETE";return this.send(g,h,l)},sync:function(){this._sync=true;return this},bind:function(c){this.master=c;return this}};dhx.send=function(v,w,n,r){var u=dhx.html.create("FORM",{target:(r||"_self"),action:v,method:(n||"POST")},"");for(var o in w){var s=dhx.html.create("INPUT",{type:"hidden",name:o,value:w[o]},"");u.appendChild(s)}u.style.display="none";document.body.appendChild(u);u.submit();document.body.removeChild(u)};dhx.AtomDataLoader={$init:function(c){this.data={};if(c){this._settings.datatype=c.datatype||"json";this.$ready.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(c){if(!this._ready_for_data){return c}this.load(c,this._settings.datatype);return c},data_setter:function(c){if(!this._ready_for_data){return c}this.parse(c,this._settings.datatype);return true},debug_freid_c_datatype:true,debug_freid_c_dataFeed:true,load:function(g,l){if(g.$proxy){g.load(this,typeof l=="string"?l:"json");return}this.callEvent("onXLS",[]);if(typeof l=="string"){this.data.driver=dhx.DataDriver[l];l=arguments[2]}else{if(!this.data.driver){this.data.driver=dhx.DataDriver.json}}var h=[{success:this._onLoad,error:this._onLoadError}];if(l){if(dhx.isArray(l)){h.push.apply(h,l)}else{h.push(l)}}return dhx.ajax(g,h,this)},parse:function(g,e){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[e||"json"];this._onLoad(g,null)},_onLoad:function(n,w,r,v){var s=this.data.driver;var u=s.toObject(n,w);if(u){var o=s.getRecords(u)[0];this.data=(s?s.getDetails(o):n)}else{this._onLoadError(n,w,r)}this.callEvent("onXLE",[])},_onLoadError:function(h,g,l){this.callEvent("onXLE",[]);this.callEvent("onLoadError",arguments);dhx4.callEvent("onLoadError",[h,g,l,this])},_check_data_feed:function(g){if(!this._settings.dataFeed||this._ignore_feed||!g){return true}var e=this._settings.dataFeed;if(typeof e=="function"){return e.call(this,(g.id||g),g)}e=e+(e.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(g.id||g);this.callEvent("onXLS",[]);dhx.ajax(e,function(a,m,n){this._ignore_feed=true;var c=dhx.DataDriver.toObject(a,m);if(c){this.setValues(c.getDetails(c.getRecords()[0]))}else{this._onLoadError(a,m,n)}this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhx.DataDriver={};dhx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){try{eval("dhx.temp="+data)}catch(e){dhx.assert_error(e);return null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var key in data){if(key!="data"){t[key]=data[key]}}data=data.data}return data},getRecords:function(c){if(c&&!dhx.isArray(c)){return[c]}return c},getDetails:function(c){if(typeof c=="string"){return{id:dhx.uid(),value:c}}return c},getInfo:function(g){var e=g.config;if(!e){return{}}return{_size:(e.total_count||0),_from:(e.pos||0),_parent:(e.parent||0),_config:(e.config),_key:(e.dhx_security)}},child:"data"};dhx.DataDriver.html={toObject:function(g){if(typeof g=="string"){var e=null;if(g.indexOf("<")==-1){e=dhx.toNode(g)}if(!e){e=document.createElement("DIV");e.innerHTML=g}return e.getElementsByTagName(this.tag)}return g},getRecords:function(n){var m=[];for(var h=0;h<n.childNodes.length;h++){var l=n.childNodes[h];if(l.nodeType==1){m.push(l)}}return m},getDetails:function(c){return dhx.DataDriver.xml.tagToObject(c)},getInfo:function(c){return{_size:0,_from:0}},tag:"LI"};dhx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhx.temp="+data);return dhx.temp}return data},getRecords:function(c){return c},getDetails:function(h){var g={};for(var l=0;l<h.length;l++){g["data"+l]=h[l]}return g},getInfo:function(c){return{_size:0,_from:0}}};dhx.DataDriver.csv={toObject:function(c){return c},getRecords:function(c){return c.split(this.row)},getDetails:function(h){h=this.stringToArray(h);var g={};for(var l=0;l<h.length;l++){g["data"+l]=h[l]}return g},getInfo:function(c){return{_size:0,_from:0}},stringToArray:function(g){g=g.split(this.cell);for(var e=0;e<g.length;e++){g[e]=g[e].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return g},row:"\n",cell:","};dhx.DataDriver.xml={_isValidXML:function(c){if(!c||!c.documentElement){return null}if(c.getElementsByTagName("parsererror").length){return null}return c},toObject:function(h,g){if(this._isValidXML(l)){return l}if(typeof h=="string"){var l=this.fromString(h.replace(/^[\s]+/,""))}else{l=h}if(this._isValidXML(l)){return l}return null},getRecords:function(c){return this.xpath(c,this.records)},records:"/*/item",child:"item",config:"/*/interceptor",getDetails:function(c){return this.tagToObject(c,{})},getInfo:function(g){var e=this.xpath(g,this.config);if(e.length){e=this.assignTypes(this.tagToObject(e[0],{}))}else{e=null}return{_size:(g.documentElement.getAttribute("total_count")||0),_from:(g.documentElement.getAttribute("pos")||0),_parent:(g.documentElement.getAttribute("parent")||0),_config:e,_key:(g.documentElement.getAttribute("dhx_security")||null)}},xpath:function(x,e){if(window.XPathResult){var y=x;if(x.nodeName.indexOf("document")==-1){x=x.ownerDocument}var u=[];var A=x.evaluate(e,y,null,XPathResult.ANY_TYPE,null);var s=A.iterateNext();while(s){u.push(s);s=A.iterateNext()}return u}else{var v=true;try{if(typeof(x.selectNodes)=="undefined"){v=false}}catch(w){}if(v){return x.selectNodes(e)}else{var C=e.split("/").pop();return x.getElementsByTagName(C)}}},assignTypes:function(l){for(var g in l){var h=l[g];if(typeof h=="object"){this.assignTypes(h)}else{if(typeof h=="string"){if(h===""){continue}if(h=="true"){l[g]=true}else{if(h=="false"){l[g]=false}else{if(h==h*1){l[g]=l[g]*1}}}}}}return l},tagToObject:function(v,w){w=w||{};var s=false;var u=v.attributes;if(u&&u.length){for(var a=0;a<u.length;a++){w[u[a].name]=u[a].value}s=true}var y=v.childNodes;var x={};for(var a=0;a<y.length;a++){if(y[a].nodeType==1){var r=y[a].tagName;if(typeof w[r]!="undefined"){if(!dhx.isArray(w[r])){w[r]=[w[r]]}w[r].push(this.tagToObject(y[a],{}))}else{w[y[a].tagName]=this.tagToObject(y[a],{})}s=true}}if(!s){return this.nodeValue(v)}w.value=w.value||this.nodeValue(v);return w},nodeValue:function(c){if(c.firstChild){return c.firstChild.data}return""},fromString:function(h){try{if(window.DOMParser){return(new DOMParser()).parseFromString(h,"text/xml")}if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");e.loadXML(h);return e}}catch(l){dhx.assert_error(l);return null}dhx.assert_error("Load from xml string is not supported")}};dhx.DataLoader=dhx.proto({$init:function(c){c=c||"";this._ajax_queue=dhx.toArray();this.data=new dhx.DataStore();this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this));this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(h,g,l){if(this._load_count){return this._load_count=[h,g,l]}else{this._load_count=true}this._feed_last=[h,g];this._feed_common.call(this,h,g,l)},_feed_common:function(l,n,m){var h=this.data.url;if(l<0){l=0}this.load(h+((h.indexOf("?")==-1)?"?":"&")+(this.dataCount()?("continue=true&"):"")+"start="+l+"&count="+n,[this._feed_callback,m])},_feed_callback:function(){var e=this._load_count;var g=this._feed_last;this._load_count=false;if(typeof e=="object"&&(e[0]!=g[0]||e[1]!=g[1])){this.data.feed.apply(this,e)}},load:function(g,l){var h=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(h);if(!this.data.url){this.data.url=g}},loadNext:function(o,m,n,r,l){if(this._settings.datathrottle&&!l){if(this._throttle_request){window.clearTimeout(this._throttle_request)}this._throttle_request=dhx.delay(function(){this.loadNext(o,m,n,r,true)},this,0,this._settings.datathrottle);return}if(!m&&m!==0){m=this.dataCount()}this.data.url=this.data.url||r;if(this.callEvent("onDataRequest",[m,o,n,r])&&this.data.url){this.data.feed.call(this,m,o,n)}},_maybe_loading_already:function(l,h){var g=this._feed_last;if(this._load_count&&g){if(g[0]<=h&&(g[1]+g[0]>=l+h)){return true}}return false},_onLoad:function(l,n,h){this._ajax_queue.remove(h);var m=this.data.driver.toObject(l,n);if(m){this.data._parse(m)}else{return this._onLoadError(l,n,h)}this._call_onready();this.callEvent("onXLE",[])},removeMissed_setter:function(c){return this.data._removeMissed=c},scheme_setter:function(c){this.data.scheme(c)},dataFeed_setter:function(c){this.data.attachEvent("onBeforeFilter",dhx.bind(function(a,n){if(this._settings.dataFeed){var o={};if(!a&&!n){return}if(typeof a=="function"){if(!n){return}a(n,o)}else{o={text:n}}this.clearAll();var u=this._settings.dataFeed;var r=[];if(typeof u=="function"){return u.call(this,n,o)}for(var s in o){r.push("dhx_filter["+s+"]="+encodeURIComponent(o[s]))}this.load(u+(u.indexOf("?")<0?"?":"&")+r.join("&"),this._settings.datatype);return false}},this));return c},debug_freid_c_ready:true,debug_freid_c_datathrottle:true,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var c=dhx.toFunctor(this._settings.ready);if(c){dhx.delay(c,this,arguments)}this._ready_was_used=true}},_call_onclearall:function(){for(var c=0;c<this._ajax_queue.length;c++){this._ajax_queue[c].abort()}this._ajax_queue=dhx.toArray()},_call_on_config:function(c){this._parseSeetingColl(c)}},dhx.AtomDataLoader);dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("json");this.pull={};this.order=dhx.toArray();this._marks={}};dhx.DataStore.prototype={setDriver:function(c){dhx.assert(dhx.DataDriver[c],"incorrect DataDriver");this.driver=dhx.DataDriver[c]},_parse:function(m,h){this.callEvent("onParse",[this.driver,m]);if(this._filter_order){this.filter()}var l=this.driver.getInfo(m);if(l._key){dhx.securityKey=l._key}if(l._config){this.callEvent("onServerConfig",[l._config])}var n=this.driver.getRecords(m);this._inner_parse(l,n);if(this._scheme_group&&this._group_processing){this._group_processing(this._scheme_group)}if(this._scheme_sort){this.blockEvent();this.sort(this._scheme_sort);this.unblockEvent()}this.callEvent("onStoreLoad",[this.driver,m]);this.refresh()},_inner_parse:function(D,w){var u=(D._from||0)*1;var x=true;var v=false;if(u===0&&this.order[0]){if(this._removeMissed){v={};for(var A=0;A<this.order.length;A++){v[this.order[A]]=true}}x=false;u=this.order.length}var C=0;for(var A=0;A<w.length;A++){var s=this.driver.getDetails(w[A]);var E=this.id(s);if(!this.pull[E]){this.order[C+u]=E;C++}else{if(x&&this.order[C+u]){C++}}if(this.pull[E]){dhx.extend(this.pull[E],s,true);if(this._scheme_update){this._scheme_update(this.pull[E])}if(v){delete v[E]}}else{this.pull[E]=s;if(this._scheme_init){this._scheme_init(s)}}}if(v){this.blockEvent();for(var y in v){this.remove(y)}this.unblockEvent()}if(!this.order[D._size-1]){this.order[D._size-1]=dhx.undefined}},id:function(c){return c.id||(c.id=dhx.uid())},changeId:function(g,e){if(this.pull[g]){this.pull[e]=this.pull[g]}this.pull[e].id=e;this.order[this.order.find(g)]=e;if(this._filter_order){this._filter_order[this._filter_order.find(g)]=e}if(this._marks[g]){this._marks[e]=this._marks[g];delete this._marks[g]}this.callEvent("onIdChange",[g,e]);if(this._render_change_id){this._render_change_id(g,e)}delete this.pull[g]},item:function(c){return this.pull[c]},update:function(g,e){if(dhx.isUndefined(e)){e=this.item(g)}if(this._scheme_update){this._scheme_update(e)}if(this.callEvent("onBeforeUpdate",[g,e])===false){return false}this.pull[g]=e;this.callEvent("onStoreUpdated",[g,e,"update"])},refresh:function(c){if(this._skip_refresh){return}if(c){this.callEvent("onStoreUpdated",[c,this.pull[c],"paint"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(g,e){this._skip_refresh=true;g.call(e||this);this._skip_refresh=false},getRange:function(a,h){if(a){a=this.indexById(a)}else{a=(this.$min||this.startOffset)||0}if(h){h=this.indexById(h)}else{h=Math.min(((this.$max||this.endOffset)||Infinity),(this.dataCount()-1));if(h<0){h=0}}if(a>h){var l=h;h=a;a=l}return this.getIndexRange(a,h)},getIndexRange:function(l,m){m=Math.min((m||Infinity),this.dataCount()-1);var h=dhx.toArray();for(var n=(l||0);n<=m;n++){h.push(this.item(this.order[n]))}return h},dataCount:function(){return this.order.length},exists:function(c){return !!(this.pull[c])},move:function(h,l){dhx.assert(h>=0&&l>=0,"DataStore::move","Incorrect indexes");var m=this.idByIndex(h);var n=this.item(m);this.order.removeAt(h);this.order.insertAt(m,Math.min(this.order.length,l));this.callEvent("onStoreUpdated",[m,n,"move"])},scheme:function(e){this._scheme={};this._scheme_init=e.$init;this._scheme_update=e.$update;this._scheme_serialize=e.$serialize;this._scheme_group=e.$group;this._scheme_sort=e.$sort;for(var g in e){if(g.substr(0,1)!="$"){this._scheme[g]=e[g]}}},sync:function(l,m,h){if(typeof l=="string"){l=$$("source")}if(typeof m!="function"){h=m;m=null}if(dhx.debug_bind){this.debug_sync_master=l;dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}this._backbone_source=false;if(l.name!="DataStore"){if(l.data&&l.data.name=="DataStore"){l=l.data}else{this._backbone_source=true}}var n=dhx.bind(function(r,e,a){if(this._backbone_source){if(!r){return}if(r.indexOf("change")===0){if(r=="change"){this.pull[e.id]=e.attributes;this.refresh(e.id);return}else{return}}if(r=="reset"){a=e}this.order=[];this.pull={};this._filter_order=null;for(var c=0;c<a.models.length;c++){var g=a.models[c].id;this.order.push(g);this.pull[g]=a.models[c].attributes}}else{this._filter_order=null;this.order=dhx.toArray([].concat(l.order));this.pull=l.pull}if(m){this.silent(m)}if(this._on_sync){this._on_sync()}if(dhx.debug_bind){dhx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}this.callEvent("onSyncApply",[]);if(!h){this.refresh()}else{h=false}},this);if(this._backbone_source){l.bind("all",n)}else{this._sync_events=[l.attachEvent("onStoreUpdated",n),l.attachEvent("onIdChange",dhx.bind(function(c,a){this.changeId(c,a)},this))]}n()},add:function(r,w){if(this._scheme){for(var v in this._scheme){if(dhx.isUndefined(r[v])){r[v]=this._scheme[v]}}}if(this._scheme_init){this._scheme_init(r)}var n=this.id(r);var o=arguments[2]||this.order;var s=o.length;if(dhx.isUndefined(w)||w<0){w=s}if(w>s){dhx.log("Warning","DataStore:add","Index of out of bounds");w=Math.min(o.length,w)}if(this.callEvent("onBeforeAdd",[n,r,w])===false){return false}dhx.assert(!this.exists(n),"Not unique ID");this.pull[n]=r;o.insertAt(n,w);if(this._filter_order){var u=this._filter_order.length;if(!w&&this.order.length){u=0}this._filter_order.insertAt(n,u)}this.callEvent("onAfterAdd",[n,w]);this.callEvent("onStoreUpdated",[n,r,"add"]);return n},remove:function(h){if(dhx.isArray(h)){for(var g=0;g<h.length;g++){this.remove(h[g])}return}if(this.callEvent("onBeforeDelete",[h])===false){return false}dhx.assert(this.exists(h),"Not existing ID in remove command"+h);var l=this.item(h);this.order.remove(h);if(this._filter_order){this._filter_order.remove(h)}delete this.pull[h];if(this._marks[h]){delete this._marks[h]}this.callEvent("onAfterDelete",[h]);this.callEvent("onStoreUpdated",[h,l,"delete"])},clearAll:function(){this.pull={};this.order=dhx.toArray();this._filter_order=this.url=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(c){if(c>=this.order.length||c<0){dhx.log("Warning","DataStore::idByIndex Incorrect welcome")}return this.order[c]},indexById:function(g){var e=this.order.find(g);if(!this.pull[g]){dhx.log("Warning","DataStore::indexById Non-existing ID: "+g)}return e},next:function(g,e){return this.order[this.indexById(g)+(e||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(g,e){return this.order[this.indexById(g)-(e||1)]},sort:function(m,r,l){var o=m;if(typeof m=="function"){o={as:m,dir:r}}else{if(typeof m=="string"){o={by:m.replace(/#/g,""),dir:r,as:l}}}var n=[o.by,o.dir,o.as];if(!this.callEvent("onBeforeSort",n)){return}this._sort_core(o);this.refresh();this.callEvent("onAfterSort",n)},_sort_core:function(g){if(this.order.length){var h=this._sort._create(g);var l=this.getRange(this.first(),this.last());l.sort(h);this.order=l.map(function(a){dhx.assert(a,"Client sorting can't be used with dynamic loading");return this.id(a)},this)}},_filter_reset:function(c){if(this._filter_order&&!c){this.order=this._filter_order;delete this._filter_order}},_filter_core:function(s,o,u){var r=dhx.toArray();for(var n=0;n<this.order.length;n++){var m=this.order[n];if(s(this.item(m),o)){r.push(m)}}if(!u||!this._filter_order){this._filter_order=this.order}this.order=r},filter:function(l,m,h){if(!this.callEvent("onBeforeFilter",[l,m])){return}this._filter_reset(h);if(!this.order.length){return}if(l){var n=l;m=m||"";if(typeof l=="string"){l=l.replace(/#/g,"");if(typeof m=="function"){n=function(a){return m(a[l])}}else{m=m.toString().toLowerCase();n=function(a,c){dhx.assert(a,"Client side filtering can't be used with dynamic loading");return(a[l]||"").toString().toLowerCase().indexOf(c)!=-1}}}this._filter_core(n,m,h,this._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])},each:function(h,l){for(var g=0;g<this.order.length;g++){h.call((l||this),this.item(this.order[g]))}},_methodPush:function(e,g){return function(){return e[g].apply(e,arguments)}},addMark:function(m,n,l,r){var o=this._marks[m]||{};this._marks[m]=o;if(!o[n]){o[n]=r||true;if(l){this.item(m).$css=(this.item(m).$css||"")+" "+n;this.refresh(m)}}return o[n]},removeMark:function(m,n,l){var o=this._marks[m];if(o&&o[n]){delete o[n]}if(l){var r=this.item(m).$css;if(r){this.item(m).$css=r.replace(n,"");this.refresh(m)}}},hasMark:function(h,l){var g=this._marks[h];return(g&&g[l])},provideApi:function(l,n){this.debug_bind_master=l;if(n){this.mapEvent({onbeforesort:l,onaftersort:l,onbeforeadd:l,onafteradd:l,onbeforedelete:l,onafterdelete:l,onbeforeupdate:l})}var m=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"];for(var h=0;h<m.length;h++){l[m[h]]=this._methodPush(this,m[h])}},serialize:function(){var l=this.order;var h=[];for(var n=0;n<l.length;n++){var m=this.pull[l[n]];if(this._scheme_serialize){m=this._scheme_serialize(m);if(m===false){continue}}h.push(m)}return h},_sort:{_create:function(c){return this._dir(c.dir,this._by(c.by,c.as))},_as:{date:function(a,g){a=a-0;g=g-0;return a>g?1:(a<g?-1:0)},"int":function(a,g){a=a*1;g=g*1;return a>g?1:(a<g?-1:0)},string_strict:function(a,g){a=a.toString();g=g.toString();return a>g?1:(a<g?-1:0)},string:function(a,g){if(!g){return 1}if(!a){return -1}a=a.toString().toLowerCase();g=g.toString().toLowerCase();return a>g?1:(a<g?-1:0)}},_by:function(g,e){if(!g){return e}if(typeof e!="function"){e=this._as[e||"string"]}dhx.assert(e,"Invalid sorting method");return function(a,c){return e(a[g],c[g])}},_dir:function(g,e){if(g=="asc"||!g){return e}return function(a,c){return e(a,c)*-1}}}};dhx.BaseBind={debug_freid_ignore:{id:true},bind:function(o,r,s){if(typeof o=="string"){o=dhx.ui.get(o)}if(o._initBindSource){o._initBindSource()}if(this._initBindSource){this._initBindSource()}if(!o.getBindData){dhx.extend(o,dhx.BindSource)}if(!this._bind_ready){var n=this.render;if(this.filter){var u=this._settings.id;this.data._on_sync=function(){o._bind_updated[u]=false}}this.render=function(){if(this._in_bind_processing){return}this._in_bind_processing=true;var a=this.callEvent("onBindRequest");this._in_bind_processing=false;return n.apply(this,((a===false)?arguments:[]))};if(this.getValue||this.getValues){this.save=function(){if(this.validate&&!this.validate()){return}o.setBindData((this.getValue?this.getValue:this.getValues()),this._settings.id)}}this._bind_ready=true}o.addBind(this._settings.id,r,s);if(dhx.debug_bind){dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+o.name+"@"+o._settings.id)}var m=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return o.getBindData(m)});if(!this._settings.dataFeed&&this.loadNext){this.data.attachEvent("onStoreLoad",function(){o._bind_updated[m]=false})}if(this.isVisible(this._settings.id)){this.refresh()}},unbind:function(c){return this._unbind(c)},_unbind:function(h){h.removeBind(this._settings.id);var l=(this._sync_events||(this.data?this.data._sync_events:0));if(l&&h.data){for(var g=0;g<l.length;g++){h.data.detachEvent(l[g])}}}};dhx.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(c){this._do_not_update_binds=true;c.call(this);this._do_not_update_binds=false;this._update_binds()},setBindData:function(l,g){if(g){this._ignore_binds[g]=true}if(dhx.debug_bind){dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+g)}if(this.setValue){this.setValue(l)}else{if(this.setValues){this.setValues(l)}else{var h=this.getCursor();if(h){l=dhx.extend(this.item(h),l,true);this.update(h,l)}}}this.callEvent("onBindUpdate",[l,g]);if(this.save){this.save()}if(g){this._ignore_binds[g]=false}},getBindData:function(g,h){if(this._bind_updated[g]){return false}var l=dhx.ui.get(g);if(l.isVisible(l._settings.id)){this._bind_updated[g]=true;if(dhx.debug_bind){dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+l.name+"@"+l._settings.id)}this._bind_update(l,this._bind_hash[g][0],this._bind_hash[g][1]);if(h&&l.filter){l.refresh()}}},addBind:function(g,h,l){this._bind_hash[g]=[h,l]},removeBind:function(c){delete this._bind_hash[c];delete this._bind_updated[c];delete this._ignore_binds[c]},_bind_specific_rules:function(c){if(c.filter){dhx.extend(this,dhx.CollectionBind)}else{if(c.setValue){dhx.extend(this,dhx.ValueBind)}else{dhx.extend(this,dhx.RecordBind)}}},_update_binds:function(){if(!this._do_not_update_binds){for(var c in this._bind_hash){if(this._ignore_binds[c]){continue}this._bind_updated[c]=false;this.getBindData(c,true)}}},_bind_update_common:function(h,l,g){if(h.setValue){h.setValue(g?g[l]:g)}else{if(!h.filter){if(!g&&h.clear){h.clear()}else{if(h._check_data_feed(g)){h.setValues(dhx.clone(g))}}}else{h.data.silent(function(){this.filter(l,g)})}}h.callEvent("onBindApply",[g,l,this])}};dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return true},$init:function(e){this.data=""||e;var g=(e&&e.id)?e.id:dhx.uid();this._settings={id:g};dhx.ui.views[g]=this},setValue:function(c){this.data=c;this.callEvent("onChange",[c])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return true},$init:function(e){this.data=e||{};var g=(e&&e.id)?e.id:dhx.uid();this._settings={id:g};dhx.ui.views[g]=this},getValues:function(){return this.data},setValues:function(c){this.data=c;this.callEvent("onChange",[c])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings);dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){if(!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed){return false}return true},$init:function(e){this.data.provideApi(this,true);var g=(e&&e.id)?e.id:dhx.uid();this._settings.id=g;dhx.ui.views[g]=this;this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings);dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(m,n,o){var r=this.getValue()||"";if(o){r=o(r)}if(m.setValue){m.setValue(r)}else{if(!m.filter){var l={};l[n]=r;if(m._check_data_feed(r)){m.setValues(l)}}else{m.data.silent(function(){this.filter(n,r)})}}m.callEvent("onBindApply",[r,n,this])}};dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(h,l){var g=this.getValues()||null;this._bind_update_common(h,l,g)}};dhx.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(g){var e=this.getSelected();this.setCursor(e?(e.id||e):null)});this.attachEvent("onAfterCursorChange",this._update_binds);this.data.attachEvent("onStoreUpdated",dhx.bind(function(h,g,l){if(h&&h==this.getCursor()&&l!="paint"){this._update_binds()}},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",dhx.bind(function(g,e){if(this._cursor==g){this._cursor=e}},this))},setCursor:function(c){if(c==this._cursor||(c!==null&&!this.item(c))){return}this.callEvent("onBeforeCursorChange",[this._cursor]);this._cursor=c;this.callEvent("onAfterCursorChange",[c])},getCursor:function(){return this._cursor},_bind_update:function(h,l){var g=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(h,l,g)}};if(!dhx.ui){dhx.ui={}}if(!dhx.ui.views){dhx.ui.views={};dhx.ui.get=function(c){if(c._settings){return c}return dhx.ui.views[c]}}dhtmlXDataStore=function(l){var h=new dhx.DataCollection(l);var g="_dp_init";h[g]=function(a){var c="_methods";a[c]=["dummy","dummy","changeId","dummy"];this.data._old_names={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(r,o,e){if(r&&!a._silent){a.setUpdated(r,true,this._old_names[e])}});c="_getRowData";a[c]=function(u,s){var w=this.obj.data.item(u);var v={id:u};v[this.action_param]=this.obj.getUserData(u);if(w){for(var e in w){v[e]=w[e]}}return v};this.changeId=function(e,n){this.data.changeId(e,n);a._silent=true;this.data.callEvent("onStoreUpdated",[n,this.item(n),"update"]);a._silent=false};c="_clearUpdateFlag";a[c]=function(){};this._userdata={}};h.dummy=function(){};h.setUserData=function(a,e,c){this._userdata[a]=c};h.getUserData=function(a,c){return this._userdata[a]};h.dataFeed=function(a){this.define("dataFeed",a)};dhx.extend(h,dhx.BindSource);return h};if(window.dhtmlXDataView){dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){if(!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed){return false}return true};var c="_settings";this._settings=this._settings||this[c];if(!this._settings.id){this._settings.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this}}if(window.dhtmlXChart){dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){if(!this.data.order.length&&!this.data._filtered_state&&!this._settings.dataFeed){return false}return true};var c="_settings";this._settings=this._settings||this[c];if(!this._settings.id){this._settings.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this}}dhx.BaseBind.unsync=function(c){return dhx.BaseBind._unbind.call(this,c)};dhx.BaseBind.unbind=function(c){return dhx.BaseBind._unbind.call(this,c)};dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};dhx.BaseBind.legacySync=function(e,g){if(this._initBindSource){this._initBindSource()}if(e._initBindSource){e._initBindSource()}this.attachEvent("onAfterEditStop",function(a){this.save(a);return true});this.attachEvent("onDataRequest",function(a,c){for(var l=a;l<a+c;l++){if(!e.data.order[l]){e.loadNext(c,a);return false}}});this.save=function(a){if(!a){a=this.getCursor()}var c=this.item(a);var n=e.item(a);for(var m in c){if(m.indexOf("$")!==0){n[m]=c[m]}}e.refresh(a)};if(e&&e.name=="DataCollection"){return e.data.sync.apply(this.data,arguments)}else{return this.data.sync.apply(this.data,arguments)}};if(window.dhtmlXForm){dhtmlXForm.prototype.bind=function(c){dhx.BaseBind.bind.apply(this,arguments);c.getBindData(this._settings.id)};dhtmlXForm.prototype.unbind=function(c){dhx.BaseBind._unbind.call(this,c)};dhtmlXForm.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this}};dhtmlXForm.prototype._check_data_feed=function(g){if(!this._settings.dataFeed||this._ignore_feed||!g){return true}var e=this._settings.dataFeed;if(typeof e=="function"){return e.call(this,(g.id||g),g)}e=e+(e.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(g.id||g);this.load(e);return false};dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData;dhtmlXForm.prototype.getValues=function(){return this.getFormData(false,true)};dhtmlXForm.prototype.dataFeed=function(c){if(this._settings){this._settings.dataFeed=c}else{this._server_feed=c}};dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(c){return true}}if(window.scheduler){if(!window.Scheduler){window.Scheduler={}}Scheduler.$syncFactory=function(c){c.sync=function(m,a){if(this._initBindSource){this._initBindSource()}if(m._initBindSource){m._initBindSource()}var l="_process_loading";var n=function(h){c.clearAll();var g=m.data.order;var s=m.data.pull;var e=[];for(var u=0;u<g.length;u++){if(a&&a.copy){e[u]=dhx.clone(s[g[u]])}else{e[u]=s[g[u]]}}c[l](e);c.callEvent("onSyncApply",[])};this.save=function(h){if(!h){h=this.getCursor()}var e=this.item(h);var g=m.item(h);if(this.callEvent("onStoreSave",[h,e,g])){dhx.extend(m.item(h),e,true);m.update(h)}};this.item=function(e){return this.getEvent(e)};this._sync_events=[m.data.attachEvent("onStoreUpdated",function(h,g,e){n.call(this)}),m.data.attachEvent("onIdChange",function(e,g){combo.changeOptionId(e,g)})];this.attachEvent("onEventChanged",function(e){this.save(e)});this.attachEvent("onEventAdded",function(e,g){if(!m.data.pull[e]){m.add(g)}});this.attachEvent("onEventDeleted",function(e){if(m.data.pull[e]){m.remove(e)}});n()};c.unsync=function(a){dhx.BaseBind._unbind.call(this,a)};c._initBindSource=function(){if(!this._settings){this._settings={id:dhx.uid()}}}};Scheduler.$syncFactory(window.scheduler)}if(window.dhtmlXCombo){dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXCombo.unbind=function(c){dhx.BaseBind._unbind.call(this,c)};dhtmlXCombo.unsync=function(c){dhx.BaseBind._unbind.call(this,c)};dhtmlXCombo.prototype.dataFeed=function(c){if(this._settings){this._settings.dataFeed=c}else{this._server_feed=c}};dhtmlXCombo.prototype.sync=function(n,l){if(this._initBindSource){this._initBindSource()}if(n._initBindSource){n._initBindSource()}var m=this;var h=function(a){m.clearAll();m.addOption(this.serialize());m.callEvent("onSyncApply",[])};this._sync_events=[n.data.attachEvent("onStoreUpdated",function(a,e,c){h.call(this)}),n.data.attachEvent("onIdChange",function(a,c){m.changeOptionId(a,c)})];h.call(n)};dhtmlXCombo.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(c){c.call(this)},this)};dhx4._eventable(this.data);this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}};dhtmlXCombo.prototype.item=function(c){return this.getOption(c)};dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()};dhtmlXCombo.prototype.isVisible=function(){if(!this.optionsArr.length&&!this._settings.dataFeed){return false}return true};dhtmlXCombo.prototype.refresh=function(){this.render(true)}}if(window.dhtmlXGridObject){dhtmlXGridObject.prototype.bind=function(g,h,l){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXGridObject.prototype.unbind=function(c){dhx.BaseBind._unbind.call(this,c)};dhtmlXGridObject.prototype.unsync=function(c){dhx.BaseBind._unbind.call(this,c)};dhtmlXGridObject.prototype.dataFeed=function(c){if(this._settings){this._settings.dataFeed=c}else{this._server_feed=c}};dhtmlXGridObject.prototype.sync=function(C,r){if(this._initBindSource){this._initBindSource()}if(C._initBindSource){C._initBindSource()}var A=this;var s="_parsing";var y="_parser";var v="_locator";var x="_process_store_row";var u="_get_store_data";this.save=function(a){if(!a){a=this.getCursor()}dhx.extend(C.item(a),this.item(a),true);C.update(a)};var w=function(a){var g=A.getCursor?A.getCursor():null;var c=0;if(A._legacy_ignore_next){c=A._legacy_ignore_next;A._legacy_ignore_next=false}else{A.clearAll()}var h=this.dataCount();if(h){A[s]=true;for(var l=c;l<h;l++){var e=this.order[l];if(!e){continue}if(c&&A.rowsBuffer[l]){continue}A.rowsBuffer[l]={idd:e,data:this.pull[e]};A.rowsBuffer[l][y]=A[x];A.rowsBuffer[l][v]=A[u];A.rowsAr[e]=this.pull[e]}if(!A.rowsBuffer[h-1]){A.rowsBuffer[h-1]=dhtmlx.undefined;A.xmlFileUrl=A.xmlFileUrl||this.url}if(A.pagingOn){A.changePage()}else{if(A._srnd&&A._fillers){A._update_srnd_view()}else{A.render_dataset();A.callEvent("onXLE",[])}}A[s]=false}if(g&&A.setCursor){A.setCursor(A.rowsAr[g]?g:null)}A.callEvent("onSyncApply",[])};this._sync_events=[C.data.attachEvent("onStoreUpdated",function(a,e,c){if(c=="delete"){A.deleteRow(a);A.data.callEvent("onStoreUpdated",[a,e,c])}else{if(c=="update"){A.callEvent("onSyncUpdate",[e,c]);A.update(a,e);A.data.callEvent("onStoreUpdated",[a,e,c])}else{if(c=="add"){A.callEvent("onSyncUpdate",[e,c]);A.add(a,e,this.indexById(a));A.data.callEvent("onStoreUpdated",[a,e,c])}else{w.call(this)}}}}),C.data.attachEvent("onStoreLoad",function(a,c){A.xmlFileUrl=C.data.url;A._legacy_ignore_next=a.getInfo(c)._from}),C.data.attachEvent("onIdChange",function(a,c){A.changeRowId(a,c)})];A.attachEvent("onDynXLS",function(a,c){for(var e=a;e<a+c;e++){if(!C.data.order[e]){C.loadNext(c,a);return false}}A._legacy_ignore_next=a;w.call(C.data)});w.call(C.data);A.attachEvent("onEditCell",function(h,a,e,g,c){if(h==2&&g!=c){this.save(a)}return true});A.attachEvent("onClearAll",function(){var a="_f_rowsBuffer";this[a]=null});if(r&&r.sort){A.attachEvent("onBeforeSorting",function(c,e,g){if(e=="connector"){return false}var a=this.getColumnId(c);C.sort("#"+a+"#",(g=="asc"?"asc":"desc"),(e=="int"?e:"string"));A.setSortImgState(true,c,g);return false})}if(r&&r.filter){A.attachEvent("onFilterStart",function(a,e){var c="_con_f_used";if(A[c]&&A[c].length){return false}C.data.silent(function(){C.filter();for(var h=0;h<a.length;h++){if(e[h]==""){continue}var g=A.getColumnId(a[h]);C.filter("#"+g+"#",e[h],h!=0)}});C.refresh();return false});A.collectValues=function(c){var a=this.getColumnId(c);return(function(e){var h=[];var g={};this.data.each(function(m){var l=m[e];if(!g[l]){g[l]=true;h.push(l)}});h.sort();return h}).call(C,a)}}if(r&&r.select){A.attachEvent("onRowSelect",function(a){C.setCursor(a)})}A.clearAndLoad=function(a){C.clearAll();C.load(a)}};dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(a){a.call(this)},this)};dhx4._eventable(this.data);var e="_cCount";for(var g=0;g<this[e];g++){if(!this.columnIds[g]){this.columnIds[g]="cell"+g}}this.attachEvent("onSelectStateChanged",function(a){this.callEvent("onSelectChange",[a])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(c,a){if(c===2&&this.getCursor){if(a&&a==this.getCursor()){this._update_binds()}}return true});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}};dhtmlXGridObject.prototype.item=function(n){if(n===null){return null}var o=this.getRowById(n);if(!o){return null}var m="_attrs";var r=dhx.copy(o[m]);r.id=n;var s=this.getColumnsNum();for(var u=0;u<s;u++){r[this.columnIds[u]]=this.cells(n,u).getValue()}return r};dhtmlXGridObject.prototype.update=function(n,o){for(var r=0;r<this.columnIds.length;r++){var s=this.columnIds[r];if(!dhx.isUndefined(o[s])){this.cells(n,r).setValue(o[s])}}var u="_attrs";var m=this.getRowById(n)[u];for(var s in o){m[s]=o[s]}this.callEvent("onBindUpdate",[n])};dhtmlXGridObject.prototype.add=function(n,r,v){var o=[];for(var s=0;s<this.columnIds.length;s++){var u=this.columnIds[s];o[s]=dhx.isUndefined(r[u])?"":r[u]}this.addRow(n,o,v);var w="_attrs";this.getRowById(n)[w]=dhx.copy(r)};dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()};dhtmlXGridObject.prototype.isVisible=function(){var c="_f_rowsBuffer";if(!this.rowsBuffer.length&&!this[c]&&!this._settings.dataFeed){return false}return true};dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()};dhtmlXGridObject.prototype.filter=function(n,o){if(this._settings.dataFeed){var r={};if(!n&&!o){return}if(typeof n=="function"){if(!o){return}n(o,r)}else{if(dhx.isUndefined(n)){r=o}else{r[n]=o}}this.clearAll();var m=this._settings.dataFeed;if(typeof m=="function"){return m.call(this,o,r)}var s=[];for(var u in r){s.push("dhx_filter["+u+"]="+encodeURIComponent(r[u]))}this.load(m+(m.indexOf("?")<0?"?":"&")+s.join("&"));return false}if(o===null){return this.filterBy(0,function(){return false})}this.filterBy(0,function(a,c){return n.call(this,c,o)})}}if(window.dhtmlXTreeObject){dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXTreeObject.prototype.unbind=function(c){dhx.BaseBind._unbind.call(this,c)};dhtmlXTreeObject.prototype.dataFeed=function(c){if(this._settings){this._settings.dataFeed=c}else{this._server_feed=c}};dhtmlXTreeObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(c){c.call(this)},this)};dhx4._eventable(this.data);this.attachEvent("onSelect",function(c){this.callEvent("onSelectChange",[c])});this.attachEvent("onEdit",function(e,g){if(e===2){if(g&&g==this.getCursor()){this._update_binds()}}return true})}};dhtmlXTreeObject.prototype.item=function(c){if(c===null){return null}return{id:c,text:this.getItemText(c)}};dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()};dhtmlXTreeObject.prototype.isVisible=function(){return true};dhtmlXTreeObject.prototype.refresh=function(){};dhtmlXTreeObject.prototype.filter=function(n,o){if(this._settings.dataFeed){var r={};if(!n&&!o){return}if(typeof n=="function"){if(!o){return}n(o,r)}else{if(dhx.isUndefined(n)){r=o}else{r[n]=o}}this.deleteChildItems(0);var m=this._settings.dataFeed;if(typeof m=="function"){return m.call(this,[(data.id||data),data])}var s=[];for(var u in r){s.push("dhx_filter["+u+"]="+encodeURIComponent(r[u]))}this.loadXML(m+(m.indexOf("?")<0?"?":"&")+s.join("&"));return false}};dhtmlXTreeObject.prototype.update=function(g,e){if(!dhx.isUndefined(e.text)){this.setItemText(g,e.text)}}}function dataProcessor(c){this.serverProcessor=c;this.action_param="!nativeeditor_status";this.object=null;this.updatedRows=[];this.autoUpdate=true;this.updateMode="cell";this._tMode="GET";this._headers=null;this._payload=null;this.post_delim="_";this._waitMode=0;this._in_progress={};this._invalid={};this.mandatoryFields=[];this.messages=[];this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"};this.enableUTFencoding(true);dhx4._eventable(this);if(this.connector_init){this.setTransactionMode("POST",true);this.serverProcessor+=(this.serverProcessor.indexOf("?")!=-1?"&":"?")+"editing=true"}return this}dataProcessor.prototype={setTransactionMode:function(g,e){if(typeof g=="object"){this._tMode=g.mode||this._tMode;this._headers=this._headers||g.headers;this._payload=this._payload||g.payload}else{this._tMode=g;this._tSend=e}if(this._tMode=="REST"){this._tSend=false;this._endnm=true}},escape:function(c){if(this._utf){return encodeURIComponent(c)}else{return escape(c)}},enableUTFencoding:function(c){this._utf=dhx4.s2b(c)},setDataColumns:function(c){this._columns=(typeof c=="string")?c.split(","):c},getSyncState:function(){return !this.updatedRows.length},enableDataNames:function(c){this._endnm=dhx4.s2b(c)},enablePartialDataSend:function(c){this._changed=dhx4.s2b(c)},setUpdateMode:function(g,e){this.autoUpdate=(g=="cell");this.updateMode=g;this.dnd=e},ignore:function(g,e){this._silent_mode=true;g.call(e||window);this._silent_mode=false},setUpdated:function(n,o,m){if(this._silent_mode){return}var r=this.findRow(n);m=m||"updated";var l=this.obj.getUserData(n,this.action_param);if(l&&m=="updated"){m=l}if(o){this.set_invalid(n,false);this.updatedRows[r]=n;this.obj.setUserData(n,this.action_param,m);if(this._in_progress[n]){this._in_progress[n]="wait"}}else{if(!this.is_invalid(n)){this.updatedRows.splice(r,1);this.obj.setUserData(n,this.action_param,"")}}if(!o){this._clearUpdateFlag(n)}this.markRow(n,o,m);if(o&&this.autoUpdate){this.sendData(n)}},_clearUpdateFlag:function(c){},markRow:function(n,s,o){var r="";var u=this.is_invalid(n);if(u){r=this.styles[u];s=true}if(this.callEvent("onRowMark",[n,s,o,u])){r=this.styles[s?o:"clear"]+r;this.obj[this._methods[0]](n,r);if(u&&u.details){r+=this.styles[u+"_cell"];for(var m=0;m<u.details.length;m++){if(u.details[m]){this.obj[this._methods[1]](n,m,r)}}}}},getState:function(c){return this.obj.getUserData(c,this.action_param)},is_invalid:function(c){return this._invalid[c]},set_invalid:function(h,l,g){if(g){l={value:l,details:g,toString:function(){return this.value.toString()}}}this._invalid[h]=l},checkBeforeUpdate:function(c){return true},sendData:function(c){if(this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2)){return}if(this.obj.editStop){this.obj.editStop()}if(typeof c=="undefined"||this._tSend){return this.sendAllData()}if(this._in_progress[c]){return false}this.messages=[];if(this.getState(c)!=="deleted"){if(!this.checkBeforeUpdate(c)&&this.callEvent("onValidationError",[c,this.messages])){return false}}this._beforeSendData(this._getRowData(c),c)},_beforeSendData:function(e,g){if(!this.callEvent("onBeforeUpdate",[g,this.getState(g),e])){return false}this._sendData(e,g)},serialize:function(n,m){if(typeof n=="string"){return n}if(typeof m!="undefined"){return this.serialize_one(n,"")}else{var l=[];var o=[];for(var r in n){if(n.hasOwnProperty(r)){l.push(this.serialize_one(n[r],r+this.post_delim));o.push(r)}}l.push("ids="+this.escape(o.join(",")));if(dhtmlx.security_key){l.push("dhx_security="+dhtmlx.security_key)}return l.join("&")}},serialize_one:function(l,n){if(typeof l=="string"){return l}var h=[];for(var m in l){if(l.hasOwnProperty(m)){if((m=="id"||m==this.action_param)&&this._tMode=="REST"){continue}h.push(this.escape((n||"")+m)+"="+this.escape(l[m]))}}return h.join("&")},_sendData:function(A,y){if(!A){return}if(!this.callEvent("onBeforeDataSending",y?[y,this.getState(y),A]:[null,null,A])){return false}if(y){this._in_progress[y]=(new Date()).valueOf()}var u=this;var v=function(e){var a=[];if(y){a.push(y)}else{if(A){for(var c in A){a.push(c)}}}return u.afterUpdate(u,e,a)};var E=this.serverProcessor+(this._user?(dhtmlx.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&")):"");if(this._tMode=="GET"){dhx4.ajax.get(E+((E.indexOf("?")!=-1)?"&":"?")+this.serialize(A,y),v)}else{if(this._tMode=="POST"){dhx4.ajax.post(E,this.serialize(A,y),v)}else{if(this._tMode=="REST"){var D=this.getState(y);var C=E.replace(/(\&|\?)editing\=true/,"");var x=C.split("?");if(x[1]){x[1]="?"+x[1]}var w="";var F="post";if(D=="inserted"){w=this.serialize(A,y)}else{if(D=="deleted"){F="DELETE";C=x[0]+y+(x[1]||"")}else{F="PUT";w=this.serialize(A,y);C=x[0]+y+(x[1]||"")}}if(this._payload){for(var H in this._payload){C=C+(C.indexOf("?")===-1?"?":"&")+this.escape(H)+"="+this.escape(this._payload[H])}}dhx4.ajax.query({url:C,method:F,headers:this._headers,data:w,callback:v})}}}this._waitMode++},sendAllData:function(){if(!this.updatedRows.length){return}this.messages=[];var g=true;for(var e=0;e<this.updatedRows.length;e++){if(this.getState(this.updatedRows[e])!=="deleted"){g&=this.checkBeforeUpdate(this.updatedRows[e])}}if(!g&&!this.callEvent("onValidationError",["",this.messages])){return false}if(this._tSend){this._sendData(this._getAllData())}else{for(var e=0;e<this.updatedRows.length;e++){if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e])){continue}this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]);if(this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2)){return}}}}},_getAllData:function(n){var r={};var l=false;for(var o=0;o<this.updatedRows.length;o++){var m=this.updatedRows[o];if(this._in_progress[m]||this.is_invalid(m)){continue}if(!this.callEvent("onBeforeUpdate",[m,this.getState(m),this._getRowData(m)])){continue}r[m]=this._getRowData(m,m+this.post_delim);l=true;this._in_progress[m]=(new Date()).valueOf()}return l?r:null},setVerificator:function(g,e){this.mandatoryFields[g]=e||(function(a){return(a!=="")})},clearVerificator:function(c){this.mandatoryFields[c]=false},findRow:function(g){var e=0;for(e=0;e<this.updatedRows.length;e++){if(g==this.updatedRows[e]){break}}return e},defineAction:function(e,g){if(!this._uActions){this._uActions=[]}this._uActions[e]=g},afterUpdateCallback:function(w,n,r,s){var o=w;var u=(r!="error"&&r!="invalid");if(!u){this.set_invalid(w,r)}if((this._uActions)&&(this._uActions[r])&&(!this._uActions[r](s))){return(delete this._in_progress[o])}if(this._in_progress[o]!="wait"){this.setUpdated(w,false)}var v=w;switch(r){case"inserted":case"insert":if(n!=w){this.obj[this._methods[2]](w,n);w=n}break;case"delete":case"deleted":this.obj.setUserData(w,this.action_param,"true_deleted");this.obj[this._methods[3]](w);delete this._in_progress[o];return this.callEvent("onAfterUpdate",[w,r,n,s]);break}if(this._in_progress[o]!="wait"){if(u){this.obj.setUserData(w,this.action_param,"")}delete this._in_progress[o]}else{delete this._in_progress[o];this.setUpdated(n,true,this.obj.getUserData(w,this.action_param))}this.callEvent("onAfterUpdate",[v,r,n,s])},afterUpdate:function(w,x,F){if(window.JSON){try{var H=JSON.parse(x.xmlDoc.responseText);var C=H.action||this.getState(F)||"updated";var E=H.sid||F[0];var D=H.tid||F[0];w.afterUpdateCallback(E,D,C,H);w.finalizeUpdate();return}catch(e){}}var I=dhx4.ajax.xmltop("data",x.xmlDoc);if(!I||I.tagName=="DIV"){return this.cleanUpdate(F)}var J=dhx4.ajax.xpath("//data/action",I);if(!J.length){return this.cleanUpdate(F)}for(var y=0;y<J.length;y++){var A=J[y];var C=A.getAttribute("type");var E=A.getAttribute("sid");var D=A.getAttribute("tid");w.afterUpdateCallback(E,D,C,A)}w.finalizeUpdate()},cleanUpdate:function(g){if(g){for(var e=0;e<g.length;e++){delete this._in_progress[g[e]]}}},finalizeUpdate:function(){if(this._waitMode){this._waitMode--}if((this.obj.mytype=="tree"||this.obj._h2)&&this.updatedRows.length){this.sendData()}this.callEvent("onAfterUpdateFinish",[]);if(!this.updatedRows.length){this.callEvent("onFullSync",[])}},init:function(c){this.obj=c;if(c._dp_init){c._dp_init(this)}if(this.connector_init){c._dataprocessor=this}},setOnAfterUpdate:function(c){this.attachEvent("onAfterUpdate",c)},enableDebug:function(c){},setOnBeforeUpdateHandler:function(c){this.attachEvent("onBeforeDataSending",c)},setAutoUpdate:function(h,l){h=h||2000;this._user=l||(new Date()).valueOf();this._need_update=false;this._update_busy=false;this.attachEvent("onAfterUpdate",function(n,c,a,e){this.afterAutoUpdate(n,c,a,e)});this.attachEvent("onFullSync",function(){this.fullSync()});var g=this;window.setInterval(function(){g.loadUpdate()},h)},afterAutoUpdate:function(h,m,l,n){if(m=="collision"){this._need_update=true;return false}else{return true}},fullSync:function(){if(this._need_update==true){this._need_update=false;this.loadUpdate()}return true},getUpdates:function(e,g){if(this._update_busy){return false}else{this._update_busy=true}dhx4.ajax.get(e,g)},_v:function(c){if(c.firstChild){return c.firstChild.nodeValue}return""},_a:function(g){var h=[];for(var l=0;l<g.length;l++){h[l]=this._v(g[l])}return h},loadUpdate:function(){var l=this;var g=this.obj.getUserData(0,"version");var h=this.serverProcessor+dhtmlx.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+g].join("&");h=h.replace("editing=true&","");this.getUpdates(h,function(x){var v=dhx4.ajax.xmltop("updates",x.xmlDoc);var c=dhx4.ajax.xpath("//userdata",v);l.obj.setUserData(0,"version",l._v(c[0]));var w=dhx4.ajax.xpath("//update",v);if(w.length){l._silent_mode=true;for(var a=0;a<w.length;a++){var r=w[a].getAttribute("status");var e=w[a].getAttribute("id");var y=w[a].getAttribute("parent");switch(r){case"inserted":l.callEvent("insertCallback",[w[a],e,y]);break;case"updated":l.callEvent("updateCallback",[w[a],e,y]);break;case"deleted":l.callEvent("deleteCallback",[w[a],e,y]);break}}l._silent_mode=false}l._update_busy=false;l=null})}};if(window.dataProcessor&&!dataProcessor.prototype.init_original){dataProcessor.prototype.connector_init=true}dhtmlXGridObject.prototype.i18n.paging={results:"记录数",records:"记录数从",to:" 到 ",page:"页 ",perpage:"行每页",first:"首页",previous:"上一页",found:"暂无记录",next:"下一页",last:"尾页",of:" 至 ",notfound:"暂无记录"};